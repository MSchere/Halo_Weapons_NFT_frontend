(self.webpackChunkHalo_Weapons_NFT_frontend=self.webpackChunkHalo_Weapons_NFT_frontend||[]).push([[179],{1504:(et,ot,pe)=>{"use strict";var Y=pe(5861);const He=(f,r)=>"method"===r.kind&&r.descriptor&&!("value"in r.descriptor)?{...r,finisher(s){s.createProperty(r.key,f)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:r.key,initializer(){"function"==typeof r.initializer&&(this[r.key]=r.initializer.call(this))},finisher(s){s.createProperty(r.key,f)}};function ie(f){return(r,s)=>void 0!==s?void r.constructor.createProperty(s,f):He(f,r)}window;class U{addEventListener(r,s){void 0===this._listeners&&(this._listeners={});const a=this._listeners;void 0===a[r]&&(a[r]=[]),-1===a[r].indexOf(s)&&a[r].push(s)}hasEventListener(r,s){if(void 0===this._listeners)return!1;const a=this._listeners;return void 0!==a[r]&&-1!==a[r].indexOf(s)}removeEventListener(r,s){if(void 0===this._listeners)return;const a=this._listeners[r];if(void 0!==a){const c=a.indexOf(s);-1!==c&&a.splice(c,1)}}dispatchEvent(r){if(void 0===this._listeners)return;const s=this._listeners[r.type];if(void 0!==s){r.target=this;const a=s.slice(0);for(let c=0,h=a.length;c<h;c++)a[c].call(this,r);r.target=null}}}const Se=[];for(let f=0;f<256;f++)Se[f]=(f<16?"0":"")+f.toString(16);let Ge=1234567;const be=Math.PI/180,Ce=180/Math.PI;function Je(){const f=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return(Se[255&f]+Se[f>>8&255]+Se[f>>16&255]+Se[f>>24&255]+"-"+Se[255&r]+Se[r>>8&255]+"-"+Se[r>>16&15|64]+Se[r>>24&255]+"-"+Se[63&s|128]+Se[s>>8&255]+"-"+Se[s>>16&255]+Se[s>>24&255]+Se[255&a]+Se[a>>8&255]+Se[a>>16&255]+Se[a>>24&255]).toLowerCase()}function ye(f,r,s){return Math.max(r,Math.min(s,f))}function De(f,r){return(f%r+r)%r}function Be(f,r,s){return(1-s)*f+s*r}function Ye(f){return 0==(f&f-1)&&0!==f}function ct(f){return Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))}function nt(f){return Math.pow(2,Math.floor(Math.log(f)/Math.LN2))}var ft=Object.freeze({__proto__:null,DEG2RAD:be,RAD2DEG:Ce,generateUUID:Je,clamp:ye,euclideanModulo:De,mapLinear:function(f,r,s,a,c){return a+(f-r)*(c-a)/(s-r)},inverseLerp:function(f,r,s){return f!==r?(s-f)/(r-f):0},lerp:Be,damp:function(f,r,s,a){return Be(f,r,1-Math.exp(-s*a))},pingpong:function(f,r=1){return r-Math.abs(De(f,2*r)-r)},smoothstep:function(f,r,s){return f<=r?0:f>=s?1:(f=(f-r)/(s-r))*f*(3-2*f)},smootherstep:function(f,r,s){return f<=r?0:f>=s?1:(f=(f-r)/(s-r))*f*f*(f*(6*f-15)+10)},randInt:function(f,r){return f+Math.floor(Math.random()*(r-f+1))},randFloat:function(f,r){return f+Math.random()*(r-f)},randFloatSpread:function(f){return f*(.5-Math.random())},seededRandom:function(f){void 0!==f&&(Ge=f);let r=Ge+=1831565813;return r=Math.imul(r^r>>>15,1|r),r^=r+Math.imul(r^r>>>7,61|r),((r^r>>>14)>>>0)/4294967296},degToRad:function(f){return f*be},radToDeg:function(f){return f*Ce},isPowerOfTwo:Ye,ceilPowerOfTwo:ct,floorPowerOfTwo:nt,setQuaternionFromProperEuler:function(f,r,s,a,c){const h=Math.cos,d=Math.sin,m=h(s/2),g=d(s/2),y=h((r+a)/2),b=d((r+a)/2),w=h((r-a)/2),x=d((r-a)/2),E=h((a-r)/2),T=d((a-r)/2);switch(c){case"XYX":f.set(m*b,g*w,g*x,m*y);break;case"YZY":f.set(g*x,m*b,g*w,m*y);break;case"ZXZ":f.set(g*w,g*x,m*b,m*y);break;case"XZX":f.set(m*b,g*T,g*E,m*y);break;case"YXY":f.set(g*E,m*b,g*T,m*y);break;case"ZYZ":f.set(g*T,g*E,m*b,m*y);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}},normalize:function(f,r){switch(r.constructor){case Float32Array:return f;case Uint16Array:return Math.round(65535*f);case Uint8Array:return Math.round(255*f);case Int16Array:return Math.round(32767*f);case Int8Array:return Math.round(127*f);default:throw new Error("Invalid component type.")}},denormalize:function(f,r){switch(r.constructor){case Float32Array:return f;case Uint16Array:return f/65535;case Uint8Array:return f/255;case Int16Array:return Math.max(f/32767,-1);case Int8Array:return Math.max(f/127,-1);default:throw new Error("Invalid component type.")}}});class Me{constructor(r=0,s=0){this.x=r,this.y=s}get width(){return this.x}set width(r){this.x=r}get height(){return this.y}set height(r){this.y=r}set(r,s){return this.x=r,this.y=s,this}setScalar(r){return this.x=r,this.y=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setComponent(r,s){switch(r){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y)}copy(r){return this.x=r.x,this.y=r.y,this}add(r,s){return void 0!==s?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,s)):(this.x+=r.x,this.y+=r.y,this)}addScalar(r){return this.x+=r,this.y+=r,this}addVectors(r,s){return this.x=r.x+s.x,this.y=r.y+s.y,this}addScaledVector(r,s){return this.x+=r.x*s,this.y+=r.y*s,this}sub(r,s){return void 0!==s?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,s)):(this.x-=r.x,this.y-=r.y,this)}subScalar(r){return this.x-=r,this.y-=r,this}subVectors(r,s){return this.x=r.x-s.x,this.y=r.y-s.y,this}multiply(r){return this.x*=r.x,this.y*=r.y,this}multiplyScalar(r){return this.x*=r,this.y*=r,this}divide(r){return this.x/=r.x,this.y/=r.y,this}divideScalar(r){return this.multiplyScalar(1/r)}applyMatrix3(r){const s=this.x,a=this.y,c=r.elements;return this.x=c[0]*s+c[3]*a+c[6],this.y=c[1]*s+c[4]*a+c[7],this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}clamp(r,s){return this.x=Math.max(r.x,Math.min(s.x,this.x)),this.y=Math.max(r.y,Math.min(s.y,this.y)),this}clampScalar(r,s){return this.x=Math.max(r,Math.min(s,this.x)),this.y=Math.max(r,Math.min(s,this.y)),this}clampLength(r,s){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(r,Math.min(s,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(r){return this.x*r.x+this.y*r.y}cross(r){return this.x*r.y-this.y*r.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const s=this.x-r.x,a=this.y-r.y;return s*s+a*a}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,s){return this.x+=(r.x-this.x)*s,this.y+=(r.y-this.y)*s,this}lerpVectors(r,s,a){return this.x=r.x+(s.x-r.x)*a,this.y=r.y+(s.y-r.y)*a,this}equals(r){return r.x===this.x&&r.y===this.y}fromArray(r,s=0){return this.x=r[s],this.y=r[s+1],this}toArray(r=[],s=0){return r[s]=this.x,r[s+1]=this.y,r}fromBufferAttribute(r,s,a){return void 0!==a&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(s),this.y=r.getY(s),this}rotateAround(r,s){const a=Math.cos(s),c=Math.sin(s),h=this.x-r.x,d=this.y-r.y;return this.x=h*a-d*c+r.x,this.y=h*c+d*a+r.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Me.prototype.isVector2=!0;class vt{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(r,s,a,c,h,d,m,g,y){const b=this.elements;return b[0]=r,b[1]=c,b[2]=m,b[3]=s,b[4]=h,b[5]=g,b[6]=a,b[7]=d,b[8]=y,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(r){const s=this.elements,a=r.elements;return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]=a[6],s[7]=a[7],s[8]=a[8],this}extractBasis(r,s,a){return r.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(r){const s=r.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,s){const a=r.elements,c=s.elements,h=this.elements,d=a[0],m=a[3],g=a[6],y=a[1],b=a[4],w=a[7],x=a[2],E=a[5],T=a[8],I=c[0],L=c[3],R=c[6],$=c[1],B=c[4],G=c[7],z=c[2],J=c[5],te=c[8];return h[0]=d*I+m*$+g*z,h[3]=d*L+m*B+g*J,h[6]=d*R+m*G+g*te,h[1]=y*I+b*$+w*z,h[4]=y*L+b*B+w*J,h[7]=y*R+b*G+w*te,h[2]=x*I+E*$+T*z,h[5]=x*L+E*B+T*J,h[8]=x*R+E*G+T*te,this}multiplyScalar(r){const s=this.elements;return s[0]*=r,s[3]*=r,s[6]*=r,s[1]*=r,s[4]*=r,s[7]*=r,s[2]*=r,s[5]*=r,s[8]*=r,this}determinant(){const r=this.elements,s=r[0],a=r[1],c=r[2],h=r[3],d=r[4],m=r[5],g=r[6],y=r[7],b=r[8];return s*d*b-s*m*y-a*h*b+a*m*g+c*h*y-c*d*g}invert(){const r=this.elements,s=r[0],a=r[1],c=r[2],h=r[3],d=r[4],m=r[5],g=r[6],y=r[7],b=r[8],w=b*d-m*y,x=m*g-b*h,E=y*h-d*g,T=s*w+a*x+c*E;if(0===T)return this.set(0,0,0,0,0,0,0,0,0);const I=1/T;return r[0]=w*I,r[1]=(c*y-b*a)*I,r[2]=(m*a-c*d)*I,r[3]=x*I,r[4]=(b*s-c*g)*I,r[5]=(c*h-m*s)*I,r[6]=E*I,r[7]=(a*g-y*s)*I,r[8]=(d*s-a*h)*I,this}transpose(){let r;const s=this.elements;return r=s[1],s[1]=s[3],s[3]=r,r=s[2],s[2]=s[6],s[6]=r,r=s[5],s[5]=s[7],s[7]=r,this}getNormalMatrix(r){return this.setFromMatrix4(r).invert().transpose()}transposeIntoArray(r){const s=this.elements;return r[0]=s[0],r[1]=s[3],r[2]=s[6],r[3]=s[1],r[4]=s[4],r[5]=s[7],r[6]=s[2],r[7]=s[5],r[8]=s[8],this}setUvTransform(r,s,a,c,h,d,m){const g=Math.cos(h),y=Math.sin(h);return this.set(a*g,a*y,-a*(g*d+y*m)+d+r,-c*y,c*g,-c*(-y*d+g*m)+m+s,0,0,1),this}scale(r,s){const a=this.elements;return a[0]*=r,a[3]*=r,a[6]*=r,a[1]*=s,a[4]*=s,a[7]*=s,this}rotate(r){const s=Math.cos(r),a=Math.sin(r),c=this.elements,h=c[0],d=c[3],m=c[6],g=c[1],y=c[4],b=c[7];return c[0]=s*h+a*g,c[3]=s*d+a*y,c[6]=s*m+a*b,c[1]=-a*h+s*g,c[4]=-a*d+s*y,c[7]=-a*m+s*b,this}translate(r,s){const a=this.elements;return a[0]+=r*a[2],a[3]+=r*a[5],a[6]+=r*a[8],a[1]+=s*a[2],a[4]+=s*a[5],a[7]+=s*a[8],this}equals(r){const s=this.elements,a=r.elements;for(let c=0;c<9;c++)if(s[c]!==a[c])return!1;return!0}fromArray(r,s=0){for(let a=0;a<9;a++)this.elements[a]=r[a+s];return this}toArray(r=[],s=0){const a=this.elements;return r[s]=a[0],r[s+1]=a[1],r[s+2]=a[2],r[s+3]=a[3],r[s+4]=a[4],r[s+5]=a[5],r[s+6]=a[6],r[s+7]=a[7],r[s+8]=a[8],r}clone(){return(new this.constructor).fromArray(this.elements)}}function Ht(f){for(let r=f.length-1;r>=0;--r)if(f[r]>65535)return!0;return!1}function Lt(f){return document.createElementNS("http://www.w3.org/1999/xhtml",f)}function ht(f){return f<.04045?.0773993808*f:Math.pow(.9478672986*f+.0521327014,2.4)}function Zt(f){return f<.0031308?12.92*f:1.055*Math.pow(f,.41666)-.055}vt.prototype.isMatrix3=!0;const Un={srgb:{"srgb-linear":ht},"srgb-linear":{srgb:Zt}},yn={legacyMode:!0,get workingColorSpace(){return"srgb-linear"},set workingColorSpace(f){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(f,r,s){if(this.legacyMode||r===s||!r||!s)return f;if(Un[r]&&void 0!==Un[r][s]){const a=Un[r][s];return f.r=a(f.r),f.g=a(f.g),f.b=a(f.b),f}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(f,r){return this.convert(f,this.workingColorSpace,r)},toWorkingColorSpace:function(f,r){return this.convert(f,r,this.workingColorSpace)}},xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cn={r:0,g:0,b:0},Kt={h:0,s:0,l:0},Ae={h:0,s:0,l:0};function W(f,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?f+6*(r-f)*s:s<.5?r:s<2/3?f+6*(r-f)*(2/3-s):f}function S(f,r){return r.r=f.r,r.g=f.g,r.b=f.b,r}class D{constructor(r,s,a){return void 0===s&&void 0===a?this.set(r):this.setRGB(r,s,a)}set(r){return r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r),this}setScalar(r){return this.r=r,this.g=r,this.b=r,this}setHex(r,s="srgb"){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(255&r)/255,yn.toWorkingColorSpace(this,s),this}setRGB(r,s,a,c="srgb-linear"){return this.r=r,this.g=s,this.b=a,yn.toWorkingColorSpace(this,c),this}setHSL(r,s,a,c="srgb-linear"){if(r=De(r,1),s=ye(s,0,1),a=ye(a,0,1),0===s)this.r=this.g=this.b=a;else{const h=a<=.5?a*(1+s):a+s-a*s,d=2*a-h;this.r=W(d,h,r+1/3),this.g=W(d,h,r),this.b=W(d,h,r-1/3)}return yn.toWorkingColorSpace(this,c),this}setStyle(r,s="srgb"){function a(h){void 0!==h&&parseFloat(h)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}let c;if(c=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(r)){let h;const m=c[2];switch(c[1]){case"rgb":case"rgba":if(h=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(255,parseInt(h[1],10))/255,this.g=Math.min(255,parseInt(h[2],10))/255,this.b=Math.min(255,parseInt(h[3],10))/255,yn.toWorkingColorSpace(this,s),a(h[4]),this;if(h=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(100,parseInt(h[1],10))/100,this.g=Math.min(100,parseInt(h[2],10))/100,this.b=Math.min(100,parseInt(h[3],10))/100,yn.toWorkingColorSpace(this,s),a(h[4]),this;break;case"hsl":case"hsla":if(h=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m)){const g=parseFloat(h[1])/360,y=parseInt(h[2],10)/100,b=parseInt(h[3],10)/100;return a(h[4]),this.setHSL(g,y,b,s)}}}else if(c=/^\#([A-Fa-f\d]+)$/.exec(r)){const h=c[1],d=h.length;if(3===d)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,yn.toWorkingColorSpace(this,s),this;if(6===d)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,yn.toWorkingColorSpace(this,s),this}return r&&r.length>0?this.setColorName(r,s):this}setColorName(r,s="srgb"){const a=xr[r.toLowerCase()];return void 0!==a?this.setHex(a,s):console.warn("THREE.Color: Unknown color "+r),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(r){return this.r=r.r,this.g=r.g,this.b=r.b,this}copySRGBToLinear(r){return this.r=ht(r.r),this.g=ht(r.g),this.b=ht(r.b),this}copyLinearToSRGB(r){return this.r=Zt(r.r),this.g=Zt(r.g),this.b=Zt(r.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(r="srgb"){return yn.fromWorkingColorSpace(S(this,cn),r),ye(255*cn.r,0,255)<<16^ye(255*cn.g,0,255)<<8^ye(255*cn.b,0,255)<<0}getHexString(r="srgb"){return("000000"+this.getHex(r).toString(16)).slice(-6)}getHSL(r,s="srgb-linear"){yn.fromWorkingColorSpace(S(this,cn),s);const a=cn.r,c=cn.g,h=cn.b,d=Math.max(a,c,h),m=Math.min(a,c,h);let g,y;const b=(m+d)/2;if(m===d)g=0,y=0;else{const w=d-m;switch(y=b<=.5?w/(d+m):w/(2-d-m),d){case a:g=(c-h)/w+(c<h?6:0);break;case c:g=(h-a)/w+2;break;case h:g=(a-c)/w+4}g/=6}return r.h=g,r.s=y,r.l=b,r}getRGB(r,s="srgb-linear"){return yn.fromWorkingColorSpace(S(this,cn),s),r.r=cn.r,r.g=cn.g,r.b=cn.b,r}getStyle(r="srgb"){return yn.fromWorkingColorSpace(S(this,cn),r),"srgb"!==r?`color(${r} ${cn.r} ${cn.g} ${cn.b})`:`rgb(${255*cn.r|0},${255*cn.g|0},${255*cn.b|0})`}offsetHSL(r,s,a){return this.getHSL(Kt),Kt.h+=r,Kt.s+=s,Kt.l+=a,this.setHSL(Kt.h,Kt.s,Kt.l),this}add(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this}addColors(r,s){return this.r=r.r+s.r,this.g=r.g+s.g,this.b=r.b+s.b,this}addScalar(r){return this.r+=r,this.g+=r,this.b+=r,this}sub(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this}multiply(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this}multiplyScalar(r){return this.r*=r,this.g*=r,this.b*=r,this}lerp(r,s){return this.r+=(r.r-this.r)*s,this.g+=(r.g-this.g)*s,this.b+=(r.b-this.b)*s,this}lerpColors(r,s,a){return this.r=r.r+(s.r-r.r)*a,this.g=r.g+(s.g-r.g)*a,this.b=r.b+(s.b-r.b)*a,this}lerpHSL(r,s){this.getHSL(Kt),r.getHSL(Ae);const a=Be(Kt.h,Ae.h,s),c=Be(Kt.s,Ae.s,s),h=Be(Kt.l,Ae.l,s);return this.setHSL(a,c,h),this}equals(r){return r.r===this.r&&r.g===this.g&&r.b===this.b}fromArray(r,s=0){return this.r=r[s],this.g=r[s+1],this.b=r[s+2],this}toArray(r=[],s=0){return r[s]=this.r,r[s+1]=this.g,r[s+2]=this.b,r}fromBufferAttribute(r,s){return this.r=r.getX(s),this.g=r.getY(s),this.b=r.getZ(s),!0===r.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}let P;D.NAMES=xr,D.prototype.isColor=!0,D.prototype.r=1,D.prototype.g=1,D.prototype.b=1;class O{static getDataURL(r){if(/^data:/i.test(r.src)||typeof HTMLCanvasElement>"u")return r.src;let s;if(r instanceof HTMLCanvasElement)s=r;else{void 0===P&&(P=Lt("canvas")),P.width=r.width,P.height=r.height;const a=P.getContext("2d");r instanceof ImageData?a.putImageData(r,0,0):a.drawImage(r,0,0,r.width,r.height),s=P}return s.width>2048||s.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",r),s.toDataURL("image/jpeg",.6)):s.toDataURL("image/png")}static sRGBToLinear(r){if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap){const s=Lt("canvas");s.width=r.width,s.height=r.height;const a=s.getContext("2d");a.drawImage(r,0,0,r.width,r.height);const c=a.getImageData(0,0,r.width,r.height),h=c.data;for(let d=0;d<h.length;d++)h[d]=255*ht(h[d]/255);return a.putImageData(c,0,0),s}if(r.data){const s=r.data.slice(0);for(let a=0;a<s.length;a++)s[a]=s instanceof Uint8Array||s instanceof Uint8ClampedArray?Math.floor(255*ht(s[a]/255)):ht(s[a]);return{data:s,width:r.width,height:r.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),r}}class j{constructor(r=null){this.uuid=Je(),this.data=r,this.version=0}set needsUpdate(r){!0===r&&this.version++}toJSON(r){const s=void 0===r||"string"==typeof r;if(!s&&void 0!==r.images[this.uuid])return r.images[this.uuid];const a={uuid:this.uuid,url:""},c=this.data;if(null!==c){let h;if(Array.isArray(c)){h=[];for(let d=0,m=c.length;d<m;d++)h.push(ne(c[d].isDataTexture?c[d].image:c[d]))}else h=ne(c);a.url=h}return s||(r.images[this.uuid]=a),a}}function ne(f){return typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&f instanceof ImageBitmap?O.getDataURL(f):f.data?{data:Array.prototype.slice.call(f.data),width:f.width,height:f.height,type:f.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}j.prototype.isSource=!0;let he=0;class q extends U{constructor(r=q.DEFAULT_IMAGE,s=q.DEFAULT_MAPPING,a=1001,c=1001,h=1006,d=1008,m=1023,g=1009,y=1,b=3e3){super(),Object.defineProperty(this,"id",{value:he++}),this.uuid=Je(),this.name="",this.source=new j(r),this.mipmaps=[],this.mapping=s,this.wrapS=a,this.wrapT=c,this.magFilter=h,this.minFilter=d,this.anisotropy=y,this.format=m,this.internalFormat=null,this.type=g,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=b,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(r){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.encoding=r.encoding,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const s=void 0===r||"string"==typeof r;if(!s&&void 0!==r.textures[this.uuid])return r.textures[this.uuid];const a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),s||(r.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(300!==this.mapping)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case 1e3:r.x=r.x-Math.floor(r.x);break;case 1001:r.x=r.x<0?0:1;break;case 1002:r.x=1===Math.abs(Math.floor(r.x)%2)?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(r.y<0||r.y>1)switch(this.wrapT){case 1e3:r.y=r.y-Math.floor(r.y);break;case 1001:r.y=r.y<0?0:1;break;case 1002:r.y=1===Math.abs(Math.floor(r.y)%2)?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){!0===r&&(this.version++,this.source.needsUpdate=!0)}}q.DEFAULT_IMAGE=null,q.DEFAULT_MAPPING=300,q.prototype.isTexture=!0;class k{constructor(r=0,s=0,a=0,c=1){this.x=r,this.y=s,this.z=a,this.w=c}get width(){return this.z}set width(r){this.z=r}get height(){return this.w}set height(r){this.w=r}set(r,s,a,c){return this.x=r,this.y=s,this.z=a,this.w=c,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setW(r){return this.w=r,this}setComponent(r,s){switch(r){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}add(r,s){return void 0!==s?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,s)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}addVectors(r,s){return this.x=r.x+s.x,this.y=r.y+s.y,this.z=r.z+s.z,this.w=r.w+s.w,this}addScaledVector(r,s){return this.x+=r.x*s,this.y+=r.y*s,this.z+=r.z*s,this.w+=r.w*s,this}sub(r,s){return void 0!==s?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,s)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}subVectors(r,s){return this.x=r.x-s.x,this.y=r.y-s.y,this.z=r.z-s.z,this.w=r.w-s.w,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}applyMatrix4(r){const s=this.x,a=this.y,c=this.z,h=this.w,d=r.elements;return this.x=d[0]*s+d[4]*a+d[8]*c+d[12]*h,this.y=d[1]*s+d[5]*a+d[9]*c+d[13]*h,this.z=d[2]*s+d[6]*a+d[10]*c+d[14]*h,this.w=d[3]*s+d[7]*a+d[11]*c+d[15]*h,this}divideScalar(r){return this.multiplyScalar(1/r)}setAxisAngleFromQuaternion(r){this.w=2*Math.acos(r.w);const s=Math.sqrt(1-r.w*r.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/s,this.y=r.y/s,this.z=r.z/s),this}setAxisAngleFromRotationMatrix(r){let s,a,c,h;const g=r.elements,y=g[0],b=g[4],w=g[8],x=g[1],E=g[5],T=g[9],I=g[2],L=g[6],R=g[10];if(Math.abs(b-x)<.01&&Math.abs(w-I)<.01&&Math.abs(T-L)<.01){if(Math.abs(b+x)<.1&&Math.abs(w+I)<.1&&Math.abs(T+L)<.1&&Math.abs(y+E+R-3)<.1)return this.set(1,0,0,0),this;s=Math.PI;const B=(y+1)/2,G=(E+1)/2,z=(R+1)/2,J=(b+x)/4,te=(w+I)/4,le=(T+L)/4;return B>G&&B>z?B<.01?(a=0,c=.707106781,h=.707106781):(a=Math.sqrt(B),c=J/a,h=te/a):G>z?G<.01?(a=.707106781,c=0,h=.707106781):(c=Math.sqrt(G),a=J/c,h=le/c):z<.01?(a=.707106781,c=.707106781,h=0):(h=Math.sqrt(z),a=te/h,c=le/h),this.set(a,c,h,s),this}let $=Math.sqrt((L-T)*(L-T)+(w-I)*(w-I)+(x-b)*(x-b));return Math.abs($)<.001&&($=1),this.x=(L-T)/$,this.y=(w-I)/$,this.z=(x-b)/$,this.w=Math.acos((y+E+R-1)/2),this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}clamp(r,s){return this.x=Math.max(r.x,Math.min(s.x,this.x)),this.y=Math.max(r.y,Math.min(s.y,this.y)),this.z=Math.max(r.z,Math.min(s.z,this.z)),this.w=Math.max(r.w,Math.min(s.w,this.w)),this}clampScalar(r,s){return this.x=Math.max(r,Math.min(s,this.x)),this.y=Math.max(r,Math.min(s,this.y)),this.z=Math.max(r,Math.min(s,this.z)),this.w=Math.max(r,Math.min(s,this.w)),this}clampLength(r,s){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(r,Math.min(s,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,s){return this.x+=(r.x-this.x)*s,this.y+=(r.y-this.y)*s,this.z+=(r.z-this.z)*s,this.w+=(r.w-this.w)*s,this}lerpVectors(r,s,a){return this.x=r.x+(s.x-r.x)*a,this.y=r.y+(s.y-r.y)*a,this.z=r.z+(s.z-r.z)*a,this.w=r.w+(s.w-r.w)*a,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}fromArray(r,s=0){return this.x=r[s],this.y=r[s+1],this.z=r[s+2],this.w=r[s+3],this}toArray(r=[],s=0){return r[s]=this.x,r[s+1]=this.y,r[s+2]=this.z,r[s+3]=this.w,r}fromBufferAttribute(r,s,a){return void 0!==a&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(s),this.y=r.getY(s),this.z=r.getZ(s),this.w=r.getW(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}k.prototype.isVector4=!0;class K extends U{constructor(r,s,a={}){super(),this.width=r,this.height=s,this.depth=1,this.scissor=new k(0,0,r,s),this.scissorTest=!1,this.viewport=new k(0,0,r,s),this.texture=new q({width:r,height:s,depth:1},a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,this.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,this.texture.minFilter=void 0!==a.minFilter?a.minFilter:1006,this.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,this.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,this.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,this.samples=void 0!==a.samples?a.samples:0}setSize(r,s,a=1){this.width===r&&this.height===s&&this.depth===a||(this.width=r,this.height=s,this.depth=a,this.texture.image.width=r,this.texture.image.height=s,this.texture.image.depth=a,this.dispose()),this.viewport.set(0,0,r,s),this.scissor.set(0,0,r,s)}clone(){return(new this.constructor).copy(this)}copy(r){return this.width=r.width,this.height=r.height,this.depth=r.depth,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},r.texture.image),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,null!==r.depthTexture&&(this.depthTexture=r.depthTexture.clone()),this.samples=r.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}K.prototype.isWebGLRenderTarget=!0;class rt extends q{constructor(r=null,s=1,a=1,c=1){super(null),this.image={data:r,width:s,height:a,depth:c},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}rt.prototype.isDataArrayTexture=!0,class extends K{constructor(f,r,s){super(f,r),this.depth=s,this.texture=new rt(null,f,r,s),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class it extends q{constructor(r=null,s=1,a=1,c=1){super(null),this.image={data:r,width:s,height:a,depth:c},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}it.prototype.isData3DTexture=!0,class extends K{constructor(f,r,s){super(f,r),this.depth=s,this.texture=new it(null,f,r,s),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class extends K{constructor(f,r,s,a={}){super(f,r,a);const c=this.texture;this.texture=[];for(let h=0;h<s;h++)this.texture[h]=c.clone(),this.texture[h].isRenderTargetTexture=!0}setSize(f,r,s=1){if(this.width!==f||this.height!==r||this.depth!==s){this.width=f,this.height=r,this.depth=s;for(let a=0,c=this.texture.length;a<c;a++)this.texture[a].image.width=f,this.texture[a].image.height=r,this.texture[a].image.depth=s;this.dispose()}return this.viewport.set(0,0,f,r),this.scissor.set(0,0,f,r),this}copy(f){this.dispose(),this.width=f.width,this.height=f.height,this.depth=f.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=f.depthBuffer,this.stencilBuffer=f.stencilBuffer,this.depthTexture=f.depthTexture,this.texture.length=0;for(let r=0,s=f.texture.length;r<s;r++)this.texture[r]=f.texture[r].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class V{constructor(r=0,s=0,a=0,c=1){this._x=r,this._y=s,this._z=a,this._w=c}static slerp(r,s,a,c){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),a.slerpQuaternions(r,s,c)}static slerpFlat(r,s,a,c,h,d,m){let g=a[c+0],y=a[c+1],b=a[c+2],w=a[c+3];const x=h[d+0],E=h[d+1],T=h[d+2],I=h[d+3];if(0===m)return r[s+0]=g,r[s+1]=y,r[s+2]=b,void(r[s+3]=w);if(1===m)return r[s+0]=x,r[s+1]=E,r[s+2]=T,void(r[s+3]=I);if(w!==I||g!==x||y!==E||b!==T){let L=1-m;const R=g*x+y*E+b*T+w*I,$=R>=0?1:-1,B=1-R*R;if(B>Number.EPSILON){const z=Math.sqrt(B),J=Math.atan2(z,R*$);L=Math.sin(L*J)/z,m=Math.sin(m*J)/z}const G=m*$;if(g=g*L+x*G,y=y*L+E*G,b=b*L+T*G,w=w*L+I*G,L===1-m){const z=1/Math.sqrt(g*g+y*y+b*b+w*w);g*=z,y*=z,b*=z,w*=z}}r[s]=g,r[s+1]=y,r[s+2]=b,r[s+3]=w}static multiplyQuaternionsFlat(r,s,a,c,h,d){const m=a[c],g=a[c+1],y=a[c+2],b=a[c+3],w=h[d],x=h[d+1],E=h[d+2],T=h[d+3];return r[s]=m*T+b*w+g*E-y*x,r[s+1]=g*T+b*x+y*w-m*E,r[s+2]=y*T+b*E+m*x-g*w,r[s+3]=b*T-m*w-g*x-y*E,r}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get w(){return this._w}set w(r){this._w=r,this._onChangeCallback()}set(r,s,a,c){return this._x=r,this._y=s,this._z=a,this._w=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}setFromEuler(r,s){if(!r||!r.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const a=r._x,c=r._y,h=r._z,d=r._order,m=Math.cos,g=Math.sin,y=m(a/2),b=m(c/2),w=m(h/2),x=g(a/2),E=g(c/2),T=g(h/2);switch(d){case"XYZ":this._x=x*b*w+y*E*T,this._y=y*E*w-x*b*T,this._z=y*b*T+x*E*w,this._w=y*b*w-x*E*T;break;case"YXZ":this._x=x*b*w+y*E*T,this._y=y*E*w-x*b*T,this._z=y*b*T-x*E*w,this._w=y*b*w+x*E*T;break;case"ZXY":this._x=x*b*w-y*E*T,this._y=y*E*w+x*b*T,this._z=y*b*T+x*E*w,this._w=y*b*w-x*E*T;break;case"ZYX":this._x=x*b*w-y*E*T,this._y=y*E*w+x*b*T,this._z=y*b*T-x*E*w,this._w=y*b*w+x*E*T;break;case"YZX":this._x=x*b*w+y*E*T,this._y=y*E*w+x*b*T,this._z=y*b*T-x*E*w,this._w=y*b*w-x*E*T;break;case"XZY":this._x=x*b*w-y*E*T,this._y=y*E*w-x*b*T,this._z=y*b*T+x*E*w,this._w=y*b*w+x*E*T;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return!1!==s&&this._onChangeCallback(),this}setFromAxisAngle(r,s){const a=s/2,c=Math.sin(a);return this._x=r.x*c,this._y=r.y*c,this._z=r.z*c,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(r){const s=r.elements,a=s[0],c=s[4],h=s[8],d=s[1],m=s[5],g=s[9],y=s[2],b=s[6],w=s[10],x=a+m+w;if(x>0){const E=.5/Math.sqrt(x+1);this._w=.25/E,this._x=(b-g)*E,this._y=(h-y)*E,this._z=(d-c)*E}else if(a>m&&a>w){const E=2*Math.sqrt(1+a-m-w);this._w=(b-g)/E,this._x=.25*E,this._y=(c+d)/E,this._z=(h+y)/E}else if(m>w){const E=2*Math.sqrt(1+m-a-w);this._w=(h-y)/E,this._x=(c+d)/E,this._y=.25*E,this._z=(g+b)/E}else{const E=2*Math.sqrt(1+w-a-m);this._w=(d-c)/E,this._x=(h+y)/E,this._y=(g+b)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(r,s){let a=r.dot(s)+1;return a<Number.EPSILON?(a=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=a):(this._x=0,this._y=-r.z,this._z=r.y,this._w=a)):(this._x=r.y*s.z-r.z*s.y,this._y=r.z*s.x-r.x*s.z,this._z=r.x*s.y-r.y*s.x,this._w=a),this.normalize()}angleTo(r){return 2*Math.acos(Math.abs(ye(this.dot(r),-1,1)))}rotateTowards(r,s){const a=this.angleTo(r);if(0===a)return this;const c=Math.min(1,s/a);return this.slerp(r,c),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}multiply(r,s){return void 0!==s?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,s)):this.multiplyQuaternions(this,r)}premultiply(r){return this.multiplyQuaternions(r,this)}multiplyQuaternions(r,s){const a=r._x,c=r._y,h=r._z,d=r._w,m=s._x,g=s._y,y=s._z,b=s._w;return this._x=a*b+d*m+c*y-h*g,this._y=c*b+d*g+h*m-a*y,this._z=h*b+d*y+a*g-c*m,this._w=d*b-a*m-c*g-h*y,this._onChangeCallback(),this}slerp(r,s){if(0===s)return this;if(1===s)return this.copy(r);const a=this._x,c=this._y,h=this._z,d=this._w;let m=d*r._w+a*r._x+c*r._y+h*r._z;if(m<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,m=-m):this.copy(r),m>=1)return this._w=d,this._x=a,this._y=c,this._z=h,this;const g=1-m*m;if(g<=Number.EPSILON){const E=1-s;return this._w=E*d+s*this._w,this._x=E*a+s*this._x,this._y=E*c+s*this._y,this._z=E*h+s*this._z,this.normalize(),this._onChangeCallback(),this}const y=Math.sqrt(g),b=Math.atan2(y,m),w=Math.sin((1-s)*b)/y,x=Math.sin(s*b)/y;return this._w=d*w+this._w*x,this._x=a*w+this._x*x,this._y=c*w+this._y*x,this._z=h*w+this._z*x,this._onChangeCallback(),this}slerpQuaternions(r,s,a){return this.copy(r).slerp(s,a)}random(){const r=Math.random(),s=Math.sqrt(1-r),a=Math.sqrt(r),c=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(s*Math.cos(c),a*Math.sin(h),a*Math.cos(h),s*Math.sin(c))}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}fromArray(r,s=0){return this._x=r[s],this._y=r[s+1],this._z=r[s+2],this._w=r[s+3],this._onChangeCallback(),this}toArray(r=[],s=0){return r[s]=this._x,r[s+1]=this._y,r[s+2]=this._z,r[s+3]=this._w,r}fromBufferAttribute(r,s){return this._x=r.getX(s),this._y=r.getY(s),this._z=r.getZ(s),this._w=r.getW(s),this}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}}V.prototype.isQuaternion=!0;class F{constructor(r=0,s=0,a=0){this.x=r,this.y=s,this.z=a}set(r,s,a){return void 0===a&&(a=this.z),this.x=r,this.y=s,this.z=a,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setComponent(r,s){switch(r){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}add(r,s){return void 0!==s?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,s)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this}addVectors(r,s){return this.x=r.x+s.x,this.y=r.y+s.y,this.z=r.z+s.z,this}addScaledVector(r,s){return this.x+=r.x*s,this.y+=r.y*s,this.z+=r.z*s,this}sub(r,s){return void 0!==s?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,s)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this}subVectors(r,s){return this.x=r.x-s.x,this.y=r.y-s.y,this.z=r.z-s.z,this}multiply(r,s){return void 0!==s?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,s)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this}multiplyVectors(r,s){return this.x=r.x*s.x,this.y=r.y*s.y,this.z=r.z*s.z,this}applyEuler(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(qe.setFromEuler(r))}applyAxisAngle(r,s){return this.applyQuaternion(qe.setFromAxisAngle(r,s))}applyMatrix3(r){const s=this.x,a=this.y,c=this.z,h=r.elements;return this.x=h[0]*s+h[3]*a+h[6]*c,this.y=h[1]*s+h[4]*a+h[7]*c,this.z=h[2]*s+h[5]*a+h[8]*c,this}applyNormalMatrix(r){return this.applyMatrix3(r).normalize()}applyMatrix4(r){const s=this.x,a=this.y,c=this.z,h=r.elements,d=1/(h[3]*s+h[7]*a+h[11]*c+h[15]);return this.x=(h[0]*s+h[4]*a+h[8]*c+h[12])*d,this.y=(h[1]*s+h[5]*a+h[9]*c+h[13])*d,this.z=(h[2]*s+h[6]*a+h[10]*c+h[14])*d,this}applyQuaternion(r){const s=this.x,a=this.y,c=this.z,h=r.x,d=r.y,m=r.z,g=r.w,y=g*s+d*c-m*a,b=g*a+m*s-h*c,w=g*c+h*a-d*s,x=-h*s-d*a-m*c;return this.x=y*g+x*-h+b*-m-w*-d,this.y=b*g+x*-d+w*-h-y*-m,this.z=w*g+x*-m+y*-d-b*-h,this}project(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}unproject(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}transformDirection(r){const s=this.x,a=this.y,c=this.z,h=r.elements;return this.x=h[0]*s+h[4]*a+h[8]*c,this.y=h[1]*s+h[5]*a+h[9]*c,this.z=h[2]*s+h[6]*a+h[10]*c,this.normalize()}divide(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}divideScalar(r){return this.multiplyScalar(1/r)}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}clamp(r,s){return this.x=Math.max(r.x,Math.min(s.x,this.x)),this.y=Math.max(r.y,Math.min(s.y,this.y)),this.z=Math.max(r.z,Math.min(s.z,this.z)),this}clampScalar(r,s){return this.x=Math.max(r,Math.min(s,this.x)),this.y=Math.max(r,Math.min(s,this.y)),this.z=Math.max(r,Math.min(s,this.z)),this}clampLength(r,s){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(r,Math.min(s,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,s){return this.x+=(r.x-this.x)*s,this.y+=(r.y-this.y)*s,this.z+=(r.z-this.z)*s,this}lerpVectors(r,s,a){return this.x=r.x+(s.x-r.x)*a,this.y=r.y+(s.y-r.y)*a,this.z=r.z+(s.z-r.z)*a,this}cross(r,s){return void 0!==s?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,s)):this.crossVectors(this,r)}crossVectors(r,s){const a=r.x,c=r.y,h=r.z,d=s.x,m=s.y,g=s.z;return this.x=c*g-h*m,this.y=h*d-a*g,this.z=a*m-c*d,this}projectOnVector(r){const s=r.lengthSq();if(0===s)return this.set(0,0,0);const a=r.dot(this)/s;return this.copy(r).multiplyScalar(a)}projectOnPlane(r){return Le.copy(this).projectOnVector(r),this.sub(Le)}reflect(r){return this.sub(Le.copy(r).multiplyScalar(2*this.dot(r)))}angleTo(r){const s=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===s)return Math.PI/2;const a=this.dot(r)/s;return Math.acos(ye(a,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const s=this.x-r.x,a=this.y-r.y,c=this.z-r.z;return s*s+a*a+c*c}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}setFromSpherical(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}setFromSphericalCoords(r,s,a){const c=Math.sin(s)*r;return this.x=c*Math.sin(a),this.y=Math.cos(s)*r,this.z=c*Math.cos(a),this}setFromCylindrical(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}setFromCylindricalCoords(r,s,a){return this.x=r*Math.sin(s),this.y=a,this.z=r*Math.cos(s),this}setFromMatrixPosition(r){const s=r.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(r){const s=this.setFromMatrixColumn(r,0).length(),a=this.setFromMatrixColumn(r,1).length(),c=this.setFromMatrixColumn(r,2).length();return this.x=s,this.y=a,this.z=c,this}setFromMatrixColumn(r,s){return this.fromArray(r.elements,4*s)}setFromMatrix3Column(r,s){return this.fromArray(r.elements,3*s)}setFromEuler(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}fromArray(r,s=0){return this.x=r[s],this.y=r[s+1],this.z=r[s+2],this}toArray(r=[],s=0){return r[s]=this.x,r[s+1]=this.y,r[s+2]=this.z,r}fromBufferAttribute(r,s,a){return void 0!==a&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(s),this.y=r.getY(s),this.z=r.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const r=2*(Math.random()-.5),s=Math.random()*Math.PI*2,a=Math.sqrt(1-r**2);return this.x=a*Math.cos(s),this.y=a*Math.sin(s),this.z=r,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}F.prototype.isVector3=!0;const Le=new F,qe=new V;class ut{constructor(r=new F(1/0,1/0,1/0),s=new F(-1/0,-1/0,-1/0)){this.min=r,this.max=s}set(r,s){return this.min.copy(r),this.max.copy(s),this}setFromArray(r){let s=1/0,a=1/0,c=1/0,h=-1/0,d=-1/0,m=-1/0;for(let g=0,y=r.length;g<y;g+=3){const b=r[g],w=r[g+1],x=r[g+2];b<s&&(s=b),w<a&&(a=w),x<c&&(c=x),b>h&&(h=b),w>d&&(d=w),x>m&&(m=x)}return this.min.set(s,a,c),this.max.set(h,d,m),this}setFromBufferAttribute(r){let s=1/0,a=1/0,c=1/0,h=-1/0,d=-1/0,m=-1/0;for(let g=0,y=r.count;g<y;g++){const b=r.getX(g),w=r.getY(g),x=r.getZ(g);b<s&&(s=b),w<a&&(a=w),x<c&&(c=x),b>h&&(h=b),w>d&&(d=w),x>m&&(m=x)}return this.min.set(s,a,c),this.max.set(h,d,m),this}setFromPoints(r){this.makeEmpty();for(let s=0,a=r.length;s<a;s++)this.expandByPoint(r[s]);return this}setFromCenterAndSize(r,s){const a=bt.copy(s).multiplyScalar(.5);return this.min.copy(r).sub(a),this.max.copy(r).add(a),this}setFromObject(r,s=!1){return this.makeEmpty(),this.expandByObject(r,s)}clone(){return(new this.constructor).copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}expandByObject(r,s=!1){r.updateWorldMatrix(!1,!1);const a=r.geometry;if(void 0!==a)if(s&&null!=a.attributes&&void 0!==a.attributes.position){const h=a.attributes.position;for(let d=0,m=h.count;d<m;d++)bt.fromBufferAttribute(h,d).applyMatrix4(r.matrixWorld),this.expandByPoint(bt)}else null===a.boundingBox&&a.computeBoundingBox(),Ft.copy(a.boundingBox),Ft.applyMatrix4(r.matrixWorld),this.union(Ft);const c=r.children;for(let h=0,d=c.length;h<d;h++)this.expandByObject(c[h],s);return this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z}getParameter(r,s){return s.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)}intersectsSphere(r){return this.clampPoint(r.center,bt),bt.distanceToSquared(r.center)<=r.radius*r.radius}intersectsPlane(r){let s,a;return r.normal.x>0?(s=r.normal.x*this.min.x,a=r.normal.x*this.max.x):(s=r.normal.x*this.max.x,a=r.normal.x*this.min.x),r.normal.y>0?(s+=r.normal.y*this.min.y,a+=r.normal.y*this.max.y):(s+=r.normal.y*this.max.y,a+=r.normal.y*this.min.y),r.normal.z>0?(s+=r.normal.z*this.min.z,a+=r.normal.z*this.max.z):(s+=r.normal.z*this.max.z,a+=r.normal.z*this.min.z),s<=-r.constant&&a>=-r.constant}intersectsTriangle(r){if(this.isEmpty())return!1;this.getCenter(sr),gr.subVectors(this.max,sr),Jt.subVectors(r.a,sr),Et.subVectors(r.b,sr),Hn.subVectors(r.c,sr),Dn.subVectors(Et,Jt),Gn.subVectors(Hn,Et),Li.subVectors(Jt,Hn);let s=[0,-Dn.z,Dn.y,0,-Gn.z,Gn.y,0,-Li.z,Li.y,Dn.z,0,-Dn.x,Gn.z,0,-Gn.x,Li.z,0,-Li.x,-Dn.y,Dn.x,0,-Gn.y,Gn.x,0,-Li.y,Li.x,0];return!!Ln(s,Jt,Et,Hn,gr)&&(s=[1,0,0,0,1,0,0,0,1],!!Ln(s,Jt,Et,Hn,gr)&&(Xs.crossVectors(Dn,Gn),s=[Xs.x,Xs.y,Xs.z],Ln(s,Jt,Et,Hn,gr)))}clampPoint(r,s){return s.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return bt.copy(r).clamp(this.min,this.max).sub(r).length()}getBoundingSphere(r){return this.getCenter(r.center),r.radius=.5*this.getSize(bt).length(),r}intersect(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}applyMatrix4(r){return this.isEmpty()||(pt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),pt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),pt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),pt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),pt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),pt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),pt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),pt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(pt)),this}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}ut.prototype.isBox3=!0;const pt=[new F,new F,new F,new F,new F,new F,new F,new F],bt=new F,Ft=new ut,Jt=new F,Et=new F,Hn=new F,Dn=new F,Gn=new F,Li=new F,sr=new F,gr=new F,Xs=new F,Zn=new F;function Ln(f,r,s,a,c){for(let h=0,d=f.length-3;h<=d;h+=3){Zn.fromArray(f,h);const m=c.x*Math.abs(Zn.x)+c.y*Math.abs(Zn.y)+c.z*Math.abs(Zn.z),g=r.dot(Zn),y=s.dot(Zn),b=a.dot(Zn);if(Math.max(-Math.max(g,y,b),Math.min(g,y,b))>m)return!1}return!0}const Ks=new ut,Mr=new F,cr=new F,Aa=new F;class Jn{constructor(r=new F,s=-1){this.center=r,this.radius=s}set(r,s){return this.center.copy(r),this.radius=s,this}setFromPoints(r,s){const a=this.center;void 0!==s?a.copy(s):Ks.setFromPoints(r).getCenter(a);let c=0;for(let h=0,d=r.length;h<d;h++)c=Math.max(c,a.distanceToSquared(r[h]));return this.radius=Math.sqrt(c),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const s=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=s*s}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,s){const a=this.center.distanceToSquared(r);return s.copy(r),a>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){Aa.subVectors(r,this.center);const s=Aa.lengthSq();if(s>this.radius*this.radius){const a=Math.sqrt(s),c=.5*(a-this.radius);this.center.add(Aa.multiplyScalar(c/a)),this.radius+=c}return this}union(r){return!0===this.center.equals(r.center)?cr.set(0,0,1).multiplyScalar(r.radius):cr.subVectors(r.center,this.center).normalize().multiplyScalar(r.radius),this.expandByPoint(Mr.copy(r.center).add(cr)),this.expandByPoint(Mr.copy(r.center).sub(cr)),this}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const or=new F,Ta=new F,Dr=new F,ur=new F,Da=new F,vr=new F,Er=new F;class ps{constructor(r=new F,s=new F(0,0,-1)){this.origin=r,this.direction=s}set(r,s){return this.origin.copy(r),this.direction.copy(s),this}copy(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this}at(r,s){return s.copy(this.direction).multiplyScalar(r).add(this.origin)}lookAt(r){return this.direction.copy(r).sub(this.origin).normalize(),this}recast(r){return this.origin.copy(this.at(r,or)),this}closestPointToPoint(r,s){s.subVectors(r,this.origin);const a=s.dot(this.direction);return a<0?s.copy(this.origin):s.copy(this.direction).multiplyScalar(a).add(this.origin)}distanceToPoint(r){return Math.sqrt(this.distanceSqToPoint(r))}distanceSqToPoint(r){const s=or.subVectors(r,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(r):(or.copy(this.direction).multiplyScalar(s).add(this.origin),or.distanceToSquared(r))}distanceSqToSegment(r,s,a,c){Ta.copy(r).add(s).multiplyScalar(.5),Dr.copy(s).sub(r).normalize(),ur.copy(this.origin).sub(Ta);const h=.5*r.distanceTo(s),d=-this.direction.dot(Dr),m=ur.dot(this.direction),g=-ur.dot(Dr),y=ur.lengthSq(),b=Math.abs(1-d*d);let w,x,E,T;if(b>0)if(w=d*g-m,x=d*m-g,T=h*b,w>=0)if(x>=-T)if(x<=T){const I=1/b;w*=I,x*=I,E=w*(w+d*x+2*m)+x*(d*w+x+2*g)+y}else x=h,w=Math.max(0,-(d*x+m)),E=-w*w+x*(x+2*g)+y;else x=-h,w=Math.max(0,-(d*x+m)),E=-w*w+x*(x+2*g)+y;else x<=-T?(w=Math.max(0,-(-d*h+m)),x=w>0?-h:Math.min(Math.max(-h,-g),h),E=-w*w+x*(x+2*g)+y):x<=T?(w=0,x=Math.min(Math.max(-h,-g),h),E=x*(x+2*g)+y):(w=Math.max(0,-(d*h+m)),x=w>0?h:Math.min(Math.max(-h,-g),h),E=-w*w+x*(x+2*g)+y);else x=d>0?-h:h,w=Math.max(0,-(d*x+m)),E=-w*w+x*(x+2*g)+y;return a&&a.copy(this.direction).multiplyScalar(w).add(this.origin),c&&c.copy(Dr).multiplyScalar(x).add(Ta),E}intersectSphere(r,s){or.subVectors(r.center,this.origin);const a=or.dot(this.direction),c=or.dot(or)-a*a,h=r.radius*r.radius;if(c>h)return null;const d=Math.sqrt(h-c),m=a-d,g=a+d;return m<0&&g<0?null:this.at(m<0?g:m,s)}intersectsSphere(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius}distanceToPlane(r){const s=r.normal.dot(this.direction);if(0===s)return 0===r.distanceToPoint(this.origin)?0:null;const a=-(this.origin.dot(r.normal)+r.constant)/s;return a>=0?a:null}intersectPlane(r,s){const a=this.distanceToPlane(r);return null===a?null:this.at(a,s)}intersectsPlane(r){const s=r.distanceToPoint(this.origin);return 0===s||r.normal.dot(this.direction)*s<0}intersectBox(r,s){let a,c,h,d,m,g;const y=1/this.direction.x,b=1/this.direction.y,w=1/this.direction.z,x=this.origin;return y>=0?(a=(r.min.x-x.x)*y,c=(r.max.x-x.x)*y):(a=(r.max.x-x.x)*y,c=(r.min.x-x.x)*y),b>=0?(h=(r.min.y-x.y)*b,d=(r.max.y-x.y)*b):(h=(r.max.y-x.y)*b,d=(r.min.y-x.y)*b),a>d||h>c?null:((h>a||a!=a)&&(a=h),(d<c||c!=c)&&(c=d),w>=0?(m=(r.min.z-x.z)*w,g=(r.max.z-x.z)*w):(m=(r.max.z-x.z)*w,g=(r.min.z-x.z)*w),a>g||m>c?null:((m>a||a!=a)&&(a=m),(g<c||c!=c)&&(c=g),c<0?null:this.at(a>=0?a:c,s)))}intersectsBox(r){return null!==this.intersectBox(r,or)}intersectTriangle(r,s,a,c,h){Da.subVectors(s,r),vr.subVectors(a,r),Er.crossVectors(Da,vr);let d,m=this.direction.dot(Er);if(m>0){if(c)return null;d=1}else{if(!(m<0))return null;d=-1,m=-m}ur.subVectors(this.origin,r);const g=d*this.direction.dot(vr.crossVectors(ur,vr));if(g<0)return null;const y=d*this.direction.dot(Da.cross(ur));if(y<0||g+y>m)return null;const b=-d*ur.dot(Er);return b<0?null:this.at(b/m,h)}applyMatrix4(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this}equals(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class mt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(r,s,a,c,h,d,m,g,y,b,w,x,E,T,I,L){const R=this.elements;return R[0]=r,R[4]=s,R[8]=a,R[12]=c,R[1]=h,R[5]=d,R[9]=m,R[13]=g,R[2]=y,R[6]=b,R[10]=w,R[14]=x,R[3]=E,R[7]=T,R[11]=I,R[15]=L,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new mt).fromArray(this.elements)}copy(r){const s=this.elements,a=r.elements;return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]=a[6],s[7]=a[7],s[8]=a[8],s[9]=a[9],s[10]=a[10],s[11]=a[11],s[12]=a[12],s[13]=a[13],s[14]=a[14],s[15]=a[15],this}copyPosition(r){const s=this.elements,a=r.elements;return s[12]=a[12],s[13]=a[13],s[14]=a[14],this}setFromMatrix3(r){const s=r.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(r,s,a){return r.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(r,s,a){return this.set(r.x,s.x,a.x,0,r.y,s.y,a.y,0,r.z,s.z,a.z,0,0,0,0,1),this}extractRotation(r){const s=this.elements,a=r.elements,c=1/hr.setFromMatrixColumn(r,0).length(),h=1/hr.setFromMatrixColumn(r,1).length(),d=1/hr.setFromMatrixColumn(r,2).length();return s[0]=a[0]*c,s[1]=a[1]*c,s[2]=a[2]*c,s[3]=0,s[4]=a[4]*h,s[5]=a[5]*h,s[6]=a[6]*h,s[7]=0,s[8]=a[8]*d,s[9]=a[9]*d,s[10]=a[10]*d,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(r){r&&r.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const s=this.elements,a=r.x,c=r.y,h=r.z,d=Math.cos(a),m=Math.sin(a),g=Math.cos(c),y=Math.sin(c),b=Math.cos(h),w=Math.sin(h);if("XYZ"===r.order){const x=d*b,E=d*w,T=m*b,I=m*w;s[0]=g*b,s[4]=-g*w,s[8]=y,s[1]=E+T*y,s[5]=x-I*y,s[9]=-m*g,s[2]=I-x*y,s[6]=T+E*y,s[10]=d*g}else if("YXZ"===r.order){const x=g*b,E=g*w,T=y*b,I=y*w;s[0]=x+I*m,s[4]=T*m-E,s[8]=d*y,s[1]=d*w,s[5]=d*b,s[9]=-m,s[2]=E*m-T,s[6]=I+x*m,s[10]=d*g}else if("ZXY"===r.order){const x=g*b,E=g*w,T=y*b,I=y*w;s[0]=x-I*m,s[4]=-d*w,s[8]=T+E*m,s[1]=E+T*m,s[5]=d*b,s[9]=I-x*m,s[2]=-d*y,s[6]=m,s[10]=d*g}else if("ZYX"===r.order){const x=d*b,E=d*w,T=m*b,I=m*w;s[0]=g*b,s[4]=T*y-E,s[8]=x*y+I,s[1]=g*w,s[5]=I*y+x,s[9]=E*y-T,s[2]=-y,s[6]=m*g,s[10]=d*g}else if("YZX"===r.order){const x=d*g,E=d*y,T=m*g,I=m*y;s[0]=g*b,s[4]=I-x*w,s[8]=T*w+E,s[1]=w,s[5]=d*b,s[9]=-m*b,s[2]=-y*b,s[6]=E*w+T,s[10]=x-I*w}else if("XZY"===r.order){const x=d*g,E=d*y,T=m*g,I=m*y;s[0]=g*b,s[4]=-w,s[8]=y*b,s[1]=x*w+I,s[5]=d*b,s[9]=E*w-T,s[2]=T*w-E,s[6]=m*b,s[10]=I*w+x}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(r){return this.compose(Fr,r,Br)}lookAt(r,s,a){const c=this.elements;return Qt.subVectors(r,s),0===Qt.lengthSq()&&(Qt.z=1),Qt.normalize(),is.crossVectors(a,Qt),0===is.lengthSq()&&(1===Math.abs(a.z)?Qt.x+=1e-4:Qt.z+=1e-4,Qt.normalize(),is.crossVectors(a,Qt)),is.normalize(),_r.crossVectors(Qt,is),c[0]=is.x,c[4]=_r.x,c[8]=Qt.x,c[1]=is.y,c[5]=_r.y,c[9]=Qt.y,c[2]=is.z,c[6]=_r.z,c[10]=Qt.z,this}multiply(r,s){return void 0!==s?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,s)):this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,s){const a=r.elements,c=s.elements,h=this.elements,d=a[0],m=a[4],g=a[8],y=a[12],b=a[1],w=a[5],x=a[9],E=a[13],T=a[2],I=a[6],L=a[10],R=a[14],$=a[3],B=a[7],G=a[11],z=a[15],J=c[0],te=c[4],le=c[8],oe=c[12],de=c[1],we=c[5],ke=c[9],je=c[13],me=c[2],Ve=c[6],Ne=c[10],tt=c[14],We=c[3],ze=c[7],Oe=c[11],Ct=c[15];return h[0]=d*J+m*de+g*me+y*We,h[4]=d*te+m*we+g*Ve+y*ze,h[8]=d*le+m*ke+g*Ne+y*Oe,h[12]=d*oe+m*je+g*tt+y*Ct,h[1]=b*J+w*de+x*me+E*We,h[5]=b*te+w*we+x*Ve+E*ze,h[9]=b*le+w*ke+x*Ne+E*Oe,h[13]=b*oe+w*je+x*tt+E*Ct,h[2]=T*J+I*de+L*me+R*We,h[6]=T*te+I*we+L*Ve+R*ze,h[10]=T*le+I*ke+L*Ne+R*Oe,h[14]=T*oe+I*je+L*tt+R*Ct,h[3]=$*J+B*de+G*me+z*We,h[7]=$*te+B*we+G*Ve+z*ze,h[11]=$*le+B*ke+G*Ne+z*Oe,h[15]=$*oe+B*je+G*tt+z*Ct,this}multiplyScalar(r){const s=this.elements;return s[0]*=r,s[4]*=r,s[8]*=r,s[12]*=r,s[1]*=r,s[5]*=r,s[9]*=r,s[13]*=r,s[2]*=r,s[6]*=r,s[10]*=r,s[14]*=r,s[3]*=r,s[7]*=r,s[11]*=r,s[15]*=r,this}determinant(){const r=this.elements,s=r[0],a=r[4],c=r[8],h=r[12],d=r[1],m=r[5],g=r[9],y=r[13],b=r[2],w=r[6],x=r[10],E=r[14];return r[3]*(+h*g*w-c*y*w-h*m*x+a*y*x+c*m*E-a*g*E)+r[7]*(+s*g*E-s*y*x+h*d*x-c*d*E+c*y*b-h*g*b)+r[11]*(+s*y*w-s*m*E-h*d*w+a*d*E+h*m*b-a*y*b)+r[15]*(-c*m*b-s*g*w+s*m*x+c*d*w-a*d*x+a*g*b)}transpose(){const r=this.elements;let s;return s=r[1],r[1]=r[4],r[4]=s,s=r[2],r[2]=r[8],r[8]=s,s=r[6],r[6]=r[9],r[9]=s,s=r[3],r[3]=r[12],r[12]=s,s=r[7],r[7]=r[13],r[13]=s,s=r[11],r[11]=r[14],r[14]=s,this}setPosition(r,s,a){const c=this.elements;return r.isVector3?(c[12]=r.x,c[13]=r.y,c[14]=r.z):(c[12]=r,c[13]=s,c[14]=a),this}invert(){const r=this.elements,s=r[0],a=r[1],c=r[2],h=r[3],d=r[4],m=r[5],g=r[6],y=r[7],b=r[8],w=r[9],x=r[10],E=r[11],T=r[12],I=r[13],L=r[14],R=r[15],$=w*L*y-I*x*y+I*g*E-m*L*E-w*g*R+m*x*R,B=T*x*y-b*L*y-T*g*E+d*L*E+b*g*R-d*x*R,G=b*I*y-T*w*y+T*m*E-d*I*E-b*m*R+d*w*R,z=T*w*g-b*I*g-T*m*x+d*I*x+b*m*L-d*w*L,J=s*$+a*B+c*G+h*z;if(0===J)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const te=1/J;return r[0]=$*te,r[1]=(I*x*h-w*L*h-I*c*E+a*L*E+w*c*R-a*x*R)*te,r[2]=(m*L*h-I*g*h+I*c*y-a*L*y-m*c*R+a*g*R)*te,r[3]=(w*g*h-m*x*h-w*c*y+a*x*y+m*c*E-a*g*E)*te,r[4]=B*te,r[5]=(b*L*h-T*x*h+T*c*E-s*L*E-b*c*R+s*x*R)*te,r[6]=(T*g*h-d*L*h-T*c*y+s*L*y+d*c*R-s*g*R)*te,r[7]=(d*x*h-b*g*h+b*c*y-s*x*y-d*c*E+s*g*E)*te,r[8]=G*te,r[9]=(T*w*h-b*I*h-T*a*E+s*I*E+b*a*R-s*w*R)*te,r[10]=(d*I*h-T*m*h+T*a*y-s*I*y-d*a*R+s*m*R)*te,r[11]=(b*m*h-d*w*h-b*a*y+s*w*y+d*a*E-s*m*E)*te,r[12]=z*te,r[13]=(b*I*c-T*w*c+T*a*x-s*I*x-b*a*L+s*w*L)*te,r[14]=(T*m*c-d*I*c-T*a*g+s*I*g+d*a*L-s*m*L)*te,r[15]=(d*w*c-b*m*c+b*a*g-s*w*g-d*a*x+s*m*x)*te,this}scale(r){const s=this.elements,a=r.x,c=r.y,h=r.z;return s[0]*=a,s[4]*=c,s[8]*=h,s[1]*=a,s[5]*=c,s[9]*=h,s[2]*=a,s[6]*=c,s[10]*=h,s[3]*=a,s[7]*=c,s[11]*=h,this}getMaxScaleOnAxis(){const r=this.elements;return Math.sqrt(Math.max(r[0]*r[0]+r[1]*r[1]+r[2]*r[2],r[4]*r[4]+r[5]*r[5]+r[6]*r[6],r[8]*r[8]+r[9]*r[9]+r[10]*r[10]))}makeTranslation(r,s,a){return this.set(1,0,0,r,0,1,0,s,0,0,1,a,0,0,0,1),this}makeRotationX(r){const s=Math.cos(r),a=Math.sin(r);return this.set(1,0,0,0,0,s,-a,0,0,a,s,0,0,0,0,1),this}makeRotationY(r){const s=Math.cos(r),a=Math.sin(r);return this.set(s,0,a,0,0,1,0,0,-a,0,s,0,0,0,0,1),this}makeRotationZ(r){const s=Math.cos(r),a=Math.sin(r);return this.set(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(r,s){const a=Math.cos(s),c=Math.sin(s),h=1-a,d=r.x,m=r.y,g=r.z,y=h*d,b=h*m;return this.set(y*d+a,y*m-c*g,y*g+c*m,0,y*m+c*g,b*m+a,b*g-c*d,0,y*g-c*m,b*g+c*d,h*g*g+a,0,0,0,0,1),this}makeScale(r,s,a){return this.set(r,0,0,0,0,s,0,0,0,0,a,0,0,0,0,1),this}makeShear(r,s,a,c,h,d){return this.set(1,a,h,0,r,1,d,0,s,c,1,0,0,0,0,1),this}compose(r,s,a){const c=this.elements,h=s._x,d=s._y,m=s._z,g=s._w,y=h+h,b=d+d,w=m+m,x=h*y,E=h*b,T=h*w,I=d*b,L=d*w,R=m*w,$=g*y,B=g*b,G=g*w,z=a.x,J=a.y,te=a.z;return c[0]=(1-(I+R))*z,c[1]=(E+G)*z,c[2]=(T-B)*z,c[3]=0,c[4]=(E-G)*J,c[5]=(1-(x+R))*J,c[6]=(L+$)*J,c[7]=0,c[8]=(T+B)*te,c[9]=(L-$)*te,c[10]=(1-(x+I))*te,c[11]=0,c[12]=r.x,c[13]=r.y,c[14]=r.z,c[15]=1,this}decompose(r,s,a){const c=this.elements;let h=hr.set(c[0],c[1],c[2]).length();const d=hr.set(c[4],c[5],c[6]).length(),m=hr.set(c[8],c[9],c[10]).length();this.determinant()<0&&(h=-h),r.x=c[12],r.y=c[13],r.z=c[14],Oi.copy(this);const g=1/h,y=1/d,b=1/m;return Oi.elements[0]*=g,Oi.elements[1]*=g,Oi.elements[2]*=g,Oi.elements[4]*=y,Oi.elements[5]*=y,Oi.elements[6]*=y,Oi.elements[8]*=b,Oi.elements[9]*=b,Oi.elements[10]*=b,s.setFromRotationMatrix(Oi),a.x=h,a.y=d,a.z=m,this}makePerspective(r,s,a,c,h,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const m=this.elements,y=2*h/(a-c),b=(s+r)/(s-r),w=(a+c)/(a-c),x=-(d+h)/(d-h),E=-2*d*h/(d-h);return m[0]=2*h/(s-r),m[4]=0,m[8]=b,m[12]=0,m[1]=0,m[5]=y,m[9]=w,m[13]=0,m[2]=0,m[6]=0,m[10]=x,m[14]=E,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(r,s,a,c,h,d){const m=this.elements,g=1/(s-r),y=1/(a-c),b=1/(d-h),w=(s+r)*g,x=(a+c)*y,E=(d+h)*b;return m[0]=2*g,m[4]=0,m[8]=0,m[12]=-w,m[1]=0,m[5]=2*y,m[9]=0,m[13]=-x,m[2]=0,m[6]=0,m[10]=-2*b,m[14]=-E,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(r){const s=this.elements,a=r.elements;for(let c=0;c<16;c++)if(s[c]!==a[c])return!1;return!0}fromArray(r,s=0){for(let a=0;a<16;a++)this.elements[a]=r[a+s];return this}toArray(r=[],s=0){const a=this.elements;return r[s]=a[0],r[s+1]=a[1],r[s+2]=a[2],r[s+3]=a[3],r[s+4]=a[4],r[s+5]=a[5],r[s+6]=a[6],r[s+7]=a[7],r[s+8]=a[8],r[s+9]=a[9],r[s+10]=a[10],r[s+11]=a[11],r[s+12]=a[12],r[s+13]=a[13],r[s+14]=a[14],r[s+15]=a[15],r}}mt.prototype.isMatrix4=!0;const hr=new F,Oi=new mt,Fr=new F(0,0,0),Br=new F(1,1,1),is=new F,_r=new F,Qt=new F,Ra=new mt,Vr=new V;class Qn{constructor(r=0,s=0,a=0,c=Qn.DefaultOrder){this._x=r,this._y=s,this._z=a,this._order=c}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,s,a,c=this._order){return this._x=r,this._y=s,this._z=a,this._order=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,s=this._order,a=!0){const c=r.elements,h=c[0],d=c[4],m=c[8],g=c[1],y=c[5],b=c[9],w=c[2],x=c[6],E=c[10];switch(s){case"XYZ":this._y=Math.asin(ye(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-b,E),this._z=Math.atan2(-d,h)):(this._x=Math.atan2(x,y),this._z=0);break;case"YXZ":this._x=Math.asin(-ye(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(m,E),this._z=Math.atan2(g,y)):(this._y=Math.atan2(-w,h),this._z=0);break;case"ZXY":this._x=Math.asin(ye(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-w,E),this._z=Math.atan2(-d,y)):(this._y=0,this._z=Math.atan2(g,h));break;case"ZYX":this._y=Math.asin(-ye(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(x,E),this._z=Math.atan2(g,h)):(this._x=0,this._z=Math.atan2(-d,y));break;case"YZX":this._z=Math.asin(ye(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-b,y),this._y=Math.atan2(-w,h)):(this._x=0,this._y=Math.atan2(m,E));break;case"XZY":this._z=Math.asin(-ye(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(x,y),this._y=Math.atan2(m,h)):(this._x=Math.atan2(-b,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===a&&this._onChangeCallback(),this}setFromQuaternion(r,s,a){return Ra.makeRotationFromQuaternion(r),this.setFromRotationMatrix(Ra,s,a)}setFromVector3(r,s=this._order){return this.set(r.x,r.y,r.z,s)}reorder(r){return Vr.setFromEuler(this),this.setFromQuaternion(Vr,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],s=0){return r[s]=this._x,r[s+1]=this._y,r[s+2]=this._z,r[s+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}}Qn.prototype.isEuler=!0,Qn.DefaultOrder="XYZ",Qn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Xo{constructor(){this.mask=1}set(r){this.mask=(1<<r|0)>>>0}enable(r){this.mask|=1<<r|0}enableAll(){this.mask=-1}toggle(r){this.mask^=1<<r|0}disable(r){this.mask&=~(1<<r|0)}disableAll(){this.mask=0}test(r){return 0!=(this.mask&r.mask)}isEnabled(r){return 0!=(this.mask&(1<<r|0))}}let Ur=0;const Hr=new F,Ys=new V,En=new mt,Sr=new F,Cr=new F,yr=new F,Wn=new V,vl=new F(1,0,0),zr=new F(0,1,0),Rr=new F(0,0,1),Ko={type:"added"},Ir={type:"removed"};class Bt extends U{constructor(){super(),Object.defineProperty(this,"id",{value:Ur++}),this.uuid=Je(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bt.DefaultUp.clone();const r=new F,s=new Qn,a=new V,c=new F(1,1,1);s._onChange(function(){a.setFromEuler(s,!1)}),a._onChange(function(){s.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new mt},normalMatrix:{value:new vt}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=Bt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Xo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,s){this.quaternion.setFromAxisAngle(r,s)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,s){return Ys.setFromAxisAngle(r,s),this.quaternion.multiply(Ys),this}rotateOnWorldAxis(r,s){return Ys.setFromAxisAngle(r,s),this.quaternion.premultiply(Ys),this}rotateX(r){return this.rotateOnAxis(vl,r)}rotateY(r){return this.rotateOnAxis(zr,r)}rotateZ(r){return this.rotateOnAxis(Rr,r)}translateOnAxis(r,s){return Hr.copy(r).applyQuaternion(this.quaternion),this.position.add(Hr.multiplyScalar(s)),this}translateX(r){return this.translateOnAxis(vl,r)}translateY(r){return this.translateOnAxis(zr,r)}translateZ(r){return this.translateOnAxis(Rr,r)}localToWorld(r){return r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return r.applyMatrix4(En.copy(this.matrixWorld).invert())}lookAt(r,s,a){r.isVector3?Sr.copy(r):Sr.set(r,s,a);const c=this.parent;this.updateWorldMatrix(!0,!1),Cr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?En.lookAt(Cr,Sr,this.up):En.lookAt(Sr,Cr,this.up),this.quaternion.setFromRotationMatrix(En),c&&(En.extractRotation(c.matrixWorld),Ys.setFromRotationMatrix(En),this.quaternion.premultiply(Ys.invert()))}add(r){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(null!==r.parent&&r.parent.remove(r),r.parent=this,this.children.push(r),r.dispatchEvent(Ko)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const s=this.children.indexOf(r);return-1!==s&&(r.parent=null,this.children.splice(s,1),r.dispatchEvent(Ir)),this}removeFromParent(){const r=this.parent;return null!==r&&r.remove(this),this}clear(){for(let r=0;r<this.children.length;r++){const s=this.children[r];s.parent=null,s.dispatchEvent(Ir)}return this.children.length=0,this}attach(r){return this.updateWorldMatrix(!0,!1),En.copy(this.matrixWorld).invert(),null!==r.parent&&(r.parent.updateWorldMatrix(!0,!1),En.multiply(r.parent.matrixWorld)),r.applyMatrix4(En),this.add(r),r.updateWorldMatrix(!1,!0),this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,s){if(this[r]===s)return this;for(let a=0,c=this.children.length;a<c;a++){const h=this.children[a].getObjectByProperty(r,s);if(void 0!==h)return h}}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cr,r,yr),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cr,Wn,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return r.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(r){r(this);const s=this.children;for(let a=0,c=s.length;a<c;a++)s[a].traverse(r)}traverseVisible(r){if(!1===this.visible)return;r(this);const s=this.children;for(let a=0,c=s.length;a<c;a++)s[a].traverseVisible(r)}traverseAncestors(r){const s=this.parent;null!==s&&(r(s),s.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);const s=this.children;for(let a=0,c=s.length;a<c;a++)s[a].updateMatrixWorld(r)}updateWorldMatrix(r,s){const a=this.parent;if(!0===r&&null!==a&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===s){const c=this.children;for(let h=0,d=c.length;h<d;h++)c[h].updateWorldMatrix(!1,!0)}}toJSON(r){const s=void 0===r||"string"==typeof r,a={};s&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const c={};function h(m,g){return void 0===m[g.uuid]&&(m[g.uuid]=g.toJSON(r)),g.uuid}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),!0===this.castShadow&&(c.castShadow=!0),!0===this.receiveShadow&&(c.receiveShadow=!0),!1===this.visible&&(c.visible=!1),!1===this.frustumCulled&&(c.frustumCulled=!1),0!==this.renderOrder&&(c.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(c.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&(c.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=h(r.geometries,this.geometry);const m=this.geometry.parameters;if(void 0!==m&&void 0!==m.shapes){const g=m.shapes;if(Array.isArray(g))for(let y=0,b=g.length;y<b;y++)h(r.shapes,g[y]);else h(r.shapes,g)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(h(r.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const m=[];for(let g=0,y=this.material.length;g<y;g++)m.push(h(r.materials,this.material[g]));c.material=m}else c.material=h(r.materials,this.material);if(this.children.length>0){c.children=[];for(let m=0;m<this.children.length;m++)c.children.push(this.children[m].toJSON(r).object)}if(this.animations.length>0){c.animations=[];for(let m=0;m<this.animations.length;m++)c.animations.push(h(r.animations,this.animations[m]))}if(s){const m=d(r.geometries),g=d(r.materials),y=d(r.textures),b=d(r.images),w=d(r.shapes),x=d(r.skeletons),E=d(r.animations),T=d(r.nodes);m.length>0&&(a.geometries=m),g.length>0&&(a.materials=g),y.length>0&&(a.textures=y),b.length>0&&(a.images=b),w.length>0&&(a.shapes=w),x.length>0&&(a.skeletons=x),E.length>0&&(a.animations=E),T.length>0&&(a.nodes=T)}return a.object=c,a;function d(m){const g=[];for(const y in m){const b=m[y];delete b.metadata,g.push(b)}return g}}clone(r){return(new this.constructor).copy(this,r)}copy(r,s=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.userData=JSON.parse(JSON.stringify(r.userData)),!0===s)for(let a=0;a<r.children.length;a++)this.add(r.children[a].clone());return this}}Bt.DefaultUp=new F(0,1,0),Bt.DefaultMatrixAutoUpdate=!0,Bt.prototype.isObject3D=!0;const Si=new F,Fi=new F,po=new F,Wi=new F,Ts=new F,Ds=new F,Th=new F,oc=new F,Qc=new F,eu=new F;class Sn{constructor(r=new F,s=new F,a=new F){this.a=r,this.b=s,this.c=a}static getNormal(r,s,a,c){c.subVectors(a,s),Si.subVectors(r,s),c.cross(Si);const h=c.lengthSq();return h>0?c.multiplyScalar(1/Math.sqrt(h)):c.set(0,0,0)}static getBarycoord(r,s,a,c,h){Si.subVectors(c,s),Fi.subVectors(a,s),po.subVectors(r,s);const d=Si.dot(Si),m=Si.dot(Fi),g=Si.dot(po),y=Fi.dot(Fi),b=Fi.dot(po),w=d*y-m*m;if(0===w)return h.set(-2,-1,-1);const x=1/w,E=(y*g-m*b)*x,T=(d*b-m*g)*x;return h.set(1-E-T,T,E)}static containsPoint(r,s,a,c){return this.getBarycoord(r,s,a,c,Wi),Wi.x>=0&&Wi.y>=0&&Wi.x+Wi.y<=1}static getUV(r,s,a,c,h,d,m,g){return this.getBarycoord(r,s,a,c,Wi),g.set(0,0),g.addScaledVector(h,Wi.x),g.addScaledVector(d,Wi.y),g.addScaledVector(m,Wi.z),g}static isFrontFacing(r,s,a,c){return Si.subVectors(a,s),Fi.subVectors(r,s),Si.cross(Fi).dot(c)<0}set(r,s,a){return this.a.copy(r),this.b.copy(s),this.c.copy(a),this}setFromPointsAndIndices(r,s,a,c){return this.a.copy(r[s]),this.b.copy(r[a]),this.c.copy(r[c]),this}setFromAttributeAndIndices(r,s,a,c){return this.a.fromBufferAttribute(r,s),this.b.fromBufferAttribute(r,a),this.c.fromBufferAttribute(r,c),this}clone(){return(new this.constructor).copy(this)}copy(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this}getArea(){return Si.subVectors(this.c,this.b),Fi.subVectors(this.a,this.b),.5*Si.cross(Fi).length()}getMidpoint(r){return r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(r){return Sn.getNormal(this.a,this.b,this.c,r)}getPlane(r){return r.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(r,s){return Sn.getBarycoord(r,this.a,this.b,this.c,s)}getUV(r,s,a,c,h){return Sn.getUV(r,this.a,this.b,this.c,s,a,c,h)}containsPoint(r){return Sn.containsPoint(r,this.a,this.b,this.c)}isFrontFacing(r){return Sn.isFrontFacing(this.a,this.b,this.c,r)}intersectsBox(r){return r.intersectsTriangle(this)}closestPointToPoint(r,s){const a=this.a,c=this.b,h=this.c;let d,m;Ts.subVectors(c,a),Ds.subVectors(h,a),oc.subVectors(r,a);const g=Ts.dot(oc),y=Ds.dot(oc);if(g<=0&&y<=0)return s.copy(a);Qc.subVectors(r,c);const b=Ts.dot(Qc),w=Ds.dot(Qc);if(b>=0&&w<=b)return s.copy(c);const x=g*w-b*y;if(x<=0&&g>=0&&b<=0)return d=g/(g-b),s.copy(a).addScaledVector(Ts,d);eu.subVectors(r,h);const E=Ts.dot(eu),T=Ds.dot(eu);if(T>=0&&E<=T)return s.copy(h);const I=E*y-g*T;if(I<=0&&y>=0&&T<=0)return m=y/(y-T),s.copy(a).addScaledVector(Ds,m);const L=b*T-E*w;if(L<=0&&w-b>=0&&E-T>=0)return Th.subVectors(h,c),m=(w-b)/(w-b+(E-T)),s.copy(c).addScaledVector(Th,m);const R=1/(L+I+x);return d=I*R,m=x*R,s.copy(a).addScaledVector(Ts,d).addScaledVector(Ds,m)}equals(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}let tu=0;class jr extends U{constructor(){super(),Object.defineProperty(this,"id",{value:tu++}),this.uuid=Je(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(r){this._alphaTest>0!=r>0&&this.version++,this._alphaTest=r}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(r){if(void 0!==r)for(const s in r){const a=r[s];if(void 0===a){console.warn("THREE.Material: '"+s+"' parameter is undefined.");continue}if("shading"===s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===a;continue}const c=this[s];void 0!==c?c&&c.isColor?c.set(a):c&&c.isVector3&&a&&a.isVector3?c.copy(a):this[s]=a:console.warn("THREE."+this.type+": '"+s+"' is not a property of this material.")}}toJSON(r){const s=void 0===r||"string"==typeof r;s&&(r={textures:{},images:{}});const a={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function c(h){const d=[];for(const m in h){const g=h[m];delete g.metadata,d.push(g)}return d}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),void 0!==this.roughness&&(a.roughness=this.roughness),void 0!==this.metalness&&(a.metalness=this.metalness),void 0!==this.sheen&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(a.shininess=this.shininess),void 0!==this.clearcoat&&(a.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(r).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(r).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(r).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(r).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(r).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(r).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(r).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(r).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(r).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(r).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(r).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(r).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(r).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(r).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(r).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(r).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(r).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(r).uuid,void 0!==this.combine&&(a.combine=this.combine)),void 0!==this.envMapIntensity&&(a.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(a.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(r).uuid),void 0!==this.transmission&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(r).uuid),void 0!==this.thickness&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(r).uuid),void 0!==this.attenuationDistance&&(a.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(a.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(a.size=this.size),null!==this.shadowSide&&(a.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(a.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(a.blending=this.blending),0!==this.side&&(a.side=this.side),this.vertexColors&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),!0===this.transparent&&(a.transparent=this.transparent),a.depthFunc=this.depthFunc,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.colorWrite=this.colorWrite,a.stencilWrite=this.stencilWrite,a.stencilWriteMask=this.stencilWriteMask,a.stencilFunc=this.stencilFunc,a.stencilRef=this.stencilRef,a.stencilFuncMask=this.stencilFuncMask,a.stencilFail=this.stencilFail,a.stencilZFail=this.stencilZFail,a.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(a.rotation=this.rotation),!0===this.polygonOffset&&(a.polygonOffset=!0),0!==this.polygonOffsetFactor&&(a.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(a.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(a.linewidth=this.linewidth),void 0!==this.dashSize&&(a.dashSize=this.dashSize),void 0!==this.gapSize&&(a.gapSize=this.gapSize),void 0!==this.scale&&(a.scale=this.scale),!0===this.dithering&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(a.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(a.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(a.wireframe=this.wireframe),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(a.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(a.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(a.flatShading=this.flatShading),!1===this.visible&&(a.visible=!1),!1===this.toneMapped&&(a.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),s){const h=c(r.textures),d=c(r.images);h.length>0&&(a.textures=h),d.length>0&&(a.images=d)}return a}clone(){return(new this.constructor).copy(this)}copy(r){this.name=r.name,this.fog=r.fog,this.blending=r.blending,this.side=r.side,this.vertexColors=r.vertexColors,this.opacity=r.opacity,this.transparent=r.transparent,this.blendSrc=r.blendSrc,this.blendDst=r.blendDst,this.blendEquation=r.blendEquation,this.blendSrcAlpha=r.blendSrcAlpha,this.blendDstAlpha=r.blendDstAlpha,this.blendEquationAlpha=r.blendEquationAlpha,this.depthFunc=r.depthFunc,this.depthTest=r.depthTest,this.depthWrite=r.depthWrite,this.stencilWriteMask=r.stencilWriteMask,this.stencilFunc=r.stencilFunc,this.stencilRef=r.stencilRef,this.stencilFuncMask=r.stencilFuncMask,this.stencilFail=r.stencilFail,this.stencilZFail=r.stencilZFail,this.stencilZPass=r.stencilZPass,this.stencilWrite=r.stencilWrite;const s=r.clippingPlanes;let a=null;if(null!==s){const c=s.length;a=new Array(c);for(let h=0;h!==c;++h)a[h]=s[h].clone()}return this.clippingPlanes=a,this.clipIntersection=r.clipIntersection,this.clipShadows=r.clipShadows,this.shadowSide=r.shadowSide,this.colorWrite=r.colorWrite,this.precision=r.precision,this.polygonOffset=r.polygonOffset,this.polygonOffsetFactor=r.polygonOffsetFactor,this.polygonOffsetUnits=r.polygonOffsetUnits,this.dithering=r.dithering,this.alphaTest=r.alphaTest,this.alphaToCoverage=r.alphaToCoverage,this.premultipliedAlpha=r.premultipliedAlpha,this.visible=r.visible,this.toneMapped=r.toneMapped,this.userData=JSON.parse(JSON.stringify(r.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(r){!0===r&&this.version++}}jr.prototype.isMaterial=!0,jr.fromType=function(){return null};class Bi extends jr{constructor(r){super(),this.type="MeshBasicMaterial",this.color=new D(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this}}Bi.prototype.isMeshBasicMaterial=!0;const tn=new F,Ia=new Me;class jt{constructor(r,s,a){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=r,this.itemSize=s,this.count=void 0!==r?r.length/s:0,this.normalized=!0===a,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(r){!0===r&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this}copyAt(r,s,a){r*=this.itemSize,a*=s.itemSize;for(let c=0,h=this.itemSize;c<h;c++)this.array[r+c]=s.array[a+c];return this}copyArray(r){return this.array.set(r),this}copyColorsArray(r){const s=this.array;let a=0;for(let c=0,h=r.length;c<h;c++){let d=r[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),d=new D),s[a++]=d.r,s[a++]=d.g,s[a++]=d.b}return this}copyVector2sArray(r){const s=this.array;let a=0;for(let c=0,h=r.length;c<h;c++){let d=r[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),d=new Me),s[a++]=d.x,s[a++]=d.y}return this}copyVector3sArray(r){const s=this.array;let a=0;for(let c=0,h=r.length;c<h;c++){let d=r[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),d=new F),s[a++]=d.x,s[a++]=d.y,s[a++]=d.z}return this}copyVector4sArray(r){const s=this.array;let a=0;for(let c=0,h=r.length;c<h;c++){let d=r[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),d=new k),s[a++]=d.x,s[a++]=d.y,s[a++]=d.z,s[a++]=d.w}return this}applyMatrix3(r){if(2===this.itemSize)for(let s=0,a=this.count;s<a;s++)Ia.fromBufferAttribute(this,s),Ia.applyMatrix3(r),this.setXY(s,Ia.x,Ia.y);else if(3===this.itemSize)for(let s=0,a=this.count;s<a;s++)tn.fromBufferAttribute(this,s),tn.applyMatrix3(r),this.setXYZ(s,tn.x,tn.y,tn.z);return this}applyMatrix4(r){for(let s=0,a=this.count;s<a;s++)tn.fromBufferAttribute(this,s),tn.applyMatrix4(r),this.setXYZ(s,tn.x,tn.y,tn.z);return this}applyNormalMatrix(r){for(let s=0,a=this.count;s<a;s++)tn.fromBufferAttribute(this,s),tn.applyNormalMatrix(r),this.setXYZ(s,tn.x,tn.y,tn.z);return this}transformDirection(r){for(let s=0,a=this.count;s<a;s++)tn.fromBufferAttribute(this,s),tn.transformDirection(r),this.setXYZ(s,tn.x,tn.y,tn.z);return this}set(r,s=0){return this.array.set(r,s),this}getX(r){return this.array[r*this.itemSize]}setX(r,s){return this.array[r*this.itemSize]=s,this}getY(r){return this.array[r*this.itemSize+1]}setY(r,s){return this.array[r*this.itemSize+1]=s,this}getZ(r){return this.array[r*this.itemSize+2]}setZ(r,s){return this.array[r*this.itemSize+2]=s,this}getW(r){return this.array[r*this.itemSize+3]}setW(r,s){return this.array[r*this.itemSize+3]=s,this}setXY(r,s,a){return this.array[0+(r*=this.itemSize)]=s,this.array[r+1]=a,this}setXYZ(r,s,a,c){return this.array[0+(r*=this.itemSize)]=s,this.array[r+1]=a,this.array[r+2]=c,this}setXYZW(r,s,a,c,h){return this.array[0+(r*=this.itemSize)]=s,this.array[r+1]=a,this.array[r+2]=c,this.array[r+3]=h,this}onUpload(r){return this.onUploadCallback=r,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const r={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(r.name=this.name),35044!==this.usage&&(r.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(r.updateRange=this.updateRange),r}}jt.prototype.isBufferAttribute=!0;class ac extends jt{constructor(r,s,a){super(new Uint16Array(r),s,a)}}class Dh extends jt{constructor(r,s,a){super(new Uint32Array(r),s,a)}}(class extends jt{constructor(f,r,s){super(new Uint16Array(f),r,s)}}).prototype.isFloat16BufferAttribute=!0;class wn extends jt{constructor(r,s,a){super(new Float32Array(r),s,a)}}let rn=0;const Zs=new mt,Bb=new Bt,Xe=new F,ms=new ut,sn=new ut,on=new F;class Xr extends U{constructor(){super(),Object.defineProperty(this,"id",{value:rn++}),this.uuid=Je(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(r){return this.index=Array.isArray(r)?new(Ht(r)?Dh:ac)(r,1):r,this}getAttribute(r){return this.attributes[r]}setAttribute(r,s){return this.attributes[r]=s,this}deleteAttribute(r){return delete this.attributes[r],this}hasAttribute(r){return void 0!==this.attributes[r]}addGroup(r,s,a=0){this.groups.push({start:r,count:s,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(r,s){this.drawRange.start=r,this.drawRange.count=s}applyMatrix4(r){const s=this.attributes.position;void 0!==s&&(s.applyMatrix4(r),s.needsUpdate=!0);const a=this.attributes.normal;if(void 0!==a){const h=(new vt).getNormalMatrix(r);a.applyNormalMatrix(h),a.needsUpdate=!0}const c=this.attributes.tangent;return void 0!==c&&(c.transformDirection(r),c.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(r){return Zs.makeRotationFromQuaternion(r),this.applyMatrix4(Zs),this}rotateX(r){return Zs.makeRotationX(r),this.applyMatrix4(Zs),this}rotateY(r){return Zs.makeRotationY(r),this.applyMatrix4(Zs),this}rotateZ(r){return Zs.makeRotationZ(r),this.applyMatrix4(Zs),this}translate(r,s,a){return Zs.makeTranslation(r,s,a),this.applyMatrix4(Zs),this}scale(r,s,a){return Zs.makeScale(r,s,a),this.applyMatrix4(Zs),this}lookAt(r){return Bb.lookAt(r),Bb.updateMatrix(),this.applyMatrix4(Bb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xe).negate(),this.translate(Xe.x,Xe.y,Xe.z),this}setFromPoints(r){const s=[];for(let a=0,c=r.length;a<c;a++){const h=r[a];s.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new wn(s,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ut);const r=this.attributes.position,s=this.morphAttributes.position;if(r&&r.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));if(void 0!==r){if(this.boundingBox.setFromBufferAttribute(r),s)for(let a=0,c=s.length;a<c;a++)ms.setFromBufferAttribute(s[a]),this.morphTargetsRelative?(on.addVectors(this.boundingBox.min,ms.min),this.boundingBox.expandByPoint(on),on.addVectors(this.boundingBox.max,ms.max),this.boundingBox.expandByPoint(on)):(this.boundingBox.expandByPoint(ms.min),this.boundingBox.expandByPoint(ms.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Jn);const r=this.attributes.position,s=this.morphAttributes.position;if(r&&r.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new F,1/0);if(r){const a=this.boundingSphere.center;if(ms.setFromBufferAttribute(r),s)for(let h=0,d=s.length;h<d;h++)sn.setFromBufferAttribute(s[h]),this.morphTargetsRelative?(on.addVectors(ms.min,sn.min),ms.expandByPoint(on),on.addVectors(ms.max,sn.max),ms.expandByPoint(on)):(ms.expandByPoint(sn.min),ms.expandByPoint(sn.max));ms.getCenter(a);let c=0;for(let h=0,d=r.count;h<d;h++)on.fromBufferAttribute(r,h),c=Math.max(c,a.distanceToSquared(on));if(s)for(let h=0,d=s.length;h<d;h++){const m=s[h],g=this.morphTargetsRelative;for(let y=0,b=m.count;y<b;y++)on.fromBufferAttribute(m,y),g&&(Xe.fromBufferAttribute(r,y),on.add(Xe)),c=Math.max(c,a.distanceToSquared(on))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const r=this.index,s=this.attributes;if(null===r||void 0===s.position||void 0===s.normal||void 0===s.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const a=r.array,c=s.position.array,h=s.normal.array,d=s.uv.array,m=c.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new jt(new Float32Array(4*m),4));const g=this.getAttribute("tangent").array,y=[],b=[];for(let de=0;de<m;de++)y[de]=new F,b[de]=new F;const w=new F,x=new F,E=new F,T=new Me,I=new Me,L=new Me,R=new F,$=new F;function B(de,we,ke){w.fromArray(c,3*de),x.fromArray(c,3*we),E.fromArray(c,3*ke),T.fromArray(d,2*de),I.fromArray(d,2*we),L.fromArray(d,2*ke),x.sub(w),E.sub(w),I.sub(T),L.sub(T);const je=1/(I.x*L.y-L.x*I.y);isFinite(je)&&(R.copy(x).multiplyScalar(L.y).addScaledVector(E,-I.y).multiplyScalar(je),$.copy(E).multiplyScalar(I.x).addScaledVector(x,-L.x).multiplyScalar(je),y[de].add(R),y[we].add(R),y[ke].add(R),b[de].add($),b[we].add($),b[ke].add($))}let G=this.groups;0===G.length&&(G=[{start:0,count:a.length}]);for(let de=0,we=G.length;de<we;++de){const ke=G[de],je=ke.start;for(let me=je,Ve=je+ke.count;me<Ve;me+=3)B(a[me+0],a[me+1],a[me+2])}const z=new F,J=new F,te=new F,le=new F;function oe(de){te.fromArray(h,3*de),le.copy(te);const we=y[de];z.copy(we),z.sub(te.multiplyScalar(te.dot(we))).normalize(),J.crossVectors(le,we);const ke=J.dot(b[de])<0?-1:1;g[4*de]=z.x,g[4*de+1]=z.y,g[4*de+2]=z.z,g[4*de+3]=ke}for(let de=0,we=G.length;de<we;++de){const ke=G[de],je=ke.start;for(let me=je,Ve=je+ke.count;me<Ve;me+=3)oe(a[me+0]),oe(a[me+1]),oe(a[me+2])}}computeVertexNormals(){const r=this.index,s=this.getAttribute("position");if(void 0!==s){let a=this.getAttribute("normal");if(void 0===a)a=new jt(new Float32Array(3*s.count),3),this.setAttribute("normal",a);else for(let x=0,E=a.count;x<E;x++)a.setXYZ(x,0,0,0);const c=new F,h=new F,d=new F,m=new F,g=new F,y=new F,b=new F,w=new F;if(r)for(let x=0,E=r.count;x<E;x+=3){const T=r.getX(x+0),I=r.getX(x+1),L=r.getX(x+2);c.fromBufferAttribute(s,T),h.fromBufferAttribute(s,I),d.fromBufferAttribute(s,L),b.subVectors(d,h),w.subVectors(c,h),b.cross(w),m.fromBufferAttribute(a,T),g.fromBufferAttribute(a,I),y.fromBufferAttribute(a,L),m.add(b),g.add(b),y.add(b),a.setXYZ(T,m.x,m.y,m.z),a.setXYZ(I,g.x,g.y,g.z),a.setXYZ(L,y.x,y.y,y.z)}else for(let x=0,E=s.count;x<E;x+=3)c.fromBufferAttribute(s,x+0),h.fromBufferAttribute(s,x+1),d.fromBufferAttribute(s,x+2),b.subVectors(d,h),w.subVectors(c,h),b.cross(w),a.setXYZ(x+0,b.x,b.y,b.z),a.setXYZ(x+1,b.x,b.y,b.z),a.setXYZ(x+2,b.x,b.y,b.z);this.normalizeNormals(),a.needsUpdate=!0}}merge(r,s){if(!r||!r.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",r);void 0===s&&(s=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const a=this.attributes;for(const c in a){if(void 0===r.attributes[c])continue;const h=a[c].array,d=r.attributes[c],m=d.array,g=d.itemSize*s,y=Math.min(m.length,h.length-g);for(let b=0,w=g;b<y;b++,w++)h[w]=m[b]}return this}normalizeNormals(){const r=this.attributes.normal;for(let s=0,a=r.count;s<a;s++)on.fromBufferAttribute(r,s),on.normalize(),r.setXYZ(s,on.x,on.y,on.z)}toNonIndexed(){function r(m,g){const y=m.array,b=m.itemSize,w=m.normalized,x=new y.constructor(g.length*b);let E=0,T=0;for(let I=0,L=g.length;I<L;I++){E=m.isInterleavedBufferAttribute?g[I]*m.data.stride+m.offset:g[I]*b;for(let R=0;R<b;R++)x[T++]=y[E++]}return new jt(x,b,w)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const s=new Xr,a=this.index.array,c=this.attributes;for(const m in c){const g=r(c[m],a);s.setAttribute(m,g)}const h=this.morphAttributes;for(const m in h){const g=[],y=h[m];for(let b=0,w=y.length;b<w;b++){const x=r(y[b],a);g.push(x)}s.morphAttributes[m]=g}s.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let m=0,g=d.length;m<g;m++){const y=d[m];s.addGroup(y.start,y.count,y.materialIndex)}return s}toJSON(){const r={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),Object.keys(this.userData).length>0&&(r.userData=this.userData),void 0!==this.parameters){const g=this.parameters;for(const y in g)void 0!==g[y]&&(r[y]=g[y]);return r}r.data={attributes:{}};const s=this.index;null!==s&&(r.data.index={type:s.array.constructor.name,array:Array.prototype.slice.call(s.array)});const a=this.attributes;for(const g in a)r.data.attributes[g]=a[g].toJSON(r.data);const c={};let h=!1;for(const g in this.morphAttributes){const y=this.morphAttributes[g],b=[];for(let w=0,x=y.length;w<x;w++)b.push(y[w].toJSON(r.data));b.length>0&&(c[g]=b,h=!0)}h&&(r.data.morphAttributes=c,r.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(r.data.groups=JSON.parse(JSON.stringify(d)));const m=this.boundingSphere;return null!==m&&(r.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),r}clone(){return(new this.constructor).copy(this)}copy(r){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const s={};this.name=r.name;const a=r.index;null!==a&&this.setIndex(a.clone(s));const c=r.attributes;for(const y in c)this.setAttribute(y,c[y].clone(s));const h=r.morphAttributes;for(const y in h){const b=[],w=h[y];for(let x=0,E=w.length;x<E;x++)b.push(w[x].clone(s));this.morphAttributes[y]=b}this.morphTargetsRelative=r.morphTargetsRelative;const d=r.groups;for(let y=0,b=d.length;y<b;y++){const w=d[y];this.addGroup(w.start,w.count,w.materialIndex)}const m=r.boundingBox;null!==m&&(this.boundingBox=m.clone());const g=r.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=r.drawRange.start,this.drawRange.count=r.drawRange.count,this.userData=r.userData,void 0!==r.parameters&&(this.parameters=Object.assign({},r.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Xr.prototype.isBufferGeometry=!0;const pS=new mt,Rh=new ps,Ih=new Jn,Ci=new F,nu=new F,lc=new F,Vb=new F,Yo=new F,Ub=new F,U0=new F,H0=new F,z0=new F,hm=new Me,j0=new Me,dm=new Me,Hb=new F,gs=new F;class xt extends Bt{constructor(r=new Xr,s=new Bi){super(),this.type="Mesh",this.geometry=r,this.material=s,this.updateMorphTargets()}copy(r){return super.copy(r),void 0!==r.morphTargetInfluences&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),void 0!==r.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},r.morphTargetDictionary)),this.material=r.material,this.geometry=r.geometry,this}updateMorphTargets(){const r=this.geometry;if(r.isBufferGeometry){const s=r.morphAttributes,a=Object.keys(s);if(a.length>0){const c=s[a[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=c.length;h<d;h++){const m=c[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=h}}}}else{const s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(r,s){const a=this.geometry,c=this.material,h=this.matrixWorld;if(void 0===c||(null===a.boundingSphere&&a.computeBoundingSphere(),Ih.copy(a.boundingSphere),Ih.applyMatrix4(h),!1===r.ray.intersectsSphere(Ih))||(pS.copy(h).invert(),Rh.copy(r.ray).applyMatrix4(pS),null!==a.boundingBox&&!1===Rh.intersectsBox(a.boundingBox)))return;let d;if(a.isBufferGeometry){const m=a.index,g=a.attributes.position,y=a.morphAttributes.position,b=a.morphTargetsRelative,w=a.attributes.uv,x=a.attributes.uv2,E=a.groups,T=a.drawRange;if(null!==m)if(Array.isArray(c))for(let I=0,L=E.length;I<L;I++){const R=E[I],$=c[R.materialIndex];for(let B=Math.max(R.start,T.start),G=Math.min(m.count,Math.min(R.start+R.count,T.start+T.count));B<G;B+=3){const z=m.getX(B),J=m.getX(B+1),te=m.getX(B+2);d=G0(this,$,r,Rh,g,y,b,w,x,z,J,te),d&&(d.faceIndex=Math.floor(B/3),d.face.materialIndex=R.materialIndex,s.push(d))}}else for(let I=Math.max(0,T.start),L=Math.min(m.count,T.start+T.count);I<L;I+=3){const R=m.getX(I),$=m.getX(I+1),B=m.getX(I+2);d=G0(this,c,r,Rh,g,y,b,w,x,R,$,B),d&&(d.faceIndex=Math.floor(I/3),s.push(d))}else if(void 0!==g)if(Array.isArray(c))for(let I=0,L=E.length;I<L;I++){const R=E[I],$=c[R.materialIndex];for(let B=Math.max(R.start,T.start),G=Math.min(g.count,Math.min(R.start+R.count,T.start+T.count));B<G;B+=3)d=G0(this,$,r,Rh,g,y,b,w,x,B,B+1,B+2),d&&(d.faceIndex=Math.floor(B/3),d.face.materialIndex=R.materialIndex,s.push(d))}else for(let I=Math.max(0,T.start),L=Math.min(g.count,T.start+T.count);I<L;I+=3)d=G0(this,c,r,Rh,g,y,b,w,x,I,I+1,I+2),d&&(d.faceIndex=Math.floor(I/3),s.push(d))}else a.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function G0(f,r,s,a,c,h,d,m,g,y,b,w){Ci.fromBufferAttribute(c,y),nu.fromBufferAttribute(c,b),lc.fromBufferAttribute(c,w);const x=f.morphTargetInfluences;if(h&&x){U0.set(0,0,0),H0.set(0,0,0),z0.set(0,0,0);for(let T=0,I=h.length;T<I;T++){const L=x[T],R=h[T];0!==L&&(Vb.fromBufferAttribute(R,y),Yo.fromBufferAttribute(R,b),Ub.fromBufferAttribute(R,w),d?(U0.addScaledVector(Vb,L),H0.addScaledVector(Yo,L),z0.addScaledVector(Ub,L)):(U0.addScaledVector(Vb.sub(Ci),L),H0.addScaledVector(Yo.sub(nu),L),z0.addScaledVector(Ub.sub(lc),L)))}Ci.add(U0),nu.add(H0),lc.add(z0)}f.isSkinnedMesh&&(f.boneTransform(y,Ci),f.boneTransform(b,nu),f.boneTransform(w,lc));const E=function(T,I,L,R,$,B,G,z){let J;if(J=1===I.side?R.intersectTriangle(G,B,$,!0,z):R.intersectTriangle($,B,G,2!==I.side,z),null===J)return null;gs.copy(z),gs.applyMatrix4(T.matrixWorld);const te=L.ray.origin.distanceTo(gs);return te<L.near||te>L.far?null:{distance:te,point:gs.clone(),object:T}}(f,r,s,a,Ci,nu,lc,Hb);if(E){m&&(hm.fromBufferAttribute(m,y),j0.fromBufferAttribute(m,b),dm.fromBufferAttribute(m,w),E.uv=Sn.getUV(Hb,Ci,nu,lc,hm,j0,dm,new Me)),g&&(hm.fromBufferAttribute(g,y),j0.fromBufferAttribute(g,b),dm.fromBufferAttribute(g,w),E.uv2=Sn.getUV(Hb,Ci,nu,lc,hm,j0,dm,new Me));const T={a:y,b,c:w,normal:new F,materialIndex:0};Sn.getNormal(Ci,nu,lc,T.normal),E.face=T}return E}xt.prototype.isMesh=!0;class ru extends Xr{constructor(r=1,s=1,a=1,c=1,h=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:r,height:s,depth:a,widthSegments:c,heightSegments:h,depthSegments:d};const m=this;c=Math.floor(c),h=Math.floor(h),d=Math.floor(d);const g=[],y=[],b=[],w=[];let x=0,E=0;function T(I,L,R,$,B,G,z,J,te,le,oe){const de=G/te,we=z/le,ke=G/2,je=z/2,me=J/2,Ve=te+1,Ne=le+1;let tt=0,We=0;const ze=new F;for(let Oe=0;Oe<Ne;Oe++){const Ct=Oe*we-je;for(let At=0;At<Ve;At++)ze[I]=(At*de-ke)*$,ze[L]=Ct*B,ze[R]=me,y.push(ze.x,ze.y,ze.z),ze[I]=0,ze[L]=0,ze[R]=J>0?1:-1,b.push(ze.x,ze.y,ze.z),w.push(At/te),w.push(1-Oe/le),tt+=1}for(let Oe=0;Oe<le;Oe++)for(let Ct=0;Ct<te;Ct++){const Nt=x+Ct+Ve*(Oe+1),Tt=x+(Ct+1)+Ve*(Oe+1),Rn=x+(Ct+1)+Ve*Oe;g.push(x+Ct+Ve*Oe,Nt,Rn),g.push(Nt,Tt,Rn),We+=6}m.addGroup(E,We,oe),E+=We,x+=tt}T("z","y","x",-1,-1,a,s,r,d,h,0),T("z","y","x",1,-1,a,s,-r,d,h,1),T("x","z","y",1,1,r,a,s,c,d,2),T("x","z","y",1,-1,r,a,-s,c,d,3),T("x","y","z",1,-1,r,s,a,c,h,4),T("x","y","z",-1,-1,r,s,-a,c,h,5),this.setIndex(g),this.setAttribute("position",new wn(y,3)),this.setAttribute("normal",new wn(b,3)),this.setAttribute("uv",new wn(w,2))}static fromJSON(r){return new ru(r.width,r.height,r.depth,r.widthSegments,r.heightSegments,r.depthSegments)}}function sf(f){const r={};for(const s in f){r[s]={};for(const a in f[s]){const c=f[s][a];r[s][a]=c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture||c.isQuaternion)?c.clone():Array.isArray(c)?c.slice():c}}return r}function yt(f){const r={};for(let s=0;s<f.length;s++){const a=sf(f[s]);for(const c in a)r[c]=a[c]}return r}const zR={clone:sf,merge:yt};class An extends jr{constructor(r){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==r&&(void 0!==r.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(r))}copy(r){return super.copy(r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=sf(r.uniforms),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.extensions=Object.assign({},r.extensions),this.glslVersion=r.glslVersion,this}toJSON(r){const s=super.toJSON(r);s.glslVersion=this.glslVersion,s.uniforms={};for(const c in this.uniforms){const h=this.uniforms[c].value;s.uniforms[c]=h&&h.isTexture?{type:"t",value:h.toJSON(r).uuid}:h&&h.isColor?{type:"c",value:h.getHex()}:h&&h.isVector2?{type:"v2",value:h.toArray()}:h&&h.isVector3?{type:"v3",value:h.toArray()}:h&&h.isVector4?{type:"v4",value:h.toArray()}:h&&h.isMatrix3?{type:"m3",value:h.toArray()}:h&&h.isMatrix4?{type:"m4",value:h.toArray()}:{value:h}}Object.keys(this.defines).length>0&&(s.defines=this.defines),s.vertexShader=this.vertexShader,s.fragmentShader=this.fragmentShader;const a={};for(const c in this.extensions)!0===this.extensions[c]&&(a[c]=!0);return Object.keys(a).length>0&&(s.extensions=a),s}}An.prototype.isShaderMaterial=!0;class af extends Bt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt}copy(r,s){return super.copy(r,s),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this.projectionMatrixInverse.copy(r.projectionMatrixInverse),this}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return r.set(-s[8],-s[9],-s[10]).normalize()}updateMatrixWorld(r){super.updateMatrixWorld(r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(r,s){super.updateWorldMatrix(r,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}af.prototype.isCamera=!0;class Vi extends af{constructor(r=50,s=1,a=.1,c=2e3){super(),this.type="PerspectiveCamera",this.fov=r,this.zoom=1,this.near=a,this.far=c,this.focus=10,this.aspect=s,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(r,s){return super.copy(r,s),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=null===r.view?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this}setFocalLength(r){const s=.5*this.getFilmHeight()/r;this.fov=2*Ce*Math.atan(s),this.updateProjectionMatrix()}getFocalLength(){const r=Math.tan(.5*be*this.fov);return.5*this.getFilmHeight()/r}getEffectiveFOV(){return 2*Ce*Math.atan(Math.tan(.5*be*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(r,s,a,c,h,d){this.aspect=r/s,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=s,this.view.offsetX=a,this.view.offsetY=c,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=this.near;let s=r*Math.tan(.5*be*this.fov)/this.zoom,a=2*s,c=this.aspect*a,h=-.5*c;const d=this.view;if(null!==this.view&&this.view.enabled){const g=d.fullWidth,y=d.fullHeight;h+=d.offsetX*c/g,s-=d.offsetY*a/y,c*=d.width/g,a*=d.height/y}const m=this.filmOffset;0!==m&&(h+=r*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+c,s,s-a,r,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const s=super.toJSON(r);return s.object.fov=this.fov,s.object.zoom=this.zoom,s.object.near=this.near,s.object.far=this.far,s.object.focus=this.focus,s.object.aspect=this.aspect,null!==this.view&&(s.object.view=Object.assign({},this.view)),s.object.filmGauge=this.filmGauge,s.object.filmOffset=this.filmOffset,s}}Vi.prototype.isPerspectiveCamera=!0;class lf extends Bt{constructor(r,s,a){if(super(),this.type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=a;const c=new Vi(90,1,r,s);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new F(1,0,0)),this.add(c);const h=new Vi(90,1,r,s);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new F(-1,0,0)),this.add(h);const d=new Vi(90,1,r,s);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new F(0,1,0)),this.add(d);const m=new Vi(90,1,r,s);m.layers=this.layers,m.up.set(0,0,-1),m.lookAt(new F(0,-1,0)),this.add(m);const g=new Vi(90,1,r,s);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new F(0,0,1)),this.add(g);const y=new Vi(90,1,r,s);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new F(0,0,-1)),this.add(y)}update(r,s){null===this.parent&&this.updateMatrixWorld();const a=this.renderTarget,[c,h,d,m,g,y]=this.children,b=r.getRenderTarget(),w=r.outputEncoding,x=r.toneMapping,E=r.xr.enabled;r.outputEncoding=3e3,r.toneMapping=0,r.xr.enabled=!1;const T=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,r.setRenderTarget(a,0),r.render(s,c),r.setRenderTarget(a,1),r.render(s,h),r.setRenderTarget(a,2),r.render(s,d),r.setRenderTarget(a,3),r.render(s,m),r.setRenderTarget(a,4),r.render(s,g),a.texture.generateMipmaps=T,r.setRenderTarget(a,5),r.render(s,y),r.setRenderTarget(b),r.outputEncoding=w,r.toneMapping=x,r.xr.enabled=E,a.texture.needsPMREMUpdate=!0}}class fm extends q{constructor(r,s,a,c,h,d,m,g,y,b){super(r=void 0!==r?r:[],s=void 0!==s?s:301,a,c,h,d,m,g,y,b),this.flipY=!1}get images(){return this.image}set images(r){this.image=r}}fm.prototype.isCubeTexture=!0;class cf extends K{constructor(r,s={}){super(r,r,s);const a={width:r,height:r,depth:1};this.texture=new fm([a,a,a,a,a,a],s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:1006}fromEquirectangularTexture(r,s){this.texture.type=s.type,this.texture.encoding=s.encoding,this.texture.generateMipmaps=s.generateMipmaps,this.texture.minFilter=s.minFilter,this.texture.magFilter=s.magFilter;const a_uniforms={tEquirect:{value:null}},a_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",c=new ru(5,5,5),h=new An({name:"CubemapFromEquirect",uniforms:sf(a_uniforms),vertexShader:a_vertexShader,fragmentShader:a_fragmentShader,side:1,blending:0});h.uniforms.tEquirect.value=s;const d=new xt(c,h),m=s.minFilter;return 1008===s.minFilter&&(s.minFilter=1006),new lf(1,10,this).update(r,d),s.minFilter=m,d.geometry.dispose(),d.material.dispose(),this}clear(r,s,a,c){const h=r.getRenderTarget();for(let d=0;d<6;d++)r.setRenderTarget(this,d),r.clear(s,a,c);r.setRenderTarget(h)}}cf.prototype.isWebGLCubeRenderTarget=!0;const Ph=new F,W0=new F,zb=new vt;class yl{constructor(r=new F(1,0,0),s=0){this.normal=r,this.constant=s}set(r,s){return this.normal.copy(r),this.constant=s,this}setComponents(r,s,a,c){return this.normal.set(r,s,a),this.constant=c,this}setFromNormalAndCoplanarPoint(r,s){return this.normal.copy(r),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(r,s,a){const c=Ph.subVectors(a,s).cross(W0.subVectors(r,s)).normalize();return this.setFromNormalAndCoplanarPoint(c,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,s){return s.copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)}intersectLine(r,s){const a=r.delta(Ph),c=this.normal.dot(a);if(0===c)return 0===this.distanceToPoint(r.start)?s.copy(r.start):null;const h=-(r.start.dot(this.normal)+this.constant)/c;return h<0||h>1?null:s.copy(a).multiplyScalar(h).add(r.start)}intersectsLine(r){const s=this.distanceToPoint(r.start),a=this.distanceToPoint(r.end);return s<0&&a>0||a<0&&s>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,s){const a=s||zb.getNormalMatrix(r),c=this.coplanarPoint(Ph).applyMatrix4(r),h=this.normal.applyMatrix3(a).normalize();return this.constant=-c.dot(h),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return(new this.constructor).copy(this)}}yl.prototype.isPlane=!0;const Wt=new Jn,kh=new F;class pm{constructor(r=new yl,s=new yl,a=new yl,c=new yl,h=new yl,d=new yl){this.planes=[r,s,a,c,h,d]}set(r,s,a,c,h,d){const m=this.planes;return m[0].copy(r),m[1].copy(s),m[2].copy(a),m[3].copy(c),m[4].copy(h),m[5].copy(d),this}copy(r){const s=this.planes;for(let a=0;a<6;a++)s[a].copy(r.planes[a]);return this}setFromProjectionMatrix(r){const s=this.planes,a=r.elements,c=a[0],h=a[1],d=a[2],m=a[3],g=a[4],y=a[5],b=a[6],w=a[7],x=a[8],E=a[9],T=a[10],I=a[11],L=a[12],R=a[13],$=a[14],B=a[15];return s[0].setComponents(m-c,w-g,I-x,B-L).normalize(),s[1].setComponents(m+c,w+g,I+x,B+L).normalize(),s[2].setComponents(m+h,w+y,I+E,B+R).normalize(),s[3].setComponents(m-h,w-y,I-E,B-R).normalize(),s[4].setComponents(m-d,w-b,I-T,B-$).normalize(),s[5].setComponents(m+d,w+b,I+T,B+$).normalize(),this}intersectsObject(r){const s=r.geometry;return null===s.boundingSphere&&s.computeBoundingSphere(),Wt.copy(s.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(Wt)}intersectsSprite(r){return Wt.center.set(0,0,0),Wt.radius=.7071067811865476,Wt.applyMatrix4(r.matrixWorld),this.intersectsSphere(Wt)}intersectsSphere(r){const s=this.planes,a=r.center,c=-r.radius;for(let h=0;h<6;h++)if(s[h].distanceToPoint(a)<c)return!1;return!0}intersectsBox(r){const s=this.planes;for(let a=0;a<6;a++){const c=s[a];if(kh.x=c.normal.x>0?r.max.x:r.min.x,kh.y=c.normal.y>0?r.max.y:r.min.y,kh.z=c.normal.z>0?r.max.z:r.min.z,c.distanceToPoint(kh)<0)return!1}return!0}containsPoint(r){const s=this.planes;for(let a=0;a<6;a++)if(s[a].distanceToPoint(r)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function mo(){let f=null,r=!1,s=null,a=null;function c(h,d){s(h,d),a=f.requestAnimationFrame(c)}return{start:function(){!0!==r&&null!==s&&(a=f.requestAnimationFrame(c),r=!0)},stop:function(){f.cancelAnimationFrame(a),r=!1},setAnimationLoop:function(h){s=h},setContext:function(h){f=h}}}function jb(f,r){const s=r.isWebGL2,a=new WeakMap;return{get:function(c){return c.isInterleavedBufferAttribute&&(c=c.data),a.get(c)},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=a.get(c);h&&(f.deleteBuffer(h.buffer),a.delete(c))},update:function(c,h){if(c.isGLBufferAttribute){const m=a.get(c);return void((!m||m.version<c.version)&&a.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=a.get(c);void 0===d?a.set(c,function(m,g){const y=m.array,b=m.usage,w=f.createBuffer();let x;if(f.bindBuffer(g,w),f.bufferData(g,y,b),m.onUploadCallback(),y instanceof Float32Array)x=5126;else if(y instanceof Uint16Array)if(m.isFloat16BufferAttribute){if(!s)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");x=5131}else x=5123;else if(y instanceof Int16Array)x=5122;else if(y instanceof Uint32Array)x=5125;else if(y instanceof Int32Array)x=5124;else if(y instanceof Int8Array)x=5120;else if(y instanceof Uint8Array)x=5121;else{if(!(y instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);x=5121}return{buffer:w,type:x,bytesPerElement:y.BYTES_PER_ELEMENT,version:m.version}}(c,h)):d.version<c.version&&(function(m,g,y){const b=g.array,w=g.updateRange;f.bindBuffer(y,m),-1===w.count?f.bufferSubData(y,0,b):(s?f.bufferSubData(y,w.offset*b.BYTES_PER_ELEMENT,b,w.offset,w.count):f.bufferSubData(y,w.offset*b.BYTES_PER_ELEMENT,b.subarray(w.offset,w.offset+w.count)),w.count=-1)}(d.buffer,c,h),d.version=c.version)}}}class Nh extends Xr{constructor(r=1,s=1,a=1,c=1){super(),this.type="PlaneGeometry",this.parameters={width:r,height:s,widthSegments:a,heightSegments:c};const h=r/2,d=s/2,m=Math.floor(a),g=Math.floor(c),y=m+1,b=g+1,w=r/m,x=s/g,E=[],T=[],I=[],L=[];for(let R=0;R<b;R++){const $=R*x-d;for(let B=0;B<y;B++)T.push(B*w-h,-$,0),I.push(0,0,1),L.push(B/m),L.push(1-R/g)}for(let R=0;R<g;R++)for(let $=0;$<m;$++){const G=$+y*(R+1),z=$+1+y*(R+1),J=$+1+y*R;E.push($+y*R,G,J),E.push(G,z,J)}this.setIndex(E),this.setAttribute("position",new wn(T,3)),this.setAttribute("normal",new wn(I,3)),this.setAttribute("uv",new wn(L,2))}static fromJSON(r){return new Nh(r.width,r.height,r.widthSegments,r.heightSegments)}}const xn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},_t={common:{diffuse:{value:new D(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vt},uv2Transform:{value:new vt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new D(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new D(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vt}},sprite:{diffuse:{value:new D(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vt}}},_l={basic:{uniforms:yt([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.fog]),vertexShader:xn.meshbasic_vert,fragmentShader:xn.meshbasic_frag},lambert:{uniforms:yt([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.fog,_t.lights,{emissive:{value:new D(0)}}]),vertexShader:xn.meshlambert_vert,fragmentShader:xn.meshlambert_frag},phong:{uniforms:yt([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new D(0)},specular:{value:new D(1118481)},shininess:{value:30}}]),vertexShader:xn.meshphong_vert,fragmentShader:xn.meshphong_frag},standard:{uniforms:yt([_t.common,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.roughnessmap,_t.metalnessmap,_t.fog,_t.lights,{emissive:{value:new D(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},toon:{uniforms:yt([_t.common,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.gradientmap,_t.fog,_t.lights,{emissive:{value:new D(0)}}]),vertexShader:xn.meshtoon_vert,fragmentShader:xn.meshtoon_frag},matcap:{uniforms:yt([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,{matcap:{value:null}}]),vertexShader:xn.meshmatcap_vert,fragmentShader:xn.meshmatcap_frag},points:{uniforms:yt([_t.points,_t.fog]),vertexShader:xn.points_vert,fragmentShader:xn.points_frag},dashed:{uniforms:yt([_t.common,_t.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xn.linedashed_vert,fragmentShader:xn.linedashed_frag},depth:{uniforms:yt([_t.common,_t.displacementmap]),vertexShader:xn.depth_vert,fragmentShader:xn.depth_frag},normal:{uniforms:yt([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,{opacity:{value:1}}]),vertexShader:xn.meshnormal_vert,fragmentShader:xn.meshnormal_frag},sprite:{uniforms:yt([_t.sprite,_t.fog]),vertexShader:xn.sprite_vert,fragmentShader:xn.sprite_frag},background:{uniforms:{uvTransform:{value:new vt},t2D:{value:null}},vertexShader:xn.background_vert,fragmentShader:xn.background_frag},cube:{uniforms:yt([_t.envmap,{opacity:{value:1}}]),vertexShader:xn.cube_vert,fragmentShader:xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xn.equirect_vert,fragmentShader:xn.equirect_frag},distanceRGBA:{uniforms:yt([_t.common,_t.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xn.distanceRGBA_vert,fragmentShader:xn.distanceRGBA_frag},shadow:{uniforms:yt([_t.lights,_t.fog,{color:{value:new D(0)},opacity:{value:1}}]),vertexShader:xn.shadow_vert,fragmentShader:xn.shadow_frag}};function jR(f,r,s,a,c,h){const d=new D(0);let m,g,y=!0===c?0:1,b=null,w=0,x=null;function E(T,I){s.buffers.color.setClear(T.r,T.g,T.b,I,h)}return{getClearColor:function(){return d},setClearColor:function(T,I=1){d.set(T),y=I,E(d,y)},getClearAlpha:function(){return y},setClearAlpha:function(T){y=T,E(d,y)},render:function(T,I){let L=!1,R=!0===I.isScene?I.background:null;R&&R.isTexture&&(R=r.get(R));const $=f.xr,B=$.getSession&&$.getSession();B&&"additive"===B.environmentBlendMode&&(R=null),null===R?E(d,y):R&&R.isColor&&(E(R,1),L=!0),(f.autoClear||L)&&f.clear(f.autoClearColor,f.autoClearDepth,f.autoClearStencil),R&&(R.isCubeTexture||306===R.mapping)?(void 0===g&&(g=new xt(new ru(1,1,1),new An({name:"BackgroundCubeMaterial",uniforms:sf(_l.cube.uniforms),vertexShader:_l.cube.vertexShader,fragmentShader:_l.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(G,z,J){this.matrixWorld.copyPosition(J.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),g.material.uniforms.envMap.value=R,g.material.uniforms.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1,b===R&&w===R.version&&x===f.toneMapping||(g.material.needsUpdate=!0,b=R,w=R.version,x=f.toneMapping),T.unshift(g,g.geometry,g.material,0,0,null)):R&&R.isTexture&&(void 0===m&&(m=new xt(new Nh(2,2),new An({name:"BackgroundMaterial",uniforms:sf(_l.background.uniforms),vertexShader:_l.background.vertexShader,fragmentShader:_l.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(m)),m.material.uniforms.t2D.value=R,!0===R.matrixAutoUpdate&&R.updateMatrix(),m.material.uniforms.uvTransform.value.copy(R.matrix),b===R&&w===R.version&&x===f.toneMapping||(m.material.needsUpdate=!0,b=R,w=R.version,x=f.toneMapping),T.unshift(m,m.geometry,m.material,0,0,null))}}}function Zo(f,r,s,a){const c=f.getParameter(34921),h=a.isWebGL2?null:r.get("OES_vertex_array_object"),d=a.isWebGL2||null!==h,m={},g=E(null);let y=g,b=!1;function w(z){return a.isWebGL2?f.bindVertexArray(z):h.bindVertexArrayOES(z)}function x(z){return a.isWebGL2?f.deleteVertexArray(z):h.deleteVertexArrayOES(z)}function E(z){const J=[],te=[],le=[];for(let oe=0;oe<c;oe++)J[oe]=0,te[oe]=0,le[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:te,attributeDivisors:le,object:z,attributes:{},index:null}}function T(){const z=y.newAttributes;for(let J=0,te=z.length;J<te;J++)z[J]=0}function I(z){L(z,0)}function L(z,J){const le=y.enabledAttributes,oe=y.attributeDivisors;y.newAttributes[z]=1,0===le[z]&&(f.enableVertexAttribArray(z),le[z]=1),oe[z]!==J&&((a.isWebGL2?f:r.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,J),oe[z]=J)}function R(){const z=y.newAttributes,J=y.enabledAttributes;for(let te=0,le=J.length;te<le;te++)J[te]!==z[te]&&(f.disableVertexAttribArray(te),J[te]=0)}function $(z,J,te,le,oe,de){!0!==a.isWebGL2||5124!==te&&5125!==te?f.vertexAttribPointer(z,J,te,le,oe,de):f.vertexAttribIPointer(z,J,te,oe,de)}function B(){G(),b=!0,y!==g&&(y=g,w(y.object))}function G(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:function(z,J,te,le,oe){let de=!1;if(d){const we=function(ke,je,me){const Ve=!0===me.wireframe;let Ne=m[ke.id];void 0===Ne&&(Ne={},m[ke.id]=Ne);let tt=Ne[je.id];void 0===tt&&(tt={},Ne[je.id]=tt);let We=tt[Ve];return void 0===We&&(We=E(a.isWebGL2?f.createVertexArray():h.createVertexArrayOES()),tt[Ve]=We),We}(le,te,J);y!==we&&(y=we,w(y.object)),de=function(ke,je){const me=y.attributes,Ve=ke.attributes;let Ne=0;for(const tt in Ve){const We=me[tt],ze=Ve[tt];if(void 0===We||We.attribute!==ze||We.data!==ze.data)return!0;Ne++}return y.attributesNum!==Ne||y.index!==je}(le,oe),de&&function(ke,je){const me={},Ve=ke.attributes;let Ne=0;for(const tt in Ve){const We=Ve[tt],ze={};ze.attribute=We,We.data&&(ze.data=We.data),me[tt]=ze,Ne++}y.attributes=me,y.attributesNum=Ne,y.index=je}(le,oe)}else{const we=!0===J.wireframe;y.geometry===le.id&&y.program===te.id&&y.wireframe===we||(y.geometry=le.id,y.program=te.id,y.wireframe=we,de=!0)}!0===z.isInstancedMesh&&(de=!0),null!==oe&&s.update(oe,34963),(de||b)&&(b=!1,function(we,ke,je,me){if(!1===a.isWebGL2&&(we.isInstancedMesh||me.isInstancedBufferGeometry)&&null===r.get("ANGLE_instanced_arrays"))return;T();const Ve=me.attributes,Ne=je.getAttributes(),tt=ke.defaultAttributeValues;for(const We in Ne){const ze=Ne[We];if(ze.location>=0){let Oe=Ve[We];if(void 0===Oe&&("instanceMatrix"===We&&we.instanceMatrix&&(Oe=we.instanceMatrix),"instanceColor"===We&&we.instanceColor&&(Oe=we.instanceColor)),void 0!==Oe){const Ct=Oe.normalized,At=Oe.itemSize,Nt=s.get(Oe);if(void 0===Nt)continue;const Tt=Nt.buffer,Rn=Nt.type,se=Nt.bytesPerElement;if(Oe.isInterleavedBufferAttribute){const re=Oe.data,Pe=re.stride,_e=Oe.offset;if(re.isInstancedInterleavedBuffer){for(let ae=0;ae<ze.locationSize;ae++)L(ze.location+ae,re.meshPerAttribute);!0!==we.isInstancedMesh&&void 0===me._maxInstanceCount&&(me._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let ae=0;ae<ze.locationSize;ae++)I(ze.location+ae);f.bindBuffer(34962,Tt);for(let ae=0;ae<ze.locationSize;ae++)$(ze.location+ae,At/ze.locationSize,Rn,Ct,Pe*se,(_e+At/ze.locationSize*ae)*se)}else{if(Oe.isInstancedBufferAttribute){for(let re=0;re<ze.locationSize;re++)L(ze.location+re,Oe.meshPerAttribute);!0!==we.isInstancedMesh&&void 0===me._maxInstanceCount&&(me._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let re=0;re<ze.locationSize;re++)I(ze.location+re);f.bindBuffer(34962,Tt);for(let re=0;re<ze.locationSize;re++)$(ze.location+re,At/ze.locationSize,Rn,Ct,At*se,At/ze.locationSize*re*se)}}else if(void 0!==tt){const Ct=tt[We];if(void 0!==Ct)switch(Ct.length){case 2:f.vertexAttrib2fv(ze.location,Ct);break;case 3:f.vertexAttrib3fv(ze.location,Ct);break;case 4:f.vertexAttrib4fv(ze.location,Ct);break;default:f.vertexAttrib1fv(ze.location,Ct)}}}}R()}(z,J,te,le),null!==oe&&f.bindBuffer(34963,s.get(oe).buffer))},reset:B,resetDefaultState:G,dispose:function(){B();for(const z in m){const J=m[z];for(const te in J){const le=J[te];for(const oe in le)x(le[oe].object),delete le[oe];delete J[te]}delete m[z]}},releaseStatesOfGeometry:function(z){if(void 0===m[z.id])return;const J=m[z.id];for(const te in J){const le=J[te];for(const oe in le)x(le[oe].object),delete le[oe];delete J[te]}delete m[z.id]},releaseStatesOfProgram:function(z){for(const J in m){const te=m[J];if(void 0===te[z.id])continue;const le=te[z.id];for(const oe in le)x(le[oe].object),delete le[oe];delete te[z.id]}},initAttributes:T,enableAttribute:I,disableUnusedAttributes:R}}function Gr(f,r,s,a){const c=a.isWebGL2;let h;this.setMode=function(d){h=d},this.render=function(d,m){f.drawArrays(h,d,m),s.update(m,h,1)},this.renderInstances=function(d,m,g){if(0===g)return;let y,b;if(c)y=f,b="drawArraysInstanced";else if(y=r.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",null===y)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[b](h,d,m,g),s.update(m,h,g)}}function GR(f,r,s){let a;function c(G){if("highp"===G){if(f.getShaderPrecisionFormat(35633,36338).precision>0&&f.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";G="mediump"}return"mediump"===G&&f.getShaderPrecisionFormat(35633,36337).precision>0&&f.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const h=typeof WebGL2RenderingContext<"u"&&f instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&f instanceof WebGL2ComputeRenderingContext;let d=void 0!==s.precision?s.precision:"highp";const m=c(d);m!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",m,"instead."),d=m);const g=h||r.has("WEBGL_draw_buffers"),y=!0===s.logarithmicDepthBuffer,b=f.getParameter(34930),w=f.getParameter(35660),x=f.getParameter(3379),E=f.getParameter(34076),T=f.getParameter(34921),I=f.getParameter(36347),L=f.getParameter(36348),R=f.getParameter(36349),$=w>0,B=h||r.has("OES_texture_float");return{isWebGL2:h,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==a)return a;if(!0===r.has("EXT_texture_filter_anisotropic")){const G=r.get("EXT_texture_filter_anisotropic");a=f.getParameter(G.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:c,precision:d,logarithmicDepthBuffer:y,maxTextures:b,maxVertexTextures:w,maxTextureSize:x,maxCubemapSize:E,maxAttributes:T,maxVertexUniforms:I,maxVaryings:L,maxFragmentUniforms:R,vertexTextures:$,floatFragmentTextures:B,floatVertexTextures:$&&B,maxSamples:h?f.getParameter(36183):0}}function WR(f){const r=this;let s=null,a=0,c=!1,h=!1;const d=new yl,m=new vt,g={value:null,needsUpdate:!1};function y(){g.value!==s&&(g.value=s,g.needsUpdate=a>0),r.numPlanes=a,r.numIntersection=0}function b(w,x,E,T){const I=null!==w?w.length:0;let L=null;if(0!==I){if(L=g.value,!0!==T||null===L){const R=E+4*I,$=x.matrixWorldInverse;m.getNormalMatrix($),(null===L||L.length<R)&&(L=new Float32Array(R));for(let B=0,G=E;B!==I;++B,G+=4)d.copy(w[B]).applyMatrix4($,m),d.normal.toArray(L,G),L[G+3]=d.constant}g.value=L,g.needsUpdate=!0}return r.numPlanes=I,r.numIntersection=0,L}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(w,x,E){const T=0!==w.length||x||0!==a||c;return c=x,s=b(w,E,0),a=w.length,T},this.beginShadows=function(){h=!0,b(null)},this.endShadows=function(){h=!1,y()},this.setState=function(w,x,E){const T=w.clippingPlanes,I=w.clipIntersection,L=w.clipShadows,R=f.get(w);if(!c||null===T||0===T.length||h&&!L)h?b(null):y();else{const $=h?0:a,B=4*$;let G=R.clippingState||null;g.value=G,G=b(T,x,B,E);for(let z=0;z!==B;++z)G[z]=s[z];R.clippingState=G,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=$}}}function Lh(f){let r=new WeakMap;function s(c,h){return 303===h?c.mapping=301:304===h&&(c.mapping=302),c}function a(c){const h=c.target;h.removeEventListener("dispose",a);const d=r.get(h);void 0!==d&&(r.delete(h),d.dispose())}return{get:function(c){if(c&&c.isTexture&&!1===c.isRenderTargetTexture){const h=c.mapping;if(303===h||304===h){if(r.has(c))return s(r.get(c).texture,c.mapping);{const d=c.image;if(d&&d.height>0){const m=new cf(d.height/2);return m.fromEquirectangularTexture(f,c),r.set(c,m),c.addEventListener("dispose",a),s(m.texture,c.mapping)}return null}}}return c},dispose:function(){r=new WeakMap}}}_l.physical={uniforms:yt([_l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Me(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new D(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new D(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new D(1,1,1)},specularColorMap:{value:null}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag};class zn extends af{constructor(r=-1,s=1,a=1,c=-1,h=.1,d=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r,this.right=s,this.top=a,this.bottom=c,this.near=h,this.far=d,this.updateProjectionMatrix()}copy(r,s){return super.copy(r,s),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=null===r.view?null:Object.assign({},r.view),this}setViewOffset(r,s,a,c,h,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=s,this.view.offsetX=a,this.view.offsetY=c,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=(this.right-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,c=(this.top+this.bottom)/2;let h=a-r,d=a+r,m=c+s,g=c-s;if(null!==this.view&&this.view.enabled){const y=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=y*this.view.offsetX,d=h+y*this.view.width,m-=b*this.view.offsetY,g=m-b*this.view.height}this.projectionMatrix.makeOrthographic(h,d,m,g,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const s=super.toJSON(r);return s.object.zoom=this.zoom,s.object.left=this.left,s.object.right=this.right,s.object.top=this.top,s.object.bottom=this.bottom,s.object.near=this.near,s.object.far=this.far,null!==this.view&&(s.object.view=Object.assign({},this.view)),s}}zn.prototype.isOrthographicCamera=!0;const uf=[.125,.215,.35,.446,.526,.582],hf=new zn,mm=new D;let gm=null;const Rs=(1+Math.sqrt(5))/2,Pa=1/Rs,Gb=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,Rs,Pa),new F(0,Rs,-Pa),new F(Pa,0,Rs),new F(-Pa,0,Rs),new F(Rs,Pa,0),new F(-Rs,Pa,0)];class go{constructor(r){this._renderer=r,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(r,s=0,a=.1,c=100){gm=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(r,a,c,h),s>0&&this._blur(h,0,0,s),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(r,s=null){return this._fromTexture(r,s)}fromCubemap(r,s=null){return this._fromTexture(r,s)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=qb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=q0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(r){this._lodMax=Math.floor(Math.log2(r)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let r=0;r<this._lodPlanes.length;r++)this._lodPlanes[r].dispose()}_cleanup(r){this._renderer.setRenderTarget(gm),r.scissorTest=!1,df(r,0,0,r.width,r.height)}_fromTexture(r,s){this._setSize(301===r.mapping||302===r.mapping?0===r.image.length?16:r.image[0].width||r.image[0].image.width:r.image.width/4),gm=this._renderer.getRenderTarget();const a=s||this._allocateTargets();return this._textureToCubeUV(r,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(){const r=3*Math.max(this._cubeSize,112),s=4*this._cubeSize-32,a={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},c=Wb(r,s,a);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==r){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Wb(r,s,a);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(d){const m=[],g=[],y=[];let b=d;const w=d-4+1+uf.length;for(let x=0;x<w;x++){const E=Math.pow(2,b);g.push(E);let T=1/E;x>d-4?T=uf[x-d+4-1]:0===x&&(T=0),y.push(T);const I=1/(E-1),L=-I/2,R=1+I/2,$=[L,L,R,L,R,R,L,L,R,R,L,R],B=6,G=6,z=3,J=2,te=1,le=new Float32Array(z*G*B),oe=new Float32Array(J*G*B),de=new Float32Array(te*G*B);for(let ke=0;ke<B;ke++){const je=ke%3*2/3-1,me=ke>2?0:-1;le.set([je,me,0,je+2/3,me,0,je+2/3,me+1,0,je,me,0,je+2/3,me+1,0,je,me+1,0],z*G*ke),oe.set($,J*G*ke),de.set([ke,ke,ke,ke,ke,ke],te*G*ke)}const we=new Xr;we.setAttribute("position",new jt(le,z)),we.setAttribute("uv",new jt(oe,J)),we.setAttribute("faceIndex",new jt(de,te)),m.push(we),b>4&&b--}return{lodPlanes:m,sizeLods:g,sigmas:y}}(h)),this._blurMaterial=function(d,m,g){const y=new Float32Array(20),b=new F(0,1,0);return new An({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/m,CUBEUV_TEXEL_HEIGHT:1/g,CUBEUV_MAX_MIP:`${d}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:y},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:b}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(h,r,s)}return c}_compileMaterial(r){const s=new xt(this._lodPlanes[0],r);this._renderer.compile(s,hf)}_sceneToCubeUV(r,s,a,c){const h=new Vi(90,1,s,a),d=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,b=g.toneMapping;g.getClearColor(mm),g.toneMapping=0,g.autoClear=!1;const w=new Bi({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),x=new xt(new ru,w);let E=!1;const T=r.background;T?T.isColor&&(w.color.copy(T),r.background=null,E=!0):(w.color.copy(mm),E=!0);for(let I=0;I<6;I++){const L=I%3;0===L?(h.up.set(0,d[I],0),h.lookAt(m[I],0,0)):1===L?(h.up.set(0,0,d[I]),h.lookAt(0,m[I],0)):(h.up.set(0,d[I],0),h.lookAt(0,0,m[I]));const R=this._cubeSize;df(c,L*R,I>2?R:0,R,R),g.setRenderTarget(c),E&&g.render(x,h),g.render(r,h)}x.geometry.dispose(),x.material.dispose(),g.toneMapping=b,g.autoClear=y,r.background=T}_textureToCubeUV(r,s){const a=this._renderer,c=301===r.mapping||302===r.mapping;c?(null===this._cubemapMaterial&&(this._cubemapMaterial=qb()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===r.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=q0());const h=c?this._cubemapMaterial:this._equirectMaterial,d=new xt(this._lodPlanes[0],h);h.uniforms.envMap.value=r;const m=this._cubeSize;df(s,0,0,3*m,2*m),a.setRenderTarget(s),a.render(d,hf)}_applyPMREM(r){const s=this._renderer,a=s.autoClear;s.autoClear=!1;for(let c=1;c<this._lodPlanes.length;c++){const h=Math.sqrt(this._sigmas[c]*this._sigmas[c]-this._sigmas[c-1]*this._sigmas[c-1]);this._blur(r,c-1,c,h,Gb[(c-1)%Gb.length])}s.autoClear=a}_blur(r,s,a,c,h){const d=this._pingPongRenderTarget;this._halfBlur(r,d,s,a,c,"latitudinal",h),this._halfBlur(d,r,a,a,c,"longitudinal",h)}_halfBlur(r,s,a,c,h,d,m){const g=this._renderer,y=this._blurMaterial;"latitudinal"!==d&&"longitudinal"!==d&&console.error("blur direction must be either latitudinal or longitudinal!");const b=new xt(this._lodPlanes[c],y),w=y.uniforms,x=this._sizeLods[a]-1,E=isFinite(h)?Math.PI/(2*x):2*Math.PI/39,T=h/E,I=isFinite(h)?1+Math.floor(3*T):20;I>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${I} samples when the maximum is set to 20`);const L=[];let R=0;for(let G=0;G<20;++G){const z=G/T,J=Math.exp(-z*z/2);L.push(J),0===G?R+=J:G<I&&(R+=2*J)}for(let G=0;G<L.length;G++)L[G]=L[G]/R;w.envMap.value=r.texture,w.samples.value=I,w.weights.value=L,w.latitudinal.value="latitudinal"===d,m&&(w.poleAxis.value=m);const{_lodMax:$}=this;w.dTheta.value=E,w.mipInt.value=$-a;const B=this._sizeLods[c];df(s,3*B*(c>$-4?c-$+4:0),4*(this._cubeSize-B),3*B,2*B),g.setRenderTarget(s),g.render(b,hf)}}function Wb(f,r,s){const a=new K(f,r,s);return a.texture.mapping=306,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function df(f,r,s,a,c){f.viewport.set(r,s,a,c),f.scissor.set(r,s,a,c)}function q0(){return new An({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function qb(){return new An({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mS(f){let r=new WeakMap,s=null;function a(c){const h=c.target;h.removeEventListener("dispose",a);const d=r.get(h);void 0!==d&&(r.delete(h),d.dispose())}return{get:function(c){if(c&&c.isTexture){const h=c.mapping,d=303===h||304===h,m=301===h||302===h;if(d||m){if(c.isRenderTargetTexture&&!0===c.needsPMREMUpdate){c.needsPMREMUpdate=!1;let g=r.get(c);return null===s&&(s=new go(f)),g=d?s.fromEquirectangular(c,g):s.fromCubemap(c,g),r.set(c,g),g.texture}if(r.has(c))return r.get(c).texture;{const g=c.image;if(d&&g&&g.height>0||m&&g&&function(y){let b=0;for(let x=0;x<6;x++)void 0!==y[x]&&b++;return 6===b}(g)){null===s&&(s=new go(f));const y=d?s.fromEquirectangular(c):s.fromCubemap(c);return r.set(c,y),c.addEventListener("dispose",a),y.texture}return null}}}return c},dispose:function(){r=new WeakMap,null!==s&&(s.dispose(),s=null)}}}function $b(f){const r={};function s(a){if(void 0!==r[a])return r[a];let c;switch(a){case"WEBGL_depth_texture":c=f.getExtension("WEBGL_depth_texture")||f.getExtension("MOZ_WEBGL_depth_texture")||f.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=f.getExtension("WEBGL_compressed_texture_s3tc")||f.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||f.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=f.getExtension("WEBGL_compressed_texture_pvrtc")||f.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=f.getExtension(a)}return r[a]=c,c}return{has:function(a){return null!==s(a)},init:function(a){a.isWebGL2?s("EXT_color_buffer_float"):(s("WEBGL_depth_texture"),s("OES_texture_float"),s("OES_texture_half_float"),s("OES_texture_half_float_linear"),s("OES_standard_derivatives"),s("OES_element_index_uint"),s("OES_vertex_array_object"),s("ANGLE_instanced_arrays")),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture")},get:function(a){const c=s(a);return null===c&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),c}}}function qt(f,r,s,a){const c={},h=new WeakMap;function d(g){const y=g.target;null!==y.index&&r.remove(y.index);for(const w in y.attributes)r.remove(y.attributes[w]);y.removeEventListener("dispose",d),delete c[y.id];const b=h.get(y);b&&(r.remove(b),h.delete(y)),a.releaseStatesOfGeometry(y),!0===y.isInstancedBufferGeometry&&delete y._maxInstanceCount,s.memory.geometries--}function m(g){const y=[],b=g.index,w=g.attributes.position;let x=0;if(null!==b){const I=b.array;x=b.version;for(let L=0,R=I.length;L<R;L+=3){const $=I[L+0],B=I[L+1],G=I[L+2];y.push($,B,B,G,G,$)}}else{x=w.version;for(let L=0,R=w.array.length/3-1;L<R;L+=3){const $=L+0,B=L+1,G=L+2;y.push($,B,B,G,G,$)}}const E=new(Ht(y)?Dh:ac)(y,1);E.version=x;const T=h.get(g);T&&r.remove(T),h.set(g,E)}return{get:function(g,y){return!0===c[y.id]||(y.addEventListener("dispose",d),c[y.id]=!0,s.memory.geometries++),y},update:function(g){const y=g.attributes;for(const w in y)r.update(y[w],34962);const b=g.morphAttributes;for(const w in b){const x=b[w];for(let E=0,T=x.length;E<T;E++)r.update(x[E],34962)}},getWireframeAttribute:function(g){const y=h.get(g);if(y){const b=g.index;null!==b&&y.version<b.version&&m(g)}else m(g);return h.get(g)}}}function Js(f,r,s,a){const c=a.isWebGL2;let h,d,m;this.setMode=function(g){h=g},this.setIndex=function(g){d=g.type,m=g.bytesPerElement},this.render=function(g,y){f.drawElements(h,y,d,g*m),s.update(y,h,1)},this.renderInstances=function(g,y,b){if(0===b)return;let w,x;if(c)w=f,x="drawElementsInstanced";else if(w=r.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",null===w)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");w[x](h,y,d,g*m,b),s.update(y,h,b)}}function kr(f){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(s,a,c){switch(r.calls++,a){case 4:r.triangles+=c*(s/3);break;case 1:r.lines+=c*(s/2);break;case 3:r.lines+=c*(s-1);break;case 2:r.lines+=c*s;break;case 0:r.points+=c*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}function Is(f,r){return f[0]-r[0]}function Ps(f,r){return Math.abs(r[1])-Math.abs(f[1])}function ks(f,r){let s=1;const a=r.isInterleavedBufferAttribute?r.data.array:r.array;a instanceof Int8Array?s=127:a instanceof Int16Array?s=32767:a instanceof Int32Array?s=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",a),f.divideScalar(s)}function Co(f,r,s){const a={},c=new Float32Array(8),h=new WeakMap,d=new k,m=[];for(let g=0;g<8;g++)m[g]=[g,0];return{update:function(g,y,b,w){const x=g.morphTargetInfluences;if(!0===r.isWebGL2){const E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,T=void 0!==E?E.length:0;let I=h.get(y);if(void 0===I||I.count!==T){void 0!==I&&I.texture.dispose();const $=void 0!==y.morphAttributes.position,B=void 0!==y.morphAttributes.normal,G=void 0!==y.morphAttributes.color,z=y.morphAttributes.position||[],J=y.morphAttributes.normal||[],te=y.morphAttributes.color||[];let le=0;!0===$&&(le=1),!0===B&&(le=2),!0===G&&(le=3);let oe=y.attributes.position.count*le,de=1;oe>r.maxTextureSize&&(de=Math.ceil(oe/r.maxTextureSize),oe=r.maxTextureSize);const we=new Float32Array(oe*de*4*T),ke=new rt(we,oe,de,T);ke.type=1015,ke.needsUpdate=!0;const je=4*le;for(let me=0;me<T;me++){const Ve=z[me],Ne=J[me],tt=te[me],We=oe*de*4*me;for(let ze=0;ze<Ve.count;ze++){const Oe=ze*je;!0===$&&(d.fromBufferAttribute(Ve,ze),!0===Ve.normalized&&ks(d,Ve),we[We+Oe+0]=d.x,we[We+Oe+1]=d.y,we[We+Oe+2]=d.z,we[We+Oe+3]=0),!0===B&&(d.fromBufferAttribute(Ne,ze),!0===Ne.normalized&&ks(d,Ne),we[We+Oe+4]=d.x,we[We+Oe+5]=d.y,we[We+Oe+6]=d.z,we[We+Oe+7]=0),!0===G&&(d.fromBufferAttribute(tt,ze),!0===tt.normalized&&ks(d,tt),we[We+Oe+8]=d.x,we[We+Oe+9]=d.y,we[We+Oe+10]=d.z,we[We+Oe+11]=4===tt.itemSize?d.w:1)}}I={count:T,texture:ke,size:new Me(oe,de)},h.set(y,I),y.addEventListener("dispose",function me(){ke.dispose(),h.delete(y),y.removeEventListener("dispose",me)})}let L=0;for(let $=0;$<x.length;$++)L+=x[$];const R=y.morphTargetsRelative?1:1-L;w.getUniforms().setValue(f,"morphTargetBaseInfluence",R),w.getUniforms().setValue(f,"morphTargetInfluences",x),w.getUniforms().setValue(f,"morphTargetsTexture",I.texture,s),w.getUniforms().setValue(f,"morphTargetsTextureSize",I.size)}else{const E=void 0===x?0:x.length;let T=a[y.id];if(void 0===T||T.length!==E){T=[];for(let B=0;B<E;B++)T[B]=[B,0];a[y.id]=T}for(let B=0;B<E;B++){const G=T[B];G[0]=B,G[1]=x[B]}T.sort(Ps);for(let B=0;B<8;B++)B<E&&T[B][1]?(m[B][0]=T[B][0],m[B][1]=T[B][1]):(m[B][0]=Number.MAX_SAFE_INTEGER,m[B][1]=0);m.sort(Is);const I=y.morphAttributes.position,L=y.morphAttributes.normal;let R=0;for(let B=0;B<8;B++){const G=m[B],z=G[0],J=G[1];z!==Number.MAX_SAFE_INTEGER&&J?(I&&y.getAttribute("morphTarget"+B)!==I[z]&&y.setAttribute("morphTarget"+B,I[z]),L&&y.getAttribute("morphNormal"+B)!==L[z]&&y.setAttribute("morphNormal"+B,L[z]),c[B]=J,R+=J):(I&&!0===y.hasAttribute("morphTarget"+B)&&y.deleteAttribute("morphTarget"+B),L&&!0===y.hasAttribute("morphNormal"+B)&&y.deleteAttribute("morphNormal"+B),c[B]=0)}const $=y.morphTargetsRelative?1:1-R;w.getUniforms().setValue(f,"morphTargetBaseInfluence",$),w.getUniforms().setValue(f,"morphTargetInfluences",c)}}}}function kt(f,r,s,a){let c=new WeakMap;function h(d){const m=d.target;m.removeEventListener("dispose",h),s.remove(m.instanceMatrix),null!==m.instanceColor&&s.remove(m.instanceColor)}return{update:function(d){const m=a.render.frame,y=r.get(d,d.geometry);return c.get(y)!==m&&(r.update(y),c.set(y,m)),d.isInstancedMesh&&(!1===d.hasEventListener("dispose",h)&&d.addEventListener("dispose",h),s.update(d.instanceMatrix,34962),null!==d.instanceColor&&s.update(d.instanceColor,34962)),y},dispose:function(){c=new WeakMap}}}const Cn=new q,ii=new rt,Qs=new it,cc=new fm,Ui=[],uc=[],hi=new Float32Array(16),Oh=new Float32Array(9),iu=new Float32Array(4);function _n(f,r,s){const a=f[0];if(a<=0||a>0)return f;const c=r*s;let h=Ui[c];if(void 0===h&&(h=new Float32Array(c),Ui[c]=h),0!==r){a.toArray(h,0);for(let d=1,m=0;d!==r;++d)m+=s,f[d].toArray(h,m)}return h}function qi(f,r){if(f.length!==r.length)return!1;for(let s=0,a=f.length;s<a;s++)if(f[s]!==r[s])return!1;return!0}function yi(f,r){for(let s=0,a=r.length;s<a;s++)f[s]=r[s]}function Fh(f,r){let s=uc[r];void 0===s&&(s=new Int32Array(r),uc[r]=s);for(let a=0;a!==r;++a)s[a]=f.allocateTextureUnit();return s}function su(f,r){const s=this.cache;s[0]!==r&&(f.uniform1f(this.addr,r),s[0]=r)}function vs(f,r){const s=this.cache;if(void 0!==r.x)s[0]===r.x&&s[1]===r.y||(f.uniform2f(this.addr,r.x,r.y),s[0]=r.x,s[1]=r.y);else{if(qi(s,r))return;f.uniform2fv(this.addr,r),yi(s,r)}}function ff(f,r){const s=this.cache;if(void 0!==r.x)s[0]===r.x&&s[1]===r.y&&s[2]===r.z||(f.uniform3f(this.addr,r.x,r.y,r.z),s[0]=r.x,s[1]=r.y,s[2]=r.z);else if(void 0!==r.r)s[0]===r.r&&s[1]===r.g&&s[2]===r.b||(f.uniform3f(this.addr,r.r,r.g,r.b),s[0]=r.r,s[1]=r.g,s[2]=r.b);else{if(qi(s,r))return;f.uniform3fv(this.addr,r),yi(s,r)}}function Bh(f,r){const s=this.cache;if(void 0!==r.x)s[0]===r.x&&s[1]===r.y&&s[2]===r.z&&s[3]===r.w||(f.uniform4f(this.addr,r.x,r.y,r.z,r.w),s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=r.w);else{if(qi(s,r))return;f.uniform4fv(this.addr,r),yi(s,r)}}function Jo(f,r){const s=this.cache,a=r.elements;if(void 0===a){if(qi(s,r))return;f.uniformMatrix2fv(this.addr,!1,r),yi(s,r)}else{if(qi(s,a))return;iu.set(a),f.uniformMatrix2fv(this.addr,!1,iu),yi(s,a)}}function Vh(f,r){const s=this.cache,a=r.elements;if(void 0===a){if(qi(s,r))return;f.uniformMatrix3fv(this.addr,!1,r),yi(s,r)}else{if(qi(s,a))return;Oh.set(a),f.uniformMatrix3fv(this.addr,!1,Oh),yi(s,a)}}function Xb(f,r){const s=this.cache,a=r.elements;if(void 0===a){if(qi(s,r))return;f.uniformMatrix4fv(this.addr,!1,r),yi(s,r)}else{if(qi(s,a))return;hi.set(a),f.uniformMatrix4fv(this.addr,!1,hi),yi(s,a)}}function Zr(f,r){const s=this.cache;s[0]!==r&&(f.uniform1i(this.addr,r),s[0]=r)}function gS(f,r){const s=this.cache;qi(s,r)||(f.uniform2iv(this.addr,r),yi(s,r))}function vS(f,r){const s=this.cache;qi(s,r)||(f.uniform3iv(this.addr,r),yi(s,r))}function vm(f,r){const s=this.cache;qi(s,r)||(f.uniform4iv(this.addr,r),yi(s,r))}function $0(f,r){const s=this.cache;s[0]!==r&&(f.uniform1ui(this.addr,r),s[0]=r)}function pf(f,r){const s=this.cache;qi(s,r)||(f.uniform2uiv(this.addr,r),yi(s,r))}function ym(f,r){const s=this.cache;qi(s,r)||(f.uniform3uiv(this.addr,r),yi(s,r))}function ou(f,r){const s=this.cache;qi(s,r)||(f.uniform4uiv(this.addr,r),yi(s,r))}function ys(f,r,s){const a=this.cache,c=s.allocateTextureUnit();a[0]!==c&&(f.uniform1i(this.addr,c),a[0]=c),s.setTexture2D(r||Cn,c)}function yS(f,r,s){const a=this.cache,c=s.allocateTextureUnit();a[0]!==c&&(f.uniform1i(this.addr,c),a[0]=c),s.setTexture3D(r||Qs,c)}function eo(f,r,s){const a=this.cache,c=s.allocateTextureUnit();a[0]!==c&&(f.uniform1i(this.addr,c),a[0]=c),s.setTextureCube(r||cc,c)}function Qo(f,r,s){const a=this.cache,c=s.allocateTextureUnit();a[0]!==c&&(f.uniform1i(this.addr,c),a[0]=c),s.setTexture2DArray(r||ii,c)}function X0(f,r){f.uniform1fv(this.addr,r)}function _m(f,r){const s=_n(r,this.size,2);f.uniform2fv(this.addr,s)}function bm(f,r){const s=_n(r,this.size,3);f.uniform3fv(this.addr,s)}function ea(f,r){const s=_n(r,this.size,4);f.uniform4fv(this.addr,s)}function _S(f,r){const s=_n(r,this.size,4);f.uniformMatrix2fv(this.addr,!1,s)}function qR(f,r){const s=_n(r,this.size,9);f.uniformMatrix3fv(this.addr,!1,s)}function bS(f,r){const s=_n(r,this.size,16);f.uniformMatrix4fv(this.addr,!1,s)}function wS(f,r){f.uniform1iv(this.addr,r)}function $R(f,r){f.uniform2iv(this.addr,r)}function XR(f,r){f.uniform3iv(this.addr,r)}function KR(f,r){f.uniform4iv(this.addr,r)}function YR(f,r){f.uniform1uiv(this.addr,r)}function ZR(f,r){f.uniform2uiv(this.addr,r)}function JR(f,r){f.uniform3uiv(this.addr,r)}function QR(f,r){f.uniform4uiv(this.addr,r)}function eI(f,r,s){const a=r.length,c=Fh(s,a);f.uniform1iv(this.addr,c);for(let h=0;h!==a;++h)s.setTexture2D(r[h]||Cn,c[h])}function tI(f,r,s){const a=r.length,c=Fh(s,a);f.uniform1iv(this.addr,c);for(let h=0;h!==a;++h)s.setTexture3D(r[h]||Qs,c[h])}function nI(f,r,s){const a=r.length,c=Fh(s,a);f.uniform1iv(this.addr,c);for(let h=0;h!==a;++h)s.setTextureCube(r[h]||cc,c[h])}function rI(f,r,s){const a=r.length,c=Fh(s,a);f.uniform1iv(this.addr,c);for(let h=0;h!==a;++h)s.setTexture2DArray(r[h]||ii,c[h])}function iI(f,r,s){this.id=f,this.addr=s,this.cache=[],this.setValue=function(a){switch(a){case 5126:return su;case 35664:return vs;case 35665:return ff;case 35666:return Bh;case 35674:return Jo;case 35675:return Vh;case 35676:return Xb;case 5124:case 35670:return Zr;case 35667:case 35671:return gS;case 35668:case 35672:return vS;case 35669:case 35673:return vm;case 5125:return $0;case 36294:return pf;case 36295:return ym;case 36296:return ou;case 35678:case 36198:case 36298:case 36306:case 35682:return ys;case 35679:case 36299:case 36307:return yS;case 35680:case 36300:case 36308:case 36293:return eo;case 36289:case 36303:case 36311:case 36292:return Qo}}(r.type)}function xS(f,r,s){this.id=f,this.addr=s,this.cache=[],this.size=r.size,this.setValue=function(a){switch(a){case 5126:return X0;case 35664:return _m;case 35665:return bm;case 35666:return ea;case 35674:return _S;case 35675:return qR;case 35676:return bS;case 5124:case 35670:return wS;case 35667:case 35671:return $R;case 35668:case 35672:return XR;case 35669:case 35673:return KR;case 5125:return YR;case 36294:return ZR;case 36295:return JR;case 36296:return QR;case 35678:case 36198:case 36298:case 36306:case 35682:return eI;case 35679:case 36299:case 36307:return tI;case 35680:case 36300:case 36308:case 36293:return nI;case 36289:case 36303:case 36311:case 36292:return rI}}(r.type)}function MS(f){this.id=f,this.seq=[],this.map={}}xS.prototype.updateCache=function(f){const r=this.cache;f instanceof Float32Array&&r.length!==f.length&&(this.cache=new Float32Array(f.length)),yi(r,f)},MS.prototype.setValue=function(f,r,s){const a=this.seq;for(let c=0,h=a.length;c!==h;++c){const d=a[c];d.setValue(f,r[d.id],s)}};const wm=/(\w+)(\])?(\[|\.)?/g;function xm(f,r){f.seq.push(r),f.map[r.id]=r}function sI(f,r,s){const a=f.name,c=a.length;for(wm.lastIndex=0;;){const h=wm.exec(a),d=wm.lastIndex;let m=h[1];const y=h[3];if("]"===h[2]&&(m|=0),void 0===y||"["===y&&d+2===c){xm(s,void 0===y?new iI(m,f,r):new xS(m,f,r));break}{let b=s.map[m];void 0===b&&(b=new MS(m),xm(s,b)),s=b}}}function au(f,r){this.seq=[],this.map={};const s=f.getProgramParameter(r,35718);for(let a=0;a<s;++a){const c=f.getActiveUniform(r,a);sI(c,f.getUniformLocation(r,c.name),this)}}function ES(f,r,s){const a=f.createShader(r);return f.shaderSource(a,s),f.compileShader(a),a}au.prototype.setValue=function(f,r,s,a){const c=this.map[r];void 0!==c&&c.setValue(f,s,a)},au.prototype.setOptional=function(f,r,s){const a=r[s];void 0!==a&&this.setValue(f,s,a)},au.upload=function(f,r,s,a){for(let c=0,h=r.length;c!==h;++c){const d=r[c],m=s[d.id];!1!==m.needsUpdate&&d.setValue(f,m.value,a)}},au.seqWithValue=function(f,r){const s=[];for(let a=0,c=f.length;a!==c;++a){const h=f[a];h.id in r&&s.push(h)}return s};let lu=0;function Kb(f,r,s){const a=f.getShaderParameter(r,35713),c=f.getShaderInfoLog(r).trim();if(a&&""===c)return"";const h=parseInt(/ERROR: 0:(\d+)/.exec(c)[1]);return s.toUpperCase()+"\n\n"+c+"\n\n"+function(d,m){const g=d.split("\n"),y=[],b=Math.max(m-6,0),w=Math.min(m+6,g.length);for(let x=b;x<w;x++)y.push(x+1+": "+g[x]);return y.join("\n")}(f.getShaderSource(r),h)}function vo(f,r){const s=function(a){switch(a){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",a),["Linear","( value )"]}}(r);return"vec4 "+f+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function Yb(f,r){let s;switch(r){case 1:s="Linear";break;case 2:s="Reinhard";break;case 3:s="OptimizedCineon";break;case 4:s="ACESFilmic";break;case 5:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),s="Linear"}return"vec3 "+f+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function mf(f){return""!==f}function Zb(f,r){return f.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function K0(f,r){return f.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}const Jb=/^[ \t]*#include +<([\w\d./]+)>/gm;function Y0(f){return f.replace(Jb,Z0)}function Z0(f,r){const s=xn[r];if(void 0===s)throw new Error("Can not resolve #include <"+r+">");return Y0(s)}const SS=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ao=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Mm(f){return f.replace(Ao,Em).replace(SS,CS)}function CS(f,r,s,a){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Em(0,r,s,a)}function Em(f,r,s,a){let c="";for(let h=parseInt(r);h<parseInt(s);h++)c+=a.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return c}function Qb(f){let r="precision "+f.precision+" float;\nprecision "+f.precision+" int;";return"highp"===f.precision?r+="\n#define HIGH_PRECISION":"mediump"===f.precision?r+="\n#define MEDIUM_PRECISION":"lowp"===f.precision&&(r+="\n#define LOW_PRECISION"),r}function oI(f,r,s,a){const c=f.getContext(),h=s.defines;let d=s.vertexShader,m=s.fragmentShader;const g=function(le){let oe="SHADOWMAP_TYPE_BASIC";return 1===le.shadowMapType?oe="SHADOWMAP_TYPE_PCF":2===le.shadowMapType?oe="SHADOWMAP_TYPE_PCF_SOFT":3===le.shadowMapType&&(oe="SHADOWMAP_TYPE_VSM"),oe}(s),y=function(le){let oe="ENVMAP_TYPE_CUBE";if(le.envMap)switch(le.envMapMode){case 301:case 302:oe="ENVMAP_TYPE_CUBE";break;case 306:oe="ENVMAP_TYPE_CUBE_UV"}return oe}(s),b=function(le){let oe="ENVMAP_MODE_REFLECTION";return le.envMap&&302===le.envMapMode&&(oe="ENVMAP_MODE_REFRACTION"),oe}(s),w=function(le){let oe="ENVMAP_BLENDING_NONE";if(le.envMap)switch(le.combine){case 0:oe="ENVMAP_BLENDING_MULTIPLY";break;case 1:oe="ENVMAP_BLENDING_MIX";break;case 2:oe="ENVMAP_BLENDING_ADD"}return oe}(s),x=function(le){const oe=le.envMapCubeUVHeight;if(null===oe)return null;const de=Math.log2(oe/32+1)+3,we=1/oe;return{texelWidth:1/(3*Math.max(Math.pow(2,de),112)),texelHeight:we,maxMip:de}}(s),E=s.isWebGL2?"":[(le=s).extensionDerivatives||le.envMapCubeUVHeight||le.bumpMap||le.tangentSpaceNormalMap||le.clearcoatNormalMap||le.flatShading||"physical"===le.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(le.extensionFragDepth||le.logarithmicDepthBuffer)&&le.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",le.extensionDrawBuffers&&le.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(le.extensionShaderTextureLOD||le.envMap||le.transmission)&&le.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(mf).join("\n"),T=function(le){const oe=[];for(const de in le){const we=le[de];!1!==we&&oe.push("#define "+de+" "+we)}return oe.join("\n")}(h),I=c.createProgram();var le;let L,R,$=s.glslVersion?"#version "+s.glslVersion+"\n":"";s.isRawShaderMaterial?(L=[T].filter(mf).join("\n"),L.length>0&&(L+="\n"),R=[E,T].filter(mf).join("\n"),R.length>0&&(R+="\n")):(L=[Qb(s),"#define SHADER_NAME "+s.shaderName,T,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+b:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.morphColors&&s.isWebGL2?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+g:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(mf).join("\n"),R=[E,Qb(s),"#define SHADER_NAME "+s.shaderName,T,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+y:"",s.envMap?"#define "+b:"",s.envMap?"#define "+w:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+g:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==s.toneMapping?"#define TONE_MAPPING":"",0!==s.toneMapping?xn.tonemapping_pars_fragment:"",0!==s.toneMapping?Yb("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",xn.encodings_pars_fragment,vo("linearToOutputTexel",s.outputEncoding),s.depthPacking?"#define DEPTH_PACKING "+s.depthPacking:"","\n"].filter(mf).join("\n")),d=Y0(d),d=Zb(d,s),d=K0(d,s),m=Y0(m),m=Zb(m,s),m=K0(m,s),d=Mm(d),m=Mm(m),s.isWebGL2&&!0!==s.isRawShaderMaterial&&($="#version 300 es\n",L=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+L,R=["#define varying in","300 es"===s.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===s.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+R);const B=$+R+m,G=ES(c,35633,$+L+d),z=ES(c,35632,B);if(c.attachShader(I,G),c.attachShader(I,z),void 0!==s.index0AttributeName?c.bindAttribLocation(I,0,s.index0AttributeName):!0===s.morphTargets&&c.bindAttribLocation(I,0,"position"),c.linkProgram(I),f.debug.checkShaderErrors){const le=c.getProgramInfoLog(I).trim(),oe=c.getShaderInfoLog(G).trim(),de=c.getShaderInfoLog(z).trim();let we=!0,ke=!0;if(!1===c.getProgramParameter(I,35714)){we=!1;const je=Kb(c,G,"vertex"),me=Kb(c,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(I,35715)+"\n\nProgram Info Log: "+le+"\n"+je+"\n"+me)}else""!==le?console.warn("THREE.WebGLProgram: Program Info Log:",le):""!==oe&&""!==de||(ke=!1);ke&&(this.diagnostics={runnable:we,programLog:le,vertexShader:{log:oe,prefix:L},fragmentShader:{log:de,prefix:R}})}let J,te;return c.deleteShader(G),c.deleteShader(z),this.getUniforms=function(){return void 0===J&&(J=new au(c,I)),J},this.getAttributes=function(){return void 0===te&&(te=function(le,oe){const de={},we=le.getProgramParameter(oe,35721);for(let ke=0;ke<we;ke++){const je=le.getActiveAttrib(oe,ke),me=je.name;let Ve=1;35674===je.type&&(Ve=2),35675===je.type&&(Ve=3),35676===je.type&&(Ve=4),de[me]={type:je.type,location:le.getAttribLocation(oe,me),locationSize:Ve}}return de}(c,I)),te},this.destroy=function(){a.releaseStatesOfProgram(this),c.deleteProgram(I),this.program=void 0},this.name=s.shaderName,this.id=lu++,this.cacheKey=r,this.usedTimes=1,this.program=I,this.vertexShader=G,this.fragmentShader=z,this}let Ai=0;class AS{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(r){const a=r.fragmentShader,c=this._getShaderStage(r.vertexShader),h=this._getShaderStage(a),d=this._getShaderCacheForMaterial(r);return!1===d.has(c)&&(d.add(c),c.usedTimes++),!1===d.has(h)&&(d.add(h),h.usedTimes++),this}remove(r){const s=this.materialCache.get(r);for(const a of s)a.usedTimes--,0===a.usedTimes&&this.shaderCache.delete(a.code);return this.materialCache.delete(r),this}getVertexShaderID(r){return this._getShaderStage(r.vertexShader).id}getFragmentShaderID(r){return this._getShaderStage(r.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(r){const s=this.materialCache;return!1===s.has(r)&&s.set(r,new Set),s.get(r)}_getShaderStage(r){const s=this.shaderCache;if(!1===s.has(r)){const a=new aI(r);s.set(r,a)}return s.get(r)}}class aI{constructor(r){this.id=Ai++,this.code=r,this.usedTimes=0}}function Sm(f,r,s,a,c,h,d){const m=new Xo,g=new AS,y=[],b=c.isWebGL2,w=c.logarithmicDepthBuffer,x=c.floatVertexTextures,E=c.maxVertexUniforms,T=c.vertexTextures;let I=c.precision;const L={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(R,$,B,G,z){const J=G.fog,te=z.geometry,oe=(R.isMeshStandardMaterial?s:r).get(R.envMap||(R.isMeshStandardMaterial?G.environment:null)),de=oe&&306===oe.mapping?oe.image.height:null,we=L[R.type],ke=z.isSkinnedMesh?function(Nt){const Tt=Nt.skeleton.bones;if(x)return 1024;{const se=Math.floor((E-20)/4),re=Math.min(se,Tt.length);return re<Tt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Tt.length+" bones. This GPU supports "+re+"."),0):re}}(z):0;null!==R.precision&&(I=c.getMaxPrecision(R.precision),I!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",I,"instead."));const je=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,me=void 0!==je?je.length:0;let Ve,Ne,tt,We,ze=0;if(void 0!==te.morphAttributes.position&&(ze=1),void 0!==te.morphAttributes.normal&&(ze=2),void 0!==te.morphAttributes.color&&(ze=3),we){const Nt=_l[we];Ve=Nt.vertexShader,Ne=Nt.fragmentShader}else Ve=R.vertexShader,Ne=R.fragmentShader,g.update(R),tt=g.getVertexShaderID(R),We=g.getFragmentShaderID(R);const Oe=f.getRenderTarget(),At=R.clearcoat>0;return{isWebGL2:b,shaderID:we,shaderName:R.type,vertexShader:Ve,fragmentShader:Ne,defines:R.defines,customVertexShaderID:tt,customFragmentShaderID:We,isRawShaderMaterial:!0===R.isRawShaderMaterial,glslVersion:R.glslVersion,precision:I,instancing:!0===z.isInstancedMesh,instancingColor:!0===z.isInstancedMesh&&null!==z.instanceColor,supportsVertexTextures:T,outputEncoding:null===Oe?f.outputEncoding:!0===Oe.isXRRenderTarget?Oe.texture.encoding:3e3,map:!!R.map,matcap:!!R.matcap,envMap:!!oe,envMapMode:oe&&oe.mapping,envMapCubeUVHeight:de,lightMap:!!R.lightMap,aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:1===R.normalMapType,tangentSpaceNormalMap:0===R.normalMapType,decodeVideoTexture:!!R.map&&!0===R.map.isVideoTexture&&3001===R.map.encoding,clearcoat:At,clearcoatMap:At&&!!R.clearcoatMap,clearcoatRoughnessMap:At&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:At&&!!R.clearcoatNormalMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,opaque:!1===R.transparent&&1===R.blending,alphaMap:!!R.alphaMap,alphaTest:R.alphaTest>0,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!te.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:!0===R.vertexColors&&!!te.attributes.color&&4===te.attributes.color.itemSize,vertexUvs:!!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatMap||R.clearcoatRoughnessMap||R.clearcoatNormalMap||R.displacementMap||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheenColorMap||R.sheenRoughnessMap),uvsVertexOnly:!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatNormalMap||R.transmission>0||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheen>0||R.sheenColorMap||R.sheenRoughnessMap||!R.displacementMap),fog:!!J,useFog:R.fog,fogExp2:J&&J.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:w,skinning:!0===z.isSkinnedMesh&&ke>0,maxBones:ke,useVertexTexture:x,morphTargets:void 0!==te.morphAttributes.position,morphNormals:void 0!==te.morphAttributes.normal,morphColors:void 0!==te.morphAttributes.color,morphTargetsCount:me,morphTextureStride:ze,numDirLights:$.directional.length,numPointLights:$.point.length,numSpotLights:$.spot.length,numRectAreaLights:$.rectArea.length,numHemiLights:$.hemi.length,numDirLightShadows:$.directionalShadowMap.length,numPointLightShadows:$.pointShadowMap.length,numSpotLightShadows:$.spotShadowMap.length,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:R.dithering,shadowMapEnabled:f.shadowMap.enabled&&B.length>0,shadowMapType:f.shadowMap.type,toneMapping:R.toneMapped?f.toneMapping:0,physicallyCorrectLights:f.physicallyCorrectLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:2===R.side,flipSided:1===R.side,depthPacking:void 0!==R.depthPacking&&R.depthPacking,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:b||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:b||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:b||a.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}},getProgramCacheKey:function(R){const $=[];if(R.shaderID?$.push(R.shaderID):($.push(R.customVertexShaderID),$.push(R.customFragmentShaderID)),void 0!==R.defines)for(const B in R.defines)$.push(B),$.push(R.defines[B]);return!1===R.isRawShaderMaterial&&((B=$).push((G=R).precision),B.push(G.outputEncoding),B.push(G.envMapMode),B.push(G.envMapCubeUVHeight),B.push(G.combine),B.push(G.vertexUvs),B.push(G.fogExp2),B.push(G.sizeAttenuation),B.push(G.maxBones),B.push(G.morphTargetsCount),B.push(G.morphAttributeCount),B.push(G.numDirLights),B.push(G.numPointLights),B.push(G.numSpotLights),B.push(G.numHemiLights),B.push(G.numRectAreaLights),B.push(G.numDirLightShadows),B.push(G.numPointLightShadows),B.push(G.numSpotLightShadows),B.push(G.shadowMapType),B.push(G.toneMapping),B.push(G.numClippingPlanes),B.push(G.numClipIntersection),function(B,G){m.disableAll(),G.isWebGL2&&m.enable(0),G.supportsVertexTextures&&m.enable(1),G.instancing&&m.enable(2),G.instancingColor&&m.enable(3),G.map&&m.enable(4),G.matcap&&m.enable(5),G.envMap&&m.enable(6),G.lightMap&&m.enable(7),G.aoMap&&m.enable(8),G.emissiveMap&&m.enable(9),G.bumpMap&&m.enable(10),G.normalMap&&m.enable(11),G.objectSpaceNormalMap&&m.enable(12),G.tangentSpaceNormalMap&&m.enable(13),G.clearcoat&&m.enable(14),G.clearcoatMap&&m.enable(15),G.clearcoatRoughnessMap&&m.enable(16),G.clearcoatNormalMap&&m.enable(17),G.displacementMap&&m.enable(18),G.specularMap&&m.enable(19),G.roughnessMap&&m.enable(20),G.metalnessMap&&m.enable(21),G.gradientMap&&m.enable(22),G.alphaMap&&m.enable(23),G.alphaTest&&m.enable(24),G.vertexColors&&m.enable(25),G.vertexAlphas&&m.enable(26),G.vertexUvs&&m.enable(27),G.vertexTangents&&m.enable(28),G.uvsVertexOnly&&m.enable(29),G.fog&&m.enable(30),B.push(m.mask),m.disableAll(),G.useFog&&m.enable(0),G.flatShading&&m.enable(1),G.logarithmicDepthBuffer&&m.enable(2),G.skinning&&m.enable(3),G.useVertexTexture&&m.enable(4),G.morphTargets&&m.enable(5),G.morphNormals&&m.enable(6),G.morphColors&&m.enable(7),G.premultipliedAlpha&&m.enable(8),G.shadowMapEnabled&&m.enable(9),G.physicallyCorrectLights&&m.enable(10),G.doubleSided&&m.enable(11),G.flipSided&&m.enable(12),G.depthPacking&&m.enable(13),G.dithering&&m.enable(14),G.specularIntensityMap&&m.enable(15),G.specularColorMap&&m.enable(16),G.transmission&&m.enable(17),G.transmissionMap&&m.enable(18),G.thicknessMap&&m.enable(19),G.sheen&&m.enable(20),G.sheenColorMap&&m.enable(21),G.sheenRoughnessMap&&m.enable(22),G.decodeVideoTexture&&m.enable(23),G.opaque&&m.enable(24),B.push(m.mask)}($,R),$.push(f.outputEncoding)),$.push(R.customProgramCacheKey),$.join();var B,G},getUniforms:function(R){const $=L[R.type];let B;return B=$?zR.clone(_l[$].uniforms):R.uniforms,B},acquireProgram:function(R,$){let B;for(let G=0,z=y.length;G<z;G++){const J=y[G];if(J.cacheKey===$){B=J,++B.usedTimes;break}}return void 0===B&&(B=new oI(f,$,R,h),y.push(B)),B},releaseProgram:function(R){if(0==--R.usedTimes){const $=y.indexOf(R);y[$]=y[y.length-1],y.pop(),R.destroy()}},releaseShaderCache:function(R){g.remove(R)},programs:y,dispose:function(){g.dispose()}}}function To(){let f=new WeakMap;return{get:function(r){let s=f.get(r);return void 0===s&&(s={},f.set(r,s)),s},remove:function(r){f.delete(r)},update:function(r,s,a){f.get(r)[s]=a},dispose:function(){f=new WeakMap}}}function TS(f,r){return f.groupOrder!==r.groupOrder?f.groupOrder-r.groupOrder:f.renderOrder!==r.renderOrder?f.renderOrder-r.renderOrder:f.material.id!==r.material.id?f.material.id-r.material.id:f.z!==r.z?f.z-r.z:f.id-r.id}function Cm(f,r){return f.groupOrder!==r.groupOrder?f.groupOrder-r.groupOrder:f.renderOrder!==r.renderOrder?f.renderOrder-r.renderOrder:f.z!==r.z?r.z-f.z:f.id-r.id}function cu(){const f=[];let r=0;const s=[],a=[],c=[];function h(d,m,g,y,b,w){let x=f[r];return void 0===x?(x={id:d.id,object:d,geometry:m,material:g,groupOrder:y,renderOrder:d.renderOrder,z:b,group:w},f[r]=x):(x.id=d.id,x.object=d,x.geometry=m,x.material=g,x.groupOrder=y,x.renderOrder=d.renderOrder,x.z=b,x.group=w),r++,x}return{opaque:s,transmissive:a,transparent:c,init:function(){r=0,s.length=0,a.length=0,c.length=0},push:function(d,m,g,y,b,w){const x=h(d,m,g,y,b,w);g.transmission>0?a.push(x):!0===g.transparent?c.push(x):s.push(x)},unshift:function(d,m,g,y,b,w){const x=h(d,m,g,y,b,w);g.transmission>0?a.unshift(x):!0===g.transparent?c.unshift(x):s.unshift(x)},finish:function(){for(let d=r,m=f.length;d<m;d++){const g=f[d];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function(d,m){s.length>1&&s.sort(d||TS),a.length>1&&a.sort(m||Cm),c.length>1&&c.sort(m||Cm)}}}function yo(){let f=new WeakMap;return{get:function(r,s){let a;return!1===f.has(r)?(a=new cu,f.set(r,[a])):s>=f.get(r).length?(a=new cu,f.get(r).push(a)):a=f.get(r)[s],a},dispose:function(){f=new WeakMap}}}function ew(){const f={};return{get:function(r){if(void 0!==f[r.id])return f[r.id];let s;switch(r.type){case"DirectionalLight":s={direction:new F,color:new D};break;case"SpotLight":s={position:new F,direction:new F,color:new D,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new F,color:new D,distance:0,decay:0};break;case"HemisphereLight":s={direction:new F,skyColor:new D,groundColor:new D};break;case"RectAreaLight":s={color:new D,position:new F,halfWidth:new F,halfHeight:new F}}return f[r.id]=s,s}}}let J0=0;function DS(f,r){return(r.castShadow?1:0)-(f.castShadow?1:0)}function hc(f,r){const s=new ew,a=function(){const g={};return{get:function(y){if(void 0!==g[y.id])return g[y.id];let b;switch(y.type){case"DirectionalLight":case"SpotLight":b={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":b={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return g[y.id]=b,b}}}(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let g=0;g<9;g++)c.probe.push(new F);const h=new F,d=new mt,m=new mt;return{setup:function(g,y){let b=0,w=0,x=0;for(let te=0;te<9;te++)c.probe[te].set(0,0,0);let E=0,T=0,I=0,L=0,R=0,$=0,B=0,G=0;g.sort(DS);const z=!0!==y?Math.PI:1;for(let te=0,le=g.length;te<le;te++){const oe=g[te],de=oe.color,we=oe.intensity,ke=oe.distance,je=oe.shadow&&oe.shadow.map?oe.shadow.map.texture:null;if(oe.isAmbientLight)b+=de.r*we*z,w+=de.g*we*z,x+=de.b*we*z;else if(oe.isLightProbe)for(let me=0;me<9;me++)c.probe[me].addScaledVector(oe.sh.coefficients[me],we);else if(oe.isDirectionalLight){const me=s.get(oe);if(me.color.copy(oe.color).multiplyScalar(oe.intensity*z),oe.castShadow){const Ve=oe.shadow,Ne=a.get(oe);Ne.shadowBias=Ve.bias,Ne.shadowNormalBias=Ve.normalBias,Ne.shadowRadius=Ve.radius,Ne.shadowMapSize=Ve.mapSize,c.directionalShadow[E]=Ne,c.directionalShadowMap[E]=je,c.directionalShadowMatrix[E]=oe.shadow.matrix,$++}c.directional[E]=me,E++}else if(oe.isSpotLight){const me=s.get(oe);if(me.position.setFromMatrixPosition(oe.matrixWorld),me.color.copy(de).multiplyScalar(we*z),me.distance=ke,me.coneCos=Math.cos(oe.angle),me.penumbraCos=Math.cos(oe.angle*(1-oe.penumbra)),me.decay=oe.decay,oe.castShadow){const Ve=oe.shadow,Ne=a.get(oe);Ne.shadowBias=Ve.bias,Ne.shadowNormalBias=Ve.normalBias,Ne.shadowRadius=Ve.radius,Ne.shadowMapSize=Ve.mapSize,c.spotShadow[I]=Ne,c.spotShadowMap[I]=je,c.spotShadowMatrix[I]=oe.shadow.matrix,G++}c.spot[I]=me,I++}else if(oe.isRectAreaLight){const me=s.get(oe);me.color.copy(de).multiplyScalar(we),me.halfWidth.set(.5*oe.width,0,0),me.halfHeight.set(0,.5*oe.height,0),c.rectArea[L]=me,L++}else if(oe.isPointLight){const me=s.get(oe);if(me.color.copy(oe.color).multiplyScalar(oe.intensity*z),me.distance=oe.distance,me.decay=oe.decay,oe.castShadow){const Ve=oe.shadow,Ne=a.get(oe);Ne.shadowBias=Ve.bias,Ne.shadowNormalBias=Ve.normalBias,Ne.shadowRadius=Ve.radius,Ne.shadowMapSize=Ve.mapSize,Ne.shadowCameraNear=Ve.camera.near,Ne.shadowCameraFar=Ve.camera.far,c.pointShadow[T]=Ne,c.pointShadowMap[T]=je,c.pointShadowMatrix[T]=oe.shadow.matrix,B++}c.point[T]=me,T++}else if(oe.isHemisphereLight){const me=s.get(oe);me.skyColor.copy(oe.color).multiplyScalar(we*z),me.groundColor.copy(oe.groundColor).multiplyScalar(we*z),c.hemi[R]=me,R++}}L>0&&(r.isWebGL2||!0===f.has("OES_texture_float_linear")?(c.rectAreaLTC1=_t.LTC_FLOAT_1,c.rectAreaLTC2=_t.LTC_FLOAT_2):!0===f.has("OES_texture_half_float_linear")?(c.rectAreaLTC1=_t.LTC_HALF_1,c.rectAreaLTC2=_t.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),c.ambient[0]=b,c.ambient[1]=w,c.ambient[2]=x;const J=c.hash;J.directionalLength===E&&J.pointLength===T&&J.spotLength===I&&J.rectAreaLength===L&&J.hemiLength===R&&J.numDirectionalShadows===$&&J.numPointShadows===B&&J.numSpotShadows===G||(c.directional.length=E,c.spot.length=I,c.rectArea.length=L,c.point.length=T,c.hemi.length=R,c.directionalShadow.length=$,c.directionalShadowMap.length=$,c.pointShadow.length=B,c.pointShadowMap.length=B,c.spotShadow.length=G,c.spotShadowMap.length=G,c.directionalShadowMatrix.length=$,c.pointShadowMatrix.length=B,c.spotShadowMatrix.length=G,J.directionalLength=E,J.pointLength=T,J.spotLength=I,J.rectAreaLength=L,J.hemiLength=R,J.numDirectionalShadows=$,J.numPointShadows=B,J.numSpotShadows=G,c.version=J0++)},setupView:function(g,y){let b=0,w=0,x=0,E=0,T=0;const I=y.matrixWorldInverse;for(let L=0,R=g.length;L<R;L++){const $=g[L];if($.isDirectionalLight){const B=c.directional[b];B.direction.setFromMatrixPosition($.matrixWorld),h.setFromMatrixPosition($.target.matrixWorld),B.direction.sub(h),B.direction.transformDirection(I),b++}else if($.isSpotLight){const B=c.spot[x];B.position.setFromMatrixPosition($.matrixWorld),B.position.applyMatrix4(I),B.direction.setFromMatrixPosition($.matrixWorld),h.setFromMatrixPosition($.target.matrixWorld),B.direction.sub(h),B.direction.transformDirection(I),x++}else if($.isRectAreaLight){const B=c.rectArea[E];B.position.setFromMatrixPosition($.matrixWorld),B.position.applyMatrix4(I),m.identity(),d.copy($.matrixWorld),d.premultiply(I),m.extractRotation(d),B.halfWidth.set(.5*$.width,0,0),B.halfHeight.set(0,.5*$.height,0),B.halfWidth.applyMatrix4(m),B.halfHeight.applyMatrix4(m),E++}else if($.isPointLight){const B=c.point[w];B.position.setFromMatrixPosition($.matrixWorld),B.position.applyMatrix4(I),w++}else if($.isHemisphereLight){const B=c.hemi[T];B.direction.setFromMatrixPosition($.matrixWorld),B.direction.transformDirection(I),B.direction.normalize(),T++}}},state:c}}function Q0(f,r){const s=new hc(f,r),a=[],c=[];return{init:function(){a.length=0,c.length=0},state:{lightsArray:a,shadowsArray:c,lights:s},setupLights:function(h){s.setup(a,h)},setupLightsView:function(h){s.setupView(a,h)},pushLight:function(h){a.push(h)},pushShadow:function(h){c.push(h)}}}function ev(f,r){let s=new WeakMap;return{get:function(a,c=0){let h;return!1===s.has(a)?(h=new Q0(f,r),s.set(a,[h])):c>=s.get(a).length?(h=new Q0(f,r),s.get(a).push(h)):h=s.get(a)[c],h},dispose:function(){s=new WeakMap}}}class an extends jr{constructor(r){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(r)}copy(r){return super.copy(r),this.depthPacking=r.depthPacking,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this}}an.prototype.isMeshDepthMaterial=!0;class Am extends jr{constructor(r){super(),this.type="MeshDistanceMaterial",this.referencePosition=new F,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(r)}copy(r){return super.copy(r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this}}function RS(f,r,s){let a=new pm;const c=new Me,h=new Me,d=new k,m=new an({depthPacking:3201}),g=new Am,y={},b=s.maxTextureSize,w={0:1,1:0,2:2},x=new An({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),E=x.clone();E.defines.HORIZONTAL_PASS=1;const T=new Xr;T.setAttribute("position",new jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const I=new xt(T,x),L=this;function R(G,z){const J=r.update(I);x.defines.VSM_SAMPLES!==G.blurSamples&&(x.defines.VSM_SAMPLES=G.blurSamples,E.defines.VSM_SAMPLES=G.blurSamples,x.needsUpdate=!0,E.needsUpdate=!0),x.uniforms.shadow_pass.value=G.map.texture,x.uniforms.resolution.value=G.mapSize,x.uniforms.radius.value=G.radius,f.setRenderTarget(G.mapPass),f.clear(),f.renderBufferDirect(z,null,J,x,I,null),E.uniforms.shadow_pass.value=G.mapPass.texture,E.uniforms.resolution.value=G.mapSize,E.uniforms.radius.value=G.radius,f.setRenderTarget(G.map),f.clear(),f.renderBufferDirect(z,null,J,E,I,null)}function $(G,z,J,te,le,oe){let de=null;const we=!0===J.isPointLight?G.customDistanceMaterial:G.customDepthMaterial;if(de=void 0!==we?we:!0===J.isPointLight?g:m,f.localClippingEnabled&&!0===z.clipShadows&&0!==z.clippingPlanes.length||z.displacementMap&&0!==z.displacementScale||z.alphaMap&&z.alphaTest>0){const ke=de.uuid,je=z.uuid;let me=y[ke];void 0===me&&(me={},y[ke]=me);let Ve=me[je];void 0===Ve&&(Ve=de.clone(),me[je]=Ve),de=Ve}return de.visible=z.visible,de.wireframe=z.wireframe,de.side=3===oe?null!==z.shadowSide?z.shadowSide:z.side:null!==z.shadowSide?z.shadowSide:w[z.side],de.alphaMap=z.alphaMap,de.alphaTest=z.alphaTest,de.clipShadows=z.clipShadows,de.clippingPlanes=z.clippingPlanes,de.clipIntersection=z.clipIntersection,de.displacementMap=z.displacementMap,de.displacementScale=z.displacementScale,de.displacementBias=z.displacementBias,de.wireframeLinewidth=z.wireframeLinewidth,de.linewidth=z.linewidth,!0===J.isPointLight&&!0===de.isMeshDistanceMaterial&&(de.referencePosition.setFromMatrixPosition(J.matrixWorld),de.nearDistance=te,de.farDistance=le),de}function B(G,z,J,te,le){if(!1===G.visible)return;if(G.layers.test(z.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&3===le)&&(!G.frustumCulled||a.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,G.matrixWorld);const de=r.update(G),we=G.material;if(Array.isArray(we)){const ke=de.groups;for(let je=0,me=ke.length;je<me;je++){const Ve=ke[je],Ne=we[Ve.materialIndex];if(Ne&&Ne.visible){const tt=$(G,Ne,te,J.near,J.far,le);f.renderBufferDirect(J,null,de,tt,G,Ve)}}}else if(we.visible){const ke=$(G,we,te,J.near,J.far,le);f.renderBufferDirect(J,null,de,ke,G,null)}}const oe=G.children;for(let de=0,we=oe.length;de<we;de++)B(oe[de],z,J,te,le)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(G,z,J){if(!1===L.enabled||!1===L.autoUpdate&&!1===L.needsUpdate||0===G.length)return;const te=f.getRenderTarget(),le=f.getActiveCubeFace(),oe=f.getActiveMipmapLevel(),de=f.state;de.setBlending(0),de.buffers.color.setClear(1,1,1,1),de.buffers.depth.setTest(!0),de.setScissorTest(!1);for(let we=0,ke=G.length;we<ke;we++){const je=G[we],me=je.shadow;if(void 0===me){console.warn("THREE.WebGLShadowMap:",je,"has no shadow.");continue}if(!1===me.autoUpdate&&!1===me.needsUpdate)continue;c.copy(me.mapSize);const Ve=me.getFrameExtents();c.multiply(Ve),h.copy(me.mapSize),(c.x>b||c.y>b)&&(c.x>b&&(h.x=Math.floor(b/Ve.x),c.x=h.x*Ve.x,me.mapSize.x=h.x),c.y>b&&(h.y=Math.floor(b/Ve.y),c.y=h.y*Ve.y,me.mapSize.y=h.y)),null!==me.map||me.isPointLightShadow||3!==this.type||(me.map=new K(c.x,c.y),me.map.texture.name=je.name+".shadowMap",me.mapPass=new K(c.x,c.y),me.camera.updateProjectionMatrix()),null===me.map&&(me.map=new K(c.x,c.y,{minFilter:1003,magFilter:1003,format:1023}),me.map.texture.name=je.name+".shadowMap",me.camera.updateProjectionMatrix()),f.setRenderTarget(me.map),f.clear();const Ne=me.getViewportCount();for(let tt=0;tt<Ne;tt++){const We=me.getViewport(tt);d.set(h.x*We.x,h.y*We.y,h.x*We.z,h.y*We.w),de.viewport(d),me.updateMatrices(je,tt),a=me.getFrustum(),B(z,J,me.camera,je,this.type)}me.isPointLightShadow||3!==this.type||R(me,J),me.needsUpdate=!1}L.needsUpdate=!1,f.setRenderTarget(te,le,oe)}}function IS(f,r,s){const a=s.isWebGL2,c=new function(){let Q=!1;const xe=new k;let ce=null;const at=new k(0,0,0,0);return{setMask:function($e){ce===$e||Q||(f.colorMask($e,$e,$e,$e),ce=$e)},setLocked:function($e){Q=$e},setClear:function($e,Ze,Dt,Ot,bn){!0===bn&&($e*=Ot,Ze*=Ot,Dt*=Ot),xe.set($e,Ze,Dt,Ot),!1===at.equals(xe)&&(f.clearColor($e,Ze,Dt,Ot),at.copy(xe))},reset:function(){Q=!1,ce=null,at.set(-1,0,0,0)}}},h=new function(){let Q=!1,xe=null,ce=null,at=null;return{setTest:function($e){$e?At(2929):Nt(2929)},setMask:function($e){xe===$e||Q||(f.depthMask($e),xe=$e)},setFunc:function($e){if(ce!==$e){if($e)switch($e){case 0:f.depthFunc(512);break;case 1:f.depthFunc(519);break;case 2:f.depthFunc(513);break;case 3:default:f.depthFunc(515);break;case 4:f.depthFunc(514);break;case 5:f.depthFunc(518);break;case 6:f.depthFunc(516);break;case 7:f.depthFunc(517)}else f.depthFunc(515);ce=$e}},setLocked:function($e){Q=$e},setClear:function($e){at!==$e&&(f.clearDepth($e),at=$e)},reset:function(){Q=!1,xe=null,ce=null,at=null}}},d=new function(){let Q=!1,xe=null,ce=null,at=null,$e=null,Ze=null,Dt=null,Ot=null,bn=null;return{setTest:function($t){Q||($t?At(2960):Nt(2960))},setMask:function($t){xe===$t||Q||(f.stencilMask($t),xe=$t)},setFunc:function($t,gn,In){ce===$t&&at===gn&&$e===In||(f.stencilFunc($t,gn,In),ce=$t,at=gn,$e=In)},setOp:function($t,gn,In){Ze===$t&&Dt===gn&&Ot===In||(f.stencilOp($t,gn,In),Ze=$t,Dt=gn,Ot=In)},setLocked:function($t){Q=$t},setClear:function($t){bn!==$t&&(f.clearStencil($t),bn=$t)},reset:function(){Q=!1,xe=null,ce=null,at=null,$e=null,Ze=null,Dt=null,Ot=null,bn=null}}};let m={},g={},y=new WeakMap,b=[],w=null,x=!1,E=null,T=null,I=null,L=null,R=null,$=null,B=null,G=!1,z=null,J=null,te=null,le=null,oe=null;const de=f.getParameter(35661);let we=!1,ke=0;const je=f.getParameter(7938);-1!==je.indexOf("WebGL")?(ke=parseFloat(/^WebGL (\d)/.exec(je)[1]),we=ke>=1):-1!==je.indexOf("OpenGL ES")&&(ke=parseFloat(/^OpenGL ES (\d)/.exec(je)[1]),we=ke>=2);let me=null,Ve={};const Ne=f.getParameter(3088),tt=f.getParameter(2978),We=(new k).fromArray(Ne),ze=(new k).fromArray(tt);function Oe(Q,xe,ce){const at=new Uint8Array(4),$e=f.createTexture();f.bindTexture(Q,$e),f.texParameteri(Q,10241,9728),f.texParameteri(Q,10240,9728);for(let Ze=0;Ze<ce;Ze++)f.texImage2D(xe+Ze,0,6408,1,1,0,6408,5121,at);return $e}const Ct={};function At(Q){!0!==m[Q]&&(f.enable(Q),m[Q]=!0)}function Nt(Q){!1!==m[Q]&&(f.disable(Q),m[Q]=!1)}Ct[3553]=Oe(3553,3553,1),Ct[34067]=Oe(34067,34069,6),c.setClear(0,0,0,1),h.setClear(1),d.setClear(0),At(2929),h.setFunc(3),re(!1),Pe(1),At(2884),se(0);const Tt={100:32774,101:32778,102:32779};if(a)Tt[103]=32775,Tt[104]=32776;else{const Q=r.get("EXT_blend_minmax");null!==Q&&(Tt[103]=Q.MIN_EXT,Tt[104]=Q.MAX_EXT)}const Rn={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function se(Q,xe,ce,at,$e,Ze,Dt,Ot){if(0!==Q){if(!1===x&&(At(3042),x=!0),5===Q)$e=$e||xe,Ze=Ze||ce,Dt=Dt||at,xe===T&&$e===R||(f.blendEquationSeparate(Tt[xe],Tt[$e]),T=xe,R=$e),ce===I&&at===L&&Ze===$&&Dt===B||(f.blendFuncSeparate(Rn[ce],Rn[at],Rn[Ze],Rn[Dt]),I=ce,L=at,$=Ze,B=Dt),E=Q,G=null;else if(Q!==E||Ot!==G){if(100===T&&100===R||(f.blendEquation(32774),T=100,R=100),Ot)switch(Q){case 1:f.blendFuncSeparate(1,771,1,771);break;case 2:f.blendFunc(1,1);break;case 3:f.blendFuncSeparate(0,769,0,1);break;case 4:f.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q)}else switch(Q){case 1:f.blendFuncSeparate(770,771,1,771);break;case 2:f.blendFunc(770,1);break;case 3:f.blendFuncSeparate(0,769,0,1);break;case 4:f.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q)}I=null,L=null,$=null,B=null,E=Q,G=Ot}}else!0===x&&(Nt(3042),x=!1)}function re(Q){z!==Q&&(f.frontFace(Q?2304:2305),z=Q)}function Pe(Q){0!==Q?(At(2884),Q!==J&&f.cullFace(1===Q?1029:2===Q?1028:1032)):Nt(2884),J=Q}function _e(Q,xe,ce){Q?(At(32823),le===xe&&oe===ce||(f.polygonOffset(xe,ce),le=xe,oe=ce)):Nt(32823)}function ae(Q){void 0===Q&&(Q=33984+de-1),me!==Q&&(f.activeTexture(Q),me=Q)}return{buffers:{color:c,depth:h,stencil:d},enable:At,disable:Nt,bindFramebuffer:function(Q,xe){return g[Q]!==xe&&(f.bindFramebuffer(Q,xe),g[Q]=xe,a&&(36009===Q&&(g[36160]=xe),36160===Q&&(g[36009]=xe)),!0)},drawBuffers:function(Q,xe){let ce=b,at=!1;if(Q)if(ce=y.get(xe),void 0===ce&&(ce=[],y.set(xe,ce)),Q.isWebGLMultipleRenderTargets){const $e=Q.texture;if(ce.length!==$e.length||36064!==ce[0]){for(let Ze=0,Dt=$e.length;Ze<Dt;Ze++)ce[Ze]=36064+Ze;ce.length=$e.length,at=!0}}else 36064!==ce[0]&&(ce[0]=36064,at=!0);else 1029!==ce[0]&&(ce[0]=1029,at=!0);at&&(s.isWebGL2?f.drawBuffers(ce):r.get("WEBGL_draw_buffers").drawBuffersWEBGL(ce))},useProgram:function(Q){return w!==Q&&(f.useProgram(Q),w=Q,!0)},setBlending:se,setMaterial:function(Q,xe){2===Q.side?Nt(2884):At(2884);let ce=1===Q.side;xe&&(ce=!ce),re(ce),1===Q.blending&&!1===Q.transparent?se(0):se(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.premultipliedAlpha),h.setFunc(Q.depthFunc),h.setTest(Q.depthTest),h.setMask(Q.depthWrite),c.setMask(Q.colorWrite);const at=Q.stencilWrite;d.setTest(at),at&&(d.setMask(Q.stencilWriteMask),d.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),d.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),_e(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),!0===Q.alphaToCoverage?At(32926):Nt(32926)},setFlipSided:re,setCullFace:Pe,setLineWidth:function(Q){Q!==te&&(we&&f.lineWidth(Q),te=Q)},setPolygonOffset:_e,setScissorTest:function(Q){Q?At(3089):Nt(3089)},activeTexture:ae,bindTexture:function(Q,xe){null===me&&ae();let ce=Ve[me];void 0===ce&&(ce={type:void 0,texture:void 0},Ve[me]=ce),ce.type===Q&&ce.texture===xe||(f.bindTexture(Q,xe||Ct[Q]),ce.type=Q,ce.texture=xe)},unbindTexture:function(){const Q=Ve[me];void 0!==Q&&void 0!==Q.type&&(f.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)},compressedTexImage2D:function(){try{f.compressedTexImage2D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},texImage2D:function(){try{f.texImage2D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},texImage3D:function(){try{f.texImage3D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},texStorage2D:function(){try{f.texStorage2D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},texStorage3D:function(){try{f.texStorage3D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},texSubImage2D:function(){try{f.texSubImage2D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},texSubImage3D:function(){try{f.texSubImage3D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},compressedTexSubImage2D:function(){try{f.compressedTexSubImage2D.apply(f,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}},scissor:function(Q){!1===We.equals(Q)&&(f.scissor(Q.x,Q.y,Q.z,Q.w),We.copy(Q))},viewport:function(Q){!1===ze.equals(Q)&&(f.viewport(Q.x,Q.y,Q.z,Q.w),ze.copy(Q))},reset:function(){f.disable(3042),f.disable(2884),f.disable(2929),f.disable(32823),f.disable(3089),f.disable(2960),f.disable(32926),f.blendEquation(32774),f.blendFunc(1,0),f.blendFuncSeparate(1,0,1,0),f.colorMask(!0,!0,!0,!0),f.clearColor(0,0,0,0),f.depthMask(!0),f.depthFunc(513),f.clearDepth(1),f.stencilMask(4294967295),f.stencilFunc(519,0,4294967295),f.stencilOp(7680,7680,7680),f.clearStencil(0),f.cullFace(1029),f.frontFace(2305),f.polygonOffset(0,0),f.activeTexture(33984),f.bindFramebuffer(36160,null),!0===a&&(f.bindFramebuffer(36009,null),f.bindFramebuffer(36008,null)),f.useProgram(null),f.lineWidth(1),f.scissor(0,0,f.canvas.width,f.canvas.height),f.viewport(0,0,f.canvas.width,f.canvas.height),m={},me=null,Ve={},g={},y=new WeakMap,b=[],w=null,x=!1,E=null,T=null,I=null,L=null,R=null,$=null,B=null,G=!1,z=null,J=null,te=null,le=null,oe=null,We.set(0,0,f.canvas.width,f.canvas.height),ze.set(0,0,f.canvas.width,f.canvas.height),c.reset(),h.reset(),d.reset()}}}function PS(f,r,s,a,c,h,d){const m=c.isWebGL2,g=c.maxTextures,y=c.maxCubemapSize,b=c.maxTextureSize,w=c.maxSamples,x=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),T=new WeakMap;let I;const L=new WeakMap;let R=!1;try{R=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function $(se,re){return R?new OffscreenCanvas(se,re):Lt("canvas")}function B(se,re,Pe,_e){let ae=1;if((se.width>_e||se.height>_e)&&(ae=_e/Math.max(se.width,se.height)),ae<1||!0===re){if(typeof HTMLImageElement<"u"&&se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&se instanceof ImageBitmap){const Q=re?nt:Math.floor,xe=Q(ae*se.width),ce=Q(ae*se.height);void 0===I&&(I=$(xe,ce));const at=Pe?$(xe,ce):I;return at.width=xe,at.height=ce,at.getContext("2d").drawImage(se,0,0,xe,ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+xe+"x"+ce+")."),at}return"data"in se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),se}return se}function G(se){return Ye(se.width)&&Ye(se.height)}function z(se,re){return se.generateMipmaps&&re&&1003!==se.minFilter&&1006!==se.minFilter}function J(se){f.generateMipmap(se)}function te(se,re,Pe,_e,ae=!1){if(!1===m)return re;if(null!==se){if(void 0!==f[se])return f[se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+se+"'")}let Q=re;return 6403===re&&(5126===Pe&&(Q=33326),5131===Pe&&(Q=33325),5121===Pe&&(Q=33321)),33319===re&&(5126===Pe&&(Q=33328),5131===Pe&&(Q=33327),5121===Pe&&(Q=33323)),6408===re&&(5126===Pe&&(Q=34836),5131===Pe&&(Q=34842),5121===Pe&&(Q=3001===_e&&!1===ae?35907:32856),32819===Pe&&(Q=32854),32820===Pe&&(Q=32855)),33325!==Q&&33326!==Q&&33327!==Q&&33328!==Q&&34842!==Q&&34836!==Q||r.get("EXT_color_buffer_float"),Q}function le(se,re,Pe){return!0===z(se,Pe)||se.isFramebufferTexture&&1003!==se.minFilter&&1006!==se.minFilter?Math.log2(Math.max(re.width,re.height))+1:void 0!==se.mipmaps&&se.mipmaps.length>0?se.mipmaps.length:se.isCompressedTexture&&Array.isArray(se.image)?re.mipmaps.length:1}function oe(se){return 1003===se||1004===se||1005===se?9728:9729}function de(se){const re=se.target;re.removeEventListener("dispose",de),function(Pe){const _e=a.get(Pe);if(void 0===_e.__webglInit)return;const ae=Pe.source,Q=L.get(ae);if(Q){const xe=Q[_e.__cacheKey];xe.usedTimes--,0===xe.usedTimes&&ke(Pe),0===Object.keys(Q).length&&L.delete(ae)}a.remove(Pe)}(re),re.isVideoTexture&&T.delete(re)}function we(se){const re=se.target;re.removeEventListener("dispose",we),function(Pe){const _e=Pe.texture,ae=a.get(Pe),Q=a.get(_e);if(void 0!==Q.__webglTexture&&(f.deleteTexture(Q.__webglTexture),d.memory.textures--),Pe.depthTexture&&Pe.depthTexture.dispose(),Pe.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++)f.deleteFramebuffer(ae.__webglFramebuffer[xe]),ae.__webglDepthbuffer&&f.deleteRenderbuffer(ae.__webglDepthbuffer[xe]);else f.deleteFramebuffer(ae.__webglFramebuffer),ae.__webglDepthbuffer&&f.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&f.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer&&f.deleteRenderbuffer(ae.__webglColorRenderbuffer),ae.__webglDepthRenderbuffer&&f.deleteRenderbuffer(ae.__webglDepthRenderbuffer);if(Pe.isWebGLMultipleRenderTargets)for(let xe=0,ce=_e.length;xe<ce;xe++){const at=a.get(_e[xe]);at.__webglTexture&&(f.deleteTexture(at.__webglTexture),d.memory.textures--),a.remove(_e[xe])}a.remove(_e),a.remove(Pe)}(re)}function ke(se){const re=a.get(se);f.deleteTexture(re.__webglTexture),delete L.get(se.source)[re.__cacheKey],d.memory.textures--}let je=0;function me(se,re){const Pe=a.get(se);if(se.isVideoTexture&&function(_e){const ae=d.render.frame;T.get(_e)!==ae&&(T.set(_e,ae),_e.update())}(se),!1===se.isRenderTargetTexture&&se.version>0&&Pe.__version!==se.version){const _e=se.image;if(null===_e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==_e.complete)return void ze(Pe,se,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}s.activeTexture(33984+re),s.bindTexture(3553,Pe.__webglTexture)}const Ve={1e3:10497,1001:33071,1002:33648},Ne={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function tt(se,re,Pe){if(Pe?(f.texParameteri(se,10242,Ve[re.wrapS]),f.texParameteri(se,10243,Ve[re.wrapT]),32879!==se&&35866!==se||f.texParameteri(se,32882,Ve[re.wrapR]),f.texParameteri(se,10240,Ne[re.magFilter]),f.texParameteri(se,10241,Ne[re.minFilter])):(f.texParameteri(se,10242,33071),f.texParameteri(se,10243,33071),32879!==se&&35866!==se||f.texParameteri(se,32882,33071),1001===re.wrapS&&1001===re.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),f.texParameteri(se,10240,oe(re.magFilter)),f.texParameteri(se,10241,oe(re.minFilter)),1003!==re.minFilter&&1006!==re.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===r.has("EXT_texture_filter_anisotropic")){const _e=r.get("EXT_texture_filter_anisotropic");if(1015===re.type&&!1===r.has("OES_texture_float_linear")||!1===m&&1016===re.type&&!1===r.has("OES_texture_half_float_linear"))return;(re.anisotropy>1||a.get(re).__currentAnisotropy)&&(f.texParameterf(se,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,c.getMaxAnisotropy())),a.get(re).__currentAnisotropy=re.anisotropy)}}function We(se,re){let Pe=!1;void 0===se.__webglInit&&(se.__webglInit=!0,re.addEventListener("dispose",de));const _e=re.source;let ae=L.get(_e);void 0===ae&&(ae={},L.set(_e,ae));const Q=function(xe){const ce=[];return ce.push(xe.wrapS),ce.push(xe.wrapT),ce.push(xe.magFilter),ce.push(xe.minFilter),ce.push(xe.anisotropy),ce.push(xe.internalFormat),ce.push(xe.format),ce.push(xe.type),ce.push(xe.generateMipmaps),ce.push(xe.premultiplyAlpha),ce.push(xe.flipY),ce.push(xe.unpackAlignment),ce.push(xe.encoding),ce.join()}(re);if(Q!==se.__cacheKey){void 0===ae[Q]&&(ae[Q]={texture:f.createTexture(),usedTimes:0},d.memory.textures++,Pe=!0),ae[Q].usedTimes++;const xe=ae[se.__cacheKey];void 0!==xe&&(ae[se.__cacheKey].usedTimes--,0===xe.usedTimes&&ke(re)),se.__cacheKey=Q,se.__webglTexture=ae[Q].texture}return Pe}function ze(se,re,Pe){let _e=3553;re.isDataArrayTexture&&(_e=35866),re.isData3DTexture&&(_e=32879);const ae=We(se,re),Q=re.source;if(s.activeTexture(33984+Pe),s.bindTexture(_e,se.__webglTexture),Q.version!==Q.__currentVersion||!0===ae){f.pixelStorei(37440,re.flipY),f.pixelStorei(37441,re.premultiplyAlpha),f.pixelStorei(3317,re.unpackAlignment),f.pixelStorei(37443,0);const xe=(On=re,!m&&(1001!==On.wrapS||1001!==On.wrapT||1003!==On.minFilter&&1006!==On.minFilter)&&!1===G(re.image));let ce=B(re.image,xe,!1,b);ce=Rn(re,ce);const at=G(ce)||m,$e=h.convert(re.format,re.encoding);let Ze,Dt=h.convert(re.type),Ot=te(re.internalFormat,$e,Dt,re.encoding,re.isVideoTexture);tt(_e,re,at);const bn=re.mipmaps,$t=m&&!0!==re.isVideoTexture,gn=void 0===se.__version,In=le(re,ce,at);if(re.isDepthTexture)Ot=6402,m?Ot=1015===re.type?36012:1014===re.type?33190:1020===re.type?35056:33189:1015===re.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===re.format&&6402===Ot&&1012!==re.type&&1014!==re.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=1012,Dt=h.convert(re.type)),1027===re.format&&6402===Ot&&(Ot=34041,1020!==re.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=1020,Dt=h.convert(re.type))),$t&&gn?s.texStorage2D(3553,1,Ot,ce.width,ce.height):s.texImage2D(3553,0,Ot,ce.width,ce.height,0,$e,Dt,null);else if(re.isDataTexture)if(bn.length>0&&at){$t&&gn&&s.texStorage2D(3553,In,Ot,bn[0].width,bn[0].height);for(let On=0,bi=bn.length;On<bi;On++)Ze=bn[On],$t?s.texSubImage2D(3553,On,0,0,Ze.width,Ze.height,$e,Dt,Ze.data):s.texImage2D(3553,On,Ot,Ze.width,Ze.height,0,$e,Dt,Ze.data);re.generateMipmaps=!1}else $t?(gn&&s.texStorage2D(3553,In,Ot,ce.width,ce.height),s.texSubImage2D(3553,0,0,0,ce.width,ce.height,$e,Dt,ce.data)):s.texImage2D(3553,0,Ot,ce.width,ce.height,0,$e,Dt,ce.data);else if(re.isCompressedTexture){$t&&gn&&s.texStorage2D(3553,In,Ot,bn[0].width,bn[0].height);for(let On=0,bi=bn.length;On<bi;On++)Ze=bn[On],1023!==re.format?null!==$e?$t?s.compressedTexSubImage2D(3553,On,0,0,Ze.width,Ze.height,$e,Ze.data):s.compressedTexImage2D(3553,On,Ot,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$t?s.texSubImage2D(3553,On,0,0,Ze.width,Ze.height,$e,Dt,Ze.data):s.texImage2D(3553,On,Ot,Ze.width,Ze.height,0,$e,Dt,Ze.data)}else if(re.isDataArrayTexture)$t?(gn&&s.texStorage3D(35866,In,Ot,ce.width,ce.height,ce.depth),s.texSubImage3D(35866,0,0,0,0,ce.width,ce.height,ce.depth,$e,Dt,ce.data)):s.texImage3D(35866,0,Ot,ce.width,ce.height,ce.depth,0,$e,Dt,ce.data);else if(re.isData3DTexture)$t?(gn&&s.texStorage3D(32879,In,Ot,ce.width,ce.height,ce.depth),s.texSubImage3D(32879,0,0,0,0,ce.width,ce.height,ce.depth,$e,Dt,ce.data)):s.texImage3D(32879,0,Ot,ce.width,ce.height,ce.depth,0,$e,Dt,ce.data);else if(re.isFramebufferTexture)$t&&gn?s.texStorage2D(3553,In,Ot,ce.width,ce.height):s.texImage2D(3553,0,Ot,ce.width,ce.height,0,$e,Dt,null);else if(bn.length>0&&at){$t&&gn&&s.texStorage2D(3553,In,Ot,bn[0].width,bn[0].height);for(let On=0,bi=bn.length;On<bi;On++)Ze=bn[On],$t?s.texSubImage2D(3553,On,0,0,$e,Dt,Ze):s.texImage2D(3553,On,Ot,$e,Dt,Ze);re.generateMipmaps=!1}else $t?(gn&&s.texStorage2D(3553,In,Ot,ce.width,ce.height),s.texSubImage2D(3553,0,0,0,$e,Dt,ce)):s.texImage2D(3553,0,Ot,$e,Dt,ce);z(re,at)&&J(_e),Q.__currentVersion=Q.version,re.onUpdate&&re.onUpdate(re)}var On;se.__version=re.version}function Oe(se,re,Pe,_e,ae){const Q=h.convert(Pe.format,Pe.encoding),xe=h.convert(Pe.type),ce=te(Pe.internalFormat,Q,xe,Pe.encoding);a.get(re).__hasExternalTextures||(32879===ae||35866===ae?s.texImage3D(ae,0,ce,re.width,re.height,re.depth,0,Q,xe,null):s.texImage2D(ae,0,ce,re.width,re.height,0,Q,xe,null)),s.bindFramebuffer(36160,se),Tt(re)?x.framebufferTexture2DMultisampleEXT(36160,_e,ae,a.get(Pe).__webglTexture,0,Nt(re)):f.framebufferTexture2D(36160,_e,ae,a.get(Pe).__webglTexture,0),s.bindFramebuffer(36160,null)}function Ct(se,re,Pe){if(f.bindRenderbuffer(36161,se),re.depthBuffer&&!re.stencilBuffer){let _e=33189;if(Pe||Tt(re)){const ae=re.depthTexture;ae&&ae.isDepthTexture&&(1015===ae.type?_e=36012:1014===ae.type&&(_e=33190));const Q=Nt(re);Tt(re)?x.renderbufferStorageMultisampleEXT(36161,Q,_e,re.width,re.height):f.renderbufferStorageMultisample(36161,Q,_e,re.width,re.height)}else f.renderbufferStorage(36161,_e,re.width,re.height);f.framebufferRenderbuffer(36160,36096,36161,se)}else if(re.depthBuffer&&re.stencilBuffer){const _e=Nt(re);Pe&&!1===Tt(re)?f.renderbufferStorageMultisample(36161,_e,35056,re.width,re.height):Tt(re)?x.renderbufferStorageMultisampleEXT(36161,_e,35056,re.width,re.height):f.renderbufferStorage(36161,34041,re.width,re.height),f.framebufferRenderbuffer(36160,33306,36161,se)}else{const _e=!0===re.isWebGLMultipleRenderTargets?re.texture[0]:re.texture,ae=h.convert(_e.format,_e.encoding),Q=h.convert(_e.type),xe=te(_e.internalFormat,ae,Q,_e.encoding),ce=Nt(re);Pe&&!1===Tt(re)?f.renderbufferStorageMultisample(36161,ce,xe,re.width,re.height):Tt(re)?x.renderbufferStorageMultisampleEXT(36161,ce,xe,re.width,re.height):f.renderbufferStorage(36161,xe,re.width,re.height)}f.bindRenderbuffer(36161,null)}function At(se){const re=a.get(se),Pe=!0===se.isWebGLCubeRenderTarget;if(se.depthTexture&&!re.__autoAllocateDepthBuffer){if(Pe)throw new Error("target.depthTexture not supported in Cube render targets");!function(_e,ae){if(ae&&ae.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(s.bindFramebuffer(36160,_e),!ae.depthTexture||!ae.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");a.get(ae.depthTexture).__webglTexture&&ae.depthTexture.image.width===ae.width&&ae.depthTexture.image.height===ae.height||(ae.depthTexture.image.width=ae.width,ae.depthTexture.image.height=ae.height,ae.depthTexture.needsUpdate=!0),me(ae.depthTexture,0);const Q=a.get(ae.depthTexture).__webglTexture,xe=Nt(ae);if(1026===ae.depthTexture.format)Tt(ae)?x.framebufferTexture2DMultisampleEXT(36160,36096,3553,Q,0,xe):f.framebufferTexture2D(36160,36096,3553,Q,0);else{if(1027!==ae.depthTexture.format)throw new Error("Unknown depthTexture format");Tt(ae)?x.framebufferTexture2DMultisampleEXT(36160,33306,3553,Q,0,xe):f.framebufferTexture2D(36160,33306,3553,Q,0)}}(re.__webglFramebuffer,se)}else if(Pe){re.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)s.bindFramebuffer(36160,re.__webglFramebuffer[_e]),re.__webglDepthbuffer[_e]=f.createRenderbuffer(),Ct(re.__webglDepthbuffer[_e],se,!1)}else s.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=f.createRenderbuffer(),Ct(re.__webglDepthbuffer,se,!1);s.bindFramebuffer(36160,null)}function Nt(se){return Math.min(w,se.samples)}function Tt(se){const re=a.get(se);return m&&se.samples>0&&!0===r.has("WEBGL_multisampled_render_to_texture")&&!1!==re.__useRenderToTexture}function Rn(se,re){const Pe=se.encoding,_e=se.format,ae=se.type;return!0===se.isCompressedTexture||!0===se.isVideoTexture||1035===se.format||3e3!==Pe&&(3001===Pe?!1===m?!0===r.has("EXT_sRGB")&&1023===_e?(se.format=1035,se.minFilter=1006,se.generateMipmaps=!1):re=O.sRGBToLinear(re):1023===_e&&1009===ae||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Pe)),re}this.allocateTextureUnit=function(){const se=je;return se>=g&&console.warn("THREE.WebGLTextures: Trying to use "+se+" texture units while this GPU supports only "+g),je+=1,se},this.resetTextureUnits=function(){je=0},this.setTexture2D=me,this.setTexture2DArray=function(se,re){const Pe=a.get(se);se.version>0&&Pe.__version!==se.version?ze(Pe,se,re):(s.activeTexture(33984+re),s.bindTexture(35866,Pe.__webglTexture))},this.setTexture3D=function(se,re){const Pe=a.get(se);se.version>0&&Pe.__version!==se.version?ze(Pe,se,re):(s.activeTexture(33984+re),s.bindTexture(32879,Pe.__webglTexture))},this.setTextureCube=function(se,re){const Pe=a.get(se);se.version>0&&Pe.__version!==se.version?function(_e,ae,Q){if(6!==ae.image.length)return;const xe=We(_e,ae),ce=ae.source;if(s.activeTexture(33984+Q),s.bindTexture(34067,_e.__webglTexture),ce.version!==ce.__currentVersion||!0===xe){f.pixelStorei(37440,ae.flipY),f.pixelStorei(37441,ae.premultiplyAlpha),f.pixelStorei(3317,ae.unpackAlignment),f.pixelStorei(37443,0);const at=ae.isCompressedTexture||ae.image[0].isCompressedTexture,$e=ae.image[0]&&ae.image[0].isDataTexture,Ze=[];for(let Mn=0;Mn<6;Mn++)Ze[Mn]=at||$e?$e?ae.image[Mn].image:ae.image[Mn]:B(ae.image[Mn],!1,!0,y),Ze[Mn]=Rn(ae,Ze[Mn]);const Dt=Ze[0],Ot=G(Dt)||m,bn=h.convert(ae.format,ae.encoding),$t=h.convert(ae.type),gn=te(ae.internalFormat,bn,$t,ae.encoding),In=m&&!0!==ae.isVideoTexture,On=void 0===_e.__version;let bi,Yl=le(ae,Dt,Ot);if(tt(34067,ae,Ot),at){In&&On&&s.texStorage2D(34067,Yl,gn,Dt.width,Dt.height);for(let Mn=0;Mn<6;Mn++){bi=Ze[Mn].mipmaps;for(let fr=0;fr<bi.length;fr++){const Ar=bi[fr];1023!==ae.format?null!==bn?In?s.compressedTexSubImage2D(34069+Mn,fr,0,0,Ar.width,Ar.height,bn,Ar.data):s.compressedTexImage2D(34069+Mn,fr,gn,Ar.width,Ar.height,0,Ar.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):In?s.texSubImage2D(34069+Mn,fr,0,0,Ar.width,Ar.height,bn,$t,Ar.data):s.texImage2D(34069+Mn,fr,gn,Ar.width,Ar.height,0,bn,$t,Ar.data)}}}else{bi=ae.mipmaps,In&&On&&(bi.length>0&&Yl++,s.texStorage2D(34067,Yl,gn,Ze[0].width,Ze[0].height));for(let Mn=0;Mn<6;Mn++)if($e){In?s.texSubImage2D(34069+Mn,0,0,0,Ze[Mn].width,Ze[Mn].height,bn,$t,Ze[Mn].data):s.texImage2D(34069+Mn,0,gn,Ze[Mn].width,Ze[Mn].height,0,bn,$t,Ze[Mn].data);for(let fr=0;fr<bi.length;fr++){const Ar=bi[fr].image[Mn].image;In?s.texSubImage2D(34069+Mn,fr+1,0,0,Ar.width,Ar.height,bn,$t,Ar.data):s.texImage2D(34069+Mn,fr+1,gn,Ar.width,Ar.height,0,bn,$t,Ar.data)}}else{In?s.texSubImage2D(34069+Mn,0,0,0,bn,$t,Ze[Mn]):s.texImage2D(34069+Mn,0,gn,bn,$t,Ze[Mn]);for(let fr=0;fr<bi.length;fr++){const Ar=bi[fr];In?s.texSubImage2D(34069+Mn,fr+1,0,0,bn,$t,Ar.image[Mn]):s.texImage2D(34069+Mn,fr+1,gn,bn,$t,Ar.image[Mn])}}}z(ae,Ot)&&J(34067),ce.__currentVersion=ce.version,ae.onUpdate&&ae.onUpdate(ae)}_e.__version=ae.version}(Pe,se,re):(s.activeTexture(33984+re),s.bindTexture(34067,Pe.__webglTexture))},this.rebindTextures=function(se,re,Pe){const _e=a.get(se);void 0!==re&&Oe(_e.__webglFramebuffer,se,se.texture,36064,3553),void 0!==Pe&&At(se)},this.setupRenderTarget=function(se){const re=se.texture,Pe=a.get(se),_e=a.get(re);se.addEventListener("dispose",we),!0!==se.isWebGLMultipleRenderTargets&&(void 0===_e.__webglTexture&&(_e.__webglTexture=f.createTexture()),_e.__version=re.version,d.memory.textures++);const ae=!0===se.isWebGLCubeRenderTarget,Q=!0===se.isWebGLMultipleRenderTargets,xe=G(se)||m;if(ae){Pe.__webglFramebuffer=[];for(let ce=0;ce<6;ce++)Pe.__webglFramebuffer[ce]=f.createFramebuffer()}else if(Pe.__webglFramebuffer=f.createFramebuffer(),Q)if(c.drawBuffers){const ce=se.texture;for(let at=0,$e=ce.length;at<$e;at++){const Ze=a.get(ce[at]);void 0===Ze.__webglTexture&&(Ze.__webglTexture=f.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(m&&se.samples>0&&!1===Tt(se)){Pe.__webglMultisampledFramebuffer=f.createFramebuffer(),Pe.__webglColorRenderbuffer=f.createRenderbuffer(),f.bindRenderbuffer(36161,Pe.__webglColorRenderbuffer);const ce=h.convert(re.format,re.encoding),at=h.convert(re.type),$e=te(re.internalFormat,ce,at,re.encoding),Ze=Nt(se);f.renderbufferStorageMultisample(36161,Ze,$e,se.width,se.height),s.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),f.framebufferRenderbuffer(36160,36064,36161,Pe.__webglColorRenderbuffer),f.bindRenderbuffer(36161,null),se.depthBuffer&&(Pe.__webglDepthRenderbuffer=f.createRenderbuffer(),Ct(Pe.__webglDepthRenderbuffer,se,!0)),s.bindFramebuffer(36160,null)}if(ae){s.bindTexture(34067,_e.__webglTexture),tt(34067,re,xe);for(let ce=0;ce<6;ce++)Oe(Pe.__webglFramebuffer[ce],se,re,36064,34069+ce);z(re,xe)&&J(34067),s.unbindTexture()}else if(Q){const ce=se.texture;for(let at=0,$e=ce.length;at<$e;at++){const Ze=ce[at],Dt=a.get(Ze);s.bindTexture(3553,Dt.__webglTexture),tt(3553,Ze,xe),Oe(Pe.__webglFramebuffer,se,Ze,36064+at,3553),z(Ze,xe)&&J(3553)}s.unbindTexture()}else{let ce=3553;(se.isWebGL3DRenderTarget||se.isWebGLArrayRenderTarget)&&(m?ce=se.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),s.bindTexture(ce,_e.__webglTexture),tt(ce,re,xe),Oe(Pe.__webglFramebuffer,se,re,36064,ce),z(re,xe)&&J(ce),s.unbindTexture()}se.depthBuffer&&At(se)},this.updateRenderTargetMipmap=function(se){const re=G(se)||m,Pe=!0===se.isWebGLMultipleRenderTargets?se.texture:[se.texture];for(let _e=0,ae=Pe.length;_e<ae;_e++){const Q=Pe[_e];if(z(Q,re)){const xe=se.isWebGLCubeRenderTarget?34067:3553,ce=a.get(Q).__webglTexture;s.bindTexture(xe,ce),J(xe),s.unbindTexture()}}},this.updateMultisampleRenderTarget=function(se){if(m&&se.samples>0&&!1===Tt(se)){const re=se.width,Pe=se.height;let _e=16384;const ae=[36064],Q=se.stencilBuffer?33306:36096;se.depthBuffer&&ae.push(Q);const xe=a.get(se),ce=void 0!==xe.__ignoreDepthValues&&xe.__ignoreDepthValues;!1===ce&&(se.depthBuffer&&(_e|=256),se.stencilBuffer&&(_e|=1024)),s.bindFramebuffer(36008,xe.__webglMultisampledFramebuffer),s.bindFramebuffer(36009,xe.__webglFramebuffer),!0===ce&&(f.invalidateFramebuffer(36008,[Q]),f.invalidateFramebuffer(36009,[Q])),f.blitFramebuffer(0,0,re,Pe,0,0,re,Pe,_e,9728),E&&f.invalidateFramebuffer(36008,ae),s.bindFramebuffer(36008,null),s.bindFramebuffer(36009,xe.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=At,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=Tt}function kS(f,r,s){const a=s.isWebGL2;return{convert:function(c,h=null){let d;if(1009===c)return 5121;if(1017===c)return 32819;if(1018===c)return 32820;if(1010===c)return 5120;if(1011===c)return 5122;if(1012===c)return 5123;if(1013===c)return 5124;if(1014===c)return 5125;if(1015===c)return 5126;if(1016===c)return a?5131:(d=r.get("OES_texture_half_float"),null!==d?d.HALF_FLOAT_OES:null);if(1021===c)return 6406;if(1023===c)return 6408;if(1024===c)return 6409;if(1025===c)return 6410;if(1026===c)return 6402;if(1027===c)return 34041;if(1028===c)return 6403;if(1022===c)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===c)return d=r.get("EXT_sRGB"),null!==d?d.SRGB_ALPHA_EXT:null;if(1029===c)return 36244;if(1030===c)return 33319;if(1031===c)return 33320;if(1033===c)return 36249;if(33776===c||33777===c||33778===c||33779===c)if(3001===h){if(d=r.get("WEBGL_compressed_texture_s3tc_srgb"),null===d)return null;if(33776===c)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===c)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===c)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===c)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(d=r.get("WEBGL_compressed_texture_s3tc"),null===d)return null;if(33776===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c){if(d=r.get("WEBGL_compressed_texture_pvrtc"),null===d)return null;if(35840===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c)return d=r.get("WEBGL_compressed_texture_etc1"),null!==d?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===c||37496===c){if(d=r.get("WEBGL_compressed_texture_etc"),null===d)return null;if(37492===c)return 3001===h?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(37496===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c){if(d=r.get("WEBGL_compressed_texture_astc"),null===d)return null;if(37808===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===c)return 3001===h?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===c){if(d=r.get("EXT_texture_compression_bptc"),null===d)return null;if(36492===c)return 3001===h?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===c?a?34042:(d=r.get("WEBGL_depth_texture"),null!==d?d.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}Am.prototype.isMeshDistanceMaterial=!0;class tv extends Vi{constructor(r=[]){super(),this.cameras=r}}tv.prototype.isArrayCamera=!0;class bl extends Bt{constructor(){super(),this.type="Group"}}bl.prototype.isGroup=!0;const NS={type:"move"};class Qe{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new bl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new bl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new bl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(r){return null!==this._targetRay&&this._targetRay.dispatchEvent(r),null!==this._grip&&this._grip.dispatchEvent(r),null!==this._hand&&this._hand.dispatchEvent(r),this}disconnect(r){return this.dispatchEvent({type:"disconnected",data:r}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(r,s,a){let c=null,h=null,d=null;const m=this._targetRay,g=this._grip,y=this._hand;if(r&&"visible-blurred"!==s.session.visibilityState)if(null!==m&&(c=s.getPose(r.targetRaySpace,a),null!==c&&(m.matrix.fromArray(c.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),c.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(c.linearVelocity)):m.hasLinearVelocity=!1,c.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(c.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(NS))),y&&r.hand){d=!0;for(const I of r.hand.values()){const L=s.getJointPose(I,a);if(void 0===y.joints[I.jointName]){const $=new bl;$.matrixAutoUpdate=!1,$.visible=!1,y.joints[I.jointName]=$,y.add($)}const R=y.joints[I.jointName];null!==L&&(R.matrix.fromArray(L.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.jointRadius=L.radius),R.visible=null!==L}const x=y.joints["index-finger-tip"].position.distanceTo(y.joints["thumb-tip"].position),E=.02,T=.005;y.inputState.pinching&&x>E+T?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:r.handedness,target:this})):!y.inputState.pinching&&x<=E-T&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:r.handedness,target:this}))}else null!==g&&r.gripSpace&&(h=s.getPose(r.gripSpace,a),null!==h&&(g.matrix.fromArray(h.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),h.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(h.linearVelocity)):g.hasLinearVelocity=!1,h.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(h.angularVelocity)):g.hasAngularVelocity=!1));return null!==m&&(m.visible=null!==c),null!==g&&(g.visible=null!==h),null!==y&&(y.visible=null!==d),this}}class er extends q{constructor(r,s,a,c,h,d,m,g,y,b){if(1026!==(b=void 0!==b?b:1026)&&1027!==b)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===a&&1026===b&&(a=1012),void 0===a&&1027===b&&(a=1020),super(null,c,h,d,m,g,b,a,y),this.image={width:r,height:s},this.magFilter=void 0!==m?m:1003,this.minFilter=void 0!==g?g:1003,this.flipY=!1,this.generateMipmaps=!1}}er.prototype.isDepthTexture=!0;class ka extends U{constructor(r,s){super();const a=this;let c=null,h=1,d=null,m="local-floor",g=null,y=null,b=null,w=null,x=null;const E=s.getContextAttributes();let T=null,I=null;const L=[],R=new Map,$=new Vi;$.layers.enable(1),$.viewport=new k;const B=new Vi;B.layers.enable(2),B.viewport=new k;const G=[$,B],z=new tv;z.layers.enable(1),z.layers.enable(2);let J=null,te=null;function le(Ne){const tt=R.get(Ne.inputSource);tt&&tt.dispatchEvent({type:Ne.type,data:Ne.inputSource})}function oe(){R.forEach(function(Ne,tt){Ne.disconnect(tt)}),R.clear(),J=null,te=null,r.setRenderTarget(T),w=null,b=null,y=null,c=null,I=null,Ve.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function de(Ne){const tt=c.inputSources;for(let We=0;We<L.length;We++)R.set(tt[We],L[We]);for(let We=0;We<Ne.removed.length;We++){const ze=Ne.removed[We],Oe=R.get(ze);Oe&&(Oe.dispatchEvent({type:"disconnected",data:ze}),R.delete(ze))}for(let We=0;We<Ne.added.length;We++){const ze=Ne.added[We],Oe=R.get(ze);Oe&&Oe.dispatchEvent({type:"connected",data:ze})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ne){let tt=L[Ne];return void 0===tt&&(tt=new Qe,L[Ne]=tt),tt.getTargetRaySpace()},this.getControllerGrip=function(Ne){let tt=L[Ne];return void 0===tt&&(tt=new Qe,L[Ne]=tt),tt.getGripSpace()},this.getHand=function(Ne){let tt=L[Ne];return void 0===tt&&(tt=new Qe,L[Ne]=tt),tt.getHandSpace()},this.setFramebufferScaleFactor=function(Ne){h=Ne,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ne){m=Ne,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d},this.getBaseLayer=function(){return null!==b?b:w},this.getBinding=function(){return y},this.getFrame=function(){return x},this.getSession=function(){return c},this.setSession=function(){var Ne=(0,Y.Z)(function*(tt){if(c=tt,null!==c){if(T=r.getRenderTarget(),c.addEventListener("select",le),c.addEventListener("selectstart",le),c.addEventListener("selectend",le),c.addEventListener("squeeze",le),c.addEventListener("squeezestart",le),c.addEventListener("squeezeend",le),c.addEventListener("end",oe),c.addEventListener("inputsourceschange",de),!0!==E.xrCompatible&&(yield s.makeXRCompatible()),void 0===c.renderState.layers||!1===r.capabilities.isWebGL2)w=new XRWebGLLayer(c,s,{antialias:void 0!==c.renderState.layers||E.antialias,alpha:E.alpha,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:h}),c.updateRenderState({baseLayer:w}),I=new K(w.framebufferWidth,w.framebufferHeight,{format:1023,type:1009,encoding:r.outputEncoding});else{let We=null,ze=null,Oe=null;E.depth&&(Oe=E.stencil?35056:33190,We=E.stencil?1027:1026,ze=E.stencil?1020:1012);const Ct={colorFormat:3001===r.outputEncoding?35907:32856,depthFormat:Oe,scaleFactor:h};y=new XRWebGLBinding(c,s),b=y.createProjectionLayer(Ct),c.updateRenderState({layers:[b]}),I=new K(b.textureWidth,b.textureHeight,{format:1023,type:1009,depthTexture:new er(b.textureWidth,b.textureHeight,ze,void 0,void 0,void 0,void 0,void 0,void 0,We),stencilBuffer:E.stencil,encoding:r.outputEncoding,samples:E.antialias?4:0}),r.properties.get(I).__ignoreDepthValues=b.ignoreDepthValues}I.isXRRenderTarget=!0,this.setFoveation(1),d=yield c.requestReferenceSpace(m),Ve.setContext(c),Ve.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}});return function(tt){return Ne.apply(this,arguments)}}();const we=new F,ke=new F;function je(Ne,tt){null===tt?Ne.matrixWorld.copy(Ne.matrix):Ne.matrixWorld.multiplyMatrices(tt.matrixWorld,Ne.matrix),Ne.matrixWorldInverse.copy(Ne.matrixWorld).invert()}this.updateCamera=function(Ne){if(null===c)return;z.near=B.near=$.near=Ne.near,z.far=B.far=$.far=Ne.far,J===z.near&&te===z.far||(c.updateRenderState({depthNear:z.near,depthFar:z.far}),J=z.near,te=z.far);const tt=Ne.parent,We=z.cameras;je(z,tt);for(let Oe=0;Oe<We.length;Oe++)je(We[Oe],tt);z.matrixWorld.decompose(z.position,z.quaternion,z.scale),Ne.position.copy(z.position),Ne.quaternion.copy(z.quaternion),Ne.scale.copy(z.scale),Ne.matrix.copy(z.matrix),Ne.matrixWorld.copy(z.matrixWorld);const ze=Ne.children;for(let Oe=0,Ct=ze.length;Oe<Ct;Oe++)ze[Oe].updateMatrixWorld(!0);2===We.length?function(Oe,Ct,At){we.setFromMatrixPosition(Ct.matrixWorld),ke.setFromMatrixPosition(At.matrixWorld);const Nt=we.distanceTo(ke),Tt=Ct.projectionMatrix.elements,Rn=At.projectionMatrix.elements,se=Tt[14]/(Tt[10]-1),re=Tt[14]/(Tt[10]+1),Pe=(Tt[9]+1)/Tt[5],_e=(Tt[9]-1)/Tt[5],ae=(Tt[8]-1)/Tt[0],Q=(Rn[8]+1)/Rn[0],xe=se*ae,ce=se*Q,at=Nt/(-ae+Q),$e=at*-ae;Ct.matrixWorld.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.translateX($e),Oe.translateZ(at),Oe.matrixWorld.compose(Oe.position,Oe.quaternion,Oe.scale),Oe.matrixWorldInverse.copy(Oe.matrixWorld).invert();const Ze=se+at,Dt=re+at;Oe.projectionMatrix.makePerspective(xe-$e,ce+(Nt-$e),Pe*re/Dt*Ze,_e*re/Dt*Ze,Ze,Dt)}(z,$,B):z.projectionMatrix.copy($.projectionMatrix)},this.getCamera=function(){return z},this.getFoveation=function(){return null!==b?b.fixedFoveation:null!==w?w.fixedFoveation:void 0},this.setFoveation=function(Ne){null!==b&&(b.fixedFoveation=Ne),null!==w&&void 0!==w.fixedFoveation&&(w.fixedFoveation=Ne)};let me=null;const Ve=new mo;Ve.setAnimationLoop(function(Ne,tt){if(g=tt.getViewerPose(d),x=tt,null!==g){const ze=g.views;null!==w&&(r.setRenderTargetFramebuffer(I,w.framebuffer),r.setRenderTarget(I));let Oe=!1;ze.length!==z.cameras.length&&(z.cameras.length=0,Oe=!0);for(let Ct=0;Ct<ze.length;Ct++){const At=ze[Ct];let Nt=null;if(null!==w)Nt=w.getViewport(At);else{const Rn=y.getViewSubImage(b,At);Nt=Rn.viewport,0===Ct&&(r.setRenderTargetTextures(I,Rn.colorTexture,b.ignoreDepthValues?void 0:Rn.depthStencilTexture),r.setRenderTarget(I))}const Tt=G[Ct];Tt.matrix.fromArray(At.transform.matrix),Tt.projectionMatrix.fromArray(At.projectionMatrix),Tt.viewport.set(Nt.x,Nt.y,Nt.width,Nt.height),0===Ct&&z.matrix.copy(Tt.matrix),!0===Oe&&z.cameras.push(Tt)}}const We=c.inputSources;for(let ze=0;ze<L.length;ze++)L[ze].update(We[ze],tt,d);me&&me(Ne,tt),x=null}),this.setAnimationLoop=function(Ne){me=Ne},this.dispose=function(){}}}function Na(f,r){function s(a,c){a.opacity.value=c.opacity,c.color&&a.diffuse.value.copy(c.color),c.emissive&&a.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity),c.map&&(a.map.value=c.map),c.alphaMap&&(a.alphaMap.value=c.alphaMap),c.bumpMap&&(a.bumpMap.value=c.bumpMap,a.bumpScale.value=c.bumpScale,1===c.side&&(a.bumpScale.value*=-1)),c.displacementMap&&(a.displacementMap.value=c.displacementMap,a.displacementScale.value=c.displacementScale,a.displacementBias.value=c.displacementBias),c.emissiveMap&&(a.emissiveMap.value=c.emissiveMap),c.normalMap&&(a.normalMap.value=c.normalMap,a.normalScale.value.copy(c.normalScale),1===c.side&&a.normalScale.value.negate()),c.specularMap&&(a.specularMap.value=c.specularMap),c.alphaTest>0&&(a.alphaTest.value=c.alphaTest);const h=r.get(c).envMap;if(h&&(a.envMap.value=h,a.flipEnvMap.value=h.isCubeTexture&&!1===h.isRenderTargetTexture?-1:1,a.reflectivity.value=c.reflectivity,a.ior.value=c.ior,a.refractionRatio.value=c.refractionRatio),c.lightMap){a.lightMap.value=c.lightMap;const g=!0!==f.physicallyCorrectLights?Math.PI:1;a.lightMapIntensity.value=c.lightMapIntensity*g}let d,m;c.aoMap&&(a.aoMap.value=c.aoMap,a.aoMapIntensity.value=c.aoMapIntensity),c.map?d=c.map:c.specularMap?d=c.specularMap:c.displacementMap?d=c.displacementMap:c.normalMap?d=c.normalMap:c.bumpMap?d=c.bumpMap:c.roughnessMap?d=c.roughnessMap:c.metalnessMap?d=c.metalnessMap:c.alphaMap?d=c.alphaMap:c.emissiveMap?d=c.emissiveMap:c.clearcoatMap?d=c.clearcoatMap:c.clearcoatNormalMap?d=c.clearcoatNormalMap:c.clearcoatRoughnessMap?d=c.clearcoatRoughnessMap:c.specularIntensityMap?d=c.specularIntensityMap:c.specularColorMap?d=c.specularColorMap:c.transmissionMap?d=c.transmissionMap:c.thicknessMap?d=c.thicknessMap:c.sheenColorMap?d=c.sheenColorMap:c.sheenRoughnessMap&&(d=c.sheenRoughnessMap),void 0!==d&&(d.isWebGLRenderTarget&&(d=d.texture),!0===d.matrixAutoUpdate&&d.updateMatrix(),a.uvTransform.value.copy(d.matrix)),c.aoMap?m=c.aoMap:c.lightMap&&(m=c.lightMap),void 0!==m&&(m.isWebGLRenderTarget&&(m=m.texture),!0===m.matrixAutoUpdate&&m.updateMatrix(),a.uv2Transform.value.copy(m.matrix))}return{refreshFogUniforms:function(a,c){a.fogColor.value.copy(c.color),c.isFog?(a.fogNear.value=c.near,a.fogFar.value=c.far):c.isFogExp2&&(a.fogDensity.value=c.density)},refreshMaterialUniforms:function(a,c,h,d,m){var y;c.isMeshBasicMaterial||c.isMeshLambertMaterial?s(a,c):c.isMeshToonMaterial?(s(a,c),(y=c).gradientMap&&(a.gradientMap.value=y.gradientMap)):c.isMeshPhongMaterial?(s(a,c),function(g,y){g.specular.value.copy(y.specular),g.shininess.value=Math.max(y.shininess,1e-4)}(a,c)):c.isMeshStandardMaterial?(s(a,c),function(g,y){g.roughness.value=y.roughness,g.metalness.value=y.metalness,y.roughnessMap&&(g.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(g.metalnessMap.value=y.metalnessMap),r.get(y).envMap&&(g.envMapIntensity.value=y.envMapIntensity)}(a,c),c.isMeshPhysicalMaterial&&function(g,y,b){g.ior.value=y.ior,y.sheen>0&&(g.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),g.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(g.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(g.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(g.clearcoat.value=y.clearcoat,g.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(g.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),g.clearcoatNormalMap.value=y.clearcoatNormalMap,1===y.side&&g.clearcoatNormalScale.value.negate())),y.transmission>0&&(g.transmission.value=y.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(g.transmissionMap.value=y.transmissionMap),g.thickness.value=y.thickness,y.thicknessMap&&(g.thicknessMap.value=y.thicknessMap),g.attenuationDistance.value=y.attenuationDistance,g.attenuationColor.value.copy(y.attenuationColor)),g.specularIntensity.value=y.specularIntensity,g.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(g.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(g.specularColorMap.value=y.specularColorMap)}(a,c,m)):c.isMeshMatcapMaterial?(s(a,c),function(g,y){y.matcap&&(g.matcap.value=y.matcap)}(a,c)):c.isMeshDepthMaterial?s(a,c):c.isMeshDistanceMaterial?(s(a,c),function(g,y){g.referencePosition.value.copy(y.referencePosition),g.nearDistance.value=y.nearDistance,g.farDistance.value=y.farDistance}(a,c)):c.isMeshNormalMaterial?s(a,c):c.isLineBasicMaterial?(function(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity}(a,c),c.isLineDashedMaterial&&function(g,y){g.dashSize.value=y.dashSize,g.totalSize.value=y.dashSize+y.gapSize,g.scale.value=y.scale}(a,c)):c.isPointsMaterial?function(g,y,b,w){let x;g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.size.value=y.size*b,g.scale.value=.5*w,y.map&&(g.map.value=y.map),y.alphaMap&&(g.alphaMap.value=y.alphaMap),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest),y.map?x=y.map:y.alphaMap&&(x=y.alphaMap),void 0!==x&&(!0===x.matrixAutoUpdate&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}(a,c,h,d):c.isSpriteMaterial?function(g,y){let b;g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.rotation.value=y.rotation,y.map&&(g.map.value=y.map),y.alphaMap&&(g.alphaMap.value=y.alphaMap),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest),y.map?b=y.map:y.alphaMap&&(b=y.alphaMap),void 0!==b&&(!0===b.matrixAutoUpdate&&b.updateMatrix(),g.uvTransform.value.copy(b.matrix))}(a,c):c.isShadowMaterial?(a.color.value.copy(c.color),a.opacity.value=c.opacity):c.isShaderMaterial&&(c.uniformsNeedUpdate=!1)}}}function un(f={}){const r=void 0!==f.canvas?f.canvas:function(){const ue=Lt("canvas");return ue.style.display="block",ue}(),s=void 0!==f.context?f.context:null,a=void 0===f.depth||f.depth,c=void 0===f.stencil||f.stencil,h=void 0!==f.antialias&&f.antialias,d=void 0===f.premultipliedAlpha||f.premultipliedAlpha,m=void 0!==f.preserveDrawingBuffer&&f.preserveDrawingBuffer,g=void 0!==f.powerPreference?f.powerPreference:"default",y=void 0!==f.failIfMajorPerformanceCaveat&&f.failIfMajorPerformanceCaveat;let b;b=void 0!==f.context?s.getContextAttributes().alpha:void 0!==f.alpha&&f.alpha;let w=null,x=null;const E=[],T=[];this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const I=this;let L=!1,R=0,$=0,B=null,G=-1,z=null;const J=new k,te=new k;let le=null,oe=r.width,de=r.height,we=1,ke=null,je=null;const me=new k(0,0,oe,de),Ve=new k(0,0,oe,de);let Ne=!1;const tt=new pm;let We=!1,ze=!1,Oe=null;const Ct=new mt,At=new Me,Nt=new F,Tt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Rn(){return null===B?we:1}let se,re,Pe,_e,ae,Q,xe,ce,at,$e,Ze,Dt,Ot,bn,$t,gn,In,On,bi,Yl,Mn,fr,Ar,Rt=s;function z1(ue,Ue){for(let Ke=0;Ke<ue.length;Ke++){const dt=r.getContext(ue[Ke],Ue);if(null!==dt)return dt}return null}try{const ue={alpha:!0,depth:a,stencil:c,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:m,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r139"),r.addEventListener("webglcontextlost",G1,!1),r.addEventListener("webglcontextrestored",W1,!1),null===Rt){const Ue=["webgl2","webgl","experimental-webgl"];if(!0===I.isWebGL1Renderer&&Ue.shift(),Rt=z1(Ue,ue),null===Rt)throw z1(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Rt.getShaderPrecisionFormat&&(Rt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}function j1(){se=new $b(Rt),re=new GR(Rt,se,f),se.init(re),fr=new kS(Rt,se,re),Pe=new IS(Rt,se,re),_e=new kr(Rt),ae=new To,Q=new PS(Rt,se,Pe,ae,re,fr,_e),xe=new Lh(I),ce=new mS(I),at=new jb(Rt,re),Ar=new Zo(Rt,se,at,re),$e=new qt(Rt,at,_e,Ar),Ze=new kt(Rt,$e,at,_e),bi=new Co(Rt,re,Q),gn=new WR(ae),Dt=new Sm(I,xe,ce,se,re,Ar,gn),Ot=new Na(I,ae),bn=new yo,$t=new ev(se,re),On=new jR(I,xe,Pe,Ze,b,d),In=new RS(I,Ze,re),Yl=new Gr(Rt,se,_e,re),Mn=new Js(Rt,se,_e,re),_e.programs=Dt.programs,I.capabilities=re,I.extensions=se,I.properties=ae,I.renderLists=bn,I.shadowMap=In,I.state=Pe,I.info=_e}j1();const Mo=new ka(I,Rt);function G1(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function W1(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const ue=_e.autoReset,Ue=In.enabled,Ke=In.autoUpdate,lt=In.needsUpdate,dt=In.type;j1(),_e.autoReset=ue,In.enabled=Ue,In.autoUpdate=Ke,In.needsUpdate=lt,In.type=dt}function q1(ue){const Ue=ue.target;var Ke;Ue.removeEventListener("dispose",q1),function(lt){const dt=ae.get(lt).programs;void 0!==dt&&(dt.forEach(function(vn){Dt.releaseProgram(vn)}),lt.isShaderMaterial&&Dt.releaseShaderCache(lt))}(Ke=Ue),ae.remove(Ke)}this.xr=Mo,this.getContext=function(){return Rt},this.getContextAttributes=function(){return Rt.getContextAttributes()},this.forceContextLoss=function(){const ue=se.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=se.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return we},this.setPixelRatio=function(ue){void 0!==ue&&(we=ue,this.setSize(oe,de,!1))},this.getSize=function(ue){return ue.set(oe,de)},this.setSize=function(ue,Ue,Ke){Mo.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(oe=ue,de=Ue,r.width=Math.floor(ue*we),r.height=Math.floor(Ue*we),!1!==Ke&&(r.style.width=ue+"px",r.style.height=Ue+"px"),this.setViewport(0,0,ue,Ue))},this.getDrawingBufferSize=function(ue){return ue.set(oe*we,de*we).floor()},this.setDrawingBufferSize=function(ue,Ue,Ke){oe=ue,de=Ue,we=Ke,r.width=Math.floor(ue*Ke),r.height=Math.floor(Ue*Ke),this.setViewport(0,0,ue,Ue)},this.getCurrentViewport=function(ue){return ue.copy(J)},this.getViewport=function(ue){return ue.copy(me)},this.setViewport=function(ue,Ue,Ke,lt){ue.isVector4?me.set(ue.x,ue.y,ue.z,ue.w):me.set(ue,Ue,Ke,lt),Pe.viewport(J.copy(me).multiplyScalar(we).floor())},this.getScissor=function(ue){return ue.copy(Ve)},this.setScissor=function(ue,Ue,Ke,lt){ue.isVector4?Ve.set(ue.x,ue.y,ue.z,ue.w):Ve.set(ue,Ue,Ke,lt),Pe.scissor(te.copy(Ve).multiplyScalar(we).floor())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(ue){Pe.setScissorTest(Ne=ue)},this.setOpaqueSort=function(ue){ke=ue},this.setTransparentSort=function(ue){je=ue},this.getClearColor=function(ue){return ue.copy(On.getClearColor())},this.setClearColor=function(){On.setClearColor.apply(On,arguments)},this.getClearAlpha=function(){return On.getClearAlpha()},this.setClearAlpha=function(){On.setClearAlpha.apply(On,arguments)},this.clear=function(ue=!0,Ue=!0,Ke=!0){let lt=0;ue&&(lt|=16384),Ue&&(lt|=256),Ke&&(lt|=1024),Rt.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",G1,!1),r.removeEventListener("webglcontextrestored",W1,!1),bn.dispose(),$t.dispose(),ae.dispose(),xe.dispose(),ce.dispose(),Ze.dispose(),Ar.dispose(),Dt.dispose(),Mo.dispose(),Mo.removeEventListener("sessionstart",$1),Mo.removeEventListener("sessionend",I_),Oe&&(Oe.dispose(),Oe=null),Oc.stop()},this.renderBufferDirect=function(ue,Ue,Ke,lt,dt,vn){null===Ue&&(Ue=Tt);const Pn=dt.isMesh&&dt.matrixWorld.determinant()<0,kn=function(Zi,Bd,Vo,Fn,Ji){!0!==Bd.isScene&&(Bd=Tt),Q.resetTextureUnits();const L_=Bd.fog,Z1=null===B?I.outputEncoding:!0===B.isXRRenderTarget?B.texture.encoding:3e3,kI=(Fn.isMeshStandardMaterial?ce:xe).get(Fn.envMap||(Fn.isMeshStandardMaterial?Bd.environment:null)),J1=!0===Fn.vertexColors&&!!Vo.attributes.color&&4===Vo.attributes.color.itemSize,wA=!!Fn.normalMap&&!!Vo.attributes.tangent,xA=!!Vo.morphAttributes.position,NI=!!Vo.morphAttributes.normal,LI=!!Vo.morphAttributes.color,MA=Fn.toneMapped?I.toneMapping:0,Q1=Vo.morphAttributes.position||Vo.morphAttributes.normal||Vo.morphAttributes.color,EA=void 0!==Q1?Q1.length:0,$r=ae.get(Fn),SA=x.state.lights;!0!==We||!0!==ze&&Zi===z||gn.setState(Fn,Zi,Zi===z&&Fn.id===G);let Zl=!1;Fn.version===$r.__version?$r.needsLights&&$r.lightsStateVersion!==SA.state.version||$r.outputEncoding!==Z1||Ji.isInstancedMesh&&!1===$r.instancing?Zl=!0:Ji.isInstancedMesh||!0!==$r.instancing?Ji.isSkinnedMesh&&!1===$r.skinning?Zl=!0:Ji.isSkinnedMesh||!0!==$r.skinning?$r.envMap!==kI||Fn.fog&&$r.fog!==L_?Zl=!0:void 0===$r.numClippingPlanes||$r.numClippingPlanes===gn.numPlanes&&$r.numIntersection===gn.numIntersection?($r.vertexAlphas!==J1||$r.vertexTangents!==wA||$r.morphTargets!==xA||$r.morphNormals!==NI||$r.morphColors!==LI||$r.toneMapping!==MA||!0===re.isWebGL2&&$r.morphTargetsCount!==EA)&&(Zl=!0):Zl=!0:Zl=!0:Zl=!0:(Zl=!0,$r.__version=Fn.version);let Up=$r.currentProgram;!0===Zl&&(Up=P_(Fn,Bd,Ji));let eM=!1,Hp=!1,O_=!1;const Es=Up.getUniforms(),zp=$r.uniforms;if(Pe.useProgram(Up.program)&&(eM=!0,Hp=!0,O_=!0),Fn.id!==G&&(G=Fn.id,Hp=!0),eM||z!==Zi){if(Es.setValue(Rt,"projectionMatrix",Zi.projectionMatrix),re.logarithmicDepthBuffer&&Es.setValue(Rt,"logDepthBufFC",2/(Math.log(Zi.far+1)/Math.LN2)),z!==Zi&&(z=Zi,Hp=!0,O_=!0),Fn.isShaderMaterial||Fn.isMeshPhongMaterial||Fn.isMeshToonMaterial||Fn.isMeshStandardMaterial||Fn.envMap){const Ho=Es.map.cameraPosition;void 0!==Ho&&Ho.setValue(Rt,Nt.setFromMatrixPosition(Zi.matrixWorld))}(Fn.isMeshPhongMaterial||Fn.isMeshToonMaterial||Fn.isMeshLambertMaterial||Fn.isMeshBasicMaterial||Fn.isMeshStandardMaterial||Fn.isShaderMaterial)&&Es.setValue(Rt,"isOrthographic",!0===Zi.isOrthographicCamera),(Fn.isMeshPhongMaterial||Fn.isMeshToonMaterial||Fn.isMeshLambertMaterial||Fn.isMeshBasicMaterial||Fn.isMeshStandardMaterial||Fn.isShaderMaterial||Fn.isShadowMaterial||Ji.isSkinnedMesh)&&Es.setValue(Rt,"viewMatrix",Zi.matrixWorldInverse)}if(Ji.isSkinnedMesh){Es.setOptional(Rt,Ji,"bindMatrix"),Es.setOptional(Rt,Ji,"bindMatrixInverse");const Ho=Ji.skeleton;Ho&&(re.floatVertexTextures?(null===Ho.boneTexture&&Ho.computeBoneTexture(),Es.setValue(Rt,"boneTexture",Ho.boneTexture,Q),Es.setValue(Rt,"boneTextureSize",Ho.boneTextureSize)):Es.setOptional(Rt,Ho,"boneMatrices"))}const oh=Vo.morphAttributes;var _a,Uo;return(void 0!==oh.position||void 0!==oh.normal||void 0!==oh.color&&!0===re.isWebGL2)&&bi.update(Ji,Vo,Fn,Up),(Hp||$r.receiveShadow!==Ji.receiveShadow)&&($r.receiveShadow=Ji.receiveShadow,Es.setValue(Rt,"receiveShadow",Ji.receiveShadow)),Hp&&(Es.setValue(Rt,"toneMappingExposure",I.toneMappingExposure),$r.needsLights&&((_a=zp).ambientLightColor.needsUpdate=Uo=O_,_a.lightProbe.needsUpdate=Uo,_a.directionalLights.needsUpdate=Uo,_a.directionalLightShadows.needsUpdate=Uo,_a.pointLights.needsUpdate=Uo,_a.pointLightShadows.needsUpdate=Uo,_a.spotLights.needsUpdate=Uo,_a.spotLightShadows.needsUpdate=Uo,_a.rectAreaLights.needsUpdate=Uo,_a.hemisphereLights.needsUpdate=Uo),L_&&Fn.fog&&Ot.refreshFogUniforms(zp,L_),Ot.refreshMaterialUniforms(zp,Fn,we,de,Oe),au.upload(Rt,$r.uniformsList,zp,Q)),Fn.isShaderMaterial&&!0===Fn.uniformsNeedUpdate&&(au.upload(Rt,$r.uniformsList,zp,Q),Fn.uniformsNeedUpdate=!1),Fn.isSpriteMaterial&&Es.setValue(Rt,"center",Ji.center),Es.setValue(Rt,"modelViewMatrix",Ji.modelViewMatrix),Es.setValue(Rt,"normalMatrix",Ji.normalMatrix),Es.setValue(Rt,"modelMatrix",Ji.matrixWorld),Up}(ue,Ue,Ke,lt,dt);Pe.setMaterial(lt,Pn);let zt=Ke.index;const qr=Ke.attributes.position;if(null===zt){if(void 0===qr||0===qr.count)return}else if(0===zt.count)return;let pr,$n=1;!0===lt.wireframe&&(zt=$e.getWireframeAttribute(Ke),$n=2),Ar.setup(dt,lt,kn,Ke,zt);let cs=Yl;null!==zt&&(pr=at.get(zt),cs=Mn,cs.setIndex(pr));const Fd=null!==zt?zt.count:qr.count,so=Ke.drawRange.start*$n,k_=Ke.drawRange.count*$n,ya=null!==vn?vn.start*$n:0,_A=null!==vn?vn.count*$n:1/0,l0=Math.max(so,ya),N_=Math.min(Fd,so+k_,ya+_A)-1,Vp=Math.max(0,N_-l0+1);if(0!==Vp){if(dt.isMesh)!0===lt.wireframe?(Pe.setLineWidth(lt.wireframeLinewidth*Rn()),cs.setMode(1)):cs.setMode(4);else if(dt.isLine){let Zi=lt.linewidth;void 0===Zi&&(Zi=1),Pe.setLineWidth(Zi*Rn()),cs.setMode(dt.isLineSegments?1:dt.isLineLoop?2:3)}else dt.isPoints?cs.setMode(0):dt.isSprite&&cs.setMode(4);if(dt.isInstancedMesh)cs.renderInstances(l0,Vp,dt.count);else if(Ke.isInstancedBufferGeometry){const Zi=Math.min(Ke.instanceCount,Ke._maxInstanceCount);cs.renderInstances(l0,Vp,Zi)}else cs.render(l0,Vp)}},this.compile=function(ue,Ue){x=$t.get(ue),x.init(),T.push(x),ue.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(Ue.layers)&&(x.pushLight(Ke),Ke.castShadow&&x.pushShadow(Ke))}),x.setupLights(I.physicallyCorrectLights),ue.traverse(function(Ke){const lt=Ke.material;if(lt)if(Array.isArray(lt))for(let dt=0;dt<lt.length;dt++)P_(lt[dt],ue,Ke);else P_(lt,ue,Ke)}),T.pop(),x=null};let R_=null;function $1(){Oc.stop()}function I_(){Oc.start()}const Oc=new mo;function X1(ue,Ue,Ke,lt){if(!1===ue.visible)return;if(ue.layers.test(Ue.layers))if(ue.isGroup)Ke=ue.renderOrder;else if(ue.isLOD)!0===ue.autoUpdate&&ue.update(Ue);else if(ue.isLight)x.pushLight(ue),ue.castShadow&&x.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||tt.intersectsSprite(ue)){lt&&Nt.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(Ct);const vn=Ze.update(ue),Pn=ue.material;Pn.visible&&w.push(ue,vn,Pn,Ke,Nt.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(ue.isSkinnedMesh&&ue.skeleton.frame!==_e.render.frame&&(ue.skeleton.update(),ue.skeleton.frame=_e.render.frame),!ue.frustumCulled||tt.intersectsObject(ue))){lt&&Nt.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(Ct);const vn=Ze.update(ue),Pn=ue.material;if(Array.isArray(Pn)){const kn=vn.groups;for(let zt=0,qr=kn.length;zt<qr;zt++){const pr=kn[zt],$n=Pn[pr.materialIndex];$n&&$n.visible&&w.push(ue,vn,$n,Ke,Nt.z,pr)}}else Pn.visible&&w.push(ue,vn,Pn,Ke,Nt.z,null)}const dt=ue.children;for(let vn=0,Pn=dt.length;vn<Pn;vn++)X1(dt[vn],Ue,Ke,lt)}function K1(ue,Ue,Ke,lt){const dt=ue.opaque,vn=ue.transmissive,Pn=ue.transparent;x.setupLightsView(Ke),vn.length>0&&function(kn,zt,qr){const pr=re.isWebGL2;null===Oe&&(Oe=new K(1,1,{generateMipmaps:!0,type:null!==fr.convert(1016)?1016:1009,minFilter:1008,samples:pr&&!0===h?4:0})),I.getDrawingBufferSize(At),pr?Oe.setSize(At.x,At.y):Oe.setSize(nt(At.x),nt(At.y));const $n=I.getRenderTarget();I.setRenderTarget(Oe),I.clear();const cs=I.toneMapping;I.toneMapping=0,Bp(kn,zt,qr),I.toneMapping=cs,Q.updateMultisampleRenderTarget(Oe),Q.updateRenderTargetMipmap(Oe),I.setRenderTarget($n)}(dt,Ue,Ke),lt&&Pe.viewport(J.copy(lt)),dt.length>0&&Bp(dt,Ue,Ke),vn.length>0&&Bp(vn,Ue,Ke),Pn.length>0&&Bp(Pn,Ue,Ke),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function Bp(ue,Ue,Ke){const lt=!0===Ue.isScene?Ue.overrideMaterial:null;for(let dt=0,vn=ue.length;dt<vn;dt++){const Pn=ue[dt],kn=Pn.object,zt=Pn.geometry,qr=null===lt?Pn.material:lt,pr=Pn.group;kn.layers.test(Ke.layers)&&yA(kn,Ue,Ke,zt,qr,pr)}}function yA(ue,Ue,Ke,lt,dt,vn){ue.onBeforeRender(I,Ue,Ke,lt,dt,vn),ue.modelViewMatrix.multiplyMatrices(Ke.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),dt.onBeforeRender(I,Ue,Ke,lt,ue,vn),!0===dt.transparent&&2===dt.side?(dt.side=1,dt.needsUpdate=!0,I.renderBufferDirect(Ke,Ue,lt,dt,ue,vn),dt.side=0,dt.needsUpdate=!0,I.renderBufferDirect(Ke,Ue,lt,dt,ue,vn),dt.side=2):I.renderBufferDirect(Ke,Ue,lt,dt,ue,vn),ue.onAfterRender(I,Ue,Ke,lt,dt,vn)}function P_(ue,Ue,Ke){!0!==Ue.isScene&&(Ue=Tt);const lt=ae.get(ue),dt=x.state.lights,Pn=dt.state.version,kn=Dt.getParameters(ue,dt.state,x.state.shadowsArray,Ue,Ke),zt=Dt.getProgramCacheKey(kn);let qr=lt.programs;lt.environment=ue.isMeshStandardMaterial?Ue.environment:null,lt.fog=Ue.fog,lt.envMap=(ue.isMeshStandardMaterial?ce:xe).get(ue.envMap||lt.environment),void 0===qr&&(ue.addEventListener("dispose",q1),qr=new Map,lt.programs=qr);let pr=qr.get(zt);if(void 0!==pr){if(lt.currentProgram===pr&&lt.lightsStateVersion===Pn)return Y1(ue,kn),pr}else kn.uniforms=Dt.getUniforms(ue),ue.onBuild(Ke,kn,I),ue.onBeforeCompile(kn,I),pr=Dt.acquireProgram(kn,zt),qr.set(zt,pr),lt.uniforms=kn.uniforms;const $n=lt.uniforms;var so;(ue.isShaderMaterial||ue.isRawShaderMaterial)&&!0!==ue.clipping||($n.clippingPlanes=gn.uniform),Y1(ue,kn),lt.needsLights=(so=ue).isMeshLambertMaterial||so.isMeshToonMaterial||so.isMeshPhongMaterial||so.isMeshStandardMaterial||so.isShadowMaterial||so.isShaderMaterial&&!0===so.lights,lt.lightsStateVersion=Pn,lt.needsLights&&($n.ambientLightColor.value=dt.state.ambient,$n.lightProbe.value=dt.state.probe,$n.directionalLights.value=dt.state.directional,$n.directionalLightShadows.value=dt.state.directionalShadow,$n.spotLights.value=dt.state.spot,$n.spotLightShadows.value=dt.state.spotShadow,$n.rectAreaLights.value=dt.state.rectArea,$n.ltc_1.value=dt.state.rectAreaLTC1,$n.ltc_2.value=dt.state.rectAreaLTC2,$n.pointLights.value=dt.state.point,$n.pointLightShadows.value=dt.state.pointShadow,$n.hemisphereLights.value=dt.state.hemi,$n.directionalShadowMap.value=dt.state.directionalShadowMap,$n.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,$n.spotShadowMap.value=dt.state.spotShadowMap,$n.spotShadowMatrix.value=dt.state.spotShadowMatrix,$n.pointShadowMap.value=dt.state.pointShadowMap,$n.pointShadowMatrix.value=dt.state.pointShadowMatrix);const cs=pr.getUniforms(),Fd=au.seqWithValue(cs.seq,$n);return lt.currentProgram=pr,lt.uniformsList=Fd,pr}function Y1(ue,Ue){const Ke=ae.get(ue);Ke.outputEncoding=Ue.outputEncoding,Ke.instancing=Ue.instancing,Ke.skinning=Ue.skinning,Ke.morphTargets=Ue.morphTargets,Ke.morphNormals=Ue.morphNormals,Ke.morphColors=Ue.morphColors,Ke.morphTargetsCount=Ue.morphTargetsCount,Ke.numClippingPlanes=Ue.numClippingPlanes,Ke.numIntersection=Ue.numClipIntersection,Ke.vertexAlphas=Ue.vertexAlphas,Ke.vertexTangents=Ue.vertexTangents,Ke.toneMapping=Ue.toneMapping}Oc.setAnimationLoop(function(ue){R_&&R_(ue)}),typeof self<"u"&&Oc.setContext(self),this.setAnimationLoop=function(ue){R_=ue,Mo.setAnimationLoop(ue),null===ue?Oc.stop():Oc.start()},Mo.addEventListener("sessionstart",$1),Mo.addEventListener("sessionend",I_),this.render=function(ue,Ue){if(void 0===Ue||!0===Ue.isCamera){if(!0!==L){if(!0===ue.autoUpdate&&ue.updateMatrixWorld(),null===Ue.parent&&Ue.updateMatrixWorld(),!0===Mo.enabled&&!0===Mo.isPresenting&&(!0===Mo.cameraAutoUpdate&&Mo.updateCamera(Ue),Ue=Mo.getCamera()),!0===ue.isScene&&ue.onBeforeRender(I,ue,Ue,B),x=$t.get(ue,T.length),x.init(),T.push(x),Ct.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),tt.setFromProjectionMatrix(Ct),ze=this.localClippingEnabled,We=gn.init(this.clippingPlanes,ze,Ue),w=bn.get(ue,E.length),w.init(),E.push(w),X1(ue,Ue,0,I.sortObjects),w.finish(),!0===I.sortObjects&&w.sort(ke,je),!0===We&&gn.beginShadows(),In.render(x.state.shadowsArray,ue,Ue),!0===We&&gn.endShadows(),!0===this.info.autoReset&&this.info.reset(),On.render(w,ue),x.setupLights(I.physicallyCorrectLights),Ue.isArrayCamera){const lt=Ue.cameras;for(let dt=0,vn=lt.length;dt<vn;dt++){const Pn=lt[dt];K1(w,ue,Pn,Pn.viewport)}}else K1(w,ue,Ue);null!==B&&(Q.updateMultisampleRenderTarget(B),Q.updateRenderTargetMipmap(B)),!0===ue.isScene&&ue.onAfterRender(I,ue,Ue),Ar.resetDefaultState(),G=-1,z=null,T.pop(),x=T.length>0?T[T.length-1]:null,E.pop(),w=E.length>0?E[E.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return $},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(ue,Ue,Ke){ae.get(ue.texture).__webglTexture=Ue,ae.get(ue.depthTexture).__webglTexture=Ke;const lt=ae.get(ue);lt.__hasExternalTextures=!0,lt.__hasExternalTextures&&(lt.__autoAllocateDepthBuffer=void 0===Ke,lt.__autoAllocateDepthBuffer||!0===se.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),lt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ue,Ue){const Ke=ae.get(ue);Ke.__webglFramebuffer=Ue,Ke.__useDefaultFramebuffer=void 0===Ue},this.setRenderTarget=function(ue,Ue=0,Ke=0){B=ue,R=Ue,$=Ke;let lt=!0;if(ue){const kn=ae.get(ue);void 0!==kn.__useDefaultFramebuffer?(Pe.bindFramebuffer(36160,null),lt=!1):void 0===kn.__webglFramebuffer?Q.setupRenderTarget(ue):kn.__hasExternalTextures&&Q.rebindTextures(ue,ae.get(ue.texture).__webglTexture,ae.get(ue.depthTexture).__webglTexture)}let dt=null,vn=!1,Pn=!1;if(ue){const kn=ue.texture;(kn.isData3DTexture||kn.isDataArrayTexture)&&(Pn=!0);const zt=ae.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(dt=zt[Ue],vn=!0):dt=re.isWebGL2&&ue.samples>0&&!1===Q.useMultisampledRTT(ue)?ae.get(ue).__webglMultisampledFramebuffer:zt,J.copy(ue.viewport),te.copy(ue.scissor),le=ue.scissorTest}else J.copy(me).multiplyScalar(we).floor(),te.copy(Ve).multiplyScalar(we).floor(),le=Ne;if(Pe.bindFramebuffer(36160,dt)&&re.drawBuffers&&lt&&Pe.drawBuffers(ue,dt),Pe.viewport(J),Pe.scissor(te),Pe.setScissorTest(le),vn){const kn=ae.get(ue.texture);Rt.framebufferTexture2D(36160,36064,34069+Ue,kn.__webglTexture,Ke)}else if(Pn){const kn=ae.get(ue.texture);Rt.framebufferTextureLayer(36160,36064,kn.__webglTexture,Ke||0,Ue||0)}G=-1},this.readRenderTargetPixels=function(ue,Ue,Ke,lt,dt,vn,Pn){if(!ue||!ue.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let kn=ae.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&void 0!==Pn&&(kn=kn[Pn]),kn){Pe.bindFramebuffer(36160,kn);try{const zt=ue.texture,qr=zt.format,pr=zt.type;if(1023!==qr&&fr.convert(qr)!==Rt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const $n=1016===pr&&(se.has("EXT_color_buffer_half_float")||re.isWebGL2&&se.has("EXT_color_buffer_float"));if(!(1009===pr||fr.convert(pr)===Rt.getParameter(35738)||1015===pr&&(re.isWebGL2||se.has("OES_texture_float")||se.has("WEBGL_color_buffer_float"))||$n))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ue>=0&&Ue<=ue.width-lt&&Ke>=0&&Ke<=ue.height-dt&&Rt.readPixels(Ue,Ke,lt,dt,fr.convert(qr),fr.convert(pr),vn)}finally{const zt=null!==B?ae.get(B).__webglFramebuffer:null;Pe.bindFramebuffer(36160,zt)}}},this.copyFramebufferToTexture=function(ue,Ue,Ke=0){if(!0!==Ue.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const lt=Math.pow(2,-Ke),dt=Math.floor(Ue.image.width*lt),vn=Math.floor(Ue.image.height*lt);Q.setTexture2D(Ue,0),Rt.copyTexSubImage2D(3553,Ke,0,0,ue.x,ue.y,dt,vn),Pe.unbindTexture()},this.copyTextureToTexture=function(ue,Ue,Ke,lt=0){const dt=Ue.image.width,vn=Ue.image.height,Pn=fr.convert(Ke.format),kn=fr.convert(Ke.type);Q.setTexture2D(Ke,0),Rt.pixelStorei(37440,Ke.flipY),Rt.pixelStorei(37441,Ke.premultiplyAlpha),Rt.pixelStorei(3317,Ke.unpackAlignment),Ue.isDataTexture?Rt.texSubImage2D(3553,lt,ue.x,ue.y,dt,vn,Pn,kn,Ue.image.data):Ue.isCompressedTexture?Rt.compressedTexSubImage2D(3553,lt,ue.x,ue.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,Pn,Ue.mipmaps[0].data):Rt.texSubImage2D(3553,lt,ue.x,ue.y,Pn,kn,Ue.image),0===lt&&Ke.generateMipmaps&&Rt.generateMipmap(3553),Pe.unbindTexture()},this.copyTextureToTexture3D=function(ue,Ue,Ke,lt,dt=0){if(I.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const vn=ue.max.x-ue.min.x+1,Pn=ue.max.y-ue.min.y+1,kn=ue.max.z-ue.min.z+1,zt=fr.convert(lt.format),qr=fr.convert(lt.type);let pr;if(lt.isData3DTexture)Q.setTexture3D(lt,0),pr=32879;else{if(!lt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(lt,0),pr=35866}Rt.pixelStorei(37440,lt.flipY),Rt.pixelStorei(37441,lt.premultiplyAlpha),Rt.pixelStorei(3317,lt.unpackAlignment);const $n=Rt.getParameter(3314),cs=Rt.getParameter(32878),Fd=Rt.getParameter(3316),so=Rt.getParameter(3315),k_=Rt.getParameter(32877),ya=Ke.isCompressedTexture?Ke.mipmaps[0]:Ke.image;Rt.pixelStorei(3314,ya.width),Rt.pixelStorei(32878,ya.height),Rt.pixelStorei(3316,ue.min.x),Rt.pixelStorei(3315,ue.min.y),Rt.pixelStorei(32877,ue.min.z),Ke.isDataTexture||Ke.isData3DTexture?Rt.texSubImage3D(pr,dt,Ue.x,Ue.y,Ue.z,vn,Pn,kn,zt,qr,ya.data):Ke.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Rt.compressedTexSubImage3D(pr,dt,Ue.x,Ue.y,Ue.z,vn,Pn,kn,zt,ya.data)):Rt.texSubImage3D(pr,dt,Ue.x,Ue.y,Ue.z,vn,Pn,kn,zt,qr,ya),Rt.pixelStorei(3314,$n),Rt.pixelStorei(32878,cs),Rt.pixelStorei(3316,Fd),Rt.pixelStorei(3315,so),Rt.pixelStorei(32877,k_),0===dt&&lt.generateMipmaps&&Rt.generateMipmap(pr),Pe.unbindTexture()},this.initTexture=function(ue){Q.setTexture2D(ue,0),Pe.unbindTexture()},this.resetState=function(){R=0,$=0,B=null,Pe.reset(),Ar.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}un.prototype.isWebGLRenderer=!0,class extends un{}.prototype.isWebGL1Renderer=!0;class ta extends Bt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(r,s){return super.copy(r,s),null!==r.background&&(this.background=r.background.clone()),null!==r.environment&&(this.environment=r.environment.clone()),null!==r.fog&&(this.fog=r.fog.clone()),null!==r.overrideMaterial&&(this.overrideMaterial=r.overrideMaterial.clone()),this.autoUpdate=r.autoUpdate,this.matrixAutoUpdate=r.matrixAutoUpdate,this}toJSON(r){const s=super.toJSON(r);return null!==this.fog&&(s.object.fog=this.fog.toJSON()),s}}ta.prototype.isScene=!0;class La{constructor(r,s){this.array=r,this.stride=s,this.count=void 0!==r?r.length/s:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Je()}onUploadCallback(){}set needsUpdate(r){!0===r&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.array=new r.array.constructor(r.array),this.count=r.count,this.stride=r.stride,this.usage=r.usage,this}copyAt(r,s,a){r*=this.stride,a*=s.stride;for(let c=0,h=this.stride;c<h;c++)this.array[r+c]=s.array[a+c];return this}set(r,s=0){return this.array.set(r,s),this}clone(r){void 0===r.arrayBuffers&&(r.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Je()),void 0===r.arrayBuffers[this.array.buffer._uuid]&&(r.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const s=new this.array.constructor(r.arrayBuffers[this.array.buffer._uuid]),a=new this.constructor(s,this.stride);return a.setUsage(this.usage),a}onUpload(r){return this.onUploadCallback=r,this}toJSON(r){return void 0===r.arrayBuffers&&(r.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Je()),void 0===r.arrayBuffers[this.array.buffer._uuid]&&(r.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}La.prototype.isInterleavedBuffer=!0;const ci=new F;class dc{constructor(r,s,a,c=!1){this.name="",this.data=r,this.itemSize=s,this.offset=a,this.normalized=!0===c}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(r){this.data.needsUpdate=r}applyMatrix4(r){for(let s=0,a=this.data.count;s<a;s++)ci.fromBufferAttribute(this,s),ci.applyMatrix4(r),this.setXYZ(s,ci.x,ci.y,ci.z);return this}applyNormalMatrix(r){for(let s=0,a=this.count;s<a;s++)ci.fromBufferAttribute(this,s),ci.applyNormalMatrix(r),this.setXYZ(s,ci.x,ci.y,ci.z);return this}transformDirection(r){for(let s=0,a=this.count;s<a;s++)ci.fromBufferAttribute(this,s),ci.transformDirection(r),this.setXYZ(s,ci.x,ci.y,ci.z);return this}setX(r,s){return this.data.array[r*this.data.stride+this.offset]=s,this}setY(r,s){return this.data.array[r*this.data.stride+this.offset+1]=s,this}setZ(r,s){return this.data.array[r*this.data.stride+this.offset+2]=s,this}setW(r,s){return this.data.array[r*this.data.stride+this.offset+3]=s,this}getX(r){return this.data.array[r*this.data.stride+this.offset]}getY(r){return this.data.array[r*this.data.stride+this.offset+1]}getZ(r){return this.data.array[r*this.data.stride+this.offset+2]}getW(r){return this.data.array[r*this.data.stride+this.offset+3]}setXY(r,s,a){return this.data.array[(r=r*this.data.stride+this.offset)+0]=s,this.data.array[r+1]=a,this}setXYZ(r,s,a,c){return this.data.array[(r=r*this.data.stride+this.offset)+0]=s,this.data.array[r+1]=a,this.data.array[r+2]=c,this}setXYZW(r,s,a,c,h){return this.data.array[(r=r*this.data.stride+this.offset)+0]=s,this.data.array[r+1]=a,this.data.array[r+2]=c,this.data.array[r+3]=h,this}clone(r){if(void 0===r){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const s=[];for(let a=0;a<this.count;a++){const c=a*this.data.stride+this.offset;for(let h=0;h<this.itemSize;h++)s.push(this.data.array[c+h])}return new jt(new this.array.constructor(s),this.itemSize,this.normalized)}return void 0===r.interleavedBuffers&&(r.interleavedBuffers={}),void 0===r.interleavedBuffers[this.data.uuid]&&(r.interleavedBuffers[this.data.uuid]=this.data.clone(r)),new dc(r.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(r){if(void 0===r){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const s=[];for(let a=0;a<this.count;a++){const c=a*this.data.stride+this.offset;for(let h=0;h<this.itemSize;h++)s.push(this.data.array[c+h])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:s,normalized:this.normalized}}return void 0===r.interleavedBuffers&&(r.interleavedBuffers={}),void 0===r.interleavedBuffers[this.data.uuid]&&(r.interleavedBuffers[this.data.uuid]=this.data.toJSON(r)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}dc.prototype.isInterleavedBufferAttribute=!0;class gf extends jr{constructor(r){super(),this.type="SpriteMaterial",this.color=new D(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.rotation=r.rotation,this.sizeAttenuation=r.sizeAttenuation,this}}let vf;gf.prototype.isSpriteMaterial=!0;const yf=new F,_f=new F,wl=new F,Ti=new Me,_o=new Me,nv=new mt,xl=new F,bo=new F,Tm=new F,rv=new Me,iv=new Me,tw=new Me;function Uh(f,r,s,a,c,h){Ti.subVectors(f,s).addScalar(.5).multiply(a),void 0!==c?(_o.x=h*Ti.x-c*Ti.y,_o.y=c*Ti.x+h*Ti.y):_o.copy(Ti),f.copy(r),f.x+=_o.x,f.y+=_o.y,f.applyMatrix4(nv)}(class extends Bt{constructor(f){if(super(),this.type="Sprite",void 0===vf){vf=new Xr;const r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new La(r,5);vf.setIndex([0,1,2,0,2,3]),vf.setAttribute("position",new dc(s,3,0,!1)),vf.setAttribute("uv",new dc(s,2,3,!1))}this.geometry=vf,this.material=void 0!==f?f:new gf,this.center=new Me(.5,.5)}raycast(f,r){null===f.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_f.setFromMatrixScale(this.matrixWorld),nv.copy(f.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(f.camera.matrixWorldInverse,this.matrixWorld),wl.setFromMatrixPosition(this.modelViewMatrix),f.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&_f.multiplyScalar(-wl.z);const s=this.material.rotation;let a,c;0!==s&&(c=Math.cos(s),a=Math.sin(s));const h=this.center;Uh(xl.set(-.5,-.5,0),wl,h,_f,a,c),Uh(bo.set(.5,-.5,0),wl,h,_f,a,c),Uh(Tm.set(.5,.5,0),wl,h,_f,a,c),rv.set(0,0),iv.set(1,0),tw.set(1,1);let d=f.ray.intersectTriangle(xl,bo,Tm,!1,yf);if(null===d&&(Uh(bo.set(-.5,.5,0),wl,h,_f,a,c),iv.set(0,1),d=f.ray.intersectTriangle(xl,Tm,bo,!1,yf),null===d))return;const m=f.ray.origin.distanceTo(yf);m<f.near||m>f.far||r.push({distance:m,point:yf.clone(),uv:Sn.getUV(yf,xl,bo,Tm,rv,iv,tw,new Me),face:null,object:this})}copy(f){return super.copy(f),void 0!==f.center&&this.center.copy(f.center),this.material=f.material,this}}).prototype.isSprite=!0;const Dm=new F,sv=new k,Rm=new k,LS=new F,ov=new mt;class bf extends xt{constructor(r,s){super(r,s),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new mt,this.bindMatrixInverse=new mt}copy(r){return super.copy(r),this.bindMode=r.bindMode,this.bindMatrix.copy(r.bindMatrix),this.bindMatrixInverse.copy(r.bindMatrixInverse),this.skeleton=r.skeleton,this}bind(r,s){this.skeleton=r,void 0===s&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),s=this.matrixWorld),this.bindMatrix.copy(s),this.bindMatrixInverse.copy(s).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const r=new k,s=this.geometry.attributes.skinWeight;for(let a=0,c=s.count;a<c;a++){r.fromBufferAttribute(s,a);const h=1/r.manhattanLength();h!==1/0?r.multiplyScalar(h):r.set(1,0,0,0),s.setXYZW(a,r.x,r.y,r.z,r.w)}}updateMatrixWorld(r){super.updateMatrixWorld(r),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(r,s){const a=this.skeleton,c=this.geometry;sv.fromBufferAttribute(c.attributes.skinIndex,r),Rm.fromBufferAttribute(c.attributes.skinWeight,r),Dm.copy(s).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let h=0;h<4;h++){const d=Rm.getComponent(h);if(0!==d){const m=sv.getComponent(h);ov.multiplyMatrices(a.bones[m].matrixWorld,a.boneInverses[m]),s.addScaledVector(LS.copy(Dm).applyMatrix4(ov),d)}}return s.applyMatrix4(this.bindMatrixInverse)}}bf.prototype.isSkinnedMesh=!0;class Im extends Bt{constructor(){super(),this.type="Bone"}}Im.prototype.isBone=!0;class Pm extends q{constructor(r=null,s=1,a=1,c,h,d,m,g,y=1003,b=1003,w,x){super(null,d,m,g,y,b,c,h,w,x),this.image={data:r,width:s,height:a},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Pm.prototype.isDataTexture=!0;const av=new mt,nw=new mt;class wf{constructor(r=[],s=[]){this.uuid=Je(),this.bones=r.slice(0),this.boneInverses=s,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const r=this.bones,s=this.boneInverses;if(this.boneMatrices=new Float32Array(16*r.length),0===s.length)this.calculateInverses();else if(r.length!==s.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let a=0,c=this.bones.length;a<c;a++)this.boneInverses.push(new mt)}}calculateInverses(){this.boneInverses.length=0;for(let r=0,s=this.bones.length;r<s;r++){const a=new mt;this.bones[r]&&a.copy(this.bones[r].matrixWorld).invert(),this.boneInverses.push(a)}}pose(){for(let r=0,s=this.bones.length;r<s;r++){const a=this.bones[r];a&&a.matrixWorld.copy(this.boneInverses[r]).invert()}for(let r=0,s=this.bones.length;r<s;r++){const a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}update(){const r=this.bones,s=this.boneInverses,a=this.boneMatrices,c=this.boneTexture;for(let h=0,d=r.length;h<d;h++)av.multiplyMatrices(r[h]?r[h].matrixWorld:nw,s[h]),av.toArray(a,16*h);null!==c&&(c.needsUpdate=!0)}clone(){return new wf(this.bones,this.boneInverses)}computeBoneTexture(){let r=Math.sqrt(4*this.bones.length);r=ct(r),r=Math.max(r,4);const s=new Float32Array(r*r*4);s.set(this.boneMatrices);const a=new Pm(s,r,r,1023,1015);return a.needsUpdate=!0,this.boneMatrices=s,this.boneTexture=a,this.boneTextureSize=r,this}getBoneByName(r){for(let s=0,a=this.bones.length;s<a;s++){const c=this.bones[s];if(c.name===r)return c}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(r,s){this.uuid=r.uuid;for(let a=0,c=r.bones.length;a<c;a++){const h=r.bones[a];let d=s[h];void 0===d&&(console.warn("THREE.Skeleton: No bone found with UUID:",h),d=new Im),this.bones.push(d),this.boneInverses.push((new mt).fromArray(r.boneInverses[a]))}return this.init(),this}toJSON(){const r={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};r.uuid=this.uuid;const s=this.bones,a=this.boneInverses;for(let c=0,h=s.length;c<h;c++)r.bones.push(s[c].uuid),r.boneInverses.push(a[c].toArray());return r}}class lv extends jt{constructor(r,s,a,c=1){"number"==typeof a&&(c=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(r,s,a),this.meshPerAttribute=c}copy(r){return super.copy(r),this.meshPerAttribute=r.meshPerAttribute,this}toJSON(){const r=super.toJSON();return r.meshPerAttribute=this.meshPerAttribute,r.isInstancedBufferAttribute=!0,r}}lv.prototype.isInstancedBufferAttribute=!0;const rw=new mt,_s=new mt,na=[],Jr=new xt;(class extends xt{constructor(f,r,s){super(f,r),this.instanceMatrix=new lv(new Float32Array(16*s),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1}copy(f){return super.copy(f),this.instanceMatrix.copy(f.instanceMatrix),null!==f.instanceColor&&(this.instanceColor=f.instanceColor.clone()),this.count=f.count,this}getColorAt(f,r){r.fromArray(this.instanceColor.array,3*f)}getMatrixAt(f,r){r.fromArray(this.instanceMatrix.array,16*f)}raycast(f,r){const s=this.matrixWorld,a=this.count;if(Jr.geometry=this.geometry,Jr.material=this.material,void 0!==Jr.material)for(let c=0;c<a;c++){this.getMatrixAt(c,rw),_s.multiplyMatrices(s,rw),Jr.matrixWorld=_s,Jr.raycast(f,na);for(let h=0,d=na.length;h<d;h++){const m=na[h];m.instanceId=c,m.object=this,r.push(m)}na.length=0}}setColorAt(f,r){null===this.instanceColor&&(this.instanceColor=new lv(new Float32Array(3*this.instanceMatrix.count),3)),r.toArray(this.instanceColor.array,3*f)}setMatrixAt(f,r){r.toArray(this.instanceMatrix.array,16*f)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class uu extends jr{constructor(r){super(),this.type="LineBasicMaterial",this.color=new D(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this}}uu.prototype.isLineBasicMaterial=!0;const iw=new F,sw=new F,ow=new mt,cv=new ps,km=new Jn;class hu extends Bt{constructor(r=new Xr,s=new uu){super(),this.type="Line",this.geometry=r,this.material=s,this.updateMorphTargets()}copy(r){return super.copy(r),this.material=r.material,this.geometry=r.geometry,this}computeLineDistances(){const r=this.geometry;if(r.isBufferGeometry)if(null===r.index){const s=r.attributes.position,a=[0];for(let c=1,h=s.count;c<h;c++)iw.fromBufferAttribute(s,c-1),sw.fromBufferAttribute(s,c),a[c]=a[c-1],a[c]+=iw.distanceTo(sw);r.setAttribute("lineDistance",new wn(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else r.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(r,s){const a=this.geometry,c=this.matrixWorld,h=r.params.Line.threshold,d=a.drawRange;if(null===a.boundingSphere&&a.computeBoundingSphere(),km.copy(a.boundingSphere),km.applyMatrix4(c),km.radius+=h,!1===r.ray.intersectsSphere(km))return;ow.copy(c).invert(),cv.copy(r.ray).applyMatrix4(ow);const m=h/((this.scale.x+this.scale.y+this.scale.z)/3),g=m*m,y=new F,b=new F,w=new F,x=new F,E=this.isLineSegments?2:1;if(a.isBufferGeometry){const T=a.index,I=a.attributes.position;if(null!==T)for(let L=Math.max(0,d.start),R=Math.min(T.count,d.start+d.count)-1;L<R;L+=E){const $=T.getX(L),B=T.getX(L+1);if(y.fromBufferAttribute(I,$),b.fromBufferAttribute(I,B),cv.distanceSqToSegment(y,b,x,w)>g)continue;x.applyMatrix4(this.matrixWorld);const G=r.ray.origin.distanceTo(x);G<r.near||G>r.far||s.push({distance:G,point:w.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}else for(let L=Math.max(0,d.start),R=Math.min(I.count,d.start+d.count)-1;L<R;L+=E){if(y.fromBufferAttribute(I,L),b.fromBufferAttribute(I,L+1),cv.distanceSqToSegment(y,b,x,w)>g)continue;x.applyMatrix4(this.matrixWorld);const $=r.ray.origin.distanceTo(x);$<r.near||$>r.far||s.push({distance:$,point:w.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else a.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const r=this.geometry;if(r.isBufferGeometry){const s=r.morphAttributes,a=Object.keys(s);if(a.length>0){const c=s[a[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=c.length;h<d;h++){const m=c[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=h}}}}else{const s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}hu.prototype.isLine=!0;const xf=new F,Mf=new F;class Hh extends hu{constructor(r,s){super(r,s),this.type="LineSegments"}computeLineDistances(){const r=this.geometry;if(r.isBufferGeometry)if(null===r.index){const s=r.attributes.position,a=[];for(let c=0,h=s.count;c<h;c+=2)xf.fromBufferAttribute(s,c),Mf.fromBufferAttribute(s,c+1),a[c]=0===c?0:a[c-1],a[c+1]=a[c]+xf.distanceTo(Mf);r.setAttribute("lineDistance",new wn(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else r.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Hh.prototype.isLineSegments=!0;class uv extends hu{constructor(r,s){super(r,s),this.type="LineLoop"}}uv.prototype.isLineLoop=!0;class Nm extends jr{constructor(r){super(),this.type="PointsMaterial",this.color=new D(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this}}Nm.prototype.isPointsMaterial=!0;const Ml=new mt,du=new ps,Lm=new Jn,Om=new F;class zh extends Bt{constructor(r=new Xr,s=new Nm){super(),this.type="Points",this.geometry=r,this.material=s,this.updateMorphTargets()}copy(r){return super.copy(r),this.material=r.material,this.geometry=r.geometry,this}raycast(r,s){const a=this.geometry,c=this.matrixWorld,h=r.params.Points.threshold,d=a.drawRange;if(null===a.boundingSphere&&a.computeBoundingSphere(),Lm.copy(a.boundingSphere),Lm.applyMatrix4(c),Lm.radius+=h,!1===r.ray.intersectsSphere(Lm))return;Ml.copy(c).invert(),du.copy(r.ray).applyMatrix4(Ml);const m=h/((this.scale.x+this.scale.y+this.scale.z)/3),g=m*m;if(a.isBufferGeometry){const y=a.index,b=a.attributes.position;if(null!==y)for(let w=Math.max(0,d.start),x=Math.min(y.count,d.start+d.count);w<x;w++){const E=y.getX(w);Om.fromBufferAttribute(b,E),Fm(Om,E,g,c,r,s,this)}else for(let w=Math.max(0,d.start),x=Math.min(b.count,d.start+d.count);w<x;w++)Om.fromBufferAttribute(b,w),Fm(Om,w,g,c,r,s,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const r=this.geometry;if(r.isBufferGeometry){const s=r.morphAttributes,a=Object.keys(s);if(a.length>0){const c=s[a[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=c.length;h<d;h++){const m=c[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=h}}}}else{const s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Fm(f,r,s,a,c,h,d){const m=du.distanceSqToPoint(f);if(m<s){const g=new F;du.closestPointToPoint(f,g),g.applyMatrix4(a);const y=c.ray.origin.distanceTo(g);if(y<c.near||y>c.far)return;h.push({distance:y,distanceToRay:Math.sqrt(m),point:g,index:r,face:null,object:d})}}zh.prototype.isPoints=!0,class extends q{constructor(f,r,s,a,c,h,d,m,g){super(f,r,s,a,c,h,d,m,g),this.minFilter=void 0!==h?h:1006,this.magFilter=void 0!==c?c:1006,this.generateMipmaps=!1;const y=this;"requestVideoFrameCallback"in f&&f.requestVideoFrameCallback(function b(){y.needsUpdate=!0,f.requestVideoFrameCallback(b)})}clone(){return new this.constructor(this.image).copy(this)}update(){const f=this.image;!("requestVideoFrameCallback"in f)&&f.readyState>=f.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class extends q{constructor(f,r,s){super({width:f,height:r}),this.format=s,this.magFilter=1003,this.minFilter=1003,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;class hv extends q{constructor(r,s,a,c,h,d,m,g,y,b,w,x){super(null,d,m,g,y,b,c,h,w,x),this.image={width:s,height:a},this.mipmaps=r,this.flipY=!1,this.generateMipmaps=!1}}hv.prototype.isCompressedTexture=!0,class extends q{constructor(f,r,s,a,c,h,d,m,g){super(f,r,s,a,c,h,d,m,g),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class Do{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(r,s){const a=this.getUtoTmapping(r);return this.getPoint(a,s)}getPoints(r=5){const s=[];for(let a=0;a<=r;a++)s.push(this.getPoint(a/r));return s}getSpacedPoints(r=5){const s=[];for(let a=0;a<=r;a++)s.push(this.getPointAt(a/r));return s}getLength(){const r=this.getLengths();return r[r.length-1]}getLengths(r=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const s=[];let a,c=this.getPoint(0),h=0;s.push(0);for(let d=1;d<=r;d++)a=this.getPoint(d/r),h+=a.distanceTo(c),s.push(h),c=a;return this.cacheArcLengths=s,s}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(r,s){const a=this.getLengths();let c=0;const h=a.length;let d;d=s||r*a[h-1];let m,g=0,y=h-1;for(;g<=y;)if(c=Math.floor(g+(y-g)/2),m=a[c]-d,m<0)g=c+1;else{if(!(m>0)){y=c;break}y=c-1}if(c=y,a[c]===d)return c/(h-1);const b=a[c];return(c+(d-b)/(a[c+1]-b))/(h-1)}getTangent(r,s){let c=r-1e-4,h=r+1e-4;c<0&&(c=0),h>1&&(h=1);const d=this.getPoint(c),m=this.getPoint(h),g=s||(d.isVector2?new Me:new F);return g.copy(m).sub(d).normalize(),g}getTangentAt(r,s){const a=this.getUtoTmapping(r);return this.getTangent(a,s)}computeFrenetFrames(r,s){const a=new F,c=[],h=[],d=[],m=new F,g=new mt;for(let E=0;E<=r;E++)c[E]=this.getTangentAt(E/r,new F);h[0]=new F,d[0]=new F;let y=Number.MAX_VALUE;const b=Math.abs(c[0].x),w=Math.abs(c[0].y),x=Math.abs(c[0].z);b<=y&&(y=b,a.set(1,0,0)),w<=y&&(y=w,a.set(0,1,0)),x<=y&&a.set(0,0,1),m.crossVectors(c[0],a).normalize(),h[0].crossVectors(c[0],m),d[0].crossVectors(c[0],h[0]);for(let E=1;E<=r;E++){if(h[E]=h[E-1].clone(),d[E]=d[E-1].clone(),m.crossVectors(c[E-1],c[E]),m.length()>Number.EPSILON){m.normalize();const T=Math.acos(ye(c[E-1].dot(c[E]),-1,1));h[E].applyMatrix4(g.makeRotationAxis(m,T))}d[E].crossVectors(c[E],h[E])}if(!0===s){let E=Math.acos(ye(h[0].dot(h[r]),-1,1));E/=r,c[0].dot(m.crossVectors(h[0],h[r]))>0&&(E=-E);for(let T=1;T<=r;T++)h[T].applyMatrix4(g.makeRotationAxis(c[T],E*T)),d[T].crossVectors(c[T],h[T])}return{tangents:c,normals:h,binormals:d}}clone(){return(new this.constructor).copy(this)}copy(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}toJSON(){const r={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return r.arcLengthDivisions=this.arcLengthDivisions,r.type=this.type,r}fromJSON(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}}class dv extends Do{constructor(r=0,s=0,a=1,c=1,h=0,d=2*Math.PI,m=!1,g=0){super(),this.type="EllipseCurve",this.aX=r,this.aY=s,this.xRadius=a,this.yRadius=c,this.aStartAngle=h,this.aEndAngle=d,this.aClockwise=m,this.aRotation=g}getPoint(r,s){const a=s||new Me,c=2*Math.PI;let h=this.aEndAngle-this.aStartAngle;const d=Math.abs(h)<Number.EPSILON;for(;h<0;)h+=c;for(;h>c;)h-=c;h<Number.EPSILON&&(h=d?0:c),!0!==this.aClockwise||d||(h===c?h=-c:h-=c);const m=this.aStartAngle+r*h;let g=this.aX+this.xRadius*Math.cos(m),y=this.aY+this.yRadius*Math.sin(m);if(0!==this.aRotation){const b=Math.cos(this.aRotation),w=Math.sin(this.aRotation),x=g-this.aX,E=y-this.aY;g=x*b-E*w+this.aX,y=x*w+E*b+this.aY}return a.set(g,y)}copy(r){return super.copy(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}toJSON(){const r=super.toJSON();return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r}fromJSON(r){return super.fromJSON(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}}dv.prototype.isEllipseCurve=!0;class OS extends dv{constructor(r,s,a,c,h,d){super(r,s,a,a,c,h,d),this.type="ArcCurve"}}function jh(){let f=0,r=0,s=0,a=0;function c(h,d,m,g){f=h,r=m,s=-3*h+3*d-2*m-g,a=2*h-2*d+m+g}return{initCatmullRom:function(h,d,m,g,y){c(d,m,y*(m-h),y*(g-d))},initNonuniformCatmullRom:function(h,d,m,g,y,b,w){let x=(d-h)/y-(m-h)/(y+b)+(m-d)/b,E=(m-d)/b-(g-d)/(b+w)+(g-m)/w;x*=b,E*=b,c(d,m,x,E)},calc:function(h){const d=h*h;return f+r*h+s*d+a*(d*h)}}}OS.prototype.isArcCurve=!0;const Ef=new F,Bm=new jh,Gh=new jh,Vm=new jh;class fv extends Do{constructor(r=[],s=!1,a="centripetal",c=.5){super(),this.type="CatmullRomCurve3",this.points=r,this.closed=s,this.curveType=a,this.tension=c}getPoint(r,s=new F){const a=s,c=this.points,h=c.length,d=(h-(this.closed?0:1))*r;let m,g,y=Math.floor(d),b=d-y;this.closed?y+=y>0?0:(Math.floor(Math.abs(y)/h)+1)*h:0===b&&y===h-1&&(y=h-2,b=1),this.closed||y>0?m=c[(y-1)%h]:(Ef.subVectors(c[0],c[1]).add(c[0]),m=Ef);const w=c[y%h],x=c[(y+1)%h];if(this.closed||y+2<h?g=c[(y+2)%h]:(Ef.subVectors(c[h-1],c[h-2]).add(c[h-1]),g=Ef),"centripetal"===this.curveType||"chordal"===this.curveType){const E="chordal"===this.curveType?.5:.25;let T=Math.pow(m.distanceToSquared(w),E),I=Math.pow(w.distanceToSquared(x),E),L=Math.pow(x.distanceToSquared(g),E);I<1e-4&&(I=1),T<1e-4&&(T=I),L<1e-4&&(L=I),Bm.initNonuniformCatmullRom(m.x,w.x,x.x,g.x,T,I,L),Gh.initNonuniformCatmullRom(m.y,w.y,x.y,g.y,T,I,L),Vm.initNonuniformCatmullRom(m.z,w.z,x.z,g.z,T,I,L)}else"catmullrom"===this.curveType&&(Bm.initCatmullRom(m.x,w.x,x.x,g.x,this.tension),Gh.initCatmullRom(m.y,w.y,x.y,g.y,this.tension),Vm.initCatmullRom(m.z,w.z,x.z,g.z,this.tension));return a.set(Bm.calc(b),Gh.calc(b),Vm.calc(b)),a}copy(r){super.copy(r),this.points=[];for(let s=0,a=r.points.length;s<a;s++)this.points.push(r.points[s].clone());return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}toJSON(){const r=super.toJSON();r.points=[];for(let s=0,a=this.points.length;s<a;s++)r.points.push(this.points[s].toArray());return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r}fromJSON(r){super.fromJSON(r),this.points=[];for(let s=0,a=r.points.length;s<a;s++){const c=r.points[s];this.points.push((new F).fromArray(c))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}}function fu(f,r,s,a,c){const h=.5*(a-r),d=.5*(c-s),m=f*f;return(2*s-2*a+h+d)*(f*m)+(-3*s+3*a-2*h-d)*m+h*f+s}function Sf(f,r,s,a){return function(c,h){const d=1-c;return d*d*h}(f,r)+2*(1-(c=f))*c*s+function(c,h){return c*c*h}(f,a);var c}function Oa(f,r,s,a,c){return function(h,d){const m=1-h;return m*m*m*d}(f,r)+function(h,d){const m=1-h;return 3*m*m*h*d}(f,s)+3*(1-(h=f))*h*h*a+function(h,d){return h*h*h*d}(f,c);var h}fv.prototype.isCatmullRomCurve3=!0;class Cf extends Do{constructor(r=new Me,s=new Me,a=new Me,c=new Me){super(),this.type="CubicBezierCurve",this.v0=r,this.v1=s,this.v2=a,this.v3=c}getPoint(r,s=new Me){const a=s,c=this.v0,h=this.v1,d=this.v2,m=this.v3;return a.set(Oa(r,c.x,h.x,d.x,m.x),Oa(r,c.y,h.y,d.y,m.y)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}}Cf.prototype.isCubicBezierCurve=!0;class Af extends Do{constructor(r=new F,s=new F,a=new F,c=new F){super(),this.type="CubicBezierCurve3",this.v0=r,this.v1=s,this.v2=a,this.v3=c}getPoint(r,s=new F){const a=s,c=this.v0,h=this.v1,d=this.v2,m=this.v3;return a.set(Oa(r,c.x,h.x,d.x,m.x),Oa(r,c.y,h.y,d.y,m.y),Oa(r,c.z,h.z,d.z,m.z)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}}Af.prototype.isCubicBezierCurve3=!0;class pv extends Do{constructor(r=new Me,s=new Me){super(),this.type="LineCurve",this.v1=r,this.v2=s}getPoint(r,s=new Me){const a=s;return 1===r?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(r).add(this.v1)),a}getPointAt(r,s){return this.getPoint(r,s)}getTangent(r,s){const a=s||new Me;return a.copy(this.v2).sub(this.v1).normalize(),a}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}pv.prototype.isLineCurve=!0;class Um extends Do{constructor(r=new Me,s=new Me,a=new Me){super(),this.type="QuadraticBezierCurve",this.v0=r,this.v1=s,this.v2=a}getPoint(r,s=new Me){const a=s,c=this.v0,h=this.v1,d=this.v2;return a.set(Sf(r,c.x,h.x,d.x),Sf(r,c.y,h.y,d.y)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}Um.prototype.isQuadraticBezierCurve=!0;class mv extends Do{constructor(r=new F,s=new F,a=new F){super(),this.type="QuadraticBezierCurve3",this.v0=r,this.v1=s,this.v2=a}getPoint(r,s=new F){const a=s,c=this.v0,h=this.v1,d=this.v2;return a.set(Sf(r,c.x,h.x,d.x),Sf(r,c.y,h.y,d.y),Sf(r,c.z,h.z,d.z)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}mv.prototype.isQuadraticBezierCurve3=!0;class gv extends Do{constructor(r=[]){super(),this.type="SplineCurve",this.points=r}getPoint(r,s=new Me){const a=s,c=this.points,h=(c.length-1)*r,d=Math.floor(h),m=h-d,g=c[0===d?d:d-1],y=c[d],b=c[d>c.length-2?c.length-1:d+1],w=c[d>c.length-3?c.length-1:d+2];return a.set(fu(m,g.x,y.x,b.x,w.x),fu(m,g.y,y.y,b.y,w.y)),a}copy(r){super.copy(r),this.points=[];for(let s=0,a=r.points.length;s<a;s++)this.points.push(r.points[s].clone());return this}toJSON(){const r=super.toJSON();r.points=[];for(let s=0,a=this.points.length;s<a;s++)r.points.push(this.points[s].toArray());return r}fromJSON(r){super.fromJSON(r),this.points=[];for(let s=0,a=r.points.length;s<a;s++){const c=r.points[s];this.points.push((new Me).fromArray(c))}return this}}gv.prototype.isSplineCurve=!0;var ra=Object.freeze({__proto__:null,ArcCurve:OS,CatmullRomCurve3:fv,CubicBezierCurve:Cf,CubicBezierCurve3:Af,EllipseCurve:dv,LineCurve:pv,LineCurve3:class extends Do{constructor(f=new F,r=new F){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=f,this.v2=r}getPoint(f,r=new F){const s=r;return 1===f?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(f).add(this.v1)),s}getPointAt(f,r){return this.getPoint(f,r)}copy(f){return super.copy(f),this.v1.copy(f.v1),this.v2.copy(f.v2),this}toJSON(){const f=super.toJSON();return f.v1=this.v1.toArray(),f.v2=this.v2.toArray(),f}fromJSON(f){return super.fromJSON(f),this.v1.fromArray(f.v1),this.v2.fromArray(f.v2),this}},QuadraticBezierCurve:Um,QuadraticBezierCurve3:mv,SplineCurve:gv});class FS extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(r){this.curves.push(r)}closePath(){const r=this.curves[0].getPoint(0),s=this.curves[this.curves.length-1].getPoint(1);r.equals(s)||this.curves.push(new pv(s,r))}getPoint(r,s){const a=r*this.getLength(),c=this.getCurveLengths();let h=0;for(;h<c.length;){if(c[h]>=a){const d=c[h]-a,m=this.curves[h],g=m.getLength();return m.getPointAt(0===g?0:1-d/g,s)}h++}return null}getLength(){const r=this.getCurveLengths();return r[r.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const r=[];let s=0;for(let a=0,c=this.curves.length;a<c;a++)s+=this.curves[a].getLength(),r.push(s);return this.cacheLengths=r,r}getSpacedPoints(r=40){const s=[];for(let a=0;a<=r;a++)s.push(this.getPoint(a/r));return this.autoClose&&s.push(s[0]),s}getPoints(r=12){const s=[];let a;for(let c=0,h=this.curves;c<h.length;c++){const d=h[c],g=d.getPoints(d.isEllipseCurve?2*r:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?r*d.points.length:r);for(let y=0;y<g.length;y++){const b=g[y];a&&a.equals(b)||(s.push(b),a=b)}}return this.autoClose&&s.length>1&&!s[s.length-1].equals(s[0])&&s.push(s[0]),s}copy(r){super.copy(r),this.curves=[];for(let s=0,a=r.curves.length;s<a;s++)this.curves.push(r.curves[s].clone());return this.autoClose=r.autoClose,this}toJSON(){const r=super.toJSON();r.autoClose=this.autoClose,r.curves=[];for(let s=0,a=this.curves.length;s<a;s++)r.curves.push(this.curves[s].toJSON());return r}fromJSON(r){super.fromJSON(r),this.autoClose=r.autoClose,this.curves=[];for(let s=0,a=r.curves.length;s<a;s++){const c=r.curves[s];this.curves.push((new ra[c.type]).fromJSON(c))}return this}}class pu extends FS{constructor(r){super(),this.type="Path",this.currentPoint=new Me,r&&this.setFromPoints(r)}setFromPoints(r){this.moveTo(r[0].x,r[0].y);for(let s=1,a=r.length;s<a;s++)this.lineTo(r[s].x,r[s].y);return this}moveTo(r,s){return this.currentPoint.set(r,s),this}lineTo(r,s){const a=new pv(this.currentPoint.clone(),new Me(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}quadraticCurveTo(r,s,a,c){const h=new Um(this.currentPoint.clone(),new Me(r,s),new Me(a,c));return this.curves.push(h),this.currentPoint.set(a,c),this}bezierCurveTo(r,s,a,c,h,d){const m=new Cf(this.currentPoint.clone(),new Me(r,s),new Me(a,c),new Me(h,d));return this.curves.push(m),this.currentPoint.set(h,d),this}splineThru(r){const s=[this.currentPoint.clone()].concat(r),a=new gv(s);return this.curves.push(a),this.currentPoint.copy(r[r.length-1]),this}arc(r,s,a,c,h,d){return this.absarc(r+this.currentPoint.x,s+this.currentPoint.y,a,c,h,d),this}absarc(r,s,a,c,h,d){return this.absellipse(r,s,a,a,c,h,d),this}ellipse(r,s,a,c,h,d,m,g){return this.absellipse(r+this.currentPoint.x,s+this.currentPoint.y,a,c,h,d,m,g),this}absellipse(r,s,a,c,h,d,m,g){const y=new dv(r,s,a,c,h,d,m,g);if(this.curves.length>0){const w=y.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(y);const b=y.getPoint(1);return this.currentPoint.copy(b),this}copy(r){return super.copy(r),this.currentPoint.copy(r.currentPoint),this}toJSON(){const r=super.toJSON();return r.currentPoint=this.currentPoint.toArray(),r}fromJSON(r){return super.fromJSON(r),this.currentPoint.fromArray(r.currentPoint),this}}new F,new F,new F,new Sn;class mu extends pu{constructor(r){super(r),this.uuid=Je(),this.type="Shape",this.holes=[]}getPointsHoles(r){const s=[];for(let a=0,c=this.holes.length;a<c;a++)s[a]=this.holes[a].getPoints(r);return s}extractPoints(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}}copy(r){super.copy(r),this.holes=[];for(let s=0,a=r.holes.length;s<a;s++)this.holes.push(r.holes[s].clone());return this}toJSON(){const r=super.toJSON();r.uuid=this.uuid,r.holes=[];for(let s=0,a=this.holes.length;s<a;s++)r.holes.push(this.holes[s].toJSON());return r}fromJSON(r){super.fromJSON(r),this.uuid=r.uuid,this.holes=[];for(let s=0,a=r.holes.length;s<a;s++){const c=r.holes[s];this.holes.push((new pu).fromJSON(c))}return this}}function Tf(f,r,s,a,c){let h,d;if(c===function(m,g,y,b){let w=0;for(let x=g,E=y-b;x<y;x+=b)w+=(m[E]-m[x])*(m[x+1]+m[E+1]),E=x;return w}(f,r,s,a)>0)for(h=r;h<s;h+=a)d=yu(h,f[h],f[h+1],d);else for(h=s-a;h>=r;h-=a)d=yu(h,f[h],f[h+1],d);return d&&Di(d,d.next)&&(Ba(d),d=d.next),d}function ia(f,r){if(!f)return f;r||(r=f);let s,a=f;do{if(s=!1,a.steiner||!Di(a,a.next)&&0!==di(a.prev,a,a.next))a=a.next;else{if(Ba(a),a=r=a.prev,a===a.next)break;s=!0}}while(s||a!==r);return r}function Df(f,r,s,a,c,h,d){if(!f)return;!d&&h&&function(b,w,x,E){let T=b;do{null===T.z&&(T.z=yv(T.x,T.y,w,x,E)),T.prevZ=T.prev,T.nextZ=T.next,T=T.next}while(T!==b);T.prevZ.nextZ=null,T.prevZ=null,function(I){let L,R,$,B,G,z,J,te,le=1;do{for(R=I,I=null,G=null,z=0;R;){for(z++,$=R,J=0,L=0;L<le&&(J++,$=$.nextZ,$);L++);for(te=le;J>0||te>0&&$;)0!==J&&(0===te||!$||R.z<=$.z)?(B=R,R=R.nextZ,J--):(B=$,$=$.nextZ,te--),G?G.nextZ=B:I=B,B.prevZ=G,G=B;R=$}G.nextZ=null,le*=2}while(z>1)}(T)}(f,a,c,h);let m,g,y=f;for(;f.prev!==f.next;)if(m=f.prev,g=f.next,h?lw(f,a,c,h):aw(f))r.push(m.i/s),r.push(f.i/s),r.push(g.i/s),Ba(f),f=g.next,y=g.next;else if((f=g)===y){d?1===d?Df(f=cw(ia(f),r,s),r,s,a,c,h,2):2===d&&uw(f,r,s,a,c,h):Df(ia(f),r,s,a,c,h,1);break}}function aw(f){const r=f.prev,s=f,a=f.next;if(di(r,s,a)>=0)return!1;let c=f.next.next;for(;c!==f.prev;){if(gu(r.x,r.y,s.x,s.y,a.x,a.y,c.x,c.y)&&di(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function lw(f,r,s,a){const c=f.prev,h=f,d=f.next;if(di(c,h,d)>=0)return!1;const y=c.x>h.x?c.x>d.x?c.x:d.x:h.x>d.x?h.x:d.x,b=c.y>h.y?c.y>d.y?c.y:d.y:h.y>d.y?h.y:d.y,w=yv(c.x<h.x?c.x<d.x?c.x:d.x:h.x<d.x?h.x:d.x,c.y<h.y?c.y<d.y?c.y:d.y:h.y<d.y?h.y:d.y,r,s,a),x=yv(y,b,r,s,a);let E=f.prevZ,T=f.nextZ;for(;E&&E.z>=w&&T&&T.z<=x;){if(E!==f.prev&&E!==f.next&&gu(c.x,c.y,h.x,h.y,d.x,d.y,E.x,E.y)&&di(E.prev,E,E.next)>=0||(E=E.prevZ,T!==f.prev&&T!==f.next&&gu(c.x,c.y,h.x,h.y,d.x,d.y,T.x,T.y)&&di(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=w;){if(E!==f.prev&&E!==f.next&&gu(c.x,c.y,h.x,h.y,d.x,d.y,E.x,E.y)&&di(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=x;){if(T!==f.prev&&T!==f.next&&gu(c.x,c.y,h.x,h.y,d.x,d.y,T.x,T.y)&&di(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function cw(f,r,s){let a=f;do{const c=a.prev,h=a.next.next;!Di(c,h)&&zm(c,a,a.next,h)&&Fa(c,h)&&Fa(h,c)&&(r.push(c.i/s),r.push(a.i/s),r.push(h.i/s),Ba(a),Ba(a.next),a=f=h),a=a.next}while(a!==f);return ia(a)}function uw(f,r,s,a,c,h){let d=f;do{let m=d.next.next;for(;m!==d.prev;){if(d.i!==m.i&&Wh(d,m)){let g=vu(d,m);return d=ia(d,d.next),g=ia(g,g.next),Df(d,r,s,a,c,h),void Df(g,r,s,a,c,h)}m=m.next}d=d.next}while(d!==f)}function BS(f,r){return f.x-r.x}function Hm(f,r){if(r=function(s,a){let c=a;const h=s.x,d=s.y;let m,g=-1/0;do{if(d<=c.y&&d>=c.next.y&&c.next.y!==c.y){const T=c.x+(d-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(T<=h&&T>g){if(g=T,T===h){if(d===c.y)return c;if(d===c.next.y)return c.next}m=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!m)return null;if(h===g)return m;const y=m,b=m.x,w=m.y;let x,E=1/0;c=m;do{h>=c.x&&c.x>=b&&h!==c.x&&gu(d<w?h:g,d,b,w,d<w?g:h,d,c.x,c.y)&&(x=Math.abs(d-c.y)/(h-c.x),Fa(c,s)&&(x<E||x===E&&(c.x>m.x||c.x===m.x&&Rf(m,c)))&&(m=c,E=x)),c=c.next}while(c!==y);return m}(f,r)){const s=vu(r,f);ia(r,r.next),ia(s,s.next)}}function Rf(f,r){return di(f.prev,f,r.prev)<0&&di(r.next,f,f.next)<0}function yv(f,r,s,a,c){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=32767*(f-s)*c)|f<<8))|f<<4))|f<<2))|f<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-a)*c)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function hw(f){let r=f,s=f;do{(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next}while(r!==f);return s}function gu(f,r,s,a,c,h,d,m){return(c-d)*(r-m)-(f-d)*(h-m)>=0&&(f-d)*(a-m)-(s-d)*(r-m)>=0&&(s-d)*(h-m)-(c-d)*(a-m)>=0}function Wh(f,r){return f.next.i!==r.i&&f.prev.i!==r.i&&!function(s,a){let c=s;do{if(c.i!==s.i&&c.next.i!==s.i&&c.i!==a.i&&c.next.i!==a.i&&zm(c,c.next,s,a))return!0;c=c.next}while(c!==s);return!1}(f,r)&&(Fa(f,r)&&Fa(r,f)&&function(s,a){let c=s,h=!1;const d=(s.x+a.x)/2,m=(s.y+a.y)/2;do{c.y>m!=c.next.y>m&&c.next.y!==c.y&&d<(c.next.x-c.x)*(m-c.y)/(c.next.y-c.y)+c.x&&(h=!h),c=c.next}while(c!==s);return h}(f,r)&&(di(f.prev,f,r.prev)||di(f,r.prev,r))||Di(f,r)&&di(f.prev,f,f.next)>0&&di(r.prev,r,r.next)>0)}function di(f,r,s){return(r.y-f.y)*(s.x-r.x)-(r.x-f.x)*(s.y-r.y)}function Di(f,r){return f.x===r.x&&f.y===r.y}function zm(f,r,s,a){const c=If(di(f,r,s)),h=If(di(f,r,a)),d=If(di(s,a,f)),m=If(di(s,a,r));return c!==h&&d!==m||!(0!==c||!jm(f,s,r))||!(0!==h||!jm(f,a,r))||!(0!==d||!jm(s,f,a))||!(0!==m||!jm(s,r,a))}function jm(f,r,s){return r.x<=Math.max(f.x,s.x)&&r.x>=Math.min(f.x,s.x)&&r.y<=Math.max(f.y,s.y)&&r.y>=Math.min(f.y,s.y)}function If(f){return f>0?1:f<0?-1:0}function Fa(f,r){return di(f.prev,f,f.next)<0?di(f,r,f.next)>=0&&di(f,f.prev,r)>=0:di(f,r,f.prev)<0||di(f,f.next,r)<0}function vu(f,r){const s=new Gm(f.i,f.x,f.y),a=new Gm(r.i,r.x,r.y),c=f.next,h=r.prev;return f.next=r,r.prev=f,s.next=c,c.prev=s,a.next=s,s.prev=a,h.next=a,a.prev=h,a}function yu(f,r,s,a){const c=new Gm(f,r,s);return a?(c.next=a.next,c.prev=a,a.next.prev=c,a.next=c):(c.prev=c,c.next=c),c}function Ba(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Gm(f,r,s){this.i=f,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Va{static area(r){const s=r.length;let a=0;for(let c=s-1,h=0;h<s;c=h++)a+=r[c].x*r[h].y-r[h].x*r[c].y;return.5*a}static isClockWise(r){return Va.area(r)<0}static triangulateShape(r,s){const a=[],c=[],h=[];_u(r),VS(a,r);let d=r.length;s.forEach(_u);for(let g=0;g<s.length;g++)c.push(d),d+=s[g].length,VS(a,s[g]);const m=function(f,r,s=2){const a=r&&r.length,c=a?r[0]*s:f.length;let h=Tf(f,0,c,s,!0);const d=[];if(!h||h.next===h.prev)return d;let m,g,y,b,w,x,E;if(a&&(h=function(T,I,L,R){const $=[];let B,G,z,J,te;for(B=0,G=I.length;B<G;B++)z=I[B]*R,J=B<G-1?I[B+1]*R:T.length,te=Tf(T,z,J,R,!1),te===te.next&&(te.steiner=!0),$.push(hw(te));for($.sort(BS),B=0;B<$.length;B++)Hm($[B],L),L=ia(L,L.next);return L}(f,r,h,s)),f.length>80*s){m=y=f[0],g=b=f[1];for(let T=s;T<c;T+=s)w=f[T],x=f[T+1],w<m&&(m=w),x<g&&(g=x),w>y&&(y=w),x>b&&(b=x);E=Math.max(y-m,b-g),E=0!==E?1/E:0}return Df(h,d,s,m,g,E),d}(a,c);for(let g=0;g<m.length;g+=3)h.push(m.slice(g,g+3));return h}}function _u(f){const r=f.length;r>2&&f[r-1].equals(f[0])&&f.pop()}function VS(f,r){for(let s=0;s<r.length;s++)f.push(r[s].x),f.push(r[s].y)}class qh extends Xr{constructor(r=new mu([new Me(.5,.5),new Me(-.5,.5),new Me(-.5,-.5),new Me(.5,-.5)]),s={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:s},r=Array.isArray(r)?r:[r];const a=this,c=[],h=[];for(let m=0,g=r.length;m<g;m++)d(r[m]);function d(m){const g=[],y=void 0!==s.curveSegments?s.curveSegments:12,b=void 0!==s.steps?s.steps:1;let w=void 0!==s.depth?s.depth:1,x=void 0===s.bevelEnabled||s.bevelEnabled,E=void 0!==s.bevelThickness?s.bevelThickness:.2,T=void 0!==s.bevelSize?s.bevelSize:E-.1,I=void 0!==s.bevelOffset?s.bevelOffset:0,L=void 0!==s.bevelSegments?s.bevelSegments:3;const R=s.extrudePath,$=void 0!==s.UVGenerator?s.UVGenerator:St;void 0!==s.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),w=s.amount);let B,G,z,J,te,le=!1;R&&(B=R.getSpacedPoints(b),le=!0,x=!1,G=R.computeFrenetFrames(b,!1),z=new F,J=new F,te=new F),x||(L=0,E=0,T=0,I=0);const oe=m.extractPoints(y);let de=oe.shape;const we=oe.holes;if(!Va.isClockWise(de)){de=de.reverse();for(let _e=0,ae=we.length;_e<ae;_e++){const Q=we[_e];Va.isClockWise(Q)&&(we[_e]=Q.reverse())}}const ke=Va.triangulateShape(de,we),je=de;for(let _e=0,ae=we.length;_e<ae;_e++)de=de.concat(we[_e]);function me(_e,ae,Q){return ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),ae.clone().multiplyScalar(Q).add(_e)}const Ve=de.length,Ne=ke.length;function tt(_e,ae,Q){let xe,ce,at;const $e=_e.x-ae.x,Ze=_e.y-ae.y,Dt=Q.x-_e.x,Ot=Q.y-_e.y,bn=$e*$e+Ze*Ze;if(Math.abs($e*Ot-Ze*Dt)>Number.EPSILON){const gn=Math.sqrt(bn),In=Math.sqrt(Dt*Dt+Ot*Ot),On=ae.x-Ze/gn,bi=ae.y+$e/gn,Yl=((Q.x-Ot/In-On)*Ot-(Q.y+Dt/In-bi)*Dt)/($e*Ot-Ze*Dt);xe=On+$e*Yl-_e.x,ce=bi+Ze*Yl-_e.y;const Mn=xe*xe+ce*ce;if(Mn<=2)return new Me(xe,ce);at=Math.sqrt(Mn/2)}else{let gn=!1;$e>Number.EPSILON?Dt>Number.EPSILON&&(gn=!0):$e<-Number.EPSILON?Dt<-Number.EPSILON&&(gn=!0):Math.sign(Ze)===Math.sign(Ot)&&(gn=!0),gn?(xe=-Ze,ce=$e,at=Math.sqrt(bn)):(xe=$e,ce=Ze,at=Math.sqrt(bn/2))}return new Me(xe/at,ce/at)}const We=[];for(let _e=0,ae=je.length,Q=ae-1,xe=_e+1;_e<ae;_e++,Q++,xe++)Q===ae&&(Q=0),xe===ae&&(xe=0),We[_e]=tt(je[_e],je[Q],je[xe]);const ze=[];let Oe,Ct=We.concat();for(let _e=0,ae=we.length;_e<ae;_e++){const Q=we[_e];Oe=[];for(let xe=0,ce=Q.length,at=ce-1,$e=xe+1;xe<ce;xe++,at++,$e++)at===ce&&(at=0),$e===ce&&($e=0),Oe[xe]=tt(Q[xe],Q[at],Q[$e]);ze.push(Oe),Ct=Ct.concat(Oe)}for(let _e=0;_e<L;_e++){const ae=_e/L,Q=E*Math.cos(ae*Math.PI/2),xe=T*Math.sin(ae*Math.PI/2)+I;for(let ce=0,at=je.length;ce<at;ce++){const $e=me(je[ce],We[ce],xe);Tt($e.x,$e.y,-Q)}for(let ce=0,at=we.length;ce<at;ce++){const $e=we[ce];Oe=ze[ce];for(let Ze=0,Dt=$e.length;Ze<Dt;Ze++){const Ot=me($e[Ze],Oe[Ze],xe);Tt(Ot.x,Ot.y,-Q)}}}const At=T+I;for(let _e=0;_e<Ve;_e++){const ae=x?me(de[_e],Ct[_e],At):de[_e];le?(J.copy(G.normals[0]).multiplyScalar(ae.x),z.copy(G.binormals[0]).multiplyScalar(ae.y),te.copy(B[0]).add(J).add(z),Tt(te.x,te.y,te.z)):Tt(ae.x,ae.y,0)}for(let _e=1;_e<=b;_e++)for(let ae=0;ae<Ve;ae++){const Q=x?me(de[ae],Ct[ae],At):de[ae];le?(J.copy(G.normals[_e]).multiplyScalar(Q.x),z.copy(G.binormals[_e]).multiplyScalar(Q.y),te.copy(B[_e]).add(J).add(z),Tt(te.x,te.y,te.z)):Tt(Q.x,Q.y,w/b*_e)}for(let _e=L-1;_e>=0;_e--){const ae=_e/L,Q=E*Math.cos(ae*Math.PI/2),xe=T*Math.sin(ae*Math.PI/2)+I;for(let ce=0,at=je.length;ce<at;ce++){const $e=me(je[ce],We[ce],xe);Tt($e.x,$e.y,w+Q)}for(let ce=0,at=we.length;ce<at;ce++){const $e=we[ce];Oe=ze[ce];for(let Ze=0,Dt=$e.length;Ze<Dt;Ze++){const Ot=me($e[Ze],Oe[Ze],xe);le?Tt(Ot.x,Ot.y+B[b-1].y,B[b-1].x+Q):Tt(Ot.x,Ot.y,w+Q)}}}function Nt(_e,ae){let Q=_e.length;for(;--Q>=0;){const xe=Q;let ce=Q-1;ce<0&&(ce=_e.length-1);for(let at=0,$e=b+2*L;at<$e;at++){const Ze=Ve*at,Dt=Ve*(at+1);se(ae+xe+Ze,ae+ce+Ze,ae+ce+Dt,ae+xe+Dt)}}}function Tt(_e,ae,Q){g.push(_e),g.push(ae),g.push(Q)}function Rn(_e,ae,Q){re(_e),re(ae),re(Q);const xe=c.length/3,ce=$.generateTopUV(a,c,xe-3,xe-2,xe-1);Pe(ce[0]),Pe(ce[1]),Pe(ce[2])}function se(_e,ae,Q,xe){re(_e),re(ae),re(xe),re(ae),re(Q),re(xe);const ce=c.length/3,at=$.generateSideWallUV(a,c,ce-6,ce-3,ce-2,ce-1);Pe(at[0]),Pe(at[1]),Pe(at[3]),Pe(at[1]),Pe(at[2]),Pe(at[3])}function re(_e){c.push(g[3*_e+0]),c.push(g[3*_e+1]),c.push(g[3*_e+2])}function Pe(_e){h.push(_e.x),h.push(_e.y)}(function(){const _e=c.length/3;if(x){let ae=0,Q=Ve*ae;for(let xe=0;xe<Ne;xe++){const ce=ke[xe];Rn(ce[2]+Q,ce[1]+Q,ce[0]+Q)}ae=b+2*L,Q=Ve*ae;for(let xe=0;xe<Ne;xe++){const ce=ke[xe];Rn(ce[0]+Q,ce[1]+Q,ce[2]+Q)}}else{for(let ae=0;ae<Ne;ae++){const Q=ke[ae];Rn(Q[2],Q[1],Q[0])}for(let ae=0;ae<Ne;ae++){const Q=ke[ae];Rn(Q[0]+Ve*b,Q[1]+Ve*b,Q[2]+Ve*b)}}a.addGroup(_e,c.length/3-_e,0)})(),function(){const _e=c.length/3;let ae=0;Nt(je,ae),ae+=je.length;for(let Q=0,xe=we.length;Q<xe;Q++){const ce=we[Q];Nt(ce,ae),ae+=ce.length}a.addGroup(_e,c.length/3-_e,1)}()}this.setAttribute("position",new wn(c,3)),this.setAttribute("uv",new wn(h,2)),this.computeVertexNormals()}toJSON(){const r=super.toJSON();return function(s,a,c){if(c.shapes=[],Array.isArray(s))for(let h=0,d=s.length;h<d;h++)c.shapes.push(s[h].uuid);else c.shapes.push(s.uuid);return void 0!==a.extrudePath&&(c.options.extrudePath=a.extrudePath.toJSON()),c}(this.parameters.shapes,this.parameters.options,r)}static fromJSON(r,s){const a=[];for(let h=0,d=r.shapes.length;h<d;h++)a.push(s[r.shapes[h]]);const c=r.options.extrudePath;return void 0!==c&&(r.options.extrudePath=(new ra[c.type]).fromJSON(c)),new qh(a,r.options)}}const St={generateTopUV:function(f,r,s,a,c){const m=r[3*a],g=r[3*a+1],y=r[3*c],b=r[3*c+1];return[new Me(r[3*s],r[3*s+1]),new Me(m,g),new Me(y,b)]},generateSideWallUV:function(f,r,s,a,c,h){const d=r[3*s],m=r[3*s+1],g=r[3*s+2],y=r[3*a],b=r[3*a+1],w=r[3*a+2],x=r[3*c],E=r[3*c+1],T=r[3*c+2],I=r[3*h],L=r[3*h+1],R=r[3*h+2];return Math.abs(m-b)<Math.abs(d-y)?[new Me(d,1-g),new Me(y,1-w),new Me(x,1-T),new Me(I,1-R)]:[new Me(m,1-g),new Me(b,1-w),new Me(E,1-T),new Me(L,1-R)]}};class _v extends Xr{constructor(r=new mu([new Me(0,.5),new Me(-.5,-.5),new Me(.5,-.5)]),s=12){super(),this.type="ShapeGeometry",this.parameters={shapes:r,curveSegments:s};const a=[],c=[],h=[],d=[];let m=0,g=0;if(!1===Array.isArray(r))y(r);else for(let b=0;b<r.length;b++)y(r[b]),this.addGroup(m,g,b),m+=g,g=0;function y(b){const w=c.length/3,x=b.extractPoints(s);let E=x.shape;const T=x.holes;!1===Va.isClockWise(E)&&(E=E.reverse());for(let L=0,R=T.length;L<R;L++){const $=T[L];!0===Va.isClockWise($)&&(T[L]=$.reverse())}const I=Va.triangulateShape(E,T);for(let L=0,R=T.length;L<R;L++)E=E.concat(T[L]);for(let L=0,R=E.length;L<R;L++){const $=E[L];c.push($.x,$.y,0),h.push(0,0,1),d.push($.x,$.y)}for(let L=0,R=I.length;L<R;L++){const $=I[L];a.push($[0]+w,$[1]+w,$[2]+w),g+=3}}this.setIndex(a),this.setAttribute("position",new wn(c,3)),this.setAttribute("normal",new wn(h,3)),this.setAttribute("uv",new wn(d,2))}toJSON(){const r=super.toJSON();return function(s,a){if(a.shapes=[],Array.isArray(s))for(let c=0,h=s.length;c<h;c++)a.shapes.push(s[c].uuid);else a.shapes.push(s.uuid);return a}(this.parameters.shapes,r)}static fromJSON(r,s){const a=[];for(let c=0,h=r.shapes.length;c<h;c++)a.push(s[r.shapes[c]]);return new _v(a,r.curveSegments)}}class US extends jr{constructor(r){super(),this.type="ShadowMaterial",this.color=new D(0),this.transparent=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this}}US.prototype.isShadowMaterial=!0;class HS extends An{constructor(r){super(r),this.type="RawShaderMaterial"}}HS.prototype.isRawShaderMaterial=!0;class El extends jr{constructor(r){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new D(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new D(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this}}El.prototype.isMeshStandardMaterial=!0;class bu extends El{constructor(r){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ye(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(s){this.ior=(1+.4*s)/(1-.4*s)}}),this.sheenColor=new D(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new D(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new D(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(r)}get sheen(){return this._sheen}set sheen(r){this._sheen>0!=r>0&&this.version++,this._sheen=r}get clearcoat(){return this._clearcoat}set clearcoat(r){this._clearcoat>0!=r>0&&this.version++,this._clearcoat=r}get transmission(){return this._transmission}set transmission(r){this._transmission>0!=r>0&&this.version++,this._transmission=r}copy(r){return super.copy(r),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=r.clearcoat,this.clearcoatMap=r.clearcoatMap,this.clearcoatRoughness=r.clearcoatRoughness,this.clearcoatRoughnessMap=r.clearcoatRoughnessMap,this.clearcoatNormalMap=r.clearcoatNormalMap,this.clearcoatNormalScale.copy(r.clearcoatNormalScale),this.ior=r.ior,this.sheen=r.sheen,this.sheenColor.copy(r.sheenColor),this.sheenColorMap=r.sheenColorMap,this.sheenRoughness=r.sheenRoughness,this.sheenRoughnessMap=r.sheenRoughnessMap,this.transmission=r.transmission,this.transmissionMap=r.transmissionMap,this.thickness=r.thickness,this.thicknessMap=r.thicknessMap,this.attenuationDistance=r.attenuationDistance,this.attenuationColor.copy(r.attenuationColor),this.specularIntensity=r.specularIntensity,this.specularIntensityMap=r.specularIntensityMap,this.specularColor.copy(r.specularColor),this.specularColorMap=r.specularColorMap,this}}bu.prototype.isMeshPhysicalMaterial=!0;class zS extends jr{constructor(r){super(),this.type="MeshPhongMaterial",this.color=new D(16777215),this.specular=new D(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new D(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this}}zS.prototype.isMeshPhongMaterial=!0;class jS extends jr{constructor(r){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new D(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new D(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.gradientMap=r.gradientMap,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this}}jS.prototype.isMeshToonMaterial=!0;class $h extends jr{constructor(r){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.flatShading=r.flatShading,this}}$h.prototype.isMeshNormalMaterial=!0;class GS extends jr{constructor(r){super(),this.type="MeshLambertMaterial",this.color=new D(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new D(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this}}GS.prototype.isMeshLambertMaterial=!0;class WS extends jr{constructor(r){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new D(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.defines={MATCAP:""},this.color.copy(r.color),this.matcap=r.matcap,this.map=r.map,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.flatShading=r.flatShading,this}}WS.prototype.isMeshMatcapMaterial=!0;class Ri extends uu{constructor(r){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}copy(r){return super.copy(r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this}}Ri.prototype.isLineDashedMaterial=!0;const bv={ShadowMaterial:US,SpriteMaterial:gf,RawShaderMaterial:HS,ShaderMaterial:An,PointsMaterial:Nm,MeshPhysicalMaterial:bu,MeshStandardMaterial:El,MeshPhongMaterial:zS,MeshToonMaterial:jS,MeshNormalMaterial:$h,MeshLambertMaterial:GS,MeshDepthMaterial:an,MeshDistanceMaterial:Am,MeshBasicMaterial:Bi,MeshMatcapMaterial:WS,LineDashedMaterial:Ri,LineBasicMaterial:uu,Material:jr};jr.fromType=function(f){return new bv[f]};const Wr={arraySlice:function(f,r,s){return Wr.isTypedArray(f)?new f.constructor(f.subarray(r,void 0!==s?s:f.length)):f.slice(r,s)},convertArray:function(f,r,s){return!f||!s&&f.constructor===r?f:"number"==typeof r.BYTES_PER_ELEMENT?new r(f):Array.prototype.slice.call(f)},isTypedArray:function(f){return ArrayBuffer.isView(f)&&!(f instanceof DataView)},getKeyframeOrder:function(f){const r=f.length,s=new Array(r);for(let a=0;a!==r;++a)s[a]=a;return s.sort(function(a,c){return f[a]-f[c]}),s},sortedArray:function(f,r,s){const a=f.length,c=new f.constructor(a);for(let h=0,d=0;d!==a;++h){const m=s[h]*r;for(let g=0;g!==r;++g)c[d++]=f[m+g]}return c},flattenJSON:function(f,r,s,a){let c=1,h=f[0];for(;void 0!==h&&void 0===h[a];)h=f[c++];if(void 0===h)return;let d=h[a];if(void 0!==d)if(Array.isArray(d))do{d=h[a],void 0!==d&&(r.push(h.time),s.push.apply(s,d)),h=f[c++]}while(void 0!==h);else if(void 0!==d.toArray)do{d=h[a],void 0!==d&&(r.push(h.time),d.toArray(s,s.length)),h=f[c++]}while(void 0!==h);else do{d=h[a],void 0!==d&&(r.push(h.time),s.push(d)),h=f[c++]}while(void 0!==h)},subclip:function(f,r,s,a,c=30){const h=f.clone();h.name=r;const d=[];for(let g=0;g<h.tracks.length;++g){const y=h.tracks[g],b=y.getValueSize(),w=[],x=[];for(let E=0;E<y.times.length;++E){const T=y.times[E]*c;if(!(T<s||T>=a)){w.push(y.times[E]);for(let I=0;I<b;++I)x.push(y.values[E*b+I])}}0!==w.length&&(y.times=Wr.convertArray(w,y.times.constructor),y.values=Wr.convertArray(x,y.values.constructor),d.push(y))}h.tracks=d;let m=1/0;for(let g=0;g<h.tracks.length;++g)m>h.tracks[g].times[0]&&(m=h.tracks[g].times[0]);for(let g=0;g<h.tracks.length;++g)h.tracks[g].shift(-1*m);return h.resetDuration(),h},makeClipAdditive:function(f,r=0,s=f,a=30){a<=0&&(a=30);const c=s.tracks.length,h=r/a;for(let d=0;d<c;++d){const m=s.tracks[d],g=m.ValueTypeName;if("bool"===g||"string"===g)continue;const y=f.tracks.find(function(R){return R.name===m.name&&R.ValueTypeName===g});if(void 0===y)continue;let b=0;const w=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=w/3);let x=0;const E=y.getValueSize();y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=E/3);const T=m.times.length-1;let I;if(h<=m.times[0])I=Wr.arraySlice(m.values,b,w-b);else if(h>=m.times[T]){const R=T*w+b;I=Wr.arraySlice(m.values,R,R+w-b)}else{const R=m.createInterpolant(),$=b,B=w-b;R.evaluate(h),I=Wr.arraySlice(R.resultBuffer,$,B)}"quaternion"===g&&(new V).fromArray(I).normalize().conjugate().toArray(I);const L=y.times.length;for(let R=0;R<L;++R){const $=R*E+x;if("quaternion"===g)V.multiplyQuaternionsFlat(y.values,$,I,0,y.values,$);else{const B=E-2*x;for(let G=0;G<B;++G)y.values[$+G]-=I[G]}}}return f.blendMode=2501,f}};class fc{constructor(r,s,a,c){this.parameterPositions=r,this._cachedIndex=0,this.resultBuffer=void 0!==c?c:new s.constructor(a),this.sampleValues=s,this.valueSize=a,this.settings=null,this.DefaultSettings_={}}evaluate(r){const s=this.parameterPositions;let a=this._cachedIndex,c=s[a],h=s[a-1];e:{t:{let d;n:{r:if(!(r<c)){for(let m=a+2;;){if(void 0===c){if(r<h)break r;return a=s.length,this._cachedIndex=a,this.afterEnd_(a-1,r,h)}if(a===m)break;if(h=c,c=s[++a],r<c)break t}d=s.length;break n}if(r>=h)break e;{const m=s[1];r<m&&(a=2,h=m);for(let g=a-2;;){if(void 0===h)return this._cachedIndex=0,this.beforeStart_(0,r,c);if(a===g)break;if(c=h,h=s[--a-1],r>=h)break t}d=a,a=0}}for(;a<d;){const m=a+d>>>1;r<s[m]?d=m:a=m+1}if(c=s[a],h=s[a-1],void 0===h)return this._cachedIndex=0,this.beforeStart_(0,r,c);if(void 0===c)return a=s.length,this._cachedIndex=a,this.afterEnd_(a-1,h,r)}this._cachedIndex=a,this.intervalChanged_(a,h,c)}return this.interpolate_(a,h,r,c)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(r){const s=this.resultBuffer,a=this.sampleValues,c=this.valueSize,h=r*c;for(let d=0;d!==c;++d)s[d]=a[h+d];return s}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}fc.prototype.beforeStart_=fc.prototype.copySampleValue_,fc.prototype.afterEnd_=fc.prototype.copySampleValue_;class qS extends fc{constructor(r,s,a,c){super(r,s,a,c),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(r,s,a){const c=this.parameterPositions;let h=r-2,d=r+1,m=c[h],g=c[d];if(void 0===m)switch(this.getSettings_().endingStart){case 2401:h=r,m=2*s-a;break;case 2402:h=c.length-2,m=s+c[h]-c[h+1];break;default:h=r,m=a}if(void 0===g)switch(this.getSettings_().endingEnd){case 2401:d=r,g=2*a-s;break;case 2402:d=1,g=a+c[1]-c[0];break;default:d=r-1,g=s}const y=.5*(a-s),b=this.valueSize;this._weightPrev=y/(s-m),this._weightNext=y/(g-a),this._offsetPrev=h*b,this._offsetNext=d*b}interpolate_(r,s,a,c){const h=this.resultBuffer,d=this.sampleValues,m=this.valueSize,g=r*m,y=g-m,b=this._offsetPrev,w=this._offsetNext,x=this._weightPrev,E=this._weightNext,T=(a-s)/(c-s),I=T*T,L=I*T,R=-x*L+2*x*I-x*T,$=(1+x)*L+(-1.5-2*x)*I+(-.5+x)*T+1,B=(-1-E)*L+(1.5+E)*I+.5*T,G=E*L-E*I;for(let z=0;z!==m;++z)h[z]=R*d[b+z]+$*d[y+z]+B*d[g+z]+G*d[w+z];return h}}class to extends fc{constructor(r,s,a,c){super(r,s,a,c)}interpolate_(r,s,a,c){const h=this.resultBuffer,d=this.sampleValues,m=this.valueSize,g=r*m,y=g-m,b=(a-s)/(c-s),w=1-b;for(let x=0;x!==m;++x)h[x]=d[y+x]*w+d[g+x]*b;return h}}class Sl extends fc{constructor(r,s,a,c){super(r,s,a,c)}interpolate_(r){return this.copySampleValue_(r-1)}}class sa{constructor(r,s,a,c){if(void 0===r)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===s||0===s.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+r);this.name=r,this.times=Wr.convertArray(s,this.TimeBufferType),this.values=Wr.convertArray(a,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}static toJSON(r){const s=r.constructor;let a;if(s.toJSON!==this.toJSON)a=s.toJSON(r);else{a={name:r.name,times:Wr.convertArray(r.times,Array),values:Wr.convertArray(r.values,Array)};const c=r.getInterpolation();c!==r.DefaultInterpolation&&(a.interpolation=c)}return a.type=r.ValueTypeName,a}InterpolantFactoryMethodDiscrete(r){return new Sl(this.times,this.values,this.getValueSize(),r)}InterpolantFactoryMethodLinear(r){return new to(this.times,this.values,this.getValueSize(),r)}InterpolantFactoryMethodSmooth(r){return new qS(this.times,this.values,this.getValueSize(),r)}setInterpolation(r){let s;switch(r){case 2300:s=this.InterpolantFactoryMethodDiscrete;break;case 2301:s=this.InterpolantFactoryMethodLinear;break;case 2302:s=this.InterpolantFactoryMethodSmooth}if(void 0===s){const a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(r===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=s,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(r){if(0!==r){const s=this.times;for(let a=0,c=s.length;a!==c;++a)s[a]+=r}return this}scale(r){if(1!==r){const s=this.times;for(let a=0,c=s.length;a!==c;++a)s[a]*=r}return this}trim(r,s){const a=this.times,c=a.length;let h=0,d=c-1;for(;h!==c&&a[h]<r;)++h;for(;-1!==d&&a[d]>s;)--d;if(++d,0!==h||d!==c){h>=d&&(d=Math.max(d,1),h=d-1);const m=this.getValueSize();this.times=Wr.arraySlice(a,h,d),this.values=Wr.arraySlice(this.values,h*m,d*m)}return this}validate(){let r=!0;const s=this.getValueSize();s-Math.floor(s)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),r=!1);const a=this.times,c=this.values,h=a.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),r=!1);let d=null;for(let m=0;m!==h;m++){const g=a[m];if("number"==typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,m,g),r=!1;break}if(null!==d&&d>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,m,g,d),r=!1;break}d=g}if(void 0!==c&&Wr.isTypedArray(c))for(let m=0,g=c.length;m!==g;++m){const y=c[m];if(isNaN(y)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,m,y),r=!1;break}}return r}optimize(){const r=Wr.arraySlice(this.times),s=Wr.arraySlice(this.values),a=this.getValueSize(),c=2302===this.getInterpolation(),h=r.length-1;let d=1;for(let m=1;m<h;++m){let g=!1;const y=r[m];if(y!==r[m+1]&&(1!==m||y!==r[0]))if(c)g=!0;else{const b=m*a,w=b-a,x=b+a;for(let E=0;E!==a;++E){const T=s[b+E];if(T!==s[w+E]||T!==s[x+E]){g=!0;break}}}if(g){if(m!==d){r[d]=r[m];const b=m*a,w=d*a;for(let x=0;x!==a;++x)s[w+x]=s[b+x]}++d}}if(h>0){r[d]=r[h];for(let m=h*a,g=d*a,y=0;y!==a;++y)s[g+y]=s[m+y];++d}return d!==r.length?(this.times=Wr.arraySlice(r,0,d),this.values=Wr.arraySlice(s,0,d*a)):(this.times=r,this.values=s),this}clone(){const r=Wr.arraySlice(this.times,0),s=Wr.arraySlice(this.values,0),a=new this.constructor(this.name,r,s);return a.createInterpolant=this.createInterpolant,a}}sa.prototype.TimeBufferType=Float32Array,sa.prototype.ValueBufferType=Float32Array,sa.prototype.DefaultInterpolation=2301;class Cl extends sa{}Cl.prototype.ValueTypeName="bool",Cl.prototype.ValueBufferType=Array,Cl.prototype.DefaultInterpolation=2300,Cl.prototype.InterpolantFactoryMethodLinear=void 0,Cl.prototype.InterpolantFactoryMethodSmooth=void 0;class Xh extends sa{}Xh.prototype.ValueTypeName="color";class Kh extends sa{}Kh.prototype.ValueTypeName="number";class $S extends fc{constructor(r,s,a,c){super(r,s,a,c)}interpolate_(r,s,a,c){const h=this.resultBuffer,d=this.sampleValues,m=this.valueSize,g=(a-s)/(c-s);let y=r*m;for(let b=y+m;y!==b;y+=4)V.slerpFlat(h,0,d,y-m,d,y,g);return h}}class wu extends sa{InterpolantFactoryMethodLinear(r){return new $S(this.times,this.values,this.getValueSize(),r)}}wu.prototype.ValueTypeName="quaternion",wu.prototype.DefaultInterpolation=2301,wu.prototype.InterpolantFactoryMethodSmooth=void 0;class Pf extends sa{}Pf.prototype.ValueTypeName="string",Pf.prototype.ValueBufferType=Array,Pf.prototype.DefaultInterpolation=2300,Pf.prototype.InterpolantFactoryMethodLinear=void 0,Pf.prototype.InterpolantFactoryMethodSmooth=void 0;class Wm extends sa{}Wm.prototype.ValueTypeName="vector";class qm{constructor(r,s=-1,a,c=2500){this.name=r,this.tracks=a,this.duration=s,this.blendMode=c,this.uuid=Je(),this.duration<0&&this.resetDuration()}static parse(r){const s=[],a=r.tracks,c=1/(r.fps||1);for(let d=0,m=a.length;d!==m;++d)s.push(wo(a[d]).scale(c));const h=new this(r.name,r.duration,s,r.blendMode);return h.uuid=r.uuid,h}static toJSON(r){const s=[],a=r.tracks,c={name:r.name,duration:r.duration,tracks:s,uuid:r.uuid,blendMode:r.blendMode};for(let h=0,d=a.length;h!==d;++h)s.push(sa.toJSON(a[h]));return c}static CreateFromMorphTargetSequence(r,s,a,c){const h=s.length,d=[];for(let m=0;m<h;m++){let g=[],y=[];g.push((m+h-1)%h,m,(m+1)%h),y.push(0,1,0);const b=Wr.getKeyframeOrder(g);g=Wr.sortedArray(g,1,b),y=Wr.sortedArray(y,1,b),c||0!==g[0]||(g.push(h),y.push(y[0])),d.push(new Kh(".morphTargetInfluences["+s[m].name+"]",g,y).scale(1/a))}return new this(r,-1,d)}static findByName(r,s){let a=r;if(!Array.isArray(r)){const c=r;a=c.geometry&&c.geometry.animations||c.animations}for(let c=0;c<a.length;c++)if(a[c].name===s)return a[c];return null}static CreateClipsFromMorphTargetSequences(r,s,a){const c={},h=/^([\w-]*?)([\d]+)$/;for(let m=0,g=r.length;m<g;m++){const y=r[m],b=y.name.match(h);if(b&&b.length>1){const w=b[1];let x=c[w];x||(c[w]=x=[]),x.push(y)}}const d=[];for(const m in c)d.push(this.CreateFromMorphTargetSequence(m,c[m],s,a));return d}static parseAnimation(r,s){if(!r)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const a=function(b,w,x,E,T){if(0!==x.length){const I=[],L=[];Wr.flattenJSON(x,I,L,E),0!==I.length&&T.push(new b(w,I,L))}},c=[],h=r.name||"default",d=r.fps||30,m=r.blendMode;let g=r.length||-1;const y=r.hierarchy||[];for(let b=0;b<y.length;b++){const w=y[b].keys;if(w&&0!==w.length)if(w[0].morphTargets){const x={};let E;for(E=0;E<w.length;E++)if(w[E].morphTargets)for(let T=0;T<w[E].morphTargets.length;T++)x[w[E].morphTargets[T]]=-1;for(const T in x){const I=[],L=[];for(let R=0;R!==w[E].morphTargets.length;++R){const $=w[E];I.push($.time),L.push($.morphTarget===T?1:0)}c.push(new Kh(".morphTargetInfluence["+T+"]",I,L))}g=x.length*d}else{const x=".bones["+s[b].name+"]";a(Wm,x+".position",w,"pos",c),a(wu,x+".quaternion",w,"rot",c),a(Wm,x+".scale",w,"scl",c)}}return 0===c.length?null:new this(h,g,c,m)}resetDuration(){let r=0;for(let s=0,a=this.tracks.length;s!==a;++s){const c=this.tracks[s];r=Math.max(r,c.times[c.times.length-1])}return this.duration=r,this}trim(){for(let r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this}validate(){let r=!0;for(let s=0;s<this.tracks.length;s++)r=r&&this.tracks[s].validate();return r}optimize(){for(let r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this}clone(){const r=[];for(let s=0;s<this.tracks.length;s++)r.push(this.tracks[s].clone());return new this.constructor(this.name,this.duration,r,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function wo(f){if(void 0===f.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const r=function(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kh;case"vector":case"vector2":case"vector3":case"vector4":return Wm;case"color":return Xh;case"quaternion":return wu;case"bool":case"boolean":return Cl;case"string":return Pf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}(f.type);if(void 0===f.times){const s=[],a=[];Wr.flattenJSON(f.keys,s,a,"value"),f.times=s,f.values=a}return void 0!==r.parse?r.parse(f):new r(f.name,f.times,f.values,f.interpolation)}const pc={enabled:!1,files:{},add:function(f,r){!1!==this.enabled&&(this.files[f]=r)},get:function(f){if(!1!==this.enabled)return this.files[f]},remove:function(f){delete this.files[f]},clear:function(){this.files={}}},Yh=new class{constructor(f,r,s){const a=this;let c,h=!1,d=0,m=0;const g=[];this.onStart=void 0,this.onLoad=f,this.onProgress=r,this.onError=s,this.itemStart=function(y){m++,!1===h&&void 0!==a.onStart&&a.onStart(y,d,m),h=!0},this.itemEnd=function(y){d++,void 0!==a.onProgress&&a.onProgress(y,d,m),d===m&&(h=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(y){void 0!==a.onError&&a.onError(y)},this.resolveURL=function(y){return c?c(y):y},this.setURLModifier=function(y){return c=y,this},this.addHandler=function(y,b){return g.push(y,b),this},this.removeHandler=function(y){const b=g.indexOf(y);return-1!==b&&g.splice(b,2),this},this.getHandler=function(y){for(let b=0,w=g.length;b<w;b+=2){const x=g[b],E=g[b+1];if(x.global&&(x.lastIndex=0),x.test(y))return E}return null}}};class oa{constructor(r){this.manager=void 0!==r?r:Yh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,s){const a=this;return new Promise(function(c,h){a.load(r,c,s,h)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}const Ua={};class Al extends oa{constructor(r){super(r)}load(r,s,a,c){void 0===r&&(r=""),void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);const h=pc.get(r);if(void 0!==h)return this.manager.itemStart(r),setTimeout(()=>{s&&s(h),this.manager.itemEnd(r)},0),h;if(void 0!==Ua[r])return void Ua[r].push({onLoad:s,onProgress:a,onError:c});Ua[r]=[],Ua[r].push({onLoad:s,onProgress:a,onError:c});const d=new Request(r,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),m=this.mimeType,g=this.responseType;fetch(d).then(y=>{if(200===y.status||0===y.status){if(0===y.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===y.body||void 0===y.body.getReader)return y;const b=Ua[r],w=y.body.getReader(),x=y.headers.get("Content-Length"),E=x?parseInt(x):0,T=0!==E;let I=0;const L=new ReadableStream({start(R){!function $(){w.read().then(({done:B,value:G})=>{if(B)R.close();else{I+=G.byteLength;const z=new ProgressEvent("progress",{lengthComputable:T,loaded:I,total:E});for(let J=0,te=b.length;J<te;J++){const le=b[J];le.onProgress&&le.onProgress(z)}R.enqueue(G),$()}})}()}});return new Response(L)}throw Error(`fetch for "${y.url}" responded with ${y.status}: ${y.statusText}`)}).then(y=>{switch(g){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"document":return y.text().then(b=>(new DOMParser).parseFromString(b,m));case"json":return y.json();default:if(void 0===m)return y.text();{const b=/charset="?([^;"\s]*)"?/i.exec(m),w=b&&b[1]?b[1].toLowerCase():void 0,x=new TextDecoder(w);return y.arrayBuffer().then(E=>x.decode(E))}}}).then(y=>{pc.add(r,y);const b=Ua[r];delete Ua[r];for(let w=0,x=b.length;w<x;w++){const E=b[w];E.onLoad&&E.onLoad(y)}}).catch(y=>{const b=Ua[r];if(void 0===b)throw this.manager.itemError(r),y;delete Ua[r];for(let w=0,x=b.length;w<x;w++){const E=b[w];E.onError&&E.onError(y)}this.manager.itemError(r)}).finally(()=>{this.manager.itemEnd(r)}),this.manager.itemStart(r)}setResponseType(r){return this.responseType=r,this}setMimeType(r){return this.mimeType=r,this}}class wv extends oa{constructor(r){super(r)}load(r,s,a,c){void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);const h=this,d=pc.get(r);if(void 0!==d)return h.manager.itemStart(r),setTimeout(function(){s&&s(d),h.manager.itemEnd(r)},0),d;const m=Lt("img");function g(){b(),pc.add(r,this),s&&s(this),h.manager.itemEnd(r)}function y(w){b(),c&&c(w),h.manager.itemError(r),h.manager.itemEnd(r)}function b(){m.removeEventListener("load",g,!1),m.removeEventListener("error",y,!1)}return m.addEventListener("load",g,!1),m.addEventListener("error",y,!1),"data:"!==r.slice(0,5)&&void 0!==this.crossOrigin&&(m.crossOrigin=this.crossOrigin),h.manager.itemStart(r),m.src=r,m}}class XS extends oa{constructor(r){super(r)}load(r,s,a,c){const h=new fm,d=new wv(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let m=0;function g(y){d.load(r[y],function(b){h.images[y]=b,m++,6===m&&(h.needsUpdate=!0,s&&s(h))},void 0,c)}for(let y=0;y<r.length;++y)g(y);return h}}class KS extends oa{constructor(r){super(r)}load(r,s,a,c){const h=this,d=new Pm,m=new Al(this.manager);return m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setPath(this.path),m.setWithCredentials(h.withCredentials),m.load(r,function(g){const y=h.parse(g);y&&(void 0!==y.image?d.image=y.image:void 0!==y.data&&(d.image.width=y.width,d.image.height=y.height,d.image.data=y.data),d.wrapS=void 0!==y.wrapS?y.wrapS:1001,d.wrapT=void 0!==y.wrapT?y.wrapT:1001,d.magFilter=void 0!==y.magFilter?y.magFilter:1006,d.minFilter=void 0!==y.minFilter?y.minFilter:1006,d.anisotropy=void 0!==y.anisotropy?y.anisotropy:1,void 0!==y.encoding&&(d.encoding=y.encoding),void 0!==y.flipY&&(d.flipY=y.flipY),void 0!==y.format&&(d.format=y.format),void 0!==y.type&&(d.type=y.type),void 0!==y.mipmaps&&(d.mipmaps=y.mipmaps,d.minFilter=1008),1===y.mipmapCount&&(d.minFilter=1006),void 0!==y.generateMipmaps&&(d.generateMipmaps=y.generateMipmaps),d.needsUpdate=!0,s&&s(d,y))},a,c),d}}class $m extends oa{constructor(r){super(r)}load(r,s,a,c){const h=new q,d=new wv(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(r,function(m){h.image=m,h.needsUpdate=!0,void 0!==s&&s(h)},a,c),h}}class Ha extends Bt{constructor(r,s=1){super(),this.type="Light",this.color=new D(r),this.intensity=s}dispose(){}copy(r){return super.copy(r),this.color.copy(r.color),this.intensity=r.intensity,this}toJSON(r){const s=super.toJSON(r);return s.object.color=this.color.getHex(),s.object.intensity=this.intensity,void 0!==this.groundColor&&(s.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(s.object.distance=this.distance),void 0!==this.angle&&(s.object.angle=this.angle),void 0!==this.decay&&(s.object.decay=this.decay),void 0!==this.penumbra&&(s.object.penumbra=this.penumbra),void 0!==this.shadow&&(s.object.shadow=this.shadow.toJSON()),s}}Ha.prototype.isLight=!0,class extends Ha{constructor(f,r,s){super(f,s),this.type="HemisphereLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.groundColor=new D(r)}copy(f){return Ha.prototype.copy.call(this,f),this.groundColor.copy(f.groundColor),this}}.prototype.isHemisphereLight=!0;const Xm=new mt,kf=new F,YS=new F;class xu{constructor(r){this.camera=r,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pm,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new k(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(r){const s=this.camera,a=this.matrix;kf.setFromMatrixPosition(r.matrixWorld),s.position.copy(kf),YS.setFromMatrixPosition(r.target.matrixWorld),s.lookAt(YS),s.updateMatrixWorld(),Xm.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xm),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(s.projectionMatrix),a.multiply(s.matrixWorldInverse)}getViewport(r){return this._viewports[r]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(r){return this.camera=r.camera.clone(),this.bias=r.bias,this.radius=r.radius,this.mapSize.copy(r.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const r={};return 0!==this.bias&&(r.bias=this.bias),0!==this.normalBias&&(r.normalBias=this.normalBias),1!==this.radius&&(r.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(r.mapSize=this.mapSize.toArray()),r.camera=this.camera.toJSON(!1).object,delete r.camera.matrix,r}}class Km extends xu{constructor(){super(new Vi(50,1,.5,500)),this.focus=1}updateMatrices(r){const s=this.camera,a=2*Ce*r.angle*this.focus,c=this.mapSize.width/this.mapSize.height,h=r.distance||s.far;a===s.fov&&c===s.aspect&&h===s.far||(s.fov=a,s.aspect=c,s.far=h,s.updateProjectionMatrix()),super.updateMatrices(r)}copy(r){return super.copy(r),this.focus=r.focus,this}}Km.prototype.isSpotLightShadow=!0;class Nf extends Ha{constructor(r,s,a=0,c=Math.PI/3,h=0,d=1){super(r,s),this.type="SpotLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.target=new Bt,this.distance=a,this.angle=c,this.penumbra=h,this.decay=d,this.shadow=new Km}get power(){return this.intensity*Math.PI}set power(r){this.intensity=r/Math.PI}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.distance=r.distance,this.angle=r.angle,this.penumbra=r.penumbra,this.decay=r.decay,this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}Nf.prototype.isSpotLight=!0;const dw=new mt,Lf=new F,xv=new F;class Mv extends xu{constructor(){super(new Vi(90,1,.5,500)),this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new k(2,1,1,1),new k(0,1,1,1),new k(3,1,1,1),new k(1,1,1,1),new k(3,0,1,1),new k(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(r,s=0){const a=this.camera,c=this.matrix,h=r.distance||a.far;h!==a.far&&(a.far=h,a.updateProjectionMatrix()),Lf.setFromMatrixPosition(r.matrixWorld),a.position.copy(Lf),xv.copy(a.position),xv.add(this._cubeDirections[s]),a.up.copy(this._cubeUps[s]),a.lookAt(xv),a.updateMatrixWorld(),c.makeTranslation(-Lf.x,-Lf.y,-Lf.z),dw.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dw)}}Mv.prototype.isPointLightShadow=!0;class mc extends Ha{constructor(r,s,a=0,c=1){super(r,s),this.type="PointLight",this.distance=a,this.decay=c,this.shadow=new Mv}get power(){return 4*this.intensity*Math.PI}set power(r){this.intensity=r/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.distance=r.distance,this.decay=r.decay,this.shadow=r.shadow.clone(),this}}mc.prototype.isPointLight=!0;class Mu extends xu{constructor(){super(new zn(-5,5,5,-5,.5,500))}}Mu.prototype.isDirectionalLightShadow=!0;class Ev extends Ha{constructor(r,s){super(r,s),this.type="DirectionalLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.target=new Bt,this.shadow=new Mu}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}Ev.prototype.isDirectionalLight=!0,class extends Ha{constructor(f,r){super(f,r),this.type="AmbientLight"}}.prototype.isAmbientLight=!0,class extends Ha{constructor(f,r,s=10,a=10){super(f,r),this.type="RectAreaLight",this.width=s,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(f){this.intensity=f/(this.width*this.height*Math.PI)}copy(f){return super.copy(f),this.width=f.width,this.height=f.height,this}toJSON(f){const r=super.toJSON(f);return r.object.width=this.width,r.object.height=this.height,r}}.prototype.isRectAreaLight=!0;class Re{constructor(){this.coefficients=[];for(let r=0;r<9;r++)this.coefficients.push(new F)}set(r){for(let s=0;s<9;s++)this.coefficients[s].copy(r[s]);return this}zero(){for(let r=0;r<9;r++)this.coefficients[r].set(0,0,0);return this}getAt(r,s){const a=r.x,c=r.y,h=r.z,d=this.coefficients;return s.copy(d[0]).multiplyScalar(.282095),s.addScaledVector(d[1],.488603*c),s.addScaledVector(d[2],.488603*h),s.addScaledVector(d[3],.488603*a),s.addScaledVector(d[4],a*c*1.092548),s.addScaledVector(d[5],c*h*1.092548),s.addScaledVector(d[6],.315392*(3*h*h-1)),s.addScaledVector(d[7],a*h*1.092548),s.addScaledVector(d[8],.546274*(a*a-c*c)),s}getIrradianceAt(r,s){const a=r.x,c=r.y,h=r.z,d=this.coefficients;return s.copy(d[0]).multiplyScalar(.886227),s.addScaledVector(d[1],1.023328*c),s.addScaledVector(d[2],1.023328*h),s.addScaledVector(d[3],1.023328*a),s.addScaledVector(d[4],.858086*a*c),s.addScaledVector(d[5],.858086*c*h),s.addScaledVector(d[6],.743125*h*h-.247708),s.addScaledVector(d[7],.858086*a*h),s.addScaledVector(d[8],.429043*(a*a-c*c)),s}add(r){for(let s=0;s<9;s++)this.coefficients[s].add(r.coefficients[s]);return this}addScaledSH(r,s){for(let a=0;a<9;a++)this.coefficients[a].addScaledVector(r.coefficients[a],s);return this}scale(r){for(let s=0;s<9;s++)this.coefficients[s].multiplyScalar(r);return this}lerp(r,s){for(let a=0;a<9;a++)this.coefficients[a].lerp(r.coefficients[a],s);return this}equals(r){for(let s=0;s<9;s++)if(!this.coefficients[s].equals(r.coefficients[s]))return!1;return!0}copy(r){return this.set(r.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(r,s=0){const a=this.coefficients;for(let c=0;c<9;c++)a[c].fromArray(r,s+3*c);return this}toArray(r=[],s=0){const a=this.coefficients;for(let c=0;c<9;c++)a[c].toArray(r,s+3*c);return r}static getBasisAt(r,s){const a=r.x,c=r.y,h=r.z;s[0]=.282095,s[1]=.488603*c,s[2]=.488603*h,s[3]=.488603*a,s[4]=1.092548*a*c,s[5]=1.092548*c*h,s[6]=.315392*(3*h*h-1),s[7]=1.092548*a*h,s[8]=.546274*(a*a-c*c)}}Re.prototype.isSphericalHarmonics3=!0;class Of extends Ha{constructor(r=new Re,s=1){super(void 0,s),this.sh=r}copy(r){return super.copy(r),this.sh.copy(r.sh),this}fromJSON(r){return this.intensity=r.intensity,this.sh.fromArray(r.sh),this}toJSON(r){const s=super.toJSON(r);return s.object.sh=this.sh.toArray(),s}}Of.prototype.isLightProbe=!0;class Hi{static decodeText(r){if(typeof TextDecoder<"u")return(new TextDecoder).decode(r);let s="";for(let a=0,c=r.length;a<c;a++)s+=String.fromCharCode(r[a]);try{return decodeURIComponent(escape(s))}catch{return s}}static extractUrlBase(r){const s=r.lastIndexOf("/");return-1===s?"./":r.slice(0,s+1)}static resolveURL(r,s){return"string"!=typeof r||""===r?"":(/^https?:\/\//i.test(s)&&/^\//.test(r)&&(s=s.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(r)||/^data:.*,.*$/i.test(r)||/^blob:.*$/i.test(r)?r:s+r)}}(class extends Xr{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(f){return super.copy(f),this.instanceCount=f.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const f=super.toJSON(this);return f.instanceCount=this.instanceCount,f.isInstancedBufferGeometry=!0,f}}).prototype.isInstancedBufferGeometry=!0;class Ym extends oa{constructor(r){super(r),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(r){return this.options=r,this}load(r,s,a,c){void 0===r&&(r=""),void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);const h=this,d=pc.get(r);if(void 0!==d)return h.manager.itemStart(r),setTimeout(function(){s&&s(d),h.manager.itemEnd(r)},0),d;const m={};m.credentials="anonymous"===this.crossOrigin?"same-origin":"include",m.headers=this.requestHeader,fetch(r,m).then(function(g){return g.blob()}).then(function(g){return createImageBitmap(g,Object.assign(h.options,{colorSpaceConversion:"none"}))}).then(function(g){pc.add(r,g),s&&s(g),h.manager.itemEnd(r)}).catch(function(g){c&&c(g),h.manager.itemError(r),h.manager.itemEnd(r)}),h.manager.itemStart(r)}}let Eu;Ym.prototype.isImageBitmapLoader=!0;class JS extends oa{constructor(r){super(r)}load(r,s,a,c){const h=this,d=new Al(this.manager);d.setResponseType("arraybuffer"),d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(r,function(m){try{const g=m.slice(0);(void 0===Eu&&(Eu=new(window.AudioContext||window.webkitAudioContext)),Eu).decodeAudioData(g,function(y){s(y)})}catch(g){c?c(g):console.error(g),h.manager.itemError(r)}},a,c)}}(class extends Of{constructor(f,r,s=1){super(void 0,s);const a=(new D).set(f),c=(new D).set(r),h=new F(a.r,a.g,a.b),d=new F(c.r,c.g,c.b),m=Math.sqrt(Math.PI),g=m*Math.sqrt(.75);this.sh.coefficients[0].copy(h).add(d).multiplyScalar(m),this.sh.coefficients[1].copy(h).sub(d).multiplyScalar(g)}}).prototype.isHemisphereLightProbe=!0,class extends Of{constructor(f,r=1){super(void 0,r);const s=(new D).set(f);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class QS{constructor(r,s,a){let c,h,d;switch(this.binding=r,this.valueSize=a,s){case"quaternion":c=this._slerp,h=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*a),this._workIndex=5;break;case"string":case"bool":c=this._select,h=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(5*a);break;default:c=this._lerp,h=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*a)}this._mixBufferRegion=c,this._mixBufferRegionAdditive=h,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(r,s){const a=this.buffer,c=this.valueSize,h=r*c+c;let d=this.cumulativeWeight;if(0===d){for(let m=0;m!==c;++m)a[h+m]=a[m];d=s}else d+=s,this._mixBufferRegion(a,h,0,s/d,c);this.cumulativeWeight=d}accumulateAdditive(r){const s=this.buffer,a=this.valueSize,c=a*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(s,c,0,r,a),this.cumulativeWeightAdditive+=r}apply(r){const s=this.valueSize,a=this.buffer,c=r*s+s,h=this.cumulativeWeight,d=this.cumulativeWeightAdditive,m=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,h<1&&this._mixBufferRegion(a,c,s*this._origIndex,1-h,s),d>0&&this._mixBufferRegionAdditive(a,c,this._addIndex*s,1,s);for(let g=s,y=s+s;g!==y;++g)if(a[g]!==a[g+s]){m.setValue(a,c);break}}saveOriginalState(){const s=this.buffer,a=this.valueSize,c=a*this._origIndex;this.binding.getValue(s,c);for(let h=a,d=c;h!==d;++h)s[h]=s[c+h%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const r=this._addIndex*this.valueSize,s=r+this.valueSize;for(let a=r;a<s;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const r=this._origIndex*this.valueSize,s=this._addIndex*this.valueSize;for(let a=0;a<this.valueSize;a++)this.buffer[s+a]=this.buffer[r+a]}_select(r,s,a,c,h){if(c>=.5)for(let d=0;d!==h;++d)r[s+d]=r[a+d]}_slerp(r,s,a,c){V.slerpFlat(r,s,r,s,r,a,c)}_slerpAdditive(r,s,a,c,h){const d=this._workIndex*h;V.multiplyQuaternionsFlat(r,d,r,s,r,a),V.slerpFlat(r,s,r,s,r,d,c)}_lerp(r,s,a,c,h){const d=1-c;for(let m=0;m!==h;++m){const g=s+m;r[g]=r[g]*d+r[a+m]*c}}_lerpAdditive(r,s,a,c,h){for(let d=0;d!==h;++d){const m=s+d;r[m]=r[m]+r[a+d]*c}}}const Sv=new RegExp("[\\[\\]\\.:\\/]","g"),za="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",fw=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Zh=/(WCOD+)?/.source.replace("WCOD",za),eC=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),pw=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ff=new RegExp("^"+fw+Zh+eC+pw+"$"),Zm=["material","materials","bones"];class tr{constructor(r,s,a){this.path=s,this.parsedPath=a||tr.parseTrackName(s),this.node=tr.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,s,a){return r&&r.isAnimationObjectGroup?new tr.Composite(r,s,a):new tr(r,s,a)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(Sv,"")}static parseTrackName(r){const s=Ff.exec(r);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const a={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},c=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const h=a.nodeName.substring(c+1);-1!==Zm.indexOf(h)&&(a.nodeName=a.nodeName.substring(0,c),a.objectName=h)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return a}static findNode(r,s){if(void 0===s||""===s||"."===s||-1===s||s===r.name||s===r.uuid)return r;if(r.skeleton){const a=r.skeleton.getBoneByName(s);if(void 0!==a)return a}if(r.children){const a=function(h){for(let d=0;d<h.length;d++){const m=h[d];if(m.name===s||m.uuid===s)return m;const g=a(m.children);if(g)return g}return null},c=a(r.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,s){r[s]=this.targetObject[this.propertyName]}_getValue_array(r,s){const a=this.resolvedProperty;for(let c=0,h=a.length;c!==h;++c)r[s++]=a[c]}_getValue_arrayElement(r,s){r[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,s){this.resolvedProperty.toArray(r,s)}_setValue_direct(r,s){this.targetObject[this.propertyName]=r[s]}_setValue_direct_setNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,s){const a=this.resolvedProperty;for(let c=0,h=a.length;c!==h;++c)a[c]=r[s++]}_setValue_array_setNeedsUpdate(r,s){const a=this.resolvedProperty;for(let c=0,h=a.length;c!==h;++c)a[c]=r[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,s){const a=this.resolvedProperty;for(let c=0,h=a.length;c!==h;++c)a[c]=r[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,s){this.resolvedProperty[this.propertyIndex]=r[s]}_setValue_arrayElement_setNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,s){this.resolvedProperty.fromArray(r,s)}_setValue_fromArray_setNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,s){this.bind(),this.getValue(r,s)}_setValue_unbound(r,s){this.bind(),this.setValue(r,s)}bind(){let r=this.node;const s=this.parsedPath,a=s.objectName,c=s.propertyName;let h=s.propertyIndex;if(r||(r=tr.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(a){let y=s.objectIndex;switch(a){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(let b=0;b<r.length;b++)if(r[b].name===y){y=b;break}break;default:if(void 0===r[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[a]}if(void 0!==y){if(void 0===r[y])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[y]}}const d=r[c];if(void 0===d)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+c+" but it wasn't found.",r);let m=this.Versioning.None;this.targetObject=r,void 0!==r.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==r.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(void 0!==h){if("morphTargetInfluences"===c){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[h]&&(h=r.morphTargetDictionary[h])}g=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=h}else void 0!==d.fromArray&&void 0!==d.toArray?(g=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(g=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=c;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}tr.Composite=class{constructor(f,r,s){const a=s||tr.parseTrackName(r);this._targetGroup=f,this._bindings=f.subscribe_(r,a)}getValue(f,r){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(f,r)}setValue(f,r){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=s.length;a!==c;++a)s[a].setValue(f,r)}bind(){const f=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=f.length;r!==s;++r)f[r].bind()}unbind(){const f=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=f.length;r!==s;++r)f[r].unbind()}},tr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},tr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},tr.prototype.GetterByBindingType=[tr.prototype._getValue_direct,tr.prototype._getValue_array,tr.prototype._getValue_arrayElement,tr.prototype._getValue_toArray],tr.prototype.SetterByBindingTypeAndVersioning=[[tr.prototype._setValue_direct,tr.prototype._setValue_direct_setNeedsUpdate,tr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[tr.prototype._setValue_array,tr.prototype._setValue_array_setNeedsUpdate,tr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[tr.prototype._setValue_arrayElement,tr.prototype._setValue_arrayElement_setNeedsUpdate,tr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[tr.prototype._setValue_fromArray,tr.prototype._setValue_fromArray_setNeedsUpdate,tr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tC{constructor(r,s,a=null,c=s.blendMode){this._mixer=r,this._clip=s,this._localRoot=a,this.blendMode=c;const h=s.tracks,d=h.length,m=new Array(d),g={endingStart:2400,endingEnd:2400};for(let y=0;y!==d;++y){const b=h[y].createInterpolant(null);m[y]=b,b.settings=g}this._interpolantSettings=g,this._interpolants=m,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(r){return this._startTime=r,this}setLoop(r,s){return this.loop=r,this.repetitions=s,this}setEffectiveWeight(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(r){return this._scheduleFading(r,0,1)}fadeOut(r){return this._scheduleFading(r,1,0)}crossFadeFrom(r,s,a){if(r.fadeOut(s),this.fadeIn(s),a){const c=this._clip.duration,h=r._clip.duration,m=c/h;r.warp(1,h/c,s),this.warp(m,1,s)}return this}crossFadeTo(r,s,a){return r.crossFadeFrom(this,s,a)}stopFading(){const r=this._weightInterpolant;return null!==r&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this}setEffectiveTimeScale(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(r){return this.timeScale=this._clip.duration/r,this.stopWarping()}syncWith(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()}halt(r){return this.warp(this._effectiveTimeScale,0,r)}warp(r,s,a){const c=this._mixer,h=c.time,d=this.timeScale;let m=this._timeScaleInterpolant;null===m&&(m=c._lendControlInterpolant(),this._timeScaleInterpolant=m);const g=m.parameterPositions,y=m.sampleValues;return g[0]=h,g[1]=h+a,y[0]=r/d,y[1]=s/d,this}stopWarping(){const r=this._timeScaleInterpolant;return null!==r&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(r,s,a,c){if(!this.enabled)return void this._updateWeight(r);const h=this._startTime;if(null!==h){const g=(r-h)*a;if(g<0||0===a)return;this._startTime=null,s=a*g}s*=this._updateTimeScale(r);const d=this._updateTime(s),m=this._updateWeight(r);if(m>0){const g=this._interpolants,y=this._propertyBindings;if(2501===this.blendMode)for(let b=0,w=g.length;b!==w;++b)g[b].evaluate(d),y[b].accumulateAdditive(m);else for(let b=0,w=g.length;b!==w;++b)g[b].evaluate(d),y[b].accumulate(c,m)}}_updateWeight(r){let s=0;if(this.enabled){s=this.weight;const a=this._weightInterpolant;if(null!==a){const c=a.evaluate(r)[0];s*=c,r>a.parameterPositions[1]&&(this.stopFading(),0===c&&(this.enabled=!1))}}return this._effectiveWeight=s,s}_updateTimeScale(r){let s=0;if(!this.paused){s=this.timeScale;const a=this._timeScaleInterpolant;null!==a&&(s*=a.evaluate(r)[0],r>a.parameterPositions[1]&&(this.stopWarping(),0===s?this.paused=!0:this.timeScale=s))}return this._effectiveTimeScale=s,s}_updateTime(r){const s=this._clip.duration,a=this.loop;let c=this.time+r,h=this._loopCount;const d=2202===a;if(0===r)return-1===h?c:d&&1==(1&h)?s-c:c;if(2200===a){-1===h&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(c>=s)c=s;else{if(!(c<0)){this.time=c;break e}c=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:r<0?-1:1})}}else{if(-1===h&&(r>=0?(h=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d)),c>=s||c<0){const m=Math.floor(c/s);c-=s*m,h+=Math.abs(m);const g=this.repetitions-h;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=r>0?s:0,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:r>0?1:-1});else{if(1===g){const y=r<0;this._setEndings(y,!y,d)}else this._setEndings(!1,!1,d);this._loopCount=h,this.time=c,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:m})}}else this.time=c;if(d&&1==(1&h))return s-c}return c}_setEndings(r,s,a){const c=this._interpolantSettings;a?(c.endingStart=2401,c.endingEnd=2401):(c.endingStart=r?this.zeroSlopeAtStart?2401:2400:2402,c.endingEnd=s?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(r,s,a){const c=this._mixer,h=c.time;let d=this._weightInterpolant;null===d&&(d=c._lendControlInterpolant(),this._weightInterpolant=d);const m=d.parameterPositions,g=d.sampleValues;return m[0]=h,g[0]=s,m[1]=h+r,g[1]=a,this}}class mw extends U{constructor(r){super(),this._root=r,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(r,s){const a=r._localRoot||this._root,c=r._clip.tracks,h=c.length,d=r._propertyBindings,m=r._interpolants,g=a.uuid,y=this._bindingsByRootAndName;let b=y[g];void 0===b&&(b={},y[g]=b);for(let w=0;w!==h;++w){const x=c[w],E=x.name;let T=b[E];if(void 0!==T)++T.referenceCount,d[w]=T;else{if(T=d[w],void 0!==T){null===T._cacheIndex&&(++T.referenceCount,this._addInactiveBinding(T,g,E));continue}T=new QS(tr.create(a,E,s&&s._propertyBindings[w].binding.parsedPath),x.ValueTypeName,x.getValueSize()),++T.referenceCount,this._addInactiveBinding(T,g,E),d[w]=T}m[w].resultBuffer=T.buffer}}_activateAction(r){if(!this._isActiveAction(r)){if(null===r._cacheIndex){const a=(r._localRoot||this._root).uuid,c=r._clip.uuid,h=this._actionsByClip[c];this._bindAction(r,h&&h.knownActions[0]),this._addInactiveAction(r,c,a)}const s=r._propertyBindings;for(let a=0,c=s.length;a!==c;++a){const h=s[a];0==h.useCount++&&(this._lendBinding(h),h.saveOriginalState())}this._lendAction(r)}}_deactivateAction(r){if(this._isActiveAction(r)){const s=r._propertyBindings;for(let a=0,c=s.length;a!==c;++a){const h=s[a];0==--h.useCount&&(h.restoreOriginalState(),this._takeBackBinding(h))}this._takeBackAction(r)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const r=this;this.stats={actions:{get total(){return r._actions.length},get inUse(){return r._nActiveActions}},bindings:{get total(){return r._bindings.length},get inUse(){return r._nActiveBindings}},controlInterpolants:{get total(){return r._controlInterpolants.length},get inUse(){return r._nActiveControlInterpolants}}}}_isActiveAction(r){const s=r._cacheIndex;return null!==s&&s<this._nActiveActions}_addInactiveAction(r,s,a){const c=this._actions,h=this._actionsByClip;let d=h[s];if(void 0===d)d={knownActions:[r],actionByRoot:{}},r._byClipCacheIndex=0,h[s]=d;else{const m=d.knownActions;r._byClipCacheIndex=m.length,m.push(r)}r._cacheIndex=c.length,c.push(r),d.actionByRoot[a]=r}_removeInactiveAction(r){const s=this._actions,a=s[s.length-1],c=r._cacheIndex;a._cacheIndex=c,s[c]=a,s.pop(),r._cacheIndex=null;const h=r._clip.uuid,d=this._actionsByClip,m=d[h],g=m.knownActions,y=g[g.length-1],b=r._byClipCacheIndex;y._byClipCacheIndex=b,g[b]=y,g.pop(),r._byClipCacheIndex=null,delete m.actionByRoot[(r._localRoot||this._root).uuid],0===g.length&&delete d[h],this._removeInactiveBindingsForAction(r)}_removeInactiveBindingsForAction(r){const s=r._propertyBindings;for(let a=0,c=s.length;a!==c;++a){const h=s[a];0==--h.referenceCount&&this._removeInactiveBinding(h)}}_lendAction(r){const s=this._actions,a=r._cacheIndex,c=this._nActiveActions++,h=s[c];r._cacheIndex=c,s[c]=r,h._cacheIndex=a,s[a]=h}_takeBackAction(r){const s=this._actions,a=r._cacheIndex,c=--this._nActiveActions,h=s[c];r._cacheIndex=c,s[c]=r,h._cacheIndex=a,s[a]=h}_addInactiveBinding(r,s,a){const c=this._bindingsByRootAndName,h=this._bindings;let d=c[s];void 0===d&&(d={},c[s]=d),d[a]=r,r._cacheIndex=h.length,h.push(r)}_removeInactiveBinding(r){const s=this._bindings,a=r.binding,c=a.rootNode.uuid,h=a.path,d=this._bindingsByRootAndName,m=d[c],g=s[s.length-1],y=r._cacheIndex;g._cacheIndex=y,s[y]=g,s.pop(),delete m[h],0===Object.keys(m).length&&delete d[c]}_lendBinding(r){const s=this._bindings,a=r._cacheIndex,c=this._nActiveBindings++,h=s[c];r._cacheIndex=c,s[c]=r,h._cacheIndex=a,s[a]=h}_takeBackBinding(r){const s=this._bindings,a=r._cacheIndex,c=--this._nActiveBindings,h=s[c];r._cacheIndex=c,s[c]=r,h._cacheIndex=a,s[a]=h}_lendControlInterpolant(){const r=this._controlInterpolants,s=this._nActiveControlInterpolants++;let a=r[s];return void 0===a&&(a=new to(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=s,r[s]=a),a}_takeBackControlInterpolant(r){const s=this._controlInterpolants,a=r.__cacheIndex,c=--this._nActiveControlInterpolants,h=s[c];r.__cacheIndex=c,s[c]=r,h.__cacheIndex=a,s[a]=h}clipAction(r,s,a){const c=s||this._root,h=c.uuid;let d="string"==typeof r?qm.findByName(c,r):r;const m=null!==d?d.uuid:r,g=this._actionsByClip[m];let y=null;if(void 0===a&&(a=null!==d?d.blendMode:2500),void 0!==g){const w=g.actionByRoot[h];if(void 0!==w&&w.blendMode===a)return w;y=g.knownActions[0],null===d&&(d=y._clip)}if(null===d)return null;const b=new tC(this,d,s,a);return this._bindAction(b,y),this._addInactiveAction(b,m,h),b}existingAction(r,s){const a=s||this._root,c=a.uuid,h="string"==typeof r?qm.findByName(a,r):r,m=this._actionsByClip[h?h.uuid:r];return void 0!==m&&m.actionByRoot[c]||null}stopAllAction(){const r=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)r[s].stop();return this}update(r){const s=this._actions,a=this._nActiveActions,c=this.time+=r*=this.timeScale,h=Math.sign(r),d=this._accuIndex^=1;for(let y=0;y!==a;++y)s[y]._update(c,r,h,d);const m=this._bindings,g=this._nActiveBindings;for(let y=0;y!==g;++y)m[y].apply(d);return this}setTime(r){this.time=0;for(let s=0;s<this._actions.length;s++)this._actions[s].time=0;return this.update(r)}getRoot(){return this._root}uncacheClip(r){const s=this._actions,a=r.uuid,c=this._actionsByClip,h=c[a];if(void 0!==h){const d=h.knownActions;for(let m=0,g=d.length;m!==g;++m){const y=d[m];this._deactivateAction(y);const b=y._cacheIndex,w=s[s.length-1];y._cacheIndex=null,y._byClipCacheIndex=null,w._cacheIndex=b,s[b]=w,s.pop(),this._removeInactiveBindingsForAction(y)}delete c[a]}}uncacheRoot(r){const s=r.uuid,a=this._actionsByClip;for(const h in a){const d=a[h].actionByRoot[s];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}const c=this._bindingsByRootAndName[s];if(void 0!==c)for(const h in c){const d=c[h];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(r,s){const a=this.existingAction(r,s);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}function Su(f,r){return f.distance-r.distance}function Cu(f,r,s,a){if(f.layers.test(r.layers)&&f.raycast(r,s),!0===a){const c=f.children;for(let h=0,d=c.length;h<d;h++)Cu(c[h],r,s,!0)}}mw.prototype._controlInterpolantsResultBuffer=new Float32Array(1),class extends La{constructor(f,r,s=1){super(f,r),this.meshPerAttribute=s}copy(f){return super.copy(f),this.meshPerAttribute=f.meshPerAttribute,this}clone(f){const r=super.clone(f);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(f){const r=super.toJSON(f);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}.prototype.isInstancedInterleavedBuffer=!0;class Jm{constructor(r=1,s=0,a=0){return this.radius=r,this.phi=s,this.theta=a,this}set(r,s,a){return this.radius=r,this.phi=s,this.theta=a,this}copy(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(r){return this.setFromCartesianCoords(r.x,r.y,r.z)}setFromCartesianCoords(r,s,a){return this.radius=Math.sqrt(r*r+s*s+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(r,a),this.phi=Math.acos(ye(s/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Au=new F,Bf=new mt,Cv=new mt;function nC(f){const r=[];!0===f.isBone&&r.push(f);for(let s=0;s<f.children.length;s++)r.push.apply(r,nC(f.children[s]));return r}class Qm{static toHalfFloat(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=ye(r,-65504,65504),vw[0]=r;const s=Vf[0],a=s>>23&511;return Ro[a]+((8388607&s)>>aa[a])}static fromHalfFloat(r){const s=r>>10;return Vf[0]=eg[Av[s]+(1023&r)]+Uf[s],vw[0]}}const gw=new ArrayBuffer(4),vw=new Float32Array(gw),Vf=new Uint32Array(gw),Ro=new Uint32Array(512),aa=new Uint32Array(512);for(let f=0;f<256;++f){const r=f-127;r<-27?(Ro[f]=0,Ro[256|f]=32768,aa[f]=24,aa[256|f]=24):r<-14?(Ro[f]=1024>>-r-14,Ro[256|f]=1024>>-r-14|32768,aa[f]=-r-1,aa[256|f]=-r-1):r<=15?(Ro[f]=r+15<<10,Ro[256|f]=r+15<<10|32768,aa[f]=13,aa[256|f]=13):r<128?(Ro[f]=31744,Ro[256|f]=64512,aa[f]=24,aa[256|f]=24):(Ro[f]=31744,Ro[256|f]=64512,aa[f]=13,aa[256|f]=13)}const eg=new Uint32Array(2048),Uf=new Uint32Array(64),Av=new Uint32Array(64);for(let f=1;f<1024;++f){let r=f<<13,s=0;for(;0==(8388608&r);)r<<=1,s-=8388608;r&=-8388609,s+=947912704,eg[f]=r|s}for(let f=1024;f<2048;++f)eg[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)Uf[f]=f<<23;Uf[31]=1199570944,Uf[32]=2147483648;for(let f=33;f<63;++f)Uf[f]=2147483648+(f-32<<23);Uf[63]=3347054592;for(let f=1;f<64;++f)32!==f&&(Av[f]=1024);Do.create=function(f,r){return console.log("THREE.Curve.create() has been deprecated"),f.prototype=Object.create(Do.prototype),f.prototype.constructor=f,f.prototype.getPoint=r,f},pu.prototype.fromPoints=function(f){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(f)},class extends Hh{constructor(f=10,r=10,s=4473924,a=8947848){s=new D(s),a=new D(a);const c=r/2,h=f/r,d=f/2,m=[],g=[];for(let b=0,w=0,x=-d;b<=r;b++,x+=h){m.push(-d,0,x,d,0,x),m.push(x,0,-d,x,0,d);const E=b===c?s:a;E.toArray(g,w),w+=3,E.toArray(g,w),w+=3,E.toArray(g,w),w+=3,E.toArray(g,w),w+=3}const y=new Xr;y.setAttribute("position",new wn(m,3)),y.setAttribute("color",new wn(g,3)),super(y,new uu({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Hh{constructor(f){const r=nC(f),s=new Xr,a=[],c=[],h=new D(0,0,1),d=new D(0,1,0);for(let m=0;m<r.length;m++){const g=r[m];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),c.push(h.r,h.g,h.b),c.push(d.r,d.g,d.b))}s.setAttribute("position",new wn(a,3)),s.setAttribute("color",new wn(c,3)),super(s,new uu({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=f,this.bones=r,this.matrix=f.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(f){const r=this.bones,s=this.geometry,a=s.getAttribute("position");Cv.copy(this.root.matrixWorld).invert();for(let c=0,h=0;c<r.length;c++){const d=r[c];d.parent&&d.parent.isBone&&(Bf.multiplyMatrices(Cv,d.matrixWorld),Au.setFromMatrixPosition(Bf),a.setXYZ(h,Au.x,Au.y,Au.z),Bf.multiplyMatrices(Cv,d.parent.matrixWorld),Au.setFromMatrixPosition(Bf),a.setXYZ(h+1,Au.x,Au.y,Au.z),h+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(f)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},oa.prototype.extractUrlBase=function(f){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Hi.extractUrlBase(f)},oa.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},ut.prototype.center=function(f){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(f)},ut.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ut.prototype.isIntersectionBox=function(f){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(f)},ut.prototype.isIntersectionSphere=function(f){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(f)},ut.prototype.size=function(f){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(f)},Qn.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},Jn.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},pm.prototype.setFromMatrix=function(f){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(f)},vt.prototype.flattenToArrayOffset=function(f,r){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(f,r)},vt.prototype.multiplyVector3=function(f){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),f.applyMatrix3(this)},vt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},vt.prototype.applyToBufferAttribute=function(f){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),f.applyMatrix3(this)},vt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},vt.prototype.getInverse=function(f){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(f).invert()},mt.prototype.extractPosition=function(f){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(f)},mt.prototype.flattenToArrayOffset=function(f,r){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(f,r)},mt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new F).setFromMatrixColumn(this,3)},mt.prototype.setRotationFromQuaternion=function(f){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(f)},mt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},mt.prototype.multiplyVector3=function(f){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),f.applyMatrix4(this)},mt.prototype.multiplyVector4=function(f){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),f.applyMatrix4(this)},mt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},mt.prototype.rotateAxis=function(f){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),f.transformDirection(this)},mt.prototype.crossVector=function(f){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),f.applyMatrix4(this)},mt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},mt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},mt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},mt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},mt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},mt.prototype.applyToBufferAttribute=function(f){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),f.applyMatrix4(this)},mt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},mt.prototype.makeFrustum=function(f,r,s,a,c,h){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(f,r,a,s,c,h)},mt.prototype.getInverse=function(f){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(f).invert()},yl.prototype.isIntersectionLine=function(f){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(f)},V.prototype.multiplyVector3=function(f){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),f.applyQuaternion(this)},V.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ps.prototype.isIntersectionBox=function(f){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(f)},ps.prototype.isIntersectionPlane=function(f){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(f)},ps.prototype.isIntersectionSphere=function(f){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(f)},Sn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Sn.prototype.barycoordFromPoint=function(f,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(f,r)},Sn.prototype.midpoint=function(f){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(f)},Sn.prototypenormal=function(f){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(f)},Sn.prototype.plane=function(f){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(f)},Sn.barycoordFromPoint=function(f,r,s,a,c){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Sn.getBarycoord(f,r,s,a,c)},Sn.normal=function(f,r,s,a){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Sn.getNormal(f,r,s,a)},mu.prototype.extractAllPoints=function(f){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(f)},mu.prototype.extrude=function(f){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new qh(this,f)},mu.prototype.makeGeometry=function(f){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _v(this,f)},Me.prototype.fromAttribute=function(f,r,s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(f,r,s)},Me.prototype.distanceToManhattan=function(f){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(f)},Me.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},F.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},F.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},F.prototype.getPositionFromMatrix=function(f){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(f)},F.prototype.getScaleFromMatrix=function(f){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(f)},F.prototype.getColumnFromMatrix=function(f,r){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,f)},F.prototype.applyProjection=function(f){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(f)},F.prototype.fromAttribute=function(f,r,s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(f,r,s)},F.prototype.distanceToManhattan=function(f){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(f)},F.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},k.prototype.fromAttribute=function(f,r,s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(f,r,s)},k.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Bt.prototype.getChildByName=function(f){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(f)},Bt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Bt.prototype.translate=function(f,r){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(r,f)},Bt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Bt.prototype.applyMatrix=function(f){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(f)},Object.defineProperties(Bt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(f){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=f}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),xt.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(xt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),bf.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Vi.prototype.setLens=function(f,r){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==r&&(this.filmGauge=r),this.setFocalLength(f)},Object.defineProperties(Ha.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(f){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=f}},shadowCameraLeft:{set:function(f){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=f}},shadowCameraRight:{set:function(f){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=f}},shadowCameraTop:{set:function(f){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=f}},shadowCameraBottom:{set:function(f){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=f}},shadowCameraNear:{set:function(f){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=f}},shadowCameraFar:{set:function(f){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=f}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(f){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=f}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(f){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=f}},shadowMapHeight:{set:function(f){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=f}}}),Object.defineProperties(jt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),jt.prototype.setDynamic=function(f){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===f?35048:35044),this},jt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},jt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Xr.prototype.addIndex=function(f){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(f)},Xr.prototype.addAttribute=function(f,r){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),r&&r.isBufferAttribute||r&&r.isInterleavedBufferAttribute?"index"===f?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(r),this):this.setAttribute(f,r):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(f,new jt(arguments[1],arguments[2])))},Xr.prototype.addDrawCall=function(f,r,s){void 0!==s&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(f,r)},Xr.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Xr.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Xr.prototype.removeAttribute=function(f){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(f)},Xr.prototype.applyMatrix=function(f){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(f)},Object.defineProperties(Xr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),La.prototype.setDynamic=function(f){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===f?35048:35044),this},La.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},qh.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},qh.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},qh.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ta.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(jr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new D}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(f){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===f}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(f){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=f}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(An.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(f){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=f}}}),un.prototype.clearTarget=function(f,r,s,a){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(f),this.clear(r,s,a)},un.prototype.animate=function(f){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(f)},un.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},un.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},un.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},un.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},un.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},un.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},un.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},un.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},un.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},un.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},un.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},un.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},un.prototype.enableScissorTest=function(f){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(f)},un.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},un.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},un.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},un.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},un.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},un.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},un.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},un.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},un.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},un.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(un.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(f){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=f}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(f){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=f}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(f){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===f?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(RS.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(K.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(f){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=f}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(f){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=f}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(f){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=f}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(f){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=f}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(f){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=f}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(f){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=f}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(f){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=f}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(f){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=f}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(f){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=f}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(f){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=f}}}),class extends Bt{constructor(f){super(),this.type="Audio",this.listener=f,this.context=f.context,this.gain=this.context.createGain(),this.gain.connect(f.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(f){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=f,this.connect(),this}setMediaElementSource(f){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(f),this.connect(),this}setMediaStreamSource(f){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(f),this.connect(),this}setBuffer(f){return this.buffer=f,this.sourceType="buffer",this.autoplay&&this.play(),this}play(f=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+f;const r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let f=1,r=this.filters.length;f<r;f++)this.filters[f-1].connect(this.filters[f]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let f=1,r=this.filters.length;f<r;f++)this.filters[f-1].disconnect(this.filters[f]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(f){return f||(f=[]),!0===this._connected?(this.disconnect(),this.filters=f.slice(),this.connect()):this.filters=f.slice(),this}setDetune(f){if(this.detune=f,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(f){return this.setFilters(f?[f]:[])}setPlaybackRate(f){if(!1!==this.hasPlaybackControl)return this.playbackRate=f,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(f){if(!1!==this.hasPlaybackControl)return this.loop=f,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(f){return this.loopStart=f,this}setLoopEnd(f){return this.loopEnd=f,this}getVolume(){return this.gain.gain.value}setVolume(f){return this.gain.gain.setTargetAtTime(f,this.context.currentTime,.01),this}}.prototype.load=function(f){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const r=this;return(new JS).load(f,function(s){r.setBuffer(s)}),this},lf.prototype.updateCubeMap=function(f,r){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(f,r)},lf.prototype.clear=function(f,r,s,a){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(f,r,s,a)},O.crossOrigin=void 0,O.loadTexture=function(f,r,s,a){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const c=new $m;c.setCrossOrigin(this.crossOrigin);const h=c.load(f,s,void 0,a);return r&&(h.mapping=r),h},O.loadTextureCube=function(f,r,s,a){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const c=new XS;c.setCrossOrigin(this.crossOrigin);const h=c.load(f,s,void 0,a);return r&&(h.mapping=r),h},O.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},O.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139");const yw=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tg=Symbol(),_w=new Map;class bw{constructor(r,s){if(this._$cssResult$=!0,s!==tg)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=r}get styleSheet(){let r=_w.get(this.cssText);return yw&&void 0===r&&(_w.set(this.cssText,r=new CSSStyleSheet),r.replaceSync(this.cssText)),r}toString(){return this.cssText}}const Hf=yw?f=>f:f=>f instanceof CSSStyleSheet?(r=>{let s="";for(const a of r.cssRules)s+=a.cssText;return new bw("string"==typeof(a=s)?a:a+"",tg);var a})(f):f;var zf;const Tu=window.trustedTypes,rC=Tu?Tu.emptyScript:"",ww=window.reactiveElementPolyfillSupport,xw={toAttribute(f,r){switch(r){case Boolean:f=f?rC:null;break;case Object:case Array:f=null==f?f:JSON.stringify(f)}return f},fromAttribute(f,r){let s=f;switch(r){case Boolean:s=null!==f;break;case Number:s=null===f?null:Number(f);break;case Object:case Array:try{s=JSON.parse(f)}catch{s=null}}return s}},jf=(f,r)=>r!==f&&(r==r||f==f),Gf={attribute:!0,type:String,converter:xw,reflect:!1,hasChanged:jf};class gc extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(r){var s;null!==(s=this.l)&&void 0!==s||(this.l=[]),this.l.push(r)}static get observedAttributes(){this.finalize();const r=[];return this.elementProperties.forEach((s,a)=>{const c=this._$Eh(a,s);void 0!==c&&(this._$Eu.set(c,a),r.push(c))}),r}static createProperty(r,s=Gf){if(s.state&&(s.attribute=!1),this.finalize(),this.elementProperties.set(r,s),!s.noAccessor&&!this.prototype.hasOwnProperty(r)){const a="symbol"==typeof r?Symbol():"__"+r,c=this.getPropertyDescriptor(r,a,s);void 0!==c&&Object.defineProperty(this.prototype,r,c)}}static getPropertyDescriptor(r,s,a){return{get(){return this[s]},set(c){const h=this[r];this[s]=c,this.requestUpdate(r,h,a)},configurable:!0,enumerable:!0}}static getPropertyOptions(r){return this.elementProperties.get(r)||Gf}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const r=Object.getPrototypeOf(this);if(r.finalize(),this.elementProperties=new Map(r.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const s=this.properties,a=[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)];for(const c of a)this.createProperty(c,s[c])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(r){const s=[];if(Array.isArray(r)){const a=new Set(r.flat(1/0).reverse());for(const c of a)s.unshift(Hf(c))}else void 0!==r&&s.push(Hf(r));return s}static _$Eh(r,s){const a=s.attribute;return!1===a?void 0:"string"==typeof a?a:"string"==typeof r?r.toLowerCase():void 0}o(){var r;this._$Ep=new Promise(s=>this.enableUpdating=s),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(r=this.constructor.l)||void 0===r||r.forEach(s=>s(this))}addController(r){var s,a;(null!==(s=this._$Eg)&&void 0!==s?s:this._$Eg=[]).push(r),void 0!==this.renderRoot&&this.isConnected&&(null===(a=r.hostConnected)||void 0===a||a.call(r))}removeController(r){var s;null===(s=this._$Eg)||void 0===s||s.splice(this._$Eg.indexOf(r)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((r,s)=>{this.hasOwnProperty(s)&&(this._$Et.set(s,this[s]),delete this[s])})}createRenderRoot(){var r;const s=null!==(r=this.shadowRoot)&&void 0!==r?r:this.attachShadow(this.constructor.shadowRootOptions);return a=s,c=this.constructor.elementStyles,yw?a.adoptedStyleSheets=c.map(h=>h instanceof CSSStyleSheet?h:h.styleSheet):c.forEach(h=>{const d=document.createElement("style"),m=window.litNonce;void 0!==m&&d.setAttribute("nonce",m),d.textContent=h.cssText,a.appendChild(d)}),s;var a,c}connectedCallback(){var r;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(r=this._$Eg)||void 0===r||r.forEach(s=>{var a;return null===(a=s.hostConnected)||void 0===a?void 0:a.call(s)})}enableUpdating(r){}disconnectedCallback(){var r;null===(r=this._$Eg)||void 0===r||r.forEach(s=>{var a;return null===(a=s.hostDisconnected)||void 0===a?void 0:a.call(s)})}attributeChangedCallback(r,s,a){this._$AK(r,a)}_$ES(r,s,a=Gf){var c,h;const d=this.constructor._$Eh(r,a);if(void 0!==d&&!0===a.reflect){const m=(null!==(h=null===(c=a.converter)||void 0===c?void 0:c.toAttribute)&&void 0!==h?h:xw.toAttribute)(s,a.type);this._$Ei=r,null==m?this.removeAttribute(d):this.setAttribute(d,m),this._$Ei=null}}_$AK(r,s){var a,c,h;const d=this.constructor,m=d._$Eu.get(r);if(void 0!==m&&this._$Ei!==m){const g=d.getPropertyOptions(m),y=g.converter,b=null!==(h=null!==(c=null===(a=y)||void 0===a?void 0:a.fromAttribute)&&void 0!==c?c:"function"==typeof y?y:null)&&void 0!==h?h:xw.fromAttribute;this._$Ei=m,this[m]=b(s,g.type),this._$Ei=null}}requestUpdate(r,s,a){let c=!0;void 0!==r&&(((a=a||this.constructor.getPropertyOptions(r)).hasChanged||jf)(this[r],s)?(this._$AL.has(r)||this._$AL.set(r,s),!0===a.reflect&&this._$Ei!==r&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(r,a))):c=!1),!this.isUpdatePending&&c&&(this._$Ep=this._$E_())}_$E_(){var r=this;return(0,Y.Z)(function*(){r.isUpdatePending=!0;try{yield r._$Ep}catch(a){Promise.reject(a)}const s=r.scheduleUpdate();return null!=s&&(yield s),!r.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;this._$Et&&(this._$Et.forEach((c,h)=>this[h]=c),this._$Et=void 0);let s=!1;const a=this._$AL;try{s=this.shouldUpdate(a),s?(this.willUpdate(a),null===(r=this._$Eg)||void 0===r||r.forEach(c=>{var h;return null===(h=c.hostUpdate)||void 0===h?void 0:h.call(c)}),this.update(a)):this._$EU()}catch(c){throw s=!1,this._$EU(),c}s&&this._$AE(a)}willUpdate(r){}_$AE(r){var s;null===(s=this._$Eg)||void 0===s||s.forEach(a=>{var c;return null===(c=a.hostUpdated)||void 0===c?void 0:c.call(a)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(r)),this.updated(r)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(r){return!0}update(r){void 0!==this._$EC&&(this._$EC.forEach((s,a)=>this._$ES(a,this[a],s)),this._$EC=void 0),this._$EU()}updated(r){}firstUpdated(r){}}var ng;gc.finalized=!0,gc.elementProperties=new Map,gc.elementStyles=[],gc.shadowRootOptions={mode:"open"},ww?.({ReactiveElement:gc}),(null!==(zf=globalThis.reactiveElementVersions)&&void 0!==zf?zf:globalThis.reactiveElementVersions=[]).push("1.3.2");const Du=globalThis.trustedTypes,vc=Du?Du.createPolicy("lit-html",{createHTML:f=>f}):void 0,yc=`lit$${(Math.random()+"").slice(9)}$`,Mw="?"+yc,iC=`<${Mw}>`,Jh=document,Wf=(f="")=>Jh.createComment(f),ss=f=>null===f||"object"!=typeof f&&"function"!=typeof f,la=Array.isArray,qf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ew=/-->/g,Sw=/>/g,Ru=/>|[ \x09\n\x0c\r](?:([^\s"'>=/]+)([ \x09\n\x0c\r]*=[ \x09\n\x0c\r]*(?:[^ \x09\n\x0c\r"'`<>=]|("|')|))|$)/g,Cw=/'/g,Aw=/"/g,Tv=/^(?:script|style|textarea|title)$/i,rg=(r,...s)=>({_$litType$:1,strings:r,values:s}),Qh=Symbol.for("lit-noChange"),$i=Symbol.for("lit-nothing"),Tw=new WeakMap,sC=(f,r,s)=>{var a,c;const h=null!==(a=s?.renderBefore)&&void 0!==a?a:r;let d=h._$litPart$;if(void 0===d){const m=null!==(c=s?.renderBefore)&&void 0!==c?c:null;h._$litPart$=d=new nd(r.insertBefore(Wf(),m),m,void 0,s??{})}return d._$AI(f),d},ed=Jh.createTreeWalker(Jh,129,null,!1);class td{constructor({strings:r,_$litType$:s},a){let c;this.parts=[];let h=0,d=0;const m=r.length-1,g=this.parts,[y,b]=((f,r)=>{const s=f.length-1,a=[];let c,h=2===r?"<svg>":"",d=qf;for(let g=0;g<s;g++){const y=f[g];let b,w,x=-1,E=0;for(;E<y.length&&(d.lastIndex=E,w=d.exec(y),null!==w);)E=d.lastIndex,d===qf?"!--"===w[1]?d=Ew:void 0!==w[1]?d=Sw:void 0!==w[2]?(Tv.test(w[2])&&(c=RegExp("</"+w[2],"g")),d=Ru):void 0!==w[3]&&(d=Ru):d===Ru?">"===w[0]?(d=c??qf,x=-1):void 0===w[1]?x=-2:(x=d.lastIndex-w[2].length,b=w[1],d=void 0===w[3]?Ru:'"'===w[3]?Aw:Cw):d===Aw||d===Cw?d=Ru:d===Ew||d===Sw?d=qf:(d=Ru,c=void 0);const T=d===Ru&&f[g+1].startsWith("/>")?" ":"";h+=d===qf?y+iC:x>=0?(a.push(b),y.slice(0,x)+"$lit$"+y.slice(x)+yc+T):y+yc+(-2===x?(a.push(void 0),g):T)}const m=h+(f[s]||"<?>")+(2===r?"</svg>":"");if(!Array.isArray(f)||!f.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==vc?vc.createHTML(m):m,a]})(r,s);if(this.el=td.createElement(y,a),ed.currentNode=this.el.content,2===s){const w=this.el.content,x=w.firstChild;x.remove(),w.append(...x.childNodes)}for(;null!==(c=ed.nextNode())&&g.length<m;){if(1===c.nodeType){if(c.hasAttributes()){const w=[];for(const x of c.getAttributeNames())if(x.endsWith("$lit$")||x.startsWith(yc)){const E=b[d++];if(w.push(x),void 0!==E){const T=c.getAttribute(E.toLowerCase()+"$lit$").split(yc),I=/([.?@])?(.*)/.exec(E);g.push({type:1,index:h,name:I[2],strings:T,ctor:"."===I[1]?Dw:"?"===I[1]?cI:"@"===I[1]?uI:Kf})}else g.push({type:6,index:h})}for(const x of w)c.removeAttribute(x)}if(Tv.test(c.tagName)){const w=c.textContent.split(yc),x=w.length-1;if(x>0){c.textContent=Du?Du.emptyScript:"";for(let E=0;E<x;E++)c.append(w[E],Wf()),ed.nextNode(),g.push({type:2,index:++h});c.append(w[x],Wf())}}}else if(8===c.nodeType)if(c.data===Mw)g.push({type:2,index:h});else{let w=-1;for(;-1!==(w=c.data.indexOf(yc,w+1));)g.push({type:7,index:h}),w+=yc.length-1}h++}}static createElement(r,s){const a=Jh.createElement("template");return a.innerHTML=r,a}}function Ns(f,r,s=f,a){var c,h,d,m;if(r===Qh)return r;let g=void 0!==a?null===(c=s._$Cl)||void 0===c?void 0:c[a]:s._$Cu;const y=ss(r)?void 0:r._$litDirective$;return g?.constructor!==y&&(null===(h=g?._$AO)||void 0===h||h.call(g,!1),void 0===y?g=void 0:(g=new y(f),g._$AT(f,s,a)),void 0!==a?(null!==(d=(m=s)._$Cl)&&void 0!==d?d:m._$Cl=[])[a]=g:s._$Cu=g),void 0!==g&&(r=Ns(f,g._$AS(f,r.values),g,a)),r}class Xf{constructor(r,s){this.v=[],this._$AN=void 0,this._$AD=r,this._$AM=s}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(r){var s;const{el:{content:a},parts:c}=this._$AD,h=(null!==(s=r?.creationScope)&&void 0!==s?s:Jh).importNode(a,!0);ed.currentNode=h;let d=ed.nextNode(),m=0,g=0,y=c[0];for(;void 0!==y;){if(m===y.index){let b;2===y.type?b=new nd(d,d.nextSibling,this,r):1===y.type?b=new y.ctor(d,y.name,y.strings,this,r):6===y.type&&(b=new Dv(d,this,r)),this.v.push(b),y=c[++g]}m!==y?.index&&(d=ed.nextNode(),m++)}return h}m(r){let s=0;for(const a of this.v)void 0!==a&&(void 0!==a.strings?(a._$AI(r,a,s),s+=a.strings.length-2):a._$AI(r[s])),s++}}class nd{constructor(r,s,a,c){var h;this.type=2,this._$AH=$i,this._$AN=void 0,this._$AA=r,this._$AB=s,this._$AM=a,this.options=c,this._$Cg=null===(h=c?.isConnected)||void 0===h||h}get _$AU(){var r,s;return null!==(s=null===(r=this._$AM)||void 0===r?void 0:r._$AU)&&void 0!==s?s:this._$Cg}get parentNode(){let r=this._$AA.parentNode;const s=this._$AM;return void 0!==s&&11===r.nodeType&&(r=s.parentNode),r}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(r,s=this){var a,c;r=Ns(this,r,s),ss(r)?r===$i||null==r||""===r?(this._$AH!==$i&&this._$AR(),this._$AH=$i):r!==this._$AH&&r!==Qh&&this.$(r):void 0!==r._$litType$?this.T(r):void 0!==r.nodeType?this.k(r):la(a=r)||"function"==typeof(null===(c=a)||void 0===c?void 0:c[Symbol.iterator])?this.S(r):this.$(r)}M(r,s=this._$AB){return this._$AA.parentNode.insertBefore(r,s)}k(r){this._$AH!==r&&(this._$AR(),this._$AH=this.M(r))}$(r){this._$AH!==$i&&ss(this._$AH)?this._$AA.nextSibling.data=r:this.k(Jh.createTextNode(r)),this._$AH=r}T(r){var s;const{values:a,_$litType$:c}=r,h="number"==typeof c?this._$AC(r):(void 0===c.el&&(c.el=td.createElement(c.h,this.options)),c);if((null===(s=this._$AH)||void 0===s?void 0:s._$AD)===h)this._$AH.m(a);else{const d=new Xf(h,this),m=d.p(this.options);d.m(a),this.k(m),this._$AH=d}}_$AC(r){let s=Tw.get(r.strings);return void 0===s&&Tw.set(r.strings,s=new td(r)),s}S(r){la(this._$AH)||(this._$AH=[],this._$AR());const s=this._$AH;let a,c=0;for(const h of r)c===s.length?s.push(a=new nd(this.M(Wf()),this.M(Wf()),this,this.options)):a=s[c],a._$AI(h),c++;c<s.length&&(this._$AR(a&&a._$AB.nextSibling,c),s.length=c)}_$AR(r=this._$AA.nextSibling,s){var a;for(null===(a=this._$AP)||void 0===a||a.call(this,!1,!0,s);r&&r!==this._$AB;){const c=r.nextSibling;r.remove(),r=c}}setConnected(r){var s;void 0===this._$AM&&(this._$Cg=r,null===(s=this._$AP)||void 0===s||s.call(this,r))}}class Kf{constructor(r,s,a,c,h){this.type=1,this._$AH=$i,this._$AN=void 0,this.element=r,this.name=s,this._$AM=c,this.options=h,a.length>2||""!==a[0]||""!==a[1]?(this._$AH=Array(a.length-1).fill(new String),this.strings=a):this._$AH=$i}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(r,s=this,a,c){const h=this.strings;let d=!1;if(void 0===h)r=Ns(this,r,s,0),d=!ss(r)||r!==this._$AH&&r!==Qh,d&&(this._$AH=r);else{const m=r;let g,y;for(r=h[0],g=0;g<h.length-1;g++)y=Ns(this,m[a+g],s,g),y===Qh&&(y=this._$AH[g]),d||(d=!ss(y)||y!==this._$AH[g]),y===$i?r=$i:r!==$i&&(r+=(y??"")+h[g+1]),this._$AH[g]=y}d&&!c&&this.C(r)}C(r){r===$i?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,r??"")}}class Dw extends Kf{constructor(){super(...arguments),this.type=3}C(r){this.element[this.name]=r===$i?void 0:r}}const lI=Du?Du.emptyScript:"";class cI extends Kf{constructor(){super(...arguments),this.type=4}C(r){r&&r!==$i?this.element.setAttribute(this.name,lI):this.element.removeAttribute(this.name)}}class uI extends Kf{constructor(r,s,a,c,h){super(r,s,a,c,h),this.type=5}_$AI(r,s=this){var a;if((r=null!==(a=Ns(this,r,s,0))&&void 0!==a?a:$i)===Qh)return;const c=this._$AH,h=r===$i&&c!==$i||r.capture!==c.capture||r.once!==c.once||r.passive!==c.passive,d=r!==$i&&(c===$i||h);h&&this.element.removeEventListener(this.name,this,c),d&&this.element.addEventListener(this.name,this,r),this._$AH=r}handleEvent(r){var s,a;"function"==typeof this._$AH?this._$AH.call(null!==(a=null===(s=this.options)||void 0===s?void 0:s.host)&&void 0!==a?a:this.element,r):this._$AH.handleEvent(r)}}class Dv{constructor(r,s,a){this.element=r,this.type=6,this._$AN=void 0,this._$AM=s,this.options=a}get _$AU(){return this._$AM._$AU}_$AI(r){Ns(this,r)}}var Yf,Rw;(0,window.litHtmlPolyfillSupport)?.(td,nd),(null!==(ng=globalThis.litHtmlVersions)&&void 0!==ng?ng:globalThis.litHtmlVersions=[]).push("2.2.3");class Rv extends gc{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var r,s;const a=super.createRenderRoot();return null!==(r=(s=this.renderOptions).renderBefore)&&void 0!==r||(s.renderBefore=a.firstChild),a}update(r){const s=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(r),this._$Dt=sC(s,this.renderRoot,this.renderOptions)}connectedCallback(){var r;super.connectedCallback(),null===(r=this._$Dt)||void 0===r||r.setConnected(!0)}disconnectedCallback(){var r;super.disconnectedCallback(),null===(r=this._$Dt)||void 0===r||r.setConnected(!1)}render(){return Qh}}Rv.finalized=!0,Rv._$litElement$=!0,null===(Yf=globalThis.litElementHydrateSupport)||void 0===Yf||Yf.call(globalThis,{LitElement:Rv}),(0,globalThis.litElementPolyfillSupport)?.({LitElement:Rv}),(null!==(Rw=globalThis.litElementVersions)&&void 0!==Rw?Rw:globalThis.litElementVersions=[]).push("3.2.0");const Iw=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,Pw=Iw&&self.XRSession.prototype.requestHitTestSource,Pv=null!=self.ResizeObserver,kv=null!=self.IntersectionObserver,Nv=Pw;(()=>{const f=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(f)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(f.substr(0,4))})(),/\bCrOS\b/.test(navigator.userAgent);const sg=/android/i.test(navigator.userAgent),kw=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,og=(()=>{const f=document.createElement("a");return Boolean(f.relList&&f.relList.supports&&f.relList.supports("ar"))})();/Safari\//.test(navigator.userAgent);const oC=/firefox/i.test(navigator.userAgent),br=/OculusBrowser/.test(navigator.userAgent);kw&&/CriOS\//.test(navigator.userAgent);const aC=sg&&!oC&&!br,lC=rg`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This ruleset is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
}

.userInput {
  width: 100%;
  height: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

canvas.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  opacity: 0;
  transition: opacity 0.3s 0.3s;
  background-color: inherit;
}

.slot.poster.show {
  opacity: 1;
  transition: none;
}

.slot.poster.quick {
  transition: none;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: var(--poster-color, #fff);
  background-image: var(--poster-image, none);
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--progress-mask, #fff);
  transition: opacity 0.3s;
  opacity: 0.2;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 16px;
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${rg`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${rg`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="mask" part="default-progress-mask"></div>
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${rg`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,rd=new WeakMap;function Nw(){let f,r;function s(a,c,h,d,m,g){const y=g.num_components(),b=h.num_points()*y,w=b*m.BYTES_PER_ELEMENT,x=function(I,L){switch(L){case Float32Array:return I.DT_FLOAT32;case Int8Array:return I.DT_INT8;case Int16Array:return I.DT_INT16;case Int32Array:return I.DT_INT32;case Uint8Array:return I.DT_UINT8;case Uint16Array:return I.DT_UINT16;case Uint32Array:return I.DT_UINT32}}(a,m),E=a._malloc(w);c.GetAttributeDataArrayForAllPoints(h,g,x,w,E);const T=new m(a.HEAPF32.buffer,E,b).slice();return a._free(E),{name:d,array:T,itemSize:y}}onmessage=function(a){const c=a.data;switch(c.type){case"init":f=c.decoderConfig,r=new Promise(function(m){f.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(f)});break;case"decode":const h=c.buffer,d=c.taskConfig;r.then(m=>{const g=m.draco,y=new g.Decoder,b=new g.DecoderBuffer;b.Init(new Int8Array(h),h.byteLength);try{const w=function(E,T,I,L){const R=L.attributeIDs,$=L.attributeTypes;let B,G;const z=T.GetEncodedGeometryType(I);if(z===E.TRIANGULAR_MESH)B=new E.Mesh,G=T.DecodeBufferToMesh(I,B);else{if(z!==E.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");B=new E.PointCloud,G=T.DecodeBufferToPointCloud(I,B)}if(!G.ok()||0===B.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+G.error_msg());const J={index:null,attributes:[]};for(const te in R){const le=self[$[te]];let oe,de;if(L.useUniqueIDs)de=R[te],oe=T.GetAttributeByUniqueId(B,de);else{if(de=T.GetAttributeId(B,E[R[te]]),-1===de)continue;oe=T.GetAttribute(B,de)}J.attributes.push(s(E,T,B,te,le,oe))}return z===E.TRIANGULAR_MESH&&(J.index=function(te,le,oe){const de=3*oe.num_faces(),we=4*de,ke=te._malloc(we);le.GetTrianglesUInt32Array(oe,we,ke);const je=new Uint32Array(te.HEAPF32.buffer,ke,de).slice();return te._free(ke),{array:je,itemSize:1}}(E,T,B)),E.destroy(B),J}(g,y,b,d),x=w.attributes.map(E=>E.array.buffer);w.index&&x.push(w.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:w},x)}catch(w){console.error(w),self.postMessage({type:"error",id:c.id,error:w.message})}finally{g.destroy(b),g.destroy(y)}})}}}class cC extends oa{constructor(r){super(r),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(s){return new hI(s)}),this.register(function(s){return new Fw(s)}),this.register(function(s){return new fC(s)}),this.register(function(s){return new dI(s)}),this.register(function(s){return new Zf(s)}),this.register(function(s){return new Lv(s)}),this.register(function(s){return new Lw(s)}),this.register(function(s){return new Ow(s)}),this.register(function(s){return new hC(s)}),this.register(function(s){return new Bw(s)})}load(r,s,a,c){const h=this;let d;d=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Hi.extractUrlBase(r),this.manager.itemStart(r);const m=function(y){c?c(y):console.error(y),h.manager.itemError(r),h.manager.itemEnd(r)},g=new Al(this.manager);g.setPath(this.path),g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setWithCredentials(this.withCredentials),g.load(r,function(y){try{h.parse(y,d,function(b){s(b),h.manager.itemEnd(r)},m)}catch(b){m(b)}},a,m)}setDRACOLoader(r){return this.dracoLoader=r,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(r){return this.ktx2Loader=r,this}setMeshoptDecoder(r){return this.meshoptDecoder=r,this}register(r){return-1===this.pluginCallbacks.indexOf(r)&&this.pluginCallbacks.push(r),this}unregister(r){return-1!==this.pluginCallbacks.indexOf(r)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(r),1),this}parse(r,s,a,c){let h;const d={},m={};if("string"==typeof r)h=r;else if(Hi.decodeText(new Uint8Array(r,0,4))===Ov){try{d[nr.KHR_BINARY_GLTF]=new pC(r)}catch(b){return void(c&&c(b))}h=d[nr.KHR_BINARY_GLTF].content}else h=Hi.decodeText(new Uint8Array(r));const g=JSON.parse(h);if(void 0===g.asset||g.asset.version[0]<2)return void(c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const y=new bC(g,{path:s||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});y.fileLoader.setRequestHeader(this.requestHeader);for(let b=0;b<this.pluginCallbacks.length;b++){const w=this.pluginCallbacks[b](y);m[w.name]=w,d[w.name]=!0}if(g.extensionsUsed)for(let b=0;b<g.extensionsUsed.length;++b){const w=g.extensionsUsed[b],x=g.extensionsRequired||[];switch(w){case nr.KHR_MATERIALS_UNLIT:d[w]=new dC;break;case nr.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[w]=new Iu;break;case nr.KHR_DRACO_MESH_COMPRESSION:d[w]=new Bv(g,this.dracoLoader);break;case nr.KHR_TEXTURE_TRANSFORM:d[w]=new Vw;break;case nr.KHR_MESH_QUANTIZATION:d[w]=new mC;break;default:x.indexOf(w)>=0&&void 0===m[w]&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}y.setExtensions(d),y.setPlugins(m),y.parse(a,c)}parseAsync(r,s){const a=this;return new Promise(function(c,h){a.parse(r,s,c,h)})}}function uC(){let f={};return{get:function(r){return f[r]},add:function(r,s){f[r]=s},remove:function(r){delete f[r]},removeAll:function(){f={}}}}const nr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class hC{constructor(r){this.parser=r,this.name=nr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const r=this.parser,s=this.parser.json.nodes||[];for(let a=0,c=s.length;a<c;a++){const h=s[a];h.extensions&&h.extensions[this.name]&&void 0!==h.extensions[this.name].light&&r._addNodeRef(this.cache,h.extensions[this.name].light)}}_loadLight(r){const s=this.parser,a="light:"+r;let c=s.cache.get(a);if(c)return c;const h=s.json,d=((h.extensions&&h.extensions[this.name]||{}).lights||[])[r];let m;const g=new D(16777215);void 0!==d.color&&g.fromArray(d.color);const y=void 0!==d.range?d.range:0;switch(d.type){case"directional":m=new Ev(g),m.target.position.set(0,0,-1),m.add(m.target);break;case"point":m=new mc(g),m.distance=y;break;case"spot":m=new Nf(g),m.distance=y,d.spot=d.spot||{},d.spot.innerConeAngle=void 0!==d.spot.innerConeAngle?d.spot.innerConeAngle:0,d.spot.outerConeAngle=void 0!==d.spot.outerConeAngle?d.spot.outerConeAngle:Math.PI/4,m.angle=d.spot.outerConeAngle,m.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,m.target.position.set(0,0,-1),m.add(m.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return m.position.set(0,0,0),m.decay=2,void 0!==d.intensity&&(m.intensity=d.intensity),m.name=s.createUniqueName(d.name||"light_"+r),c=Promise.resolve(m),s.cache.add(a,c),c}createNodeAttachment(r){const s=this,a=this.parser,c=a.json.nodes[r],h=(c.extensions&&c.extensions[this.name]||{}).light;return void 0===h?null:this._loadLight(h).then(function(d){return a._getNodeRef(s.cache,h,d)})}}class dC{constructor(){this.name=nr.KHR_MATERIALS_UNLIT}getMaterialType(){return Bi}extendParams(r,s,a){const c=[];r.color=new D(1,1,1),r.opacity=1;const h=s.pbrMetallicRoughness;if(h){if(Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;r.color.fromArray(d),r.opacity=d[3]}void 0!==h.baseColorTexture&&c.push(a.assignTexture(r,"map",h.baseColorTexture,3001))}return Promise.all(c)}}class hI{constructor(r){this.parser=r,this.name=nr.KHR_MATERIALS_CLEARCOAT}getMaterialType(r){const s=this.parser.json.materials[r];return s.extensions&&s.extensions[this.name]?bu:null}extendMaterialParams(r,s){const a=this.parser,c=a.json.materials[r];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],d=c.extensions[this.name];if(void 0!==d.clearcoatFactor&&(s.clearcoat=d.clearcoatFactor),void 0!==d.clearcoatTexture&&h.push(a.assignTexture(s,"clearcoatMap",d.clearcoatTexture)),void 0!==d.clearcoatRoughnessFactor&&(s.clearcoatRoughness=d.clearcoatRoughnessFactor),void 0!==d.clearcoatRoughnessTexture&&h.push(a.assignTexture(s,"clearcoatRoughnessMap",d.clearcoatRoughnessTexture)),void 0!==d.clearcoatNormalTexture&&(h.push(a.assignTexture(s,"clearcoatNormalMap",d.clearcoatNormalTexture)),void 0!==d.clearcoatNormalTexture.scale)){const m=d.clearcoatNormalTexture.scale;s.clearcoatNormalScale=new Me(m,m)}return Promise.all(h)}}class dI{constructor(r){this.parser=r,this.name=nr.KHR_MATERIALS_SHEEN}getMaterialType(r){const s=this.parser.json.materials[r];return s.extensions&&s.extensions[this.name]?bu:null}extendMaterialParams(r,s){const a=this.parser,c=a.json.materials[r];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[];s.sheenColor=new D(0,0,0),s.sheenRoughness=0,s.sheen=1;const d=c.extensions[this.name];return void 0!==d.sheenColorFactor&&s.sheenColor.fromArray(d.sheenColorFactor),void 0!==d.sheenRoughnessFactor&&(s.sheenRoughness=d.sheenRoughnessFactor),void 0!==d.sheenColorTexture&&h.push(a.assignTexture(s,"sheenColorMap",d.sheenColorTexture,3001)),void 0!==d.sheenRoughnessTexture&&h.push(a.assignTexture(s,"sheenRoughnessMap",d.sheenRoughnessTexture)),Promise.all(h)}}class Zf{constructor(r){this.parser=r,this.name=nr.KHR_MATERIALS_TRANSMISSION}getMaterialType(r){const s=this.parser.json.materials[r];return s.extensions&&s.extensions[this.name]?bu:null}extendMaterialParams(r,s){const a=this.parser,c=a.json.materials[r];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],d=c.extensions[this.name];return void 0!==d.transmissionFactor&&(s.transmission=d.transmissionFactor),void 0!==d.transmissionTexture&&h.push(a.assignTexture(s,"transmissionMap",d.transmissionTexture)),Promise.all(h)}}class Lv{constructor(r){this.parser=r,this.name=nr.KHR_MATERIALS_VOLUME}getMaterialType(r){const s=this.parser.json.materials[r];return s.extensions&&s.extensions[this.name]?bu:null}extendMaterialParams(r,s){const a=this.parser,c=a.json.materials[r];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],d=c.extensions[this.name];s.thickness=void 0!==d.thicknessFactor?d.thicknessFactor:0,void 0!==d.thicknessTexture&&h.push(a.assignTexture(s,"thicknessMap",d.thicknessTexture)),s.attenuationDistance=d.attenuationDistance||0;const m=d.attenuationColor||[1,1,1];return s.attenuationColor=new D(m[0],m[1],m[2]),Promise.all(h)}}class Lw{constructor(r){this.parser=r,this.name=nr.KHR_MATERIALS_IOR}getMaterialType(r){const s=this.parser.json.materials[r];return s.extensions&&s.extensions[this.name]?bu:null}extendMaterialParams(r,s){const a=this.parser.json.materials[r];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const c=a.extensions[this.name];return s.ior=void 0!==c.ior?c.ior:1.5,Promise.resolve()}}class Ow{constructor(r){this.parser=r,this.name=nr.KHR_MATERIALS_SPECULAR}getMaterialType(r){const s=this.parser.json.materials[r];return s.extensions&&s.extensions[this.name]?bu:null}extendMaterialParams(r,s){const a=this.parser,c=a.json.materials[r];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const h=[],d=c.extensions[this.name];s.specularIntensity=void 0!==d.specularFactor?d.specularFactor:1,void 0!==d.specularTexture&&h.push(a.assignTexture(s,"specularIntensityMap",d.specularTexture));const m=d.specularColorFactor||[1,1,1];return s.specularColor=new D(m[0],m[1],m[2]),void 0!==d.specularColorTexture&&h.push(a.assignTexture(s,"specularColorMap",d.specularColorTexture,3001)),Promise.all(h)}}class Fw{constructor(r){this.parser=r,this.name=nr.KHR_TEXTURE_BASISU}loadTexture(r){const s=this.parser,a=s.json,c=a.textures[r];if(!c.extensions||!c.extensions[this.name])return null;const h=c.extensions[this.name],d=s.options.ktx2Loader;if(!d){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return s.loadTextureImage(r,h.source,d)}}class fC{constructor(r){this.parser=r,this.name=nr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(r){const s=this.name,a=this.parser,c=a.json,h=c.textures[r];if(!h.extensions||!h.extensions[s])return null;const d=h.extensions[s],m=c.images[d.source];let g=a.textureLoader;if(m.uri){const y=a.options.manager.getHandler(m.uri);null!==y&&(g=y)}return this.detectSupport().then(function(y){if(y)return a.loadTextureImage(r,d.source,g);if(c.extensionsRequired&&c.extensionsRequired.indexOf(s)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return a.loadTexture(r)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(r){const s=new Image;s.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",s.onload=s.onerror=function(){r(1===s.height)}})),this.isSupported}}class Bw{constructor(r){this.name=nr.EXT_MESHOPT_COMPRESSION,this.parser=r}loadBufferView(r){const s=this.parser.json,a=s.bufferViews[r];if(a.extensions&&a.extensions[this.name]){const c=a.extensions[this.name],h=this.parser.getDependency("buffer",c.buffer),d=this.parser.options.meshoptDecoder;if(!d||!d.supported){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([h,d.ready]).then(function(m){const g=c.byteOffset||0,y=c.byteLength||0,b=c.count,w=c.byteStride,x=new ArrayBuffer(b*w),E=new Uint8Array(m[0],g,y);return d.decodeGltfBuffer(new Uint8Array(x),b,w,E,c.mode,c.filter),x})}return null}}const Ov="glTF";class pC{constructor(r){this.name=nr.KHR_BINARY_GLTF,this.content=null,this.body=null;const s=new DataView(r,0,12);if(this.header={magic:Hi.decodeText(new Uint8Array(r.slice(0,4))),version:s.getUint32(4,!0),length:s.getUint32(8,!0)},this.header.magic!==Ov)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const a=this.header.length-12,c=new DataView(r,12);let h=0;for(;h<a;){const d=c.getUint32(h,!0);h+=4;const m=c.getUint32(h,!0);if(h+=4,1313821514===m){const g=new Uint8Array(r,12+h,d);this.content=Hi.decodeText(g)}else if(5130562===m){const g=12+h;this.body=r.slice(g,g+d)}h+=d}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Bv{constructor(r,s){if(!s)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=nr.KHR_DRACO_MESH_COMPRESSION,this.json=r,this.dracoLoader=s,this.dracoLoader.preload()}decodePrimitive(r,s){const a=this.json,c=this.dracoLoader,h=r.extensions[this.name].bufferView,d=r.extensions[this.name].attributes,m={},g={},y={};for(const b in d){const w=Hv[b]||b.toLowerCase();m[w]=d[b]}for(const b in r.attributes){const w=Hv[b]||b.toLowerCase();if(void 0!==d[b]){const x=a.accessors[r.attributes[b]];y[w]=id[x.componentType],g[w]=!0===x.normalized}}return s.getDependency("bufferView",h).then(function(b){return new Promise(function(w){c.decodeDracoFile(b,function(x){for(const E in x.attributes){const T=x.attributes[E],I=g[E];void 0!==I&&(T.normalized=I)}w(x)},m,y)})})}}class Vw{constructor(){this.name=nr.KHR_TEXTURE_TRANSFORM}extendTexture(r,s){return void 0!==s.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===s.offset&&void 0===s.rotation&&void 0===s.scale||(r=r.clone(),void 0!==s.offset&&r.offset.fromArray(s.offset),void 0!==s.rotation&&(r.rotation=s.rotation),void 0!==s.scale&&r.repeat.fromArray(s.scale),r.needsUpdate=!0),r}}class ag extends El{constructor(r){super(),this.isGLTFSpecularGlossinessMaterial=!0;const s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),h=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),d=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),m={specular:{value:(new D).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=m,this.onBeforeCompile=function(g){for(const y in m)g.uniforms[y]=m[y];g.fragmentShader=g.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",h).replace("#include <lights_physical_fragment>",d)},Object.defineProperties(this,{specular:{get:function(){return m.specular.value},set:function(g){m.specular.value=g}},specularMap:{get:function(){return m.specularMap.value},set:function(g){m.specularMap.value=g,g?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return m.glossiness.value},set:function(g){m.glossiness.value=g}},glossinessMap:{get:function(){return m.glossinessMap.value},set:function(g){m.glossinessMap.value=g,g?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(r)}copy(r){return super.copy(r),this.specularMap=r.specularMap,this.specular.copy(r.specular),this.glossinessMap=r.glossinessMap,this.glossiness=r.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Iu{constructor(){this.name=nr.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return ag}extendParams(r,s,a){const c=s.extensions[this.name];r.color=new D(1,1,1),r.opacity=1;const h=[];if(Array.isArray(c.diffuseFactor)){const d=c.diffuseFactor;r.color.fromArray(d),r.opacity=d[3]}if(void 0!==c.diffuseTexture&&h.push(a.assignTexture(r,"map",c.diffuseTexture,3001)),r.emissive=new D(0,0,0),r.glossiness=void 0!==c.glossinessFactor?c.glossinessFactor:1,r.specular=new D(1,1,1),Array.isArray(c.specularFactor)&&r.specular.fromArray(c.specularFactor),void 0!==c.specularGlossinessTexture){const d=c.specularGlossinessTexture;h.push(a.assignTexture(r,"glossinessMap",d)),h.push(a.assignTexture(r,"specularMap",d,3001))}return Promise.all(h)}createMaterial(r){const s=new ag(r);return s.fog=!0,s.color=r.color,s.map=void 0===r.map?null:r.map,s.lightMap=null,s.lightMapIntensity=1,s.aoMap=void 0===r.aoMap?null:r.aoMap,s.aoMapIntensity=1,s.emissive=r.emissive,s.emissiveIntensity=1,s.emissiveMap=void 0===r.emissiveMap?null:r.emissiveMap,s.bumpMap=void 0===r.bumpMap?null:r.bumpMap,s.bumpScale=1,s.normalMap=void 0===r.normalMap?null:r.normalMap,s.normalMapType=0,r.normalScale&&(s.normalScale=r.normalScale),s.displacementMap=null,s.displacementScale=1,s.displacementBias=0,s.specularMap=void 0===r.specularMap?null:r.specularMap,s.specular=r.specular,s.glossinessMap=void 0===r.glossinessMap?null:r.glossinessMap,s.glossiness=r.glossiness,s.alphaMap=null,s.envMap=void 0===r.envMap?null:r.envMap,s.envMapIntensity=1,s}}class mC{constructor(){this.name=nr.KHR_MESH_QUANTIZATION}}class Tl extends fc{constructor(r,s,a,c){super(r,s,a,c)}copySampleValue_(r){const s=this.resultBuffer,a=this.sampleValues,c=this.valueSize,h=r*c*3+c;for(let d=0;d!==c;d++)s[d]=a[h+d];return s}}Tl.prototype.beforeStart_=Tl.prototype.copySampleValue_,Tl.prototype.afterEnd_=Tl.prototype.copySampleValue_,Tl.prototype.interpolate_=function(f,r,s,a){const c=this.resultBuffer,h=this.sampleValues,d=this.valueSize,m=2*d,g=3*d,y=a-r,b=(s-r)/y,w=b*b,x=w*b,E=f*g,T=E-g,I=-2*x+3*w,L=x-w,R=1-I,$=L-w+b;for(let B=0;B!==d;B++)c[B]=R*h[T+B+d]+$*(h[T+B+m]*y)+I*h[E+B+d]+L*(h[E+B]*y);return c};const lg=new V;class gC extends Tl{interpolate_(r,s,a,c){const h=super.interpolate_(r,s,a,c);return lg.fromArray(h).normalize().toArray(h),h}}const id={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Pu={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},jw={33071:1001,33648:1002,10497:1e3},Gw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Hv={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},sd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zv={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300};function ug(f,r,s){for(const a in s.extensions)void 0===f[a]&&(r.userData.gltfExtensions=r.userData.gltfExtensions||{},r.userData.gltfExtensions[a]=s.extensions[a])}function ku(f,r){void 0!==r.extras&&("object"==typeof r.extras?Object.assign(f.userData,r.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+r.extras))}function Nu(f,r){if(f.updateMorphTargets(),void 0!==r.weights)for(let s=0,a=r.weights.length;s<a;s++)f.morphTargetInfluences[s]=r.weights[s];if(r.extras&&Array.isArray(r.extras.targetNames)){const s=r.extras.targetNames;if(f.morphTargetInfluences.length===s.length){f.morphTargetDictionary={};for(let a=0,c=s.length;a<c;a++)f.morphTargetDictionary[s[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _C(f){const r=f.extensions&&f.extensions[nr.KHR_DRACO_MESH_COMPRESSION];let s;return s=r?"draco:"+r.bufferView+":"+r.indices+":"+Lu(r.attributes):f.indices+":"+Lu(f.attributes)+":"+f.mode,s}function Lu(f){let r="";const s=Object.keys(f).sort();for(let a=0,c=s.length;a<c;a++)r+=s[a]+":"+f[s[a]]+";";return r}function si(f){switch(f){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class bC{constructor(r={},s={}){this.json=r,this.extensions={},this.plugins={},this.options=s,this.cache=new uC,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},this.textureLoader=typeof createImageBitmap<"u"&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new Ym(this.options.manager):new $m(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Al(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(r){this.extensions=r}setPlugins(r){this.plugins=r}parse(r,s){const a=this,c=this.json,h=this.extensions;this.cache.removeAll(),this._invokeAll(function(d){return d._markDefs&&d._markDefs()}),Promise.all(this._invokeAll(function(d){return d.beforeRoot&&d.beforeRoot()})).then(function(){return Promise.all([a.getDependencies("scene"),a.getDependencies("animation"),a.getDependencies("camera")])}).then(function(d){const m={scene:d[0][c.scene||0],scenes:d[0],animations:d[1],cameras:d[2],asset:c.asset,parser:a,userData:{}};ug(h,m,c),ku(m,c),Promise.all(a._invokeAll(function(g){return g.afterRoot&&g.afterRoot(m)})).then(function(){r(m)})}).catch(s)}_markDefs(){const r=this.json.nodes||[],s=this.json.skins||[],a=this.json.meshes||[];for(let c=0,h=s.length;c<h;c++){const d=s[c].joints;for(let m=0,g=d.length;m<g;m++)r[d[m]].isBone=!0}for(let c=0,h=r.length;c<h;c++){const d=r[c];void 0!==d.mesh&&(this._addNodeRef(this.meshCache,d.mesh),void 0!==d.skin&&(a[d.mesh].isSkinnedMesh=!0)),void 0!==d.camera&&this._addNodeRef(this.cameraCache,d.camera)}}_addNodeRef(r,s){void 0!==s&&(void 0===r.refs[s]&&(r.refs[s]=r.uses[s]=0),r.refs[s]++)}_getNodeRef(r,s,a){if(r.refs[s]<=1)return a;const c=a.clone(),h=(d,m)=>{const g=this.associations.get(d);null!=g&&this.associations.set(m,g);for(const[y,b]of d.children.entries())h(b,m.children[y])};return h(a,c),c.name+="_instance_"+r.uses[s]++,c}_invokeOne(r){const s=Object.values(this.plugins);s.push(this);for(let a=0;a<s.length;a++){const c=r(s[a]);if(c)return c}return null}_invokeAll(r){const s=Object.values(this.plugins);s.unshift(this);const a=[];for(let c=0;c<s.length;c++){const h=r(s[c]);h&&a.push(h)}return a}getDependency(r,s){const a=r+":"+s;let c=this.cache.get(a);if(!c){switch(r){case"scene":c=this.loadScene(s);break;case"node":c=this.loadNode(s);break;case"mesh":c=this._invokeOne(function(h){return h.loadMesh&&h.loadMesh(s)});break;case"accessor":c=this.loadAccessor(s);break;case"bufferView":c=this._invokeOne(function(h){return h.loadBufferView&&h.loadBufferView(s)});break;case"buffer":c=this.loadBuffer(s);break;case"material":c=this._invokeOne(function(h){return h.loadMaterial&&h.loadMaterial(s)});break;case"texture":c=this._invokeOne(function(h){return h.loadTexture&&h.loadTexture(s)});break;case"skin":c=this.loadSkin(s);break;case"animation":c=this.loadAnimation(s);break;case"camera":c=this.loadCamera(s);break;default:throw new Error("Unknown type: "+r)}this.cache.add(a,c)}return c}getDependencies(r){let s=this.cache.get(r);if(!s){const a=this;s=Promise.all((this.json[r+("mesh"===r?"es":"s")]||[]).map(function(h,d){return a.getDependency(r,d)})),this.cache.add(r,s)}return s}loadBuffer(r){const s=this.json.buffers[r],a=this.fileLoader;if(s.type&&"arraybuffer"!==s.type)throw new Error("THREE.GLTFLoader: "+s.type+" buffer type is not supported.");if(void 0===s.uri&&0===r)return Promise.resolve(this.extensions[nr.KHR_BINARY_GLTF].body);const c=this.options;return new Promise(function(h,d){a.load(Hi.resolveURL(s.uri,c.path),h,void 0,function(){d(new Error('THREE.GLTFLoader: Failed to load buffer "'+s.uri+'".'))})})}loadBufferView(r){const s=this.json.bufferViews[r];return this.getDependency("buffer",s.buffer).then(function(a){const h=s.byteOffset||0;return a.slice(h,h+(s.byteLength||0))})}loadAccessor(r){const s=this,a=this.json,c=this.json.accessors[r];if(void 0===c.bufferView&&void 0===c.sparse)return Promise.resolve(null);const h=[];return h.push(void 0!==c.bufferView?this.getDependency("bufferView",c.bufferView):null),void 0!==c.sparse&&(h.push(this.getDependency("bufferView",c.sparse.indices.bufferView)),h.push(this.getDependency("bufferView",c.sparse.values.bufferView))),Promise.all(h).then(function(d){const m=d[0],g=Gw[c.type],y=id[c.componentType],b=y.BYTES_PER_ELEMENT,x=c.byteOffset||0,E=void 0!==c.bufferView?a.bufferViews[c.bufferView].byteStride:void 0,T=!0===c.normalized;let I,L;if(E&&E!==b*g){const R=Math.floor(x/E),$="InterleavedBuffer:"+c.bufferView+":"+c.componentType+":"+R+":"+c.count;let B=s.cache.get($);B||(I=new y(m,R*E,c.count*E/b),B=new La(I,E/b),s.cache.add($,B)),L=new dc(B,g,x%E/b,T)}else I=null===m?new y(c.count*g):new y(m,x,c.count*g),L=new jt(I,g,T);if(void 0!==c.sparse){const G=c.sparse.values.byteOffset||0,z=new(0,id[c.sparse.indices.componentType])(d[1],c.sparse.indices.byteOffset||0,c.sparse.count*Gw.SCALAR),J=new y(d[2],G,c.sparse.count*g);null!==m&&(L=new jt(L.array.slice(),L.itemSize,L.normalized));for(let te=0,le=z.length;te<le;te++){const oe=z[te];if(L.setX(oe,J[te*g]),g>=2&&L.setY(oe,J[te*g+1]),g>=3&&L.setZ(oe,J[te*g+2]),g>=4&&L.setW(oe,J[te*g+3]),g>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return L})}loadTexture(r){const s=this.json,c=s.textures[r].source,h=s.images[c];let d=this.textureLoader;if(h.uri){const m=this.options.manager.getHandler(h.uri);null!==m&&(d=m)}return this.loadTextureImage(r,c,d)}loadTextureImage(r,s,a){const c=this,h=this.json,d=h.textures[r],m=h.images[s],g=(m.uri||m.bufferView)+":"+d.sampler;if(this.textureCache[g])return this.textureCache[g];const y=this.loadImageSource(s,a).then(function(b){b.flipY=!1,d.name&&(b.name=d.name);const w=(h.samplers||{})[d.sampler]||{};return b.magFilter=Pu[w.magFilter]||1006,b.minFilter=Pu[w.minFilter]||1008,b.wrapS=jw[w.wrapS]||1e3,b.wrapT=jw[w.wrapT]||1e3,c.associations.set(b,{textures:r}),b}).catch(function(){return null});return this.textureCache[g]=y,y}loadImageSource(r,s){const c=this.json,h=this.options;if(void 0!==this.sourceCache[r])return this.sourceCache[r].then(w=>w.clone());const d=c.images[r],m=self.URL||self.webkitURL;let g=d.uri||"",y=!1;if(void 0!==d.bufferView)g=this.getDependency("bufferView",d.bufferView).then(function(w){y=!0;const x=new Blob([w],{type:d.mimeType});return g=m.createObjectURL(x),g});else if(void 0===d.uri)throw new Error("THREE.GLTFLoader: Image "+r+" is missing URI and bufferView");const b=Promise.resolve(g).then(function(w){return new Promise(function(x,E){let T=x;!0===s.isImageBitmapLoader&&(T=function(I){const L=new q(I);L.needsUpdate=!0,x(L)}),s.load(Hi.resolveURL(w,h.path),T,void 0,E)})}).then(function(w){var x;return!0===y&&m.revokeObjectURL(g),w.userData.mimeType=d.mimeType||((x=d.uri).search(/\.jpe?g($|\?)/i)>0||0===x.search(/^data\:image\/jpeg/)?"image/jpeg":x.search(/\.webp($|\?)/i)>0||0===x.search(/^data\:image\/webp/)?"image/webp":"image/png"),w}).catch(function(w){throw console.error("THREE.GLTFLoader: Couldn't load texture",g),w});return this.sourceCache[r]=b,b}assignTexture(r,s,a,c){const h=this;return this.getDependency("texture",a.index).then(function(d){if(void 0===a.texCoord||0==a.texCoord||"aoMap"===s&&1==a.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+a.texCoord+" for texture "+s+" not yet supported."),h.extensions[nr.KHR_TEXTURE_TRANSFORM]){const m=void 0!==a.extensions?a.extensions[nr.KHR_TEXTURE_TRANSFORM]:void 0;if(m){const g=h.associations.get(d);d=h.extensions[nr.KHR_TEXTURE_TRANSFORM].extendTexture(d,m),h.associations.set(d,g)}}return void 0!==c&&(d.encoding=c),r[s]=d,d})}assignFinalMaterial(r){const s=r.geometry;let a=r.material;const c=void 0===s.attributes.tangent,h=void 0!==s.attributes.color,d=void 0===s.attributes.normal;if(r.isPoints){const m="PointsMaterial:"+a.uuid;let g=this.cache.get(m);g||(g=new Nm,jr.prototype.copy.call(g,a),g.color.copy(a.color),g.map=a.map,g.sizeAttenuation=!1,this.cache.add(m,g)),a=g}else if(r.isLine){const m="LineBasicMaterial:"+a.uuid;let g=this.cache.get(m);g||(g=new uu,jr.prototype.copy.call(g,a),g.color.copy(a.color),this.cache.add(m,g)),a=g}if(c||h||d){let m="ClonedMaterial:"+a.uuid+":";a.isGLTFSpecularGlossinessMaterial&&(m+="specular-glossiness:"),c&&(m+="derivative-tangents:"),h&&(m+="vertex-colors:"),d&&(m+="flat-shading:");let g=this.cache.get(m);g||(g=a.clone(),h&&(g.vertexColors=!0),d&&(g.flatShading=!0),c&&(g.normalScale&&(g.normalScale.y*=-1),g.clearcoatNormalScale&&(g.clearcoatNormalScale.y*=-1)),this.cache.add(m,g),this.associations.set(g,this.associations.get(a))),a=g}a.aoMap&&void 0===s.attributes.uv2&&void 0!==s.attributes.uv&&s.setAttribute("uv2",s.attributes.uv),r.material=a}getMaterialType(){return El}loadMaterial(r){const s=this,c=this.extensions,h=this.json.materials[r];let d;const m={},g=h.extensions||{},y=[];if(g[nr.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const w=c[nr.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];d=w.getMaterialType(),y.push(w.extendParams(m,h,s))}else if(g[nr.KHR_MATERIALS_UNLIT]){const w=c[nr.KHR_MATERIALS_UNLIT];d=w.getMaterialType(),y.push(w.extendParams(m,h,s))}else{const w=h.pbrMetallicRoughness||{};if(m.color=new D(1,1,1),m.opacity=1,Array.isArray(w.baseColorFactor)){const x=w.baseColorFactor;m.color.fromArray(x),m.opacity=x[3]}void 0!==w.baseColorTexture&&y.push(s.assignTexture(m,"map",w.baseColorTexture,3001)),m.metalness=void 0!==w.metallicFactor?w.metallicFactor:1,m.roughness=void 0!==w.roughnessFactor?w.roughnessFactor:1,void 0!==w.metallicRoughnessTexture&&(y.push(s.assignTexture(m,"metalnessMap",w.metallicRoughnessTexture)),y.push(s.assignTexture(m,"roughnessMap",w.metallicRoughnessTexture))),d=this._invokeOne(function(x){return x.getMaterialType&&x.getMaterialType(r)}),y.push(Promise.all(this._invokeAll(function(x){return x.extendMaterialParams&&x.extendMaterialParams(r,m)})))}!0===h.doubleSided&&(m.side=2);const b=h.alphaMode||"OPAQUE";if("BLEND"===b?(m.transparent=!0,m.depthWrite=!1):(m.transparent=!1,"MASK"===b&&(m.alphaTest=void 0!==h.alphaCutoff?h.alphaCutoff:.5)),void 0!==h.normalTexture&&d!==Bi&&(y.push(s.assignTexture(m,"normalMap",h.normalTexture)),m.normalScale=new Me(1,1),void 0!==h.normalTexture.scale)){const w=h.normalTexture.scale;m.normalScale.set(w,w)}return void 0!==h.occlusionTexture&&d!==Bi&&(y.push(s.assignTexture(m,"aoMap",h.occlusionTexture)),void 0!==h.occlusionTexture.strength&&(m.aoMapIntensity=h.occlusionTexture.strength)),void 0!==h.emissiveFactor&&d!==Bi&&(m.emissive=(new D).fromArray(h.emissiveFactor)),void 0!==h.emissiveTexture&&d!==Bi&&y.push(s.assignTexture(m,"emissiveMap",h.emissiveTexture,3001)),Promise.all(y).then(function(){let w;return w=d===ag?c[nr.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(m):new d(m),h.name&&(w.name=h.name),ku(w,h),s.associations.set(w,{materials:r}),h.extensions&&ug(c,w,h),w})}createUniqueName(r){const s=tr.sanitizeNodeName(r||"");let a=s;for(let c=1;this.nodeNamesUsed[a];++c)a=s+"_"+c;return this.nodeNamesUsed[a]=!0,a}loadGeometries(r){const s=this,a=this.extensions,c=this.primitiveCache;function h(m){return a[nr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(m,s).then(function(g){return od(g,m,s)})}const d=[];for(let m=0,g=r.length;m<g;m++){const y=r[m],b=_C(y),w=c[b];if(w)d.push(w.promise);else{let x;x=y.extensions&&y.extensions[nr.KHR_DRACO_MESH_COMPRESSION]?h(y):od(new Xr,y,s),c[b]={primitive:y,promise:x},d.push(x)}}return Promise.all(d)}loadMesh(r){const s=this,c=this.extensions,h=this.json.meshes[r],d=h.primitives,m=[];for(let g=0,y=d.length;g<y;g++){const b=void 0===d[g].material?(void 0===(f=this.cache).DefaultMaterial&&(f.DefaultMaterial=new El({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),f.DefaultMaterial):this.getDependency("material",d[g].material);m.push(b)}var f;return m.push(s.loadGeometries(d)),Promise.all(m).then(function(g){const y=g.slice(0,g.length-1),b=g[g.length-1],w=[];for(let E=0,T=b.length;E<T;E++){const I=b[E],L=d[E];let R;const $=y[E];if(4===L.mode||5===L.mode||6===L.mode||void 0===L.mode)R=!0===h.isSkinnedMesh?new bf(I,$):new xt(I,$),!0!==R.isSkinnedMesh||R.geometry.attributes.skinWeight.normalized||R.normalizeSkinWeights(),5===L.mode?R.geometry=ja(R.geometry,1):6===L.mode&&(R.geometry=ja(R.geometry,2));else if(1===L.mode)R=new Hh(I,$);else if(3===L.mode)R=new hu(I,$);else if(2===L.mode)R=new uv(I,$);else{if(0!==L.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+L.mode);R=new zh(I,$)}Object.keys(R.geometry.morphAttributes).length>0&&Nu(R,h),R.name=s.createUniqueName(h.name||"mesh_"+r),ku(R,h),L.extensions&&ug(c,R,L),s.assignFinalMaterial(R),w.push(R)}for(let E=0,T=w.length;E<T;E++)s.associations.set(w[E],{meshes:r,primitives:E});if(1===w.length)return w[0];const x=new bl;s.associations.set(x,{meshes:r});for(let E=0,T=w.length;E<T;E++)x.add(w[E]);return x})}loadCamera(r){let s;const a=this.json.cameras[r],c=a[a.type];if(c)return"perspective"===a.type?s=new Vi(ft.radToDeg(c.yfov),c.aspectRatio||1,c.znear||1,c.zfar||2e6):"orthographic"===a.type&&(s=new zn(-c.xmag,c.xmag,c.ymag,-c.ymag,c.znear,c.zfar)),a.name&&(s.name=this.createUniqueName(a.name)),ku(s,a),Promise.resolve(s);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(r){const s=this.json.skins[r],a={joints:s.joints};return void 0===s.inverseBindMatrices?Promise.resolve(a):this.getDependency("accessor",s.inverseBindMatrices).then(function(c){return a.inverseBindMatrices=c,a})}loadAnimation(r){const s=this.json.animations[r],a=[],c=[],h=[],d=[],m=[];for(let g=0,y=s.channels.length;g<y;g++){const b=s.channels[g],w=s.samplers[b.sampler],x=b.target,T=void 0!==s.parameters?s.parameters[w.input]:w.input,I=void 0!==s.parameters?s.parameters[w.output]:w.output;a.push(this.getDependency("node",void 0!==x.node?x.node:x.id)),c.push(this.getDependency("accessor",T)),h.push(this.getDependency("accessor",I)),d.push(w),m.push(x)}return Promise.all([Promise.all(a),Promise.all(c),Promise.all(h),Promise.all(d),Promise.all(m)]).then(function(g){const y=g[0],b=g[1],w=g[2],x=g[3],E=g[4],T=[];for(let L=0,R=y.length;L<R;L++){const $=y[L],B=b[L],G=w[L],z=x[L],J=E[L];if(void 0===$)continue;let te;switch($.updateMatrix(),$.matrixAutoUpdate=!0,sd[J.path]){case sd.weights:te=Kh;break;case sd.rotation:te=wu;break;default:te=Wm}const le=$.name?$.name:$.uuid,oe=void 0!==z.interpolation?zv[z.interpolation]:2301,de=[];sd[J.path]===sd.weights?$.traverse(function(ke){ke.morphTargetInfluences&&de.push(ke.name?ke.name:ke.uuid)}):de.push(le);let we=G.array;if(G.normalized){const ke=si(we.constructor),je=new Float32Array(we.length);for(let me=0,Ve=we.length;me<Ve;me++)je[me]=we[me]*ke;we=je}for(let ke=0,je=de.length;ke<je;ke++){const me=new te(de[ke]+"."+sd[J.path],B.array,we,oe);"CUBICSPLINE"===z.interpolation&&(me.createInterpolant=function(Ve){return new(this instanceof wu?gC:Tl)(this.times,this.values,this.getValueSize()/3,Ve)},me.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),T.push(me)}}return new qm(s.name?s.name:"animation_"+r,void 0,T)})}createNodeMesh(r){const a=this,c=this.json.nodes[r];return void 0===c.mesh?null:a.getDependency("mesh",c.mesh).then(function(h){const d=a._getNodeRef(a.meshCache,c.mesh,h);return void 0!==c.weights&&d.traverse(function(m){if(m.isMesh)for(let g=0,y=c.weights.length;g<y;g++)m.morphTargetInfluences[g]=c.weights[g]}),d})}loadNode(r){const a=this.extensions,c=this,h=this.json.nodes[r],d=h.name?c.createUniqueName(h.name):"";return function(){const m=[],g=c._invokeOne(function(y){return y.createNodeMesh&&y.createNodeMesh(r)});return g&&m.push(g),void 0!==h.camera&&m.push(c.getDependency("camera",h.camera).then(function(y){return c._getNodeRef(c.cameraCache,h.camera,y)})),c._invokeAll(function(y){return y.createNodeAttachment&&y.createNodeAttachment(r)}).forEach(function(y){m.push(y)}),Promise.all(m)}().then(function(m){let g;if(g=!0===h.isBone?new Im:m.length>1?new bl:1===m.length?m[0]:new Bt,g!==m[0])for(let y=0,b=m.length;y<b;y++)g.add(m[y]);if(h.name&&(g.userData.name=h.name,g.name=d),ku(g,h),h.extensions&&ug(a,g,h),void 0!==h.matrix){const y=new mt;y.fromArray(h.matrix),g.applyMatrix4(y)}else void 0!==h.translation&&g.position.fromArray(h.translation),void 0!==h.rotation&&g.quaternion.fromArray(h.rotation),void 0!==h.scale&&g.scale.fromArray(h.scale);return c.associations.has(g)||c.associations.set(g,{}),c.associations.get(g).nodes=r,g})}loadScene(r){const s=this.json,a=this.extensions,c=this.json.scenes[r],h=this,d=new bl;c.name&&(d.name=h.createUniqueName(c.name)),ku(d,c),c.extensions&&ug(a,d,c);const m=c.nodes||[],g=[];for(let y=0,b=m.length;y<b;y++)g.push(wC(m[y],d,s,h));return Promise.all(g).then(function(){return h.associations=(y=>{const b=new Map;for(const[w,x]of h.associations)(w instanceof jr||w instanceof q)&&b.set(w,x);return y.traverse(w=>{const x=h.associations.get(w);null!=x&&b.set(w,x)}),b})(d),d})}}function wC(f,r,s,a){const c=s.nodes[f];return a.getDependency("node",f).then(function(h){if(void 0===c.skin)return h;let d;return a.getDependency("skin",c.skin).then(function(m){d=m;const g=[];for(let y=0,b=d.joints.length;y<b;y++)g.push(a.getDependency("node",d.joints[y]));return Promise.all(g)}).then(function(m){return h.traverse(function(g){if(!g.isMesh)return;const y=[],b=[];for(let w=0,x=m.length;w<x;w++){const E=m[w];if(E){y.push(E);const T=new mt;void 0!==d.inverseBindMatrices&&T.fromArray(d.inverseBindMatrices.array,16*w),b.push(T)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',d.joints[w])}g.bind(new wf(y,b),g.matrixWorld)}),h})}).then(function(h){r.add(h);const d=[];if(c.children){const m=c.children;for(let g=0,y=m.length;g<y;g++)d.push(wC(m[g],h,s,a))}return Promise.all(d)})}function od(f,r,s){const a=r.attributes,c=[];function h(d,m){return s.getDependency("accessor",d).then(function(g){f.setAttribute(m,g)})}for(const d in a){const m=Hv[d]||d.toLowerCase();m in f.attributes||c.push(h(a[d],m))}if(void 0!==r.indices&&!f.index){const d=s.getDependency("accessor",r.indices).then(function(m){f.setIndex(m)});c.push(d)}return ku(f,r),function(d,m,g){const y=m.attributes,b=new ut;if(void 0===y.POSITION)return;{const E=g.json.accessors[y.POSITION],T=E.min,I=E.max;if(void 0===T||void 0===I)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(b.set(new F(T[0],T[1],T[2]),new F(I[0],I[1],I[2])),E.normalized){const L=si(id[E.componentType]);b.min.multiplyScalar(L),b.max.multiplyScalar(L)}}const w=m.targets;if(void 0!==w){const E=new F,T=new F;for(let I=0,L=w.length;I<L;I++){const R=w[I];if(void 0!==R.POSITION){const $=g.json.accessors[R.POSITION],B=$.min,G=$.max;if(void 0!==B&&void 0!==G){if(T.setX(Math.max(Math.abs(B[0]),Math.abs(G[0]))),T.setY(Math.max(Math.abs(B[1]),Math.abs(G[1]))),T.setZ(Math.max(Math.abs(B[2]),Math.abs(G[2]))),$.normalized){const z=si(id[$.componentType]);T.multiplyScalar(z)}E.max(T)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}b.expandByVector(E)}d.boundingBox=b;const x=new Jn;b.getCenter(x.center),x.radius=b.min.distanceTo(b.max)/2,d.boundingSphere=x}(f,r,s),Promise.all(c).then(function(){return void 0!==r.targets?function(d,m,g){let y=!1,b=!1,w=!1;for(let I=0,L=m.length;I<L;I++){const R=m[I];if(void 0!==R.POSITION&&(y=!0),void 0!==R.NORMAL&&(b=!0),void 0!==R.COLOR_0&&(w=!0),y&&b&&w)break}if(!y&&!b&&!w)return Promise.resolve(d);const x=[],E=[],T=[];for(let I=0,L=m.length;I<L;I++){const R=m[I];if(y){const $=void 0!==R.POSITION?g.getDependency("accessor",R.POSITION):d.attributes.position;x.push($)}if(b){const $=void 0!==R.NORMAL?g.getDependency("accessor",R.NORMAL):d.attributes.normal;E.push($)}if(w){const $=void 0!==R.COLOR_0?g.getDependency("accessor",R.COLOR_0):d.attributes.color;T.push($)}}return Promise.all([Promise.all(x),Promise.all(E),Promise.all(T)]).then(function(I){const R=I[1],$=I[2];return y&&(d.morphAttributes.position=I[0]),b&&(d.morphAttributes.normal=R),w&&(d.morphAttributes.color=$),d.morphTargetsRelative=!0,d})}(f,r.targets,s):f})}function ja(f,r){let s=f.getIndex();if(null===s){const d=[],m=f.getAttribute("position");if(void 0===m)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),f;for(let g=0;g<m.count;g++)d.push(g);f.setIndex(d),s=f.getIndex()}const a=s.count-2,c=[];if(2===r)for(let d=1;d<=a;d++)c.push(s.getX(0)),c.push(s.getX(d)),c.push(s.getX(d+1));else for(let d=0;d<a;d++)d%2==0?(c.push(s.getX(d)),c.push(s.getX(d+1)),c.push(s.getX(d+2))):(c.push(s.getX(d+2)),c.push(s.getX(d+1)),c.push(s.getX(d)));c.length/3!==a&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const h=f.clone();return h.setIndex(c),h}class xC{constructor(r=4){this.pool=r,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(r){if(!this.workers[r]){const s=this.workerCreator();s.addEventListener("message",this._onMessage.bind(this,r)),this.workers[r]=s}}_getIdleWorker(){for(let r=0;r<this.pool;r++)if(!(this.workerStatus&1<<r))return r;return-1}_onMessage(r,s){const a=this.workersResolve[r];if(a&&a(s),this.queue.length){const{resolve:c,msg:h,transfer:d}=this.queue.shift();this.workersResolve[r]=c,this.workers[r].postMessage(h,d)}else this.workerStatus^=1<<r}setWorkerCreator(r){this.workerCreator=r}setWorkerLimit(r){this.pool=r}postMessage(r,s){return new Promise(a=>{const c=this._getIdleWorker();-1!==c?(this._initWorker(c),this.workerStatus|=1<<c,this.workersResolve[c]=a,this.workers[c].postMessage(r,s)):this.queue.push({resolve:a,msg:r,transfer:s})})}dispose(){this.workers.forEach(r=>r.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const jv=new WeakMap;let Dl=0;class Ga extends oa{constructor(r){super(r),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new xC,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(r){return this.transcoderPath=r,this}setWorkerLimit(r){return this.workerPool.setWorkerLimit(r),this}detectSupport(r){return this.workerConfig={astcSupported:r.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:r.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:r.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:r.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:r.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:r.extensions.has("WEBGL_compressed_texture_pvrtc")||r.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},r.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const r=new Al(this.manager);r.setPath(this.transcoderPath),r.setWithCredentials(this.withCredentials);const s=r.loadAsync("basis_transcoder.js"),a=new Al(this.manager);a.setPath(this.transcoderPath),a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials);const c=a.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([s,c]).then(([h,d])=>{const m=Ga.BasisWorker.toString(),g=["/* constants */","let _EngineFormat = "+JSON.stringify(Ga.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Ga.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ga.BasisFormat),"/* basis_transcoder.js */",h,"/* worker */",m.substring(m.indexOf("{")+1,m.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([g])),this.transcoderBinary=d,this.workerPool.setWorkerCreator(()=>{const y=new Worker(this.workerSourceURL),b=this.transcoderBinary.slice(0);return y.postMessage({type:"init",config:this.workerConfig,transcoderBinary:b},[b]),y})}),Dl>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Dl++}return this.transcoderPending}load(r,s,a,c){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const h=new Al(this.manager);h.setResponseType("arraybuffer"),h.setWithCredentials(this.withCredentials);const d=new hv;return h.load(r,m=>{if(jv.has(m))return jv.get(m).promise.then(s).catch(c);this._createTexture([m]).then(function(g){d.copy(g),d.needsUpdate=!0,s&&s(d)}).catch(c)},a,c),d}_createTextureFrom(r){const{mipmaps:s,width:a,height:c,format:h,type:d,error:m,dfdTransferFn:g,dfdFlags:y}=r;if("error"===d)return Promise.reject(m);const b=new hv(s,a,c,h,1009);return b.minFilter=1===s.length?1006:1008,b.magFilter=1006,b.generateMipmaps=!1,b.needsUpdate=!0,b.encoding=2===g?3001:3e3,b.premultiplyAlpha=!!(1&y),b}_createTexture(r,s={}){const a=s,c=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffers:r,taskConfig:a},r)).then(h=>this._createTextureFrom(h.data));return jv.set(r[0],{promise:c}),c}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Dl--,this}}var hg,$w;Ga.BasisFormat={ETC1S:0,UASTC_4x4:1},Ga.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Ga.EngineFormat={RGBAFormat:1023,RGBA_ASTC_4x4_Format:37808,RGBA_BPTC_Format:36492,RGBA_ETC2_EAC_Format:37496,RGBA_PVRTC_4BPPV1_Format:35842,RGBA_S3TC_DXT5_Format:33779,RGB_ETC1_Format:36196,RGB_ETC2_Format:37492,RGB_PVRTC_4BPPV1_Format:35840,RGB_S3TC_DXT1_Format:33776},Ga.BasisWorker=function(){let f,r,s;const a=_EngineFormat,c=_TranscoderFormat,h=_BasisFormat;self.addEventListener("message",function(b){const w=b.data;switch(w.type){case"init":f=w.config,x=w.transcoderBinary,r=new Promise(E=>{s={wasmBinary:x,onRuntimeInitialized:E},BASIS(s)}).then(()=>{s.initializeBasis(),void 0===s.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":r.then(()=>{try{const{width:E,height:T,hasAlpha:I,mipmaps:L,format:R,dfdTransferFn:$,dfdFlags:B}=function(z){const J=new s.KTX2File(new Uint8Array(z));function te(){J.close(),J.delete()}if(!J.isValid())throw te(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const le=J.isUASTC()?h.UASTC_4x4:h.ETC1S,oe=J.getWidth(),de=J.getHeight(),we=J.getLevels(),ke=J.getHasAlpha(),je=J.getDFDTransferFunc(),me=J.getDFDFlags(),{transcoderFormat:Ve,engineFormat:Ne}=function(We,ze,Oe,Ct){let At,Nt;const Tt=We===h.ETC1S?m:g;for(let Rn=0;Rn<Tt.length;Rn++){const se=Tt[Rn];if(f[se.if]&&se.basisFormat.includes(We)&&!(Ct&&se.transcoderFormat.length<2)&&(!se.needsPowerOfTwo||y(ze)&&y(Oe)))return At=se.transcoderFormat[Ct?1:0],Nt=se.engineFormat[Ct?1:0],{transcoderFormat:At,engineFormat:Nt}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),At=c.RGBA32,Nt=a.RGBAFormat,{transcoderFormat:At,engineFormat:Nt}}(le,oe,de,ke);if(!oe||!de||!we)throw te(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!J.startTranscoding())throw te(),new Error("THREE.KTX2Loader: .startTranscoding failed");const tt=[];for(let We=0;We<we;We++){const ze=J.getImageLevelInfo(We,0,0),Oe=ze.origWidth,Ct=ze.origHeight,At=new Uint8Array(J.getImageTranscodedSizeInBytes(We,0,0,Ve));if(!J.transcodeImage(At,We,0,0,Ve,0,-1,-1))throw te(),new Error("THREE.KTX2Loader: .transcodeImage failed.");tt.push({data:At,width:Oe,height:Ct})}return te(),{width:oe,height:de,hasAlpha:ke,mipmaps:tt,format:Ne,dfdTransferFn:je,dfdFlags:me}}(w.buffers[0]),G=[];for(let z=0;z<L.length;++z)G.push(L[z].data.buffer);self.postMessage({type:"transcode",id:w.id,width:E,height:T,hasAlpha:I,mipmaps:L,format:R,dfdTransferFn:$,dfdFlags:B},G)}catch(E){console.error(E),self.postMessage({type:"error",id:w.id,error:E.message})}})}var x});const d=[{if:"astcSupported",basisFormat:[h.UASTC_4x4],transcoderFormat:[c.ASTC_4x4,c.ASTC_4x4],engineFormat:[a.RGBA_ASTC_4x4_Format,a.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[h.ETC1S,h.UASTC_4x4],transcoderFormat:[c.BC7_M5,c.BC7_M5],engineFormat:[a.RGBA_BPTC_Format,a.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[h.ETC1S,h.UASTC_4x4],transcoderFormat:[c.BC1,c.BC3],engineFormat:[a.RGB_S3TC_DXT1_Format,a.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[h.ETC1S,h.UASTC_4x4],transcoderFormat:[c.ETC1,c.ETC2],engineFormat:[a.RGB_ETC2_Format,a.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[h.ETC1S,h.UASTC_4x4],transcoderFormat:[c.ETC1],engineFormat:[a.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[h.ETC1S,h.UASTC_4x4],transcoderFormat:[c.PVRTC1_4_RGB,c.PVRTC1_4_RGBA],engineFormat:[a.RGB_PVRTC_4BPPV1_Format,a.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],m=d.sort(function(b,w){return b.priorityETC1S-w.priorityETC1S}),g=d.sort(function(b,w){return b.priorityUASTC-w.priorityUASTC});function y(b){return b<=2||0==(b&b-1)&&0!==b}};const ca=Symbol("retainerCount"),ua=Symbol("recentlyUsed"),Gv=Symbol("evict"),dg=Symbol("evictionThreshold"),Jf=Symbol("cache");class pI{constructor(r,s=5){this[hg]=new Map,this[$w]=[],this[Jf]=r,this[dg]=s}set evictionThreshold(r){this[dg]=r,this[Gv]()}get evictionThreshold(){return this[dg]}get cache(){return this[Jf]}retainerCount(r){return this[ca].get(r)||0}reset(){this[ca].clear(),this[ua]=[]}retain(r){this[ca].has(r)||this[ca].set(r,0),this[ca].set(r,this[ca].get(r)+1);const s=this[ua].indexOf(r);-1!==s&&this[ua].splice(s,1),this[ua].unshift(r),this[Gv]()}release(r){this[ca].has(r)&&this[ca].set(r,Math.max(this[ca].get(r)-1,0)),this[Gv]()}[(hg=ca,$w=ua,Gv)](){if(!(this[ua].length<this[dg]))for(let r=this[ua].length-1;r>=this[dg];--r){const s=this[ua][r];0===this[ca].get(s)&&(this[Jf].delete(s),this[ua].splice(r,1))}}}const mI=f=>{const r=new Map;for(const s of f.mappings)for(const a of s.variants)r.set(a,{material:null,gltfMaterialIndex:s.material});return r};class gI{constructor(r){this.parser=r,this.name="KHR_materials_variants"}afterRoot(r){const s=this.parser,a=s.json;if(void 0===a.extensions||void 0===a.extensions[this.name])return null;const c=(h=>{const d=[],m=new Set;for(const g of h){let y=g,b=0;for(;m.has(y);)y=g+"."+ ++b;m.add(y),d.push(y)}return d})((a.extensions[this.name].variants||[]).map(h=>h.name));for(const h of r.scenes)h.traverse(d=>{const m=d;if(!m.isMesh)return;const g=s.associations.get(m);if(null==g||null==g.meshes||null==g.primitives)return;const y=a.meshes[g.meshes].primitives[g.primitives].extensions;y&&y[this.name]&&(m.userData.variantMaterials=mI(y[this.name]))});return r.userData.variants=c,Promise.resolve()}}var MC,EC;const Rl=new Map,fg=new Map;let pg;const Wv=new class extends oa{constructor(f){super(f),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(f){return this.decoderPath=f,this}setDecoderConfig(f){return this.decoderConfig=f,this}setWorkerLimit(f){return this.workerLimit=f,this}load(f,r,s,a){const c=new Al(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(f,h=>{this.decodeGeometry(h,{attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1}).then(r).catch(a)},s,a)}decodeDracoFile(f,r,s,a){this.decodeGeometry(f,{attributeIDs:s||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!s}).then(r)}decodeGeometry(f,r){for(const m in r.attributeTypes){const g=r.attributeTypes[m];void 0!==g.BYTES_PER_ELEMENT&&(r.attributeTypes[m]=g.name)}const s=JSON.stringify(r);if(rd.has(f)){const m=rd.get(f);if(m.key===s)return m.promise;if(0===f.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a;const c=this.workerNextTaskID++,d=this._getWorker(c,f.byteLength).then(m=>(a=m,new Promise((g,y)=>{a._callbacks[c]={resolve:g,reject:y},a.postMessage({type:"decode",id:c,taskConfig:r,buffer:f},[f])}))).then(m=>this._createGeometry(m.geometry));return d.catch(()=>!0).then(()=>{a&&c&&this._releaseTask(a,c)}),rd.set(f,{key:s,promise:d}),d}_createGeometry(f){const r=new Xr;f.index&&r.setIndex(new jt(f.index.array,1));for(let s=0;s<f.attributes.length;s++){const a=f.attributes[s];r.setAttribute(a.name,new jt(a.array,a.itemSize))}return r}_loadLibrary(f,r){const s=new Al(this.manager);return s.setPath(this.decoderPath),s.setResponseType(r),s.setWithCredentials(this.withCredentials),new Promise((a,c)=>{s.load(f,a,void 0,c)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const f="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,r=[];return f?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(s=>{const a=s[0];f||(this.decoderConfig.wasmBinary=s[1]);const c=Nw.toString(),h=["/* draco decoder */",a,"","/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(f,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(c){const h=c.data;switch(h.type){case"decode":a._callbacks[h.id].resolve(h);break;case"error":a._callbacks[h.id].reject(h);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,c){return a._taskLoad>c._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[f]=r,s._taskLoad+=r,s})}_releaseTask(f,r){f._taskLoad-=f._taskCosts[r],delete f._callbacks[r],delete f._taskCosts[r]}debug(){console.log("Task load: ",this.workerPool.map(f=>f._taskLoad))}dispose(){for(let f=0;f<this.workerPool.length;++f)this.workerPool[f].terminate();return this.workerPool.length=0,this}};let Xw;const mg=new Ga;let Qf,qv;const Il=Symbol("loader"),bs=Symbol("evictionPolicy"),Kw=Symbol("GLTFInstance");class Xi extends U{constructor(r){super(),this[EC]=(new cC).register(s=>new gI(s)),this[Kw]=r,this[Il].setDRACOLoader(Wv),this[Il].setKTX2Loader(mg)}static setDRACODecoderLocation(r){pg=r,Wv.setDecoderPath(r)}static getDRACODecoderLocation(){return pg}static setKTX2TranscoderLocation(r){Xw=r,mg.setTranscoderPath(r)}static getKTX2TranscoderLocation(){return Xw}static setMeshoptDecoderLocation(r){var s;Qf!==r&&(Qf=r,qv=(s=r,new Promise((a,c)=>{const h=document.createElement("script");document.body.appendChild(h),h.onload=a,h.onerror=c,h.async=!0,h.src=s})).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return Qf}static initializeKTX2Loader(r){mg.detectSupport(r)}static get cache(){return Rl}static clearCache(){Rl.forEach((r,s)=>{this.delete(s)}),this[bs].reset()}static has(r){return Rl.has(r)}static delete(r){var s=this;return(0,Y.Z)(function*(){if(!s.has(r))return;const a=Rl.get(r);fg.delete(r),Rl.delete(r),(yield a).dispose()})()}static hasFinishedLoading(r){return!!fg.get(r)}get[(MC=bs,EC=Il,bs)](){return this.constructor[bs]}preload(r,s,a=(()=>{})){var c=this;return(0,Y.Z)(function*(){if(c[Il].setWithCredentials(Xi.withCredentials),c.dispatchEvent({type:"preload",element:s,src:r}),!Rl.has(r)){null!=qv&&c[Il].setMeshoptDecoder(yield qv);const h=((g,y,b=(()=>{}))=>{const w=x=>{const E=x.loaded/x.total;b(Math.max(0,Math.min(1,isFinite(E)?E:1)))};return new Promise((x,E)=>{y.load(g,x,w,E)})})(r,c[Il],g=>{a(.8*g)}),d=c[Kw],m=h.then(g=>d.prepare(g)).then(g=>(a(.9),new d(g))).catch(g=>(console.error(g),new d));Rl.set(r,m)}yield Rl.get(r),fg.set(r,!0),a&&a(1)})()}load(r,s,a=(()=>{})){var c=this;return(0,Y.Z)(function*(){yield c.preload(r,s,a);const h=yield Rl.get(r),d=yield h.clone();return c[bs].retain(r),d.dispose=()=>{c[bs].release(r)},d})()}}Xi[MC]=new pI(Xi);class Yw extends Bt{constructor(r=document.createElement("div")){super(),this.element=r,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(s){s.element instanceof Element&&null!==s.element.parentNode&&s.element.parentNode.removeChild(s.element)})})}copy(r,s){return super.copy(r,s),this.element=r.element.cloneNode(!0),this}}Yw.prototype.isCSS2DObject=!0;const Pl=new F,Zw=new mt,Jw=new mt,Qw=new F,ex=new F;class $v{constructor(r={}){const s=this;let a,c,h,d;const m={objects:new WeakMap},g=void 0!==r.element?r.element:document.createElement("div");function y(w,x,E){if(w.isCSS2DObject){Pl.setFromMatrixPosition(w.matrixWorld),Pl.applyMatrix4(Jw);const T=!0===w.visible&&Pl.z>=-1&&Pl.z<=1&&!0===w.layers.test(E.layers);if(w.element.style.display=!0===T?"":"none",!0===T){w.onBeforeRender(s,x,E);const L=w.element;L.style.transform=/apple/i.test(navigator.vendor)?"translate(-50%,-50%) translate("+Math.round(Pl.x*h+h)+"px,"+Math.round(-Pl.y*d+d)+"px)":"translate(-50%,-50%) translate("+(Pl.x*h+h)+"px,"+(-Pl.y*d+d)+"px)",L.parentNode!==g&&g.appendChild(L),w.onAfterRender(s,x,E)}const I={distanceToCameraSquared:b(E,w)};m.objects.set(w,I)}for(let T=0,I=w.children.length;T<I;T++)y(w.children[T],x,E)}function b(w,x){return Qw.setFromMatrixPosition(w.matrixWorld),ex.setFromMatrixPosition(x.matrixWorld),Qw.distanceToSquared(ex)}g.style.overflow="hidden",this.domElement=g,this.getSize=function(){return{width:a,height:c}},this.render=function(w,x){!0===w.autoUpdate&&w.updateMatrixWorld(),null===x.parent&&x.updateMatrixWorld(),Zw.copy(x.matrixWorldInverse),Jw.multiplyMatrices(x.projectionMatrix,Zw),y(w,w,x),function(E){const T=function(L){const R=[];return L.traverse(function($){$.isCSS2DObject&&R.push($)}),R}(E).sort(function(L,R){return L.renderOrder!==R.renderOrder?R.renderOrder-L.renderOrder:m.objects.get(L).distanceToCameraSquared-m.objects.get(R).distanceToCameraSquared}),I=T.length;for(let L=0,R=T.length;L<R;L++)T[L].element.style.zIndex=I-L}(w)},this.setSize=function(w,x){a=w,c=x,h=a/2,d=c/2,g.style.width=w+"px",g.style.height=x+"px"}}}const tx=f=>f&&"null"!==f?SC(f):null,nx=()=>{if(Nv)return;const f=[];throw Iw||f.push("WebXR Device API"),Pw||f.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${f.join(", ")}`)},SC=f=>new URL(f,window.location.toString()).toString(),Xv=(f,r)=>{let s=null;return(...a)=>{null!=s&&self.clearTimeout(s),s=self.setTimeout(()=>{s=null,f(...a)},r)}},bc=(f,r,s)=>Math.max(r,Math.min(s,f)),Kv=(()=>{const f=(()=>{var r;if(null!==(r=document.documentElement.getAttribute("itemtype"))&&void 0!==r&&r.includes("schema.org/SearchResultsPage"))return!0;const s=null!=document.head?Array.from(document.head.querySelectorAll("meta")):[];for(const a of s)if("viewport"===a.name)return!0;return!1})();return f||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>f?window.devicePixelRatio:1})(),ws=(()=>{const f=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(f)})(),gg=(f=0)=>new Promise(r=>setTimeout(r,f));class no{constructor(r=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(r)}setDecayTime(r){this.naturalFrequency=1/Math.max(.001,r)}update(r,s,a,c){const h=2e-4*this.naturalFrequency;if(null==r||0===c||r===s&&0===this.velocity)return s;if(a<0)return r;const d=r-s,m=this.velocity+this.naturalFrequency*d,g=d+a*m,y=Math.exp(-this.naturalFrequency*a),b=(m-this.naturalFrequency*g)*y,w=-this.naturalFrequency*(b+m*y);return Math.abs(b)<h*Math.abs(c)&&w*d>=0?(this.velocity=0,s):(this.velocity=b,s+g*y)}}const Ki=(f,r)=>({type:"number",number:f,unit:r}),gi=(()=>{const f={};return r=>{const s=r;if(s in f)return f[s];const a=[];let c=0;for(;r;){if(++c>1e3){r="";break}const h=ad(r),d=h.nodes[0];if(null==d||0===d.terms.length)break;a.push(d),r=h.remainingInput}return f[s]=a}})(),ad=(()=>{const f=/^(\-\-|[a-z\u0240-\uffff])/i,r=/^([\*\+\/]|[\-]\s)/i,s=/^[\),]/;return a=>{const c=[];for(;a.length&&(a=a.trim(),!s.test(a));)if("("===a[0]){const{nodes:h,remainingInput:d}=Zv(a);a=d,c.push({type:"function",name:{type:"ident",value:"calc"},arguments:h})}else if(f.test(a)){const h=Yv(a),d=h.nodes[0];if("("===(a=h.remainingInput)[0]){const{nodes:m,remainingInput:g}=Zv(a);c.push({type:"function",name:d,arguments:m}),a=g}else c.push(d)}else if(r.test(a))c.push({type:"operator",value:a[0]}),a=a.slice(1);else{const{nodes:h,remainingInput:d}="#"===a[0]?AC(a):CC(a);if(0===h.length)break;c.push(h[0]),a=d}return{nodes:[{type:"expression",terms:c}],remainingInput:a}}})(),Yv=(()=>{const f=/[^a-z0-9_\-\u0240-\uffff]/i;return r=>{const s=r.match(f);return{nodes:[{type:"ident",value:null==s?r:r.substr(0,s.index)}],remainingInput:null==s?"":r.substr(s.index)}}})(),CC=(()=>{const f=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,r=/^[a-z%]+/i,s=/^(m|mm|cm|rad|deg|[%])$/;return a=>{const c=a.match(f),h=null==c?"0":c[0],d=(a=null==h?a:a.slice(h.length)).match(r);let m=null!=d&&""!==d[0]?d[0]:null;const g=null==d?a:a.slice(m.length);return null==m||s.test(m)||(m=null),{nodes:[{type:"number",number:parseFloat(h)||0,unit:m}],remainingInput:g}}})(),AC=(()=>{const f=/^[a-f0-9]*/i;return r=>{const s=(r=r.slice(1).trim()).match(f);return{nodes:null==s?[]:[{type:"hex",value:s[0]}],remainingInput:null==s?r:r.slice(s[0].length)}}})(),Zv=f=>{const r=[];for(f=f.slice(1).trim();f.length;){const s=ad(f);if(r.push(s.nodes[0]),","===(f=s.remainingInput.trim())[0])f=f.slice(1).trim();else if(")"===f[0]){f=f.slice(1);break}}return{nodes:r,remainingInput:f}},rx=Symbol("visitedTypes");class ix{constructor(r){this[rx]=r}walk(r,s){const a=r.slice();for(;a.length;){const c=a.shift();switch(this[rx].indexOf(c.type)>-1&&s(c),c.type){case"expression":a.unshift(...c.terms);break;case"function":a.unshift(c.name,...c.arguments)}}}}const wc=Object.freeze({type:"number",number:0,unit:null}),ep=(f,r=0)=>{let{number:s,unit:a}=f;if(isFinite(s)){if("rad"===f.unit||null==f.unit)return f}else s=r,a="rad";return{type:"number",number:("deg"===a&&null!=s?s:0)*Math.PI/180,unit:"rad"}},sx=(f,r=0)=>{let s,{number:a,unit:c}=f;if(isFinite(a)){if("m"===f.unit)return f}else a=r,c="m";switch(c){default:s=1;break;case"cm":s=.01;break;case"mm":s=.001}return{type:"number",number:s*a,unit:"m"}},Wa=(()=>{const f=s=>s,r={rad:f,deg:ep,m:f,mm:sx,cm:sx};return(s,a=wc)=>{isFinite(s.number)||(s.number=a.number,s.unit=a.unit);const{unit:c}=s;if(null==c)return s;const h=r[c];return null==h?a:h(s)}})();class ox extends Yw{constructor(r){super(document.createElement("div")),this.normal=new F(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=r.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(r.position),this.updateNormal(r.normal)}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}updatePosition(r){if(null==r)return;const s=gi(r)[0].terms;for(let a=0;a<3;++a)this.position.setComponent(a,Wa(s[a]).number);this.updateMatrixWorld()}updateNormal(r){if(null==r)return;const s=gi(r)[0].terms;for(let a=0;a<3;++a)this.normal.setComponent(a,Wa(s[a]).number)}orient(r){this.pivot.style.transform=`rotate(${r}rad)`}updateVisibility(r){r?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(s=>{if(s.nodeType!==Node.ELEMENT_NODE)return;const a=s,c=a.dataset.visibilityAttribute;if(null!=c){const h=`data-${c}`;r?a.setAttribute(h,""):a.removeAttribute(h)}a.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:r}}))}),this.initialized=!0}}const vg=(f,r,s)=>{let a=s;const c=new F;return f.traverseVisible(h=>{let d,m;h.updateWorldMatrix(!1,!1);const g=h.geometry;if(void 0!==g)if(g.isGeometry){const y=g.vertices;for(d=0,m=y.length;d<m;d++)c.copy(y[d]),h.isSkinnedMesh?h.boneTransform(d,c):c.applyMatrix4(h.matrixWorld),a=r(a,c)}else if(g.isBufferGeometry){const{position:y}=g.attributes;if(void 0!==y){const b=(w=>{if(!w.normalized)return 1;const x=w.array;return x instanceof Int8Array?.007874015748031496:x instanceof Uint8Array?.00392156862745098:x instanceof Int16Array?3051850947599719e-20:x instanceof Uint16Array?15259021896696422e-21:1})(y);for(d=0,m=y.count;d<m;d++)c.fromBufferAttribute(y,d),c.multiplyScalar(b),h.isSkinnedMesh?h.boneTransform(d,c):c.applyMatrix4(h.matrixWorld),a=r(a,c)}}}),a},TC={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},DC={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},ld=[];for(let f=0;f<256;f++)ld[f]=(f<16?"0":"")+f.toString(16);function qa(f,r,s){return(1-s)*f+s*r}class RC extends Bt{constructor(r,s,a){super(),this.camera=new zn,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new an,this.horizontalBlurMaterial=new An(TC),this.verticalBlurMaterial=new An(DC),this.intensity=0,this.softness=1,this.boundingBox=new ut,this.size=new F,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:c}=this;c.rotation.x=Math.PI/2,c.left=-.5,c.right=.5,c.bottom=-.5,c.top=.5,this.add(c);const h=new Nh,d=new Bi({opacity:1,transparent:!0,side:1});this.floor=new xt(h,d),this.floor.userData.shadow=!0,c.add(this.floor),this.blurPlane=new xt(h),this.blurPlane.visible=!1,c.add(this.blurPlane),r.target.add(this),this.depthMaterial.onBeforeCompile=function(m){m.fragmentShader=m.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(r,s,a)}setScene(r,s,a){const{boundingBox:c,size:h,rotation:d,position:m}=this;if(this.isAnimated=r.animationNames.length>0,this.boundingBox.copy(r.boundingBox),this.size.copy(r.size),this.maxDimension=Math.max(h.x,h.y,h.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(m),"back"===a){const{min:g,max:y}=c;[g.y,g.z]=[g.z,g.y],[y.y,y.z]=[y.z,y.y],[h.y,h.z]=[h.z,h.y],d.x=Math.PI/2,d.y=Math.PI}else d.x=0,d.y=0;if(this.isAnimated){const g=c.min.y,y=c.max.y;h.y=this.maxDimension,c.expandByVector(h.subScalar(this.maxDimension).multiplyScalar(-.5)),c.min.y=g,c.max.y=y,h.set(this.maxDimension,y-g,this.maxDimension)}"bottom"===a?m.y=c.min.y:m.z=c.min.y,this.setSoftness(s)}setSoftness(r){this.softness=r;const{size:s,camera:a}=this,c=this.isAnimated?2:1,h=c*Math.pow(2,9-3*r);this.setMapSize(h);const d=s.y/2,m=s.y*c;a.near=0,a.far=qa(m,d,r),this.depthMaterial.opacity=1/r,a.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(r){const{size:s}=this;this.isAnimated&&(r*=2);const a=Math.floor(s.x>s.z?r:r*s.x/s.z),c=Math.floor(s.x>s.z?r*s.z/s.x:r),h=10+a,d=10+c;if(null==this.renderTarget||this.renderTarget.width===h&&this.renderTarget.height===d||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){const m={format:1023};this.renderTarget=new K(h,d,m),this.renderTargetBlur=new K(h,d,m),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(s.x*(1+10/a),s.z*(1+10/c),1),this.needsUpdate=!0}setIntensity(r){this.intensity=r,r>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=r*qa(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(r){this.floor.position.z=.001*this.maxDimension-r}render(r,s){s.overrideMaterial=this.depthMaterial;const a=r.getClearAlpha();r.setClearAlpha(0),this.floor.visible=!1;const c=r.xr.enabled;r.xr.enabled=!1;const h=r.getRenderTarget();r.setRenderTarget(this.renderTarget),r.render(s,this.camera),s.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(r),r.xr.enabled=c,r.setRenderTarget(h),r.setClearAlpha(a)}blurShadow(r){const{camera:s,horizontalBlurMaterial:a,verticalBlurMaterial:c,renderTarget:h,renderTargetBlur:d,blurPlane:m}=this;m.visible=!0,m.material=a,a.uniforms.h.value=1/this.renderTarget.width,a.uniforms.tDiffuse.value=this.renderTarget.texture,r.setRenderTarget(d),r.render(m,s),m.material=c,c.uniforms.v.value=1/this.renderTarget.height,c.uniforms.tDiffuse.value=this.renderTargetBlur.texture,r.setRenderTarget(h),r.render(m,s),m.visible=!1}}const Jv=new F,IC=new F,PC=new F,ax=new class{constructor(f,r,s=0,a=1/0){this.ray=new ps(f,r),this.near=s,this.far=a,this.camera=null,this.layers=new Xo,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(f,r){this.ray.set(f,r)}setFromCamera(f,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(f.x,f.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(f.x,f.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}intersectObject(f,r=!0,s=[]){return Cu(f,this,s,r),s.sort(Su),s}intersectObjects(f,r=!0,s=[]){for(let a=0,c=f.length;a<c;a++)Cu(f[a],this,s,r);return s.sort(Su),s}},kC=new F,Yi=new Me;class Qv extends ta{constructor({canvas:r,element:s,width:a,height:c}){super(),this.context=null,this.annotationRenderer=new $v,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.renderCount=0,this.externalRenderer=null,this.camera=new Vi(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new Bt,this.modelContainer=new Bt,this.animationNames=[],this.boundingBox=new ut,this.boundingSphere=new Jn,this.size=new F,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.tightBounds=!1,this.isDirty=!1,this.goalTarget=new F,this.targetDamperX=new no,this.targetDamperY=new no,this.targetDamperZ=new no,this._currentGLTF=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=s,this.canvas=r,this.camera=new Vi(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(a,c),this.target.name="Target",this.modelContainer.name="ModelContainer",this.target.add(this.modelContainer),this.mixer=new mw(this.modelContainer);const{domElement:h}=this.annotationRenderer,{style:d}=h;d.display="none",d.pointerEvents="none",d.position="absolute",d.top="0",this.element.shadowRoot.querySelector(".default").appendChild(h),this.schemaElement.setAttribute("type","application/ld+json")}createContext(){this.context=this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}setObject(r){var s=this;return(0,Y.Z)(function*(){s.reset(),s.modelContainer.add(r),yield s.setupScene()})()}setSource(r,s=(()=>{})){var a=this;return(0,Y.Z)(function*(){if(!r||r===a.url)return void s(1);if(a.reset(),a.url=r,null!=a.externalRenderer){const g=yield a.externalRenderer.load(s);return a.boundingSphere.radius=g.framedRadius,a.idealAspect=g.fieldOfViewAspect,void a.dispatchEvent({type:"model-load",url:a.url})}let c;null!=a.cancelPendingSourceChange&&(a.cancelPendingSourceChange(),a.cancelPendingSourceChange=null);try{c=yield new Promise(function(){var g=(0,Y.Z)(function*(y,b){a.cancelPendingSourceChange=()=>b();try{y(yield a.element[Qr].loader.load(r,a.element,s))}catch(w){b(w)}});return function(y,b){return g.apply(this,arguments)}}())}catch(g){if(null==g)return;throw g}a.reset(),a.url=r,a._currentGLTF=c,null!=c&&a.modelContainer.add(c.scene);const{animations:h}=c,d=new Map,m=[];for(const g of h)d.set(g.name,g),m.push(g.name);a.animations=h,a.animationsByName=d,a.animationNames=m,yield a.setupScene()})()}setupScene(){var r=this;return(0,Y.Z)(function*(){r.updateBoundingBox(),yield r.updateFraming(),r.updateShadow(),r.setShadowIntensity(r.shadowIntensity),r.dispatchEvent({type:"model-load",url:r.url})})()}reset(){this.url=null,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();const r=this._currentGLTF;if(null!=r){for(const s of this.modelContainer.children)this.modelContainer.remove(s);r.dispose(),this._currentGLTF=null}null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}get currentGLTF(){return this._currentGLTF}setSize(r,s){if(this.width!==r||this.height!==s){if(this.width=Math.max(r,1),this.height=Math.max(s,1),this.annotationRenderer.setSize(r,s),this.aspect=this.width/this.height,null!=this.externalRenderer){const a=Kv();this.externalRenderer.resize(r*a,s*a)}this.queueRender()}}markBakedShadow(r){r.userData.shadow=!0,this.bakedShadows.add(r)}unmarkBakedShadow(r){r.userData.shadow=!1,r.visible=!0,this.bakedShadows.delete(r),this.boundingBox.expandByObject(r)}findBakedShadows(r){const s=new ut;r.traverse(a=>{const c=a;if(!c.isMesh||!c.material.transparent)return;s.setFromObject(c);const h=s.getSize(kC),d=Math.min(h.x,h.y,h.z);Math.max(h.x,h.y,h.z)<100*d||this.markBakedShadow(c)})}checkBakedShadows(){const{min:r,max:s}=this.boundingBox,a=new ut;this.boundingBox.getSize(this.size);for(const c of this.bakedShadows)a.setFromObject(c),a.min.y<r.y+this.size.y/100&&a.min.x<=r.x&&a.max.x>=s.x&&a.min.z<=r.z&&a.max.z>=s.z||a.min.z<r.z+this.size.z/100&&a.min.x<=r.x&&a.max.x>=s.x&&a.min.y<=r.y&&a.max.y>=s.y||this.unmarkBakedShadow(c)}updateBoundingBox(){if(this.target.remove(this.modelContainer),this.findBakedShadows(this.modelContainer),!0===this.tightBounds){const r=(s,a)=>s.expandByPoint(a);this.setBakedShadowVisibility(!1),this.boundingBox=vg(this.modelContainer,r,new ut),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(s=>this.unmarkBakedShadow(s)),this.boundingBox=vg(this.modelContainer,r,new ut)),this.checkBakedShadows(),this.setBakedShadowVisibility()}else this.boundingBox.setFromObject(this.modelContainer);this.boundingBox.getSize(this.size),this.target.add(this.modelContainer)}updateFraming(){var r=this;return(0,Y.Z)(function*(){r.target.remove(r.modelContainer),r.setBakedShadowVisibility(!1);const{center:s}=r.boundingSphere;!0===r.tightBounds?(r.element.requestUpdate("cameraTarget"),yield r.element.updateComplete,s.copy(r.getTarget())):r.boundingBox.getCenter(s),r.boundingSphere.radius=Math.sqrt(vg(r.modelContainer,(a,c)=>Math.max(a,s.distanceToSquared(c)),0)),r.idealAspect=vg(r.modelContainer,(a,c)=>{c.sub(s);const h=Math.sqrt(c.x*c.x+c.z*c.z);return Math.max(a,h/(r.idealCameraDistance()-Math.abs(c.y)))},0)/Math.tan(r.framedFoVDeg/2*Math.PI/180),r.setBakedShadowVisibility(),r.target.add(r.modelContainer)})()}setBakedShadowVisibility(r=this.shadowIntensity<=0){for(const s of this.bakedShadows)s.visible=r}idealCameraDistance(){const r=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(r)}adjustedFoV(r){const s=Math.tan(r/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(s)*180/Math.PI}getNDC(r,s){if(null!=this.xrCamera)Yi.set(r/window.screen.width,s/window.screen.height);else{const a=this.element.getBoundingClientRect();Yi.set((r-a.x)/this.width,(s-a.y)/this.height)}return Yi.multiplyScalar(2).subScalar(1),Yi.y*=-1,Yi}getSize(){return{width:this.width,height:this.height}}setTarget(r,s,a){this.goalTarget.set(-r,-s,-a)}setTargetDamperDecayTime(r){this.targetDamperX.setDecayTime(r),this.targetDamperY.setDecayTime(r),this.targetDamperZ.setDecayTime(r)}getTarget(){return kC.copy(this.goalTarget).multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(r){const s=this.goalTarget,a=this.target.position;if(s.equals(a))return!1;{const c=this.boundingSphere.radius/10;let{x:h,y:d,z:m}=a;return h=this.targetDamperX.update(h,s.x,r,c),d=this.targetDamperY.update(d,s.y,r,c),m=this.targetDamperZ.update(m,s.z,r,c),this.target.position.set(h,d,m),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(r,s){const{x:a,z:c}=this.position;this.yaw=Math.atan2(r-a,s-c)}set yaw(r){this.rotation.y=r,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(r){this.mixer.setTime(r),this.queueShadowRender()}get animationTime(){if(null!=this.currentAnimationAction){const r=Math.max(this.currentAnimationAction._loopCount,0);return 2202===this.currentAnimationAction.loop&&1==(1&r)?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(r){this.mixer.timeScale=r}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(r=null,s=0,a=2201,c=1/0){if(null==this._currentGLTF)return;const{animations:h}=this;if(null==h||0===h.length)return void console.warn("Cannot play animation (model does not have any animations)");let d=null;if(null!=r&&(d=this.animationsByName.get(r),null==d)){const m=parseInt(r);!isNaN(m)&&m>=0&&m<h.length&&(d=h[m])}null==d&&(d=h[0]);try{const{currentAnimationAction:m}=this,g=this.mixer.clipAction(d,this);this.currentAnimationAction=g,this.element.paused?this.mixer.stopAllAction():(g.paused=!1,null!=m&&g!==m?g.crossFadeFrom(m,s,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),g.setLoop(a,c),g.enabled=!0,g.clampWhenFinished=!0,g.play()}catch(m){console.error(m)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(r){this.mixer.update(r),this.queueShadowRender()}subscribeMixerEvent(r,s){this.mixer.addEventListener(r,s)}updateShadow(){const r=this.shadow;null!=r&&(r.setScene(this,this.shadowSoftness,"wall"===this.element.arPlacement?"back":"bottom"),r.needsUpdate=!0)}renderShadow(r){const s=this.shadow;null!=s&&1==s.needsUpdate&&(s.render(r,this),s.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(r){this.shadowIntensity=r,null==this._currentGLTF||(this.setBakedShadowVisibility(),r<=0&&null==this.shadow)||(null==this.shadow&&(this.shadow=new RC(this,this.shadowSoftness,"wall"===this.element.arPlacement?"back":"bottom")),this.shadow.setIntensity(r))}setShadowSoftness(r){this.shadowSoftness=r,this.shadow?.setSoftness(r)}setShadowOffset(r){this.shadow?.setOffset(r)}get raycaster(){return ax}positionAndNormalFromPoint(r,s=this){this.raycaster.setFromCamera(r,this.getCamera());const a=this.raycaster.intersectObject(s,!0).find(c=>!c.object.userData.shadow);return null==a||null==a.face?null:null==a.uv?{position:a.point,normal:a.face.normal,uv:null}:(a.face.normal.applyNormalMatrix((new vt).getNormalMatrix(a.object.matrixWorld)),{position:a.point,normal:a.face.normal,uv:a.uv})}addHotspot(r){this.target.add(r),this.annotationRenderer.domElement.appendChild(r.element)}removeHotspot(r){this.target.remove(r)}forHotspots(r){const{children:s}=this.target;for(let a=0,c=s.length;a<c;a++){const h=s[a];h instanceof ox&&r(h)}}updateHotspots(r){this.forHotspots(s=>{Jv.copy(r),IC.setFromMatrixPosition(s.matrixWorld),Jv.sub(IC),PC.copy(s.normal).transformDirection(this.target.matrixWorld),Jv.dot(PC)<0?s.hide():s.show()})}orientHotspots(r){this.forHotspots(s=>{s.orient(r)})}setHotspotsVisibility(r){this.forHotspots(s=>{s.visible=r})}updateSchema(r){var s;const{schemaElement:a,element:c}=this,{alt:h,poster:d,iosSrc:m}=c;if(null!=r){const g=[{"@type":"MediaObject",contentUrl:r,encodingFormat:"gltf"===(null===(s=r.split(".").pop())||void 0===s?void 0:s.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];m&&g.push({"@type":"MediaObject",contentUrl:m,encodingFormat:"model/vnd.usdz+zip"}),a.textContent=JSON.stringify({"@context":"http://schema.org/","@type":"3DModel",image:d??void 0,name:h??void 0,encoding:g}),document.head.appendChild(a)}else null!=a.parentElement&&a.parentElement.removeChild(a)}}var Ou=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const tp=Symbol("currentEnvironmentMap"),np=Symbol("applyEnvironmentMap"),yg=Symbol("updateEnvironment"),kl=Symbol("cancelEnvironmentUpdate"),ey=Symbol("onPreload");class lx{constructor(r,s,a,c,h){this.xrLight=r,this.renderer=s,this.lightProbe=a,this.xrWebGLBinding=null,this.estimationStartCallback=h,this.frameCallback=this.onXRFrame.bind(this);const d=s.xr.getSession();if(c&&"XRWebGLBinding"in window){const m=new cf(16);r.environment=m.texture;const g=s.getContext();switch(d.preferredReflectionFormat){case"srgba8":g.getExtension("EXT_sRGB");break;case"rgba16f":g.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(d,g),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}d.requestAnimationFrame(this.frameCallback)}updateReflection(){const r=this.renderer.properties.get(this.xrLight.environment);if(r){const s=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);s&&(r.__webglTexture=s,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(r,s){if(!this.xrLight)return;s.session.requestAnimationFrame(this.frameCallback);const a=s.getLightEstimate(this.lightProbe);if(a){this.xrLight.lightProbe.sh.fromArray(a.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const c=Math.max(1,Math.max(a.primaryLightIntensity.x,Math.max(a.primaryLightIntensity.y,a.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(a.primaryLightIntensity.x/c,a.primaryLightIntensity.y/c,a.primaryLightIntensity.z/c),this.xrLight.directionalLight.intensity=c,this.xrLight.directionalLight.position.copy(a.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class ty extends bl{constructor(r,s=!0){super(),this.lightProbe=new Of,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new Ev,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let a=null,c=!1;r.xr.addEventListener("sessionstart",()=>{const h=r.xr.getSession();"requestLightProbe"in h&&h.requestLightProbe({reflectionFormat:h.preferredReflectionFormat}).then(d=>{a=new lx(this,r,d,s,()=>{c=!0,this.dispatchEvent({type:"estimationstart"})})})}),r.xr.addEventListener("sessionend",()=>{a&&(a.dispose(),a=null),c&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{a&&(a.dispose(),a=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}const ny=Math.PI/24,ry=new Me,iy=(f,r,s)=>{let a=r>0?s>0?0:-Math.PI/2:s>0?Math.PI/2:Math.PI;for(let c=0;c<=12;++c)f.push(r+.17*Math.cos(a),s+.17*Math.sin(a),0,r+.2*Math.cos(a),s+.2*Math.sin(a),0),a+=ny};class Fu extends xt{constructor(r,s){const a=new Xr,c=[],h=[],{size:d,boundingBox:m}=r,g=d.x/2,y=("back"===s?d.y:d.z)/2;iy(h,g,y),iy(h,-g,y),iy(h,-g,-y),iy(h,g,-y);const b=h.length/3;for(let E=0;E<b-2;E+=2)c.push(E,E+1,E+3,E,E+3,E+2);const w=b-2;c.push(w,w+1,1,w,1,0),a.setAttribute("position",new wn(h,3)),a.setIndex(c),super(a),this.side=s;const x=this.material;switch(x.side=0,x.transparent=!0,x.opacity=0,this.goalOpacity=0,this.opacityDamper=new no,this.hitPlane=new xt(new Nh(2*(g+.2),2*(y+.2))),this.hitPlane.visible=!1,this.add(this.hitPlane),m.getCenter(this.position),s){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=m.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=m.min.z,this.position.z=this.shadowHeight}r.target.add(this),this.offsetHeight=0}getHit(r,s,a){ry.set(s,-a),this.hitPlane.visible=!0;const c=r.positionAndNormalFromPoint(ry,this.hitPlane);return this.hitPlane.visible=!1,null==c?null:c.position}getExpandedHit(r,s,a){this.hitPlane.scale.set(1e3,1e3,1e3);const c=this.getHit(r,s,a);return this.hitPlane.scale.set(1,1,1),c}set offsetHeight(r){r-=.001,"back"===this.side?this.position.z=this.shadowHeight+r:this.position.y=this.shadowHeight+r}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(r){this.goalOpacity=r?.75:0}updateOpacity(r){const s=this.material;s.opacity=this.opacityDamper.update(s.opacity,this.goalOpacity,r,1),this.visible=s.opacity>0}dispose(){var r;const{geometry:s,material:a}=this.hitPlane;s.dispose(),a.dispose(),this.geometry.dispose(),this.material.dispose(),null===(r=this.parent)||void 0===r||r.remove(this)}}const cd="not-presenting",sy="session-started",cx="tracking",_g=new F,OC=new mt,FC=new F,BC=new Vi(45,1,.1,100);class ux extends U{constructor(r){super(),this.renderer=r,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.oldBackground=null,this.oldEnvironment=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new F,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new F,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new F,this.goalYaw=0,this.goalScale=1,this.xDamper=new no,this.yDamper=new no,this.zDamper=new no,this.yawDamper=new no,this.scaleDamper=new no,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new Fu(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=s=>{const a=this.transientHitTestSource;if(null==a)return;const c=this.frame.getHitTestResultsForTransientInput(a),h=this.presentedScene,d=this.placementBox;if(1===c.length){this.inputSource=s.inputSource;const{axes:m}=this.inputSource.gamepad,g=d.getHit(this.presentedScene,m[0],m[1]);d.show=!0,null!=g?(this.isTranslating=!0,this.lastDragPosition.copy(g)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=1.5*m[0])}else if(2===c.length){d.show=!0,this.isTwoFingering=!0;const{separation:m}=this.fingerPolar(c);this.firstRatio=m/h.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=r.threeRenderer,this.threeRenderer.xr.enabled=!0}resolveARSession(){var r=this;return(0,Y.Z)(function*(){nx();const s=yield navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:{root:r.overlay}});return r.threeRenderer.xr.setReferenceSpaceType("local"),yield r.threeRenderer.xr.setSession(s),r.threeRenderer.xr.cameraAutoUpdate=!1,s})()}get presentedScene(){return this._presentedScene}supportsPresentation(){return(0,Y.Z)(function*(){try{return nx(),yield navigator.xr.isSessionSupported("immersive-ar")}catch(r){return console.warn("Request to present in WebXR denied:"),console.warn(r),console.warn("Falling back to next ar-mode"),!1}})()}present(r,s=!1){var a=this;return(0,Y.Z)(function*(){a.isPresenting&&console.warn("Cannot present while a model is already presenting");let c=new Promise((b,w)=>{requestAnimationFrame(()=>b())});r.setHotspotsVisibility(!1),r.queueRender(),yield c,a._presentedScene=r,a.overlay=r.element.shadowRoot.querySelector("div.default"),!0===s&&(a.xrLight=new ty(a.threeRenderer),a.xrLight.addEventListener("estimationstart",()=>{if(!a.isPresenting||null==a.xrLight)return;const b=a.presentedScene;b.add(a.xrLight),a.oldEnvironment=b.environment,b.environment=a.xrLight.environment}));const h=yield a.resolveARSession();h.addEventListener("end",()=>{a.postSessionCleanup()},{once:!0});const d=r.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");d.classList.add("enabled"),d.addEventListener("click",a.onExitWebXRButtonContainerClick),a.exitWebXRButtonContainer=d;const m=yield h.requestReferenceSpace("viewer");a.tracking=!0,a.frames=0,a.initialized=!1,a.turntableRotation=r.yaw,a.goalYaw=r.yaw,a.goalScale=1,a.oldBackground=r.background,r.background=null,a.oldShadowIntensity=r.shadowIntensity,r.setShadowIntensity(.01),a.oldTarget.copy(r.getTarget()),r.addEventListener("model-load",a.onUpdateScene);const g=20*Math.PI/180,y=!0===a.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(g),z:-Math.cos(g)});h.requestHitTestSource({space:m,offsetRay:y}).then(b=>{a.initialHitSource=b}),a.currentSession=h,a.placementBox=new Fu(r,a.placeOnWall?"back":"bottom"),a.placementComplete=!1,a.lastTick=performance.now(),a.dispatchEvent({type:"status",status:sy})})()}stopPresenting(){var r=this;return(0,Y.Z)(function*(){if(!r.isPresenting)return;const s=new Promise(a=>{r.resolveCleanup=a});try{yield r.currentSession.end(),yield s}catch(a){console.warn("Error while trying to end WebXR AR session"),console.warn(a),r.postSessionCleanup()}})()}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){const r=this.presentedScene;if(null!=r){const s=r.getTarget();this.oldTarget.copy(s),this.placeOnWall?s.z=r.boundingBox.min.z:s.y=r.boundingBox.min.y,r.setTarget(s.x,s.y,s.z)}}postSessionCleanup(){const r=this.currentSession;null!=r&&(r.removeEventListener("selectstart",this.onSelectStart),r.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const s=this.presentedScene;if(null!=s){const{element:d}=s;null!=this.xrLight&&(s.remove(this.xrLight),null!=this.oldEnvironment&&(s.environment=this.oldEnvironment,this.oldEnvironment=null),this.xrLight.dispose(),this.xrLight=null),s.position.set(0,0,0),s.scale.set(1,1,1),s.setShadowOffset(0);const m=this.turntableRotation;null!=m&&(s.yaw=m);const g=this.oldShadowIntensity;null!=g&&s.setShadowIntensity(g);const y=this.oldBackground;null!=y&&(s.background=y);const b=this.oldTarget;s.setTarget(b.x,b.y,b.z),s.xrCamera=null,s.removeEventListener("model-load",this.onUpdateScene),s.orientHotspots(0),d.requestUpdate("cameraTarget"),d.requestUpdate("maxCameraOrbit"),d[Ig](d.getBoundingClientRect())}this.renderer.height=0;const a=this.exitWebXRButtonContainer;null!=a&&(a.classList.remove("enabled"),a.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const c=this.transientHitTestSource;null!=c&&(c.cancel(),this.transientHitTestSource=null);const h=this.initialHitSource;null!=h&&(h.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.oldBackground=null,this._presentedScene=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:cd})}updateView(r){const s=this.presentedScene,a=this.threeRenderer.xr;a.updateCamera(BC),s.xrCamera=a.getCamera();const{elements:c}=s.getCamera().matrixWorld;s.orientHotspots(Math.atan2(c[1],c[5])),this.initialized||(this.placeInitially(),this.initialized=!0),r.requestViewportScale&&r.recommendedViewportScale&&r.requestViewportScale(Math.max(r.recommendedViewportScale,.25));const h=this.currentSession.renderState.baseLayer.getViewport(r);this.threeRenderer.setViewport(h.x,h.y,h.width,h.height)}placeInitially(){const r=this.presentedScene,{position:s,element:a}=r,c=r.getCamera(),{width:h,height:d}=this.overlay.getBoundingClientRect();r.setSize(h,d),c.projectionMatrixInverse.copy(c.projectionMatrix).invert();const{theta:m,radius:g}=a.getCameraOrbit(),y=c.getWorldDirection(_g);r.yaw=Math.atan2(-y.x,-y.z)-m,this.goalYaw=r.yaw,s.copy(c.position).add(y.multiplyScalar(g)),this.updateTarget();const b=r.getTarget();s.add(b).sub(this.oldTarget),this.goalPosition.copy(s),r.setHotspotsVisibility(!0);const{session:w}=this.frame;w.addEventListener("selectstart",this.onSelectStart),w.addEventListener("selectend",this.onSelectEnd),w.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(x=>{this.transientHitTestSource=x})}getTouchLocation(){const{axes:r}=this.inputSource.gamepad;let s=this.placementBox.getExpandedHit(this.presentedScene,r[0],r[1]);return null!=s&&(_g.copy(s).sub(this.presentedScene.getCamera().position),_g.length()>10)?null:s}getHitPoint(r){const s=this.threeRenderer.xr.getReferenceSpace(),a=r.getPose(s);if(null==a)return null;const c=OC.fromArray(a.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(c.elements[4],c.elements[6])),c.elements[5]>.75!==this.placeOnWall?FC.setFromMatrixPosition(c):null}moveToFloor(r){const s=this.initialHitSource;if(null==s)return;const a=r.getHitTestResults(s);if(0==a.length)return;const h=this.getHitPoint(a[0]);null!=h&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(h):this.goalPosition.y=h.y),s.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:"object-placed"}))}fingerPolar(r){const s=r[0].inputSource.gamepad.axes,a=r[1].inputSource.gamepad.axes,c=a[0]-s[0],h=a[1]-s[1],d=Math.atan2(h,c);let m=this.lastAngle-d;return m>Math.PI?m-=2*Math.PI:m<-Math.PI&&(m+=2*Math.PI),this.lastAngle=d,{separation:Math.sqrt(c*c+h*h),deltaYaw:m}}processInput(r){const s=this.transientHitTestSource;if(null==s||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const a=r.getHitTestResultsForTransientInput(s),c=this.presentedScene,h=c.scale.x;if(this.isTwoFingering)if(a.length<2)this.isTwoFingering=!1;else{const{separation:d,deltaYaw:m}=this.fingerPolar(a);if(!1===this.placeOnWall&&(this.goalYaw+=m),c.canScale){const g=d/this.firstRatio;this.goalScale=g<1.3&&g>.7692307692307692?1:g}}else if(2!==a.length)if(this.isRotating){const d=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=d-this.lastAngle,this.lastAngle=d}else this.isTranslating&&a.forEach(d=>{if(d.inputSource!==this.inputSource)return;let m=null;if(d.results.length>0&&(m=this.getHitPoint(d.results[0])),null==m&&(m=this.getTouchLocation()),null!=m){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){const g=m.y-this.lastDragPosition.y;if(g<0){this.placementBox.offsetHeight=g/h,this.presentedScene.setShadowOffset(g);const y=_g.copy(c.getCamera().position),b=-g/(y.y-m.y);y.multiplyScalar(b),m.multiplyScalar(1-b).add(y)}}this.goalPosition.add(m),this.lastDragPosition.copy(m)}});else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:d}=this.fingerPolar(a);this.firstRatio=d/h}}moveScene(r){const s=this.presentedScene,{position:a,yaw:c}=s,h=s.boundingSphere.radius,d=this.goalPosition,m=s.scale.x,g=this.placementBox;if(!d.equals(a)||this.goalScale!==m){let{x:y,y:b,z:w}=a;y=this.xDamper.update(y,d.x,r,h),b=this.yDamper.update(b,d.y,r,h),w=this.zDamper.update(w,d.z,r,h),a.set(y,b,w);const x=this.scaleDamper.update(m,this.goalScale,r,1);if(s.scale.set(x,x,x),!this.isTranslating){const E=d.y-b;this.placementComplete&&!1===this.placeOnWall?(g.offsetHeight=E/x,s.setShadowOffset(E)):0===E&&(this.placementComplete=!0,g.show=!1,s.setShadowIntensity(.8))}}g.updateOpacity(r),s.updateTarget(r),s.yaw=this.yawDamper.update(c,this.goalYaw,r,Math.PI)}onWebXRFrame(r,s){this.frame=s,++this.frames;const a=this.threeRenderer.xr.getReferenceSpace(),c=s.getViewerPose(a);null==c&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:"not-tracking"}));const h=this.presentedScene;if(null==c||null==h||!h.element[ko]())return void this.threeRenderer.clear();!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:cx}));let d=!0;for(const m of c.views){if(this.updateView(m),d){this.moveToFloor(s),this.processInput(s);const g=r-this.lastTick;this.moveScene(g),this.renderer.preRender(h,r,g),this.lastTick=r,h.renderShadow(this.threeRenderer)}this.threeRenderer.render(h,h.getCamera()),d=!1}}}class ay{constructor(r){r.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:r,THREE:{ShaderMaterial:An,Texture:q,Mesh:xt,Scene:ta,PlaneBufferGeometry:Nh,OrthographicCamera:zn,WebGLRenderTarget:K}}}))})}addScene(r){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:r}}))}removeScene(r){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:r}}))}}function hx(f){const r=new Map,s=new Map,a=f.clone();return bg(f,a,function(c,h){r.set(h,c),s.set(c,h)}),a.traverse(function(c){if(!c.isSkinnedMesh)return;const h=c,d=r.get(c),m=d.skeleton.bones;h.skeleton=d.skeleton.clone(),h.bindMatrix.copy(d.bindMatrix),h.skeleton.bones=m.map(function(g){return s.get(g)}),h.bind(h.skeleton,h.bindMatrix)}),a}function bg(f,r,s){s(f,r);for(let a=0;a<f.children.length;a++)bg(f.children[a],r.children[a],s)}const dx=Symbol("prepared"),wg=Symbol("prepare"),ha=Symbol("preparedGLTF"),rp=Symbol("clone");class Bu{constructor(r){this[ha]=r}static prepare(r){if(null==r.scene)throw new Error("Model does not have a scene");if(r[dx])return r;const s=this[wg](r);return s[dx]=!0,s}static[wg](r){const{scene:s}=r,a=[s];return Object.assign(Object.assign({},r),{scene:s,scenes:a})}get parser(){return this[ha].parser}get animations(){return this[ha].animations}get scene(){return this[ha].scene}get scenes(){return this[ha].scenes}get cameras(){return this[ha].cameras}get asset(){return this[ha].asset}get userData(){return this[ha].userData}clone(){return new this.constructor(this[rp]())}dispose(){this.scenes.forEach(r=>{r.traverse(s=>{if(!s.isMesh)return;const a=s;(Array.isArray(a.material)?a.material:[a.material]).forEach(c=>{for(const h in c){const d=c[h];if(d instanceof q){const m=d.source.data;m instanceof ImageBitmap&&m.close(),d.dispose()}}c.dispose()}),a.geometry.dispose()})})}[rp](){const r=this[ha],s=hx(this.scene);fx(s,this.scene);const a=[s],c=r.userData?Object.assign({},r.userData):{};return Object.assign(Object.assign({},r),{scene:s,scenes:a,userData:c})}}const fx=(f,r)=>{ly(f,r,(s,a)=>{void 0!==a.userData.variantMaterials&&(s.userData.variantMaterials=new Map(a.userData.variantMaterials)),void 0!==a.userData.variantData&&(s.userData.variantData=a.userData.variantData),void 0!==a.userData.originalMaterial&&(s.userData.originalMaterial=a.userData.originalMaterial)})},ly=(f,r,s)=>{s(f,r);for(let a=0;a<f.children.length;a++)ly(f.children[a],r.children[a],s)},px=Symbol("threeGLTF"),VC=Symbol("gltf"),ip=Symbol("gltfElementMap"),mx=Symbol("threeObjectMap"),cy=Symbol("parallelTraverseThreeScene"),uy=Symbol("correlateOriginalThreeGLTF"),hy=Symbol("correlateCloneThreeGLTF");class Vu{constructor(r,s,a,c){this[px]=r,this[VC]=s,this[ip]=c,this[mx]=a}static from(r,s){return null!=s?this[hy](r,s):this[uy](r)}static[uy](r){const s=r.parser.json,a=r.parser.associations,c=new Map,h={name:"Default"},d={type:"materials",index:-1};for(const m of a.keys())m instanceof jr&&null==a.get(m)&&(d.index<0&&(null==s.materials&&(s.materials=[]),d.index=s.materials.length,s.materials.push(h)),m.name=h.name,a.set(m,{materials:d.index}));for(const[m,g]of a){if(g){const y=m;y.userData=y.userData||{},y.userData.associations=g}for(const y in g)if(null!=y&&"primitives"!==y){const w=(s[y]||[])[g[y]];if(null==w)continue;let x=c.get(w);null==x&&(x=new Set,c.set(w,x)),x.add(m)}}return new Vu(r,s,a,c)}static[hy](r,s){const a=s.threeGLTF,h=JSON.parse(JSON.stringify(s.gltf)),d=new Map,m=new Map;for(let g=0;g<a.scenes.length;g++)this[cy](a.scenes[g],r.scenes[g],(y,b)=>{const w=s.threeObjectMap.get(y);if(null!=w)for(const x in w)if(null!=x&&"primitives"!==x){const E=x,T=w[E],I=h[E][T],L=d.get(b)||{};L[E]=T,d.set(b,L);const R=m.get(I)||new Set;R.add(b),m.set(I,R)}});return new Vu(r,h,d,m)}static[cy](r,s,a){const c=(h,d)=>{if(a(h,d),h.isObject3D){if(h.isMesh)if(Array.isArray(h.material))for(let m=0;m<h.material.length;++m)c(h.material[m],d.material[m]);else c(h.material,d.material);for(let m=0;m<h.children.length;++m)c(h.children[m],d.children[m])}};c(r,s)}get threeGLTF(){return this[px]}get gltf(){return this[VC]}get gltfElementMap(){return this[ip]}get threeObjectMap(){return this[mx]}}const ud=Symbol("correlatedSceneGraph");class xg extends Bu{static[wg](r){const s=super[wg](r);null==s[ud]&&(s[ud]=Vu.from(s));const{scene:a}=s,c=new Jn(void 0,1/0);return a.traverse(h=>{h.renderOrder=1e3,h.frustumCulled=!1,h.name||(h.name=h.uuid);const d=h;if(d.isMesh){const{geometry:m}=d;d.castShadow=!0,d.isSkinnedMesh&&(m.boundingSphere=c,m.boundingBox=null);const g=d.material;if(!0===g.isMeshBasicMaterial&&(g.toneMapped=!1),g.shadowSide=0,g.aoMap){const{gltf:y,threeObjectMap:b}=s[ud],w=b.get(g);if(null!=y.materials&&null!=w&&null!=w.materials){const x=y.materials[w.materials];x.occlusionTexture&&0===x.occlusionTexture.texCoord&&null!=m.attributes.uv&&m.setAttribute("uv2",m.attributes.uv)}}}}),s}get correlatedSceneGraph(){return this[ha][ud]}[rp](){const r=super[rp](),s=new Map;return r.scene.traverse(a=>{if(a.isMesh){const c=a,h=c.material;if(null!=h){if(s.has(h.uuid))return void(c.material=s.get(h.uuid));c.material=h.clone(),s.set(h.uuid,c.material)}}}),r[ud]=Vu.from(r,this.correlatedSceneGraph),r}}class Mg extends ta{constructor(){super(),this.position.y=-3.5;const r=new ru;r.deleteAttribute("uv");const s=new El({metalness:0,side:1}),a=new El({metalness:0}),c=new mc(16777215,500,28,2);c.position.set(.418,16.199,.3),this.add(c);const h=new xt(r,s);h.position.set(-.757,13.219,.717),h.scale.set(31.713,28.305,28.591),this.add(h);const d=new xt(r,a);d.position.set(-10.906,2.009,1.846),d.rotation.set(0,-.195,0),d.scale.set(2.328,7.905,4.651),this.add(d);const m=new xt(r,a);m.position.set(-5.607,-.754,-.758),m.rotation.set(0,.994,0),m.scale.set(1.97,1.534,3.955),this.add(m);const g=new xt(r,a);g.position.set(6.167,.857,7.803),g.rotation.set(0,.561,0),g.scale.set(3.927,6.285,3.687),this.add(g);const y=new xt(r,a);y.position.set(-2.017,.018,6.124),y.rotation.set(0,.333,0),y.scale.set(2.002,4.566,2.064),this.add(y);const b=new xt(r,a);b.position.set(2.291,-.756,-2.621),b.rotation.set(0,-.286,0),b.scale.set(1.546,1.552,1.496),this.add(b);const w=new xt(r,a);w.position.set(-2.193,-.369,-5.547),w.rotation.set(0,.516,0),w.scale.set(3.875,3.487,2.986),this.add(w);const x=new xt(r,this.createAreaLightMaterial(50));x.position.set(-16.116,14.37,8.208),x.scale.set(.1,2.428,2.739),this.add(x);const E=new xt(r,this.createAreaLightMaterial(50));E.position.set(-16.109,18.021,-8.207),E.scale.set(.1,2.425,2.751),this.add(E);const T=new xt(r,this.createAreaLightMaterial(17));T.position.set(14.904,12.198,-1.832),T.scale.set(.15,4.265,6.331),this.add(T);const I=new xt(r,this.createAreaLightMaterial(43));I.position.set(-.462,8.89,14.52),I.scale.set(4.38,5.441,.088),this.add(I);const L=new xt(r,this.createAreaLightMaterial(20));L.position.set(3.235,11.486,-12.541),L.scale.set(2.5,2,.1),this.add(L);const R=new xt(r,this.createAreaLightMaterial(100));R.position.set(0,20,0),R.scale.set(1,.1,1),this.add(R)}createAreaLightMaterial(r){const s=new Bi;return s.color.setScalar(r),s}}class gx extends ta{constructor(){super(),this.position.y=-3.5;const r=new ru;r.deleteAttribute("uv");const s=new El({metalness:0,side:1}),a=new El({metalness:0}),c=new mc(16777215,400,28,2);c.position.set(.5,14,.5),this.add(c);const h=new xt(r,s);h.position.set(0,13.2,0),h.scale.set(31.5,28.5,31.5),this.add(h);const d=new xt(r,a);d.position.set(-10.906,-1,1.846),d.rotation.set(0,-.195,0),d.scale.set(2.328,7.905,4.651),this.add(d);const m=new xt(r,a);m.position.set(-5.607,-.754,-.758),m.rotation.set(0,.994,0),m.scale.set(1.97,1.534,3.955),this.add(m);const g=new xt(r,a);g.position.set(6.167,-.16,7.803),g.rotation.set(0,.561,0),g.scale.set(3.927,6.285,3.687),this.add(g);const y=new xt(r,a);y.position.set(-2.017,.018,6.124),y.rotation.set(0,.333,0),y.scale.set(2.002,4.566,2.064),this.add(y);const b=new xt(r,a);b.position.set(2.291,-.756,-2.621),b.rotation.set(0,-.286,0),b.scale.set(1.546,1.552,1.496),this.add(b);const w=new xt(r,a);w.position.set(-2.193,-.369,-5.547),w.rotation.set(0,.516,0),w.scale.set(3.875,3.487,2.986),this.add(w);const x=new xt(r,this.createAreaLightMaterial(80));x.position.set(-14,10,8),x.scale.set(.1,2.5,2.5),this.add(x);const E=new xt(r,this.createAreaLightMaterial(80));E.position.set(-14,14,-4),E.scale.set(.1,2.5,2.5),this.add(E);const T=new xt(r,this.createAreaLightMaterial(23));T.position.set(14,12,0),T.scale.set(.1,5,5),this.add(T);const I=new xt(r,this.createAreaLightMaterial(16));I.position.set(0,9,14),I.scale.set(5,5,.1),this.add(I);const L=new xt(r,this.createAreaLightMaterial(80));L.position.set(7,8,-14),L.scale.set(2.5,2.5,.1),this.add(L);const R=new xt(r,this.createAreaLightMaterial(80));R.position.set(-7,16,-14),R.scale.set(2.5,2.5,.1),this.add(R);const $=new xt(r,this.createAreaLightMaterial(1));$.position.set(0,20,0),$.scale.set(.1,.1,.1),this.add($)}createAreaLightMaterial(r){const s=new Bi;return s.color.setScalar(r),s}}const dy=/\.hdr(\.js)?$/,vx=new $m,Eg=new class extends KS{constructor(f){super(f),this.type=1016}parse(f){const r=function(m,g){switch(m){case 1:console.error("THREE.RGBELoader Read Error: "+(g||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(g||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(g||""));break;default:console.error("THREE.RGBELoader: Error: "+(g||""))}return-1},s=function(m,g,y){g=g||1024;let b=m.pos,w=-1,x=0,E="",T=String.fromCharCode.apply(null,new Uint16Array(m.subarray(b,b+128)));for(;0>(w=T.indexOf("\n"))&&x<g&&b<m.byteLength;)E+=T,x+=T.length,b+=128,T+=String.fromCharCode.apply(null,new Uint16Array(m.subarray(b,b+128)));return-1<w&&(!1!==y&&(m.pos+=x+w+1),E+T.slice(0,w))},a=function(m,g,y,b){const x=Math.pow(2,m[g+3]-128)/255;y[b+0]=m[g+0]*x,y[b+1]=m[g+1]*x,y[b+2]=m[g+2]*x,y[b+3]=1},c=function(m,g,y,b){const x=Math.pow(2,m[g+3]-128)/255;y[b+0]=Qm.toHalfFloat(Math.min(m[g+0]*x,65504)),y[b+1]=Qm.toHalfFloat(Math.min(m[g+1]*x,65504)),y[b+2]=Qm.toHalfFloat(Math.min(m[g+2]*x,65504)),y[b+3]=Qm.toHalfFloat(1)},h=new Uint8Array(f);h.pos=0;const d=function(m){const g=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*FORMAT=(\S+)\s*$/,w=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,x={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let E,T;if(m.pos>=m.byteLength||!(E=s(m)))return r(1,"no header found");if(!(T=E.match(/^#\?(\S+)/)))return r(3,"bad initial token");for(x.valid|=1,x.programtype=T[1],x.string+=E+"\n";E=s(m),!1!==E;)if(x.string+=E+"\n","#"!==E.charAt(0)){if((T=E.match(g))&&(x.gamma=parseFloat(T[1])),(T=E.match(y))&&(x.exposure=parseFloat(T[1])),(T=E.match(b))&&(x.valid|=2,x.format=T[1]),(T=E.match(w))&&(x.valid|=4,x.height=parseInt(T[1],10),x.width=parseInt(T[2],10)),2&x.valid&&4&x.valid)break}else x.comments+=E+"\n";return 2&x.valid?4&x.valid?x:r(3,"missing image size specifier"):r(3,"missing format specifier")}(h);if(-1!==d){const m=d.width,g=d.height,y=function(b,w,x){const E=w;if(E<8||E>32767||2!==b[0]||2!==b[1]||128&b[2])return new Uint8Array(b);if(E!==(b[2]<<8|b[3]))return r(3,"wrong scanline width");const T=new Uint8Array(4*w*x);if(!T.length)return r(4,"unable to allocate buffer space");let I=0,L=0;const R=4*E,$=new Uint8Array(4),B=new Uint8Array(R);let G=x;for(;G>0&&L<b.byteLength;){if(L+4>b.byteLength)return r(1);if($[0]=b[L++],$[1]=b[L++],$[2]=b[L++],$[3]=b[L++],2!=$[0]||2!=$[1]||($[2]<<8|$[3])!=E)return r(3,"bad rgbe scanline format");let z,J=0;for(;J<R&&L<b.byteLength;){z=b[L++];const le=z>128;if(le&&(z-=128),0===z||J+z>R)return r(3,"bad scanline data");if(le){const oe=b[L++];for(let de=0;de<z;de++)B[J++]=oe}else B.set(b.subarray(L,L+z),J),J+=z,L+=z}const te=E;for(let le=0;le<te;le++){let oe=0;T[I]=B[le+oe],oe+=E,T[I+1]=B[le+oe],oe+=E,T[I+2]=B[le+oe],oe+=E,T[I+3]=B[le+oe],I+=4}G--}return T}(h.subarray(h.pos),m,g);if(-1!==y){let b,w,x,E;switch(this.type){case 1015:E=y.length/4;const T=new Float32Array(4*E);for(let L=0;L<E;L++)a(y,4*L,T,4*L);b=T,x=1015;break;case 1016:E=y.length/4;const I=new Uint16Array(4*E);for(let L=0;L<E;L++)c(y,4*L,I,4*L);b=I,x=1016;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:m,height:g,data:b,header:d.string,gamma:d.gamma,exposure:d.exposure,format:w,type:x}}}return null}setDataType(f){return this.type=f,this}load(f,r,s,a){return super.load(f,function(c,h){switch(c.type){case 1015:case 1016:c.encoding=3e3,c.minFilter=1006,c.magFilter=1006,c.generateMipmaps=!1,c.flipY=!0}r&&r(c,h)},s,a)}};Eg.setDataType(1016);class hd extends U{constructor(r){super(),this.threeRenderer=r,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}load(r,s=(()=>{})){return(0,Y.Z)(function*(){try{const a=dy.test(r),c=a?Eg:vx,h=yield new Promise((d,m)=>c.load(r,d,g=>{s(g.loaded/g.total*.9)},m));return s(1),h.name=r,h.mapping=303,a||(h.encoding=3001),h}finally{s&&s(1)}})()}generateEnvironmentMapAndSkybox(r=null,s=null,a={}){var c=this;return(0,Y.Z)(function*(){const{progressTracker:h}=a,d="neutral"===s;!0===d&&(s=null),s=tx(s);let m,g=Promise.resolve(null);r&&(g=c.loadEquirectFromUrl(r,h)),m=s?c.loadEquirectFromUrl(s,h):r?c.loadEquirectFromUrl(r,h):!0===d?c.loadGeneratedEnvironmentMapAlt():c.loadGeneratedEnvironmentMap();let[y,b]=yield Promise.all([m,g]);if(null==y)throw new Error("Failed to load environment map.");return{environmentMap:y,skybox:b}})()}loadEquirectFromUrl(r,s){var a=this;return(0,Y.Z)(function*(){if(!a.skyboxCache.has(r)){const c=s?s.beginActivity():()=>{},h=a.load(r,c);a.skyboxCache.set(r,h)}return a.skyboxCache.get(r)})()}GenerateEnvironmentMap(r,s){var a=this;return(0,Y.Z)(function*(){yield gg();const c=a.threeRenderer,h=new cf(256,{generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!0}),d=new lf(.1,100,h),m=d.renderTarget.texture;m.name=s;const g=c.outputEncoding,y=c.toneMapping;return c.toneMapping=0,c.outputEncoding=3e3,d.update(c,r),a.blurCubemap(h,.04),c.toneMapping=y,c.outputEncoding=g,m})()}loadGeneratedEnvironmentMap(){var r=this;return(0,Y.Z)(function*(){return null==r.generatedEnvironmentMap&&(r.generatedEnvironmentMap=r.GenerateEnvironmentMap(new Mg,"default")),r.generatedEnvironmentMap})()}loadGeneratedEnvironmentMapAlt(){var r=this;return(0,Y.Z)(function*(){return null==r.generatedEnvironmentMapAlt&&(r.generatedEnvironmentMapAlt=r.GenerateEnvironmentMap(new gx,"neutral")),r.generatedEnvironmentMapAlt})()}blurCubemap(r,s){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(20);const c=new ru,h=new xt(c,this.blurMaterial);this.blurScene=new ta,this.blurScene.add(h)}const a=r.clone();this.halfblur(r,a,s,"latitudinal"),this.halfblur(a,r,s,"longitudinal")}halfblur(r,s,a,c){const h=r.width,d=isFinite(a)?Math.PI/(2*h):2*Math.PI/39,m=a/d,g=isFinite(a)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const y=[];let b=0;for(let x=0;x<20;++x){const E=x/m,T=Math.exp(-E*E/2);y.push(T),0==x?b+=T:x<g&&(b+=2*T)}for(let x=0;x<y.length;x++)y[x]=y[x]/b;const w=this.blurMaterial.uniforms;w.envMap.value=r.texture,w.samples.value=g,w.weights.value=y,w.latitudinal.value="latitudinal"===c,w.dTheta.value=d,new lf(.1,100,s).update(this.threeRenderer,this.blurScene)}getBlurShader(r){const s=new Float32Array(r),a=new F(0,1,0);return new An({name:"SphericalGaussianBlur",defines:{n:r},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:a}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:0,depthTest:!1,depthWrite:!1,side:1})}dispose(){var r=this;return(0,Y.Z)(function*(){for(const[,s]of r.skyboxCache)(yield s).dispose();null!=r.generatedEnvironmentMap&&((yield r.generatedEnvironmentMap).dispose(),r.generatedEnvironmentMap=null),null!=r.generatedEnvironmentMapAlt&&((yield r.generatedEnvironmentMapAlt).dispose(),r.generatedEnvironmentMapAlt=null),null!=r.blurMaterial&&r.blurMaterial.dispose()})()}}const Sg=[1,.79,.62,.5,.4,.31,.25];class $a extends U{constructor(r){super(),this.loader=new Xi(xg),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=22,this.onWebGLContextLost=s=>{this.dispatchEvent({type:"contextlost",sourceEvent:s})},this.onWebGLContextRestored=()=>{var s;null===(s=this.textureUtils)||void 0===s||s.dispose(),this.textureUtils=new hd(this.threeRenderer);for(const a of this.scenes)a.element[yg]()},this.dpr=Kv(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas";try{this.threeRenderer=new un({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:r.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=3001,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=r.debug?new ay(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=4}catch(s){console.warn(s)}this.arRenderer=new ux(this),this.textureUtils=this.canRender?new hd(this.threeRenderer):null,Xi.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize(),this.lastTick=performance.now(),this.avgFrameDuration=0}static get singleton(){return this._singleton}static resetSingleton(){const r=this._singleton.dispose();for(const s of r)s.disconnectedCallback();this._singleton=new $a({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:ws()});for(const s of r)s.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return Sg[this.scaleStep]}set minScale(r){let s=1;for(;s<Sg.length&&!(Sg[s]<r);)++s;this.lastStep=s-1}updateRendererSize(){const r=Kv();if(r!==this.dpr)for(const m of this.scenes){const{element:g}=m;g[Hu](g.getBoundingClientRect())}let s=0,a=0;for(const m of this.scenes)s=Math.max(s,m.width),a=Math.max(a,m.height);if(s===this.width&&a===this.height&&r===this.dpr)return;this.width=s,this.height=a,this.dpr=r,this.canRender&&this.threeRenderer.setSize(s*r,a*r,!1);const c=this.scaleFactor,h=s/c,d=a/c;this.canvas3D.style.width=`${h}px`,this.canvas3D.style.height=`${d}px`;for(const m of this.scenes){const{canvas:g}=m;g.width=Math.round(s*r),g.height=Math.round(a*r),g.style.width=`${h}px`,g.style.height=`${d}px`,m.queueRender()}}updateRendererScale(){const r=this.scaleStep;if(this.avgFrameDuration>26?++this.scaleStep:this.avgFrameDuration<18&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),r==this.scaleStep)return;const s=this.scaleFactor;this.avgFrameDuration=22;const a=this.width/s,c=this.height/s;this.canvas3D.style.width=`${a}px`,this.canvas3D.style.height=`${c}px`;for(const h of this.scenes){const{style:d}=h.canvas;d.width=`${a}px`,d.height=`${c}px`,h.queueRender(),this.dispatchRenderScale(h)}}dispatchRenderScale(r){const s=this.scaleFactor,a=this.dpr*s,c=s<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";r.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:a,minimumDpr:this.dpr*Sg[this.lastStep],pixelWidth:Math.ceil(r.width*a),pixelHeight:Math.ceil(r.height*a),reason:c}}))}registerScene(r){this.scenes.add(r);const{canvas:s}=r,a=this.scaleFactor;s.width=Math.round(this.width*this.dpr),s.height=Math.round(this.height*this.dpr),s.style.width=this.width/a+"px",s.style.height=this.height/a+"px",this.multipleScenesVisible&&s.classList.add("show"),r.queueRender(),this.dispatchRenderScale(r),this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((c,h)=>this.render(c,h)),null!=this.debugger&&this.debugger.addScene(r)}unregisterScene(r){this.scenes.delete(r),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(r)}displayCanvas(r){return this.multipleScenesVisible?r.element[Rg]:this.canvas3D}selectCanvas(){let r=0,s=null;for(const h of this.scenes){const{element:d}=h;d.modelIsVisible&&null==h.externalRenderer&&(++r,s=h.canvas)}if(null==s)return;const a=r>1,{canvas3D:c}=this;if(a!==this.multipleScenesVisible||!a&&c.parentElement!==s.parentElement){this.multipleScenesVisible=a,a&&c.classList.remove("show");for(const h of this.scenes){if(null!=h.externalRenderer)continue;const d=h.element[Rg];a?(d.classList.add("show"),h.queueRender()):h.canvas===s&&(h.canvas.parentElement.appendChild(c),c.classList.add("show"),d.classList.remove("show"),h.queueRender())}}}orderedScenes(){const r=[];for(const s of[!1,!0])for(const a of this.scenes)a.element.modelIsVisible===s&&r.push(a);return r}get isPresenting(){return this.arRenderer.isPresenting}preRender(r,s,a){const{element:c,exposure:h}=r;c[Xa](s,a);const d="number"==typeof h&&!self.isNaN(h);this.threeRenderer.toneMappingExposure=d?h:1}render(r,s){if(null!=s)return void this.arRenderer.onWebXRFrame(r,s);const a=r-this.lastTick;if(this.lastTick=r,!this.canRender||this.isPresenting)return;this.avgFrameDuration+=bc(.2*(a-this.avgFrameDuration),-2,2),this.selectCanvas(),this.updateRendererSize(),this.updateRendererScale();const{dpr:c,scaleFactor:h}=this;for(const d of this.orderedScenes()){const{element:m}=d;if(!m.modelIsVisible&&d.renderCount>0||(this.preRender(d,r,a),!d.shouldRender()))continue;if(null!=d.externalRenderer){const b=d.getCamera();b.updateMatrix();const{matrix:w,projectionMatrix:x}=b,E=w.elements.slice(),T=d.getTarget();E[12]+=T.x,E[13]+=T.y,E[14]+=T.z,d.externalRenderer.render({viewMatrix:E,projectionMatrix:x.elements});continue}if(!m.modelIsVisible&&!this.multipleScenesVisible)for(const b of this.scenes)b.element.modelIsVisible&&b.queueRender();const g=Math.min(Math.ceil(d.width*h*c),this.canvas3D.width),y=Math.min(Math.ceil(d.height*h*c),this.canvas3D.height);if(d.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.floor(this.height*c)-y,g,y),this.threeRenderer.render(d,d.camera),this.multipleScenesVisible){null==d.context&&d.createContext();const b=d.context;b.clearRect(0,0,g,y),b.drawImage(this.canvas3D,0,0,g,y,0,0,g,y)}d.hasRendered(),m.loaded&&++d.renderCount}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const r=[];for(const s of this.scenes)r.push(s.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),r}}$a._singleton=new $a({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:ws()});class UC extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const r={progress:0,completed:!1};return this.ongoingActivities.add(r),1===this.ongoingActivityCount&&this.announceTotalProgress(r,0),s=>{let a;return a=Math.max(bc(s,0,1),r.progress),a!==r.progress&&this.announceTotalProgress(r,a),r.progress}}announceTotalProgress(r,s){let a=0,c=0;1==s&&(r.completed=!0);for(const m of this.ongoingActivities){const{progress:g}=m;a+=1-g,!0===m.completed&&c++}const h=r.progress;r.progress=s,this.totalProgress+=(s-h)*(1-this.totalProgress)/a,this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:c===this.ongoingActivityCount?1:this.totalProgress}})),c===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}var yx,fy,Cg,py,HC,my,_x,gy,bx,wx,Io,xx,Ag=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const Po=document.createElement("canvas"),vy=Symbol("fallbackResizeHandler"),Mx=Symbol("defaultAriaLabel"),Tg=Symbol("resizeObserver"),dd=Symbol("clearModelTimeout"),yy=Symbol("onContextLost"),Uu=Symbol("loaded"),Ex=Symbol("status"),mn=Symbol("onFocus"),ar=Symbol("onBlur"),Hu=Symbol("updateSize"),sp=Symbol("intersectionObserver"),zu=Symbol("isElementInViewport"),Dg=Symbol("announceModelVisibility"),fd=Symbol("ariaLabel"),_y=Symbol("altDefaulted"),pd=Symbol("statusElement"),by=Symbol("updateStatus"),op=Symbol("loadedTime"),Nl=Symbol("updateSource"),wy=Symbol("markLoaded"),md=Symbol("container"),Kr=Symbol("input"),Rg=Symbol("canvas"),Mt=Symbol("scene"),os=Symbol("needsRender"),Xa=Symbol("tick"),Ll=Symbol("onModelLoad"),Ig=Symbol("onResize"),Qr=Symbol("renderer"),gd=Symbol("progressTracker"),xy=Symbol("getLoaded"),My=Symbol("getModelIsVisible"),ju=Symbol("shouldAttemptPreload"),ko=Symbol("sceneIsReady"),vd=Symbol("hasTransitioned"),ap=f=>({x:f.x,y:f.y,z:f.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),Pg=f=>({u:f.x,v:f.y,toString(){return`${this.u} ${this.v}`}});class kg extends gc{constructor(){var r;super(),r=this,this.alt=null,this.src=null,this.withCredentials=!1,this[yx]=!1,this[fy]=!1,this[Cg]=0,this[py]=null,this[HC]=Xv(()=>{const h=this.getBoundingClientRect();this[Hu](h)},50),this[my]=Xv(h=>{const d=this.modelIsVisible;d!==h&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:d}}))},0),this[_x]=null,this[gy]=null,this[bx]=new UC,this[wx]=()=>{this[pd].textContent=this[Ex]},this[Io]=()=>{this[pd].textContent=""},this[xx]=h=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:h.sourceEvent}}))},this.attachShadow({mode:"open"});const s=this.shadowRoot;let a,c;if(sC(lC,s),this[md]=s.querySelector(".container"),this[Kr]=s.querySelector(".userInput"),this[Rg]=s.querySelector("canvas"),this[pd]=s.querySelector("#status"),this[Mx]=this[Kr].getAttribute("aria-label"),this.isConnected){const h=this.getBoundingClientRect();a=h.width,c=h.height}else a=300,c=150;this[Mt]=new Qv({canvas:this[Rg],element:this,width:a,height:c}),this[Mt].addEventListener("model-load",function(){var h=(0,Y.Z)(function*(d){r[wy](),r[Ll](),yield gg(),r.dispatchEvent(new CustomEvent("load",{detail:{url:d.url}}))});return function(d){return h.apply(this,arguments)}}()),Promise.resolve().then(()=>{this[Hu](this.getBoundingClientRect())}),Pv&&(this[Tg]=new ResizeObserver(h=>{if(!this[Qr].isPresenting)for(let d of h)d.target===this&&this[Hu](d.contentRect)})),kv?this[sp]=new IntersectionObserver(h=>{for(let d of h)if(d.target===this){const m=this.modelIsVisible;this[zu]=d.isIntersecting,this[Dg](m),this[zu]&&!this[ko]()&&this[Nl]()}},{root:null,rootMargin:"0px",threshold:0}):this[zu]=!0}static get is(){return"model-viewer"}static set modelCacheSize(r){Xi[bs].evictionThreshold=r}static get modelCacheSize(){return Xi[bs].evictionThreshold}static set minimumRenderScale(r){r>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),r<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),$a.singleton.minScale=r}static get minimumRenderScale(){return $a.singleton.minScale}get loaded(){return this[xy]()}get[(yx=zu,fy=Uu,Cg=op,py=dd,HC=vy,my=Dg,_x=Tg,gy=sp,bx=gd,Qr)](){return $a.singleton}get modelIsVisible(){return this[My]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),Pv?this[Tg].observe(this):self.addEventListener("resize",this[vy]),kv&&this[sp].observe(this),this.addEventListener("focus",this[mn]),this.addEventListener("blur",this[ar]);const r=this[Qr];r.addEventListener("contextlost",this[yy]),r.registerScene(this[Mt]),null!=this[dd]&&(self.clearTimeout(this[dd]),this[dd]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Pv?this[Tg].unobserve(this):self.removeEventListener("resize",this[vy]),kv&&this[sp].unobserve(this),this.removeEventListener("focus",this[mn]),this.removeEventListener("blur",this[ar]);const r=this[Qr];r.removeEventListener("contextlost",this[yy]),r.unregisterScene(this[Mt]),this[dd]=self.setTimeout(()=>{this[Mt].reset()},1e3)}updated(r){super.updated(r),r.has("src")&&(null==this.src?(this[Uu]=!1,this[op]=0,this[Mt].reset()):this.src!==this[Mt].url&&(this[Uu]=!1,this[op]=0,this[Nl]())),r.has("alt")&&this[Kr].setAttribute("aria-label",this[fd]),r.has("withCredentials")&&(Xi.withCredentials=this.withCredentials)}toDataURL(r,s){return this[Qr].displayCanvas(this[Mt]).toDataURL(r,s)}toBlob(r){var s=this;return(0,Y.Z)(function*(){const a=r?r.mimeType:void 0,c=r?r.qualityArgument:void 0,h=r?r.idealAspect:void 0,{width:d,height:m,idealAspect:g,aspect:y}=s[Mt],{dpr:b,scaleFactor:w}=s[Qr];let x=d*w*b,E=m*w*b,T=0,I=0;if(!0===h)if(g>y){const L=E;E=Math.round(x/g),I=(L-E)/2}else{const L=x;x=Math.round(E*g),T=(L-x)/2}Po.width=x,Po.height=E;try{return new Promise(function(){var L=(0,Y.Z)(function*(R,$){return Po.getContext("2d").drawImage(s[Qr].displayCanvas(s[Mt]),T,I,x,E,0,0,x,E),!Po.msToBlob||a&&"image/png"!==a?Po.toBlob?void Po.toBlob(B=>{if(!B)return $(new Error("Unable to retrieve canvas blob"));R(B)},a,c):R(yield(B=(0,Y.Z)(function*(G){return new Promise((z,J)=>{const te=G.match(/data:(.*);/);if(!te)return J(new Error(`${G} is not a valid data Url`));const le=te[1],oe=G.replace(/data:image\/\w+;base64,/,""),de=atob(oe),we=[];for(let ke=0;ke<de.length;ke+=512){const je=de.slice(ke,ke+512),me=new Array(je.length);for(let Ne=0;Ne<je.length;Ne++)me[Ne]=je.charCodeAt(Ne);const Ve=new Uint8Array(me);we.push(Ve)}z(new Blob(we,{type:le}))})}),function(G){return B.apply(this,arguments)})(Po.toDataURL(a,c))):R(Po.msToBlob());var B});return function(R,$){return L.apply(this,arguments)}}())}finally{s[Hu]({width:d,height:m})}})()}registerRenderer(r){this[Mt].externalRenderer=r}unregisterRenderer(){this[Mt].externalRenderer=null}get[fd](){return this[_y]}get[_y](){return null==this.alt||"null"===this.alt?this[Mx]:this.alt}[xy](){return this[Uu]}[My](){return this.loaded&&this[zu]}[vd](){return this.modelIsVisible}[ju](){return!!this.src&&this[zu]}[ko](){return this[Uu]}[Hu]({width:r,height:s}){this[md].style.width=`${r}px`,this[md].style.height=`${s}px`,this[Ig]({width:parseFloat(r),height:parseFloat(s)})}[Xa](r,s){}[wy](){this[Uu]||(this[Uu]=!0,this[op]=performance.now())}[os](){this[Mt].queueRender()}[Ll](){}[by](r){this[Ex]=r;const s=this.getRootNode();null!=s&&s.activeElement===this&&this[pd].textContent!=r&&(this[pd].textContent=r)}[(wx=mn,Io=ar,Ig)](r){this[Mt].setSize(r.width,r.height)}[(xx=yy,Nl)](){var r=this;return(0,Y.Z)(function*(){if(r.loaded||!r[ju]())return;const s=r[gd].beginActivity(),a=r.src;try{yield r[Mt].setSource(a,h=>s(.95*h)),r.dispatchEvent(new CustomEvent("preload",{detail:{url:a}}))}catch(c){r.dispatchEvent(new CustomEvent("error",{detail:c}))}finally{requestAnimationFrame(()=>{requestAnimationFrame(()=>{s(1)})})}})()}}Ag([ie({type:String})],kg.prototype,"alt",void 0),Ag([ie({type:String})],kg.prototype,"src",void 0),Ag([ie({type:Boolean,attribute:"with-credentials"})],kg.prototype,"withCredentials",void 0);var Ng=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const Ey=Symbol("changeAnimation"),Ol=Symbol("paused"),zC={repetitions:1/0,pingpong:!1},yd=Symbol("hotspotMap"),Sy=Symbol("mutationCallback"),_d=Symbol("observer"),Cy=Symbol("addHotspot"),Ay=Symbol("removeHotspot"),Lg=new mt,Og=new vt;var jC=function(f){return URL.createObjectURL(new Blob([f],{type:"text/javascript"}))};try{URL.revokeObjectURL(jC(""))}catch{jC=function(r){return"data:application/javascript;charset=UTF-8,"+encodeURI(r)}}var as=Uint8Array,Ls=Uint16Array,lp=Uint32Array,Te=new as([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cp=new as([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ty=new as([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),up=function(f,r){for(var s=new Ls(31),a=0;a<31;++a)s[a]=r+=1<<f[a-1];var c=new lp(s[30]);for(a=1;a<30;++a)for(var h=s[a];h<s[a+1];++h)c[h]=h-s[a]<<5|a;return[s,c]},No=up(Te,2),Dy=No[1];No[0][28]=258,Dy[258]=28;for(var Fg=up(cp,0)[1],da=new Ls(32768),Yr=0;Yr<32768;++Yr){var xc=(43690&Yr)>>>1|(21845&Yr)<<1;xc=(61680&(xc=(52428&xc)>>>2|(13107&xc)<<2))>>>4|(3855&xc)<<4,da[Yr]=((65280&xc)>>>8|(255&xc)<<8)>>>1}var Gu=function(f,r,s){for(var a=f.length,c=0,h=new Ls(r);c<a;++c)++h[f[c]-1];var d,m=new Ls(r);for(c=0;c<r;++c)m[c]=m[c-1]+h[c-1]<<1;if(s){d=new Ls(1<<r);var g=15-r;for(c=0;c<a;++c)if(f[c])for(var y=c<<4|f[c],b=r-f[c],w=m[f[c]-1]++<<b,x=w|(1<<b)-1;w<=x;++w)d[da[w]>>>g]=y}else for(d=new Ls(a),c=0;c<a;++c)f[c]&&(d[c]=da[m[f[c]-1]++]>>>15-f[c]);return d},bd=new as(288);for(Yr=0;Yr<144;++Yr)bd[Yr]=8;for(Yr=144;Yr<256;++Yr)bd[Yr]=9;for(Yr=256;Yr<280;++Yr)bd[Yr]=7;for(Yr=280;Yr<288;++Yr)bd[Yr]=8;var hp=new as(32);for(Yr=0;Yr<32;++Yr)hp[Yr]=5;var vI=Gu(bd,9,0),Bg=Gu(hp,5,0),dp=function(f){return(f/8|0)+(7&f&&1)},Vg=function(f,r,s){(null==r||r<0)&&(r=0),(null==s||s>f.length)&&(s=f.length);var a=new(f instanceof Ls?Ls:f instanceof lp?lp:as)(s-r);return a.set(f.subarray(r,s)),a},fa=function(f,r,s){var a=r/8|0;f[a]|=s<<=7&r,f[a+1]|=s>>>8},Wu=function(f,r,s){var a=r/8|0;f[a]|=s<<=7&r,f[a+1]|=s>>>8,f[a+2]|=s>>>16},Cx=function(f,r){for(var s=[],a=0;a<f.length;++a)f[a]&&s.push({s:a,f:f[a]});var c=s.length,h=s.slice();if(!c)return[Py,0];if(1==c){var d=new as(s[0].s+1);return d[s[0].s]=1,[d,1]}s.sort(function(z,J){return z.f-J.f}),s.push({s:-1,f:25001});var m=s[0],g=s[1],y=0,b=1,w=2;for(s[0]={s:-1,f:m.f+g.f,l:m,r:g};b!=c-1;)m=s[s[y].f<s[w].f?y++:w++],g=s[y!=b&&s[y].f<s[w].f?y++:w++],s[b++]={s:-1,f:m.f+g.f,l:m,r:g};var x=h[0].s;for(a=1;a<c;++a)h[a].s>x&&(x=h[a].s);var E=new Ls(x+1),T=Ry(s[b-1],E,0);if(T>r){a=0;var I=0,L=T-r,R=1<<L;for(h.sort(function(z,J){return E[J.s]-E[z.s]||z.f-J.f});a<c;++a){var $=h[a].s;if(!(E[$]>r))break;I+=R-(1<<T-E[$]),E[$]=r}for(I>>>=L;I>0;){var B=h[a].s;E[B]<r?I-=1<<r-E[B]++-1:++a}for(;a>=0&&I;--a){var G=h[a].s;E[G]==r&&(--E[G],++I)}T=r}return[new as(E),T]},Ry=function(f,r,s){return-1==f.s?Math.max(Ry(f.l,r,s+1),Ry(f.r,r,s+1)):r[f.s]=s},Ax=function(f){for(var r=f.length;r&&!f[--r];);for(var s=new Ls(++r),a=0,c=f[0],h=1,d=function(g){s[a++]=g},m=1;m<=r;++m)if(f[m]==c&&m!=r)++h;else{if(!c&&h>2){for(;h>138;h-=138)d(32754);h>2&&(d(h>10?h-11<<5|28690:h-3<<5|12305),h=0)}else if(h>3){for(d(c),--h;h>6;h-=6)d(8304);h>2&&(d(h-3<<5|8208),h=0)}for(;h--;)d(c);h=1,c=f[m]}return[s.subarray(0,a),r]},fp=function(f,r){for(var s=0,a=0;a<r.length;++a)s+=f[a]*r[a];return s},Ug=function(f,r,s){var a=s.length,c=dp(r+2);f[c]=255&a,f[c+1]=a>>>8,f[c+2]=255^f[c],f[c+3]=255^f[c+1];for(var h=0;h<a;++h)f[c+h+4]=s[h];return 8*(c+4+a)},Iy=function(f,r,s,a,c,h,d,m,g,y,b){fa(r,b++,s),++c[256];for(var w=Cx(c,15),x=w[0],E=w[1],T=Cx(h,15),I=T[0],L=T[1],R=Ax(x),$=R[0],B=R[1],G=Ax(I),z=G[0],J=G[1],te=new Ls(19),le=0;le<$.length;++le)te[31&$[le]]++;for(le=0;le<z.length;++le)te[31&z[le]]++;for(var oe=Cx(te,7),de=oe[0],we=oe[1],ke=19;ke>4&&!de[Ty[ke-1]];--ke);var je,me,Ve,Ne,tt=y+5<<3,We=fp(c,bd)+fp(h,hp)+d,ze=fp(c,x)+fp(h,I)+d+14+3*ke+fp(te,de)+(2*te[16]+3*te[17]+7*te[18]);if(tt<=We&&tt<=ze)return Ug(r,b,f.subarray(g,g+y));if(fa(r,b,1+(ze<We)),b+=2,ze<We){je=Gu(x,E,0),me=x,Ve=Gu(I,L,0),Ne=I;var Oe=Gu(de,we,0);for(fa(r,b,B-257),fa(r,b+5,J-1),fa(r,b+10,ke-4),b+=14,le=0;le<ke;++le)fa(r,b+3*le,de[Ty[le]]);b+=3*ke;for(var Ct=[$,z],At=0;At<2;++At){var Nt=Ct[At];for(le=0;le<Nt.length;++le){var Tt=31&Nt[le];fa(r,b,Oe[Tt]),b+=de[Tt],Tt>15&&(fa(r,b,Nt[le]>>>5&127),b+=Nt[le]>>>12)}}}else je=vI,me=bd,Ve=Bg,Ne=hp;for(le=0;le<m;++le)if(a[le]>255){Wu(r,b,je[257+(Tt=a[le]>>>18&31)]),b+=me[Tt+257],Tt>7&&(fa(r,b,a[le]>>>23&31),b+=Te[Tt]);var Rn=31&a[le];Wu(r,b,Ve[Rn]),b+=Ne[Rn],Rn>3&&(Wu(r,b,a[le]>>>5&8191),b+=cp[Rn])}else Wu(r,b,je[a[le]]),b+=me[a[le]];return Wu(r,b,je[256]),b+me[256]},yI=new lp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Py=new as(0),_I=function(){for(var f=new lp(256),r=0;r<256;++r){for(var s=r,a=9;--a;)s=(1&s&&3988292384)^s>>>1;f[r]=s}return f}(),Tx=function(){var f=-1;return{p:function(r){for(var s=f,a=0;a<r.length;++a)s=_I[255&s^r[a]]^s>>>8;f=s},d:function(){return~f}}},Rx=function(f,r){var s={};for(var a in f)s[a]=f[a];for(var a in r)s[a]=r[a];return s},zi=function(f,r,s){for(;s;++r)f[r]=s,s>>>=8};function bI(f,r){return function(f,r,s,a,c){return function(h,d,m,g,y,b){var w=h.length,x=new as(0+w+5*(1+Math.ceil(w/7e3))+0),E=x.subarray(0,x.length-0),T=0;if(!d||w<8)for(var I=0;I<=w;I+=65535){var L=I+65535;L<w?T=Ug(E,T,h.subarray(I,L)):(E[I]=b,T=Ug(E,T,h.subarray(I,w)))}else{for(var R=yI[d-1],$=R>>>13,B=8191&R,G=(1<<m)-1,z=new Ls(32768),J=new Ls(G+1),te=Math.ceil(m/3),le=2*te,oe=function(Dt){return(h[Dt]^h[Dt+1]<<te^h[Dt+2]<<le)&G},de=new lp(25e3),we=new Ls(288),ke=new Ls(32),je=0,me=0,Ve=(I=0,0),Ne=0,tt=0;I<w;++I){var We=oe(I),ze=32767&I,Oe=J[We];if(z[ze]=Oe,J[We]=ze,Ne<=I){var Ct=w-I;if((je>7e3||Ve>24576)&&Ct>423){T=Iy(h,E,0,de,we,ke,me,Ve,tt,I-tt,T),Ve=je=me=0,tt=I;for(var At=0;At<286;++At)we[At]=0;for(At=0;At<30;++At)ke[At]=0}var Nt=2,Tt=0,Rn=B,se=ze-Oe&32767;if(Ct>2&&We==oe(I-se))for(var re=Math.min($,Ct)-1,Pe=Math.min(32767,I),_e=Math.min(258,Ct);se<=Pe&&--Rn&&ze!=Oe;){if(h[I+Nt]==h[I+Nt-se]){for(var ae=0;ae<_e&&h[I+ae]==h[I+ae-se];++ae);if(ae>Nt){if(Nt=ae,Tt=se,ae>re)break;var Q=Math.min(se,ae-2),xe=0;for(At=0;At<Q;++At){var ce=I-se+At+32768&32767,at=ce-z[ce]+32768&32767;at>xe&&(xe=at,Oe=ce)}}}se+=(ze=Oe)-(Oe=z[ze])+32768&32767}if(Tt){de[Ve++]=268435456|Dy[Nt]<<18|Fg[Tt];var $e=31&Dy[Nt],Ze=31&Fg[Tt];me+=Te[$e]+cp[Ze],++we[257+$e],++ke[Ze],Ne=I+Nt,++je}else de[Ve++]=h[I],++we[h[I]]}}T=Iy(h,E,b,de,we,ke,me,Ve,tt,I-tt,T)}return Vg(x,0,0+dp(T)+0)}(f,r.level??6,null==r.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(f.length)))):12+r.mem,0,0,!0)}(f,r||{})}var GC=function(f,r,s,a){for(var c in f){var h=f[c],d=r+c;h instanceof as?s[d]=[h,a]:Array.isArray(h)?s[d]=[h[0],Rx(a,h[1])]:GC(h,d+"/",s,a)}},WC=typeof TextEncoder<"u"&&new TextEncoder,wI=typeof TextDecoder<"u"&&new TextDecoder;try{wI.decode(Py,{stream:!0})}catch{}function ky(f,r){if(r){for(var s=new as(f.length),a=0;a<f.length;++a)s[a]=f.charCodeAt(a);return s}if(WC)return WC.encode(f);var c=f.length,h=new as(f.length+(f.length>>1)),d=0,m=function(b){h[d++]=b};for(a=0;a<c;++a){if(d+5>h.length){var g=new as(d+8+(c-a<<1));g.set(h),h=g}var y=f.charCodeAt(a);y<128||r?m(y):y<2048?(m(192|y>>6),m(128|63&y)):y>55295&&y<57344?(m(240|(y=65536+(1047552&y)|1023&f.charCodeAt(++a))>>18),m(128|y>>12&63),m(128|y>>6&63),m(128|63&y)):(m(224|y>>12),m(128|y>>6&63),m(128|63&y))}return Vg(h,0,d)}var Ix=function(f){var r=0;if(f)for(var s in f){var a=f[s].length;if(a>65535)throw"extra field too long";r+=a+4}return r},qC=function(f,r,s,a,c,h,d,m){var g=a.length,y=s.extra,b=m&&m.length,w=Ix(y);zi(f,r,null!=d?33639248:67324752),r+=4,null!=d&&(f[r++]=20,f[r++]=s.os),f[r]=20,r+=2,f[r++]=s.flag<<1|(null==h&&8),f[r++]=c&&8,f[r++]=255&s.compression,f[r++]=s.compression>>8;var x=new Date(s.mtime??Date.now()),E=x.getFullYear()-1980;if(E<0||E>119)throw"date not in range 1980-2099";if(zi(f,r,E<<25|x.getMonth()+1<<21|x.getDate()<<16|x.getHours()<<11|x.getMinutes()<<5|x.getSeconds()>>>1),r+=4,null!=h&&(zi(f,r,s.crc),zi(f,r+4,h),zi(f,r+8,s.size)),zi(f,r+12,g),zi(f,r+14,w),r+=16,null!=d&&(zi(f,r,b),zi(f,r+6,s.attrs),zi(f,r+10,d),r+=14),f.set(a,r),r+=g,w)for(var T in y){var I=y[T],L=I.length;zi(f,r,+T),zi(f,r+2,L),f.set(I,r+4),r+=4+L}return b&&(f.set(m,r),r+=b),r};class MI{parse(r){return(0,Y.Z)(function*(){const s={"model.usda":null};let a='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n';const c={},h={};r.traverseVisible(m=>{if(m.isMesh)if(m.material.isMeshStandardMaterial){const g=m.geometry,y=m.material,b="geometries/Geometry_"+g.id+".usd";if(!(b in s)){const w=`\ndef "Geometry"\n{\n  ${function(E){const I=E.attributes,L=I.position.count;return`\n    def Mesh "Geometry"\n    {\n        int[] faceVertexCounts = [${R=E,Array((null!==R.index?R.index.count:R.attributes.position.count)/3).fill(3).join(", ")}]\n        int[] faceVertexIndices = [${function(R){const $=R.index,B=[];if(null!==$)for(let G=0;G<$.count;G++)B.push($.getX(G));else{const G=R.attributes.position.count;for(let z=0;z<G;z++)B.push(z)}return B.join(", ")}(E)}]\n        normal3f[] normals = [${Px(I.normal,L)}] (\n            interpolation = "vertex"\n        )\n        point3f[] points = [${Px(I.position,L)}]\n        float2[] primvars:st = [${function(R,$){if(void 0===R)return console.warn("USDZExporter: UVs missing."),Array($).fill("(0, 0)").join(", ");const B=[];for(let G=0;G<R.count;G++){const z=R.getX(G),J=R.getY(G);B.push(`(${z.toPrecision(7)}, ${1-J.toPrecision(7)})`)}return B.join(", ")}(I.uv,L)}] (\n            interpolation = "vertex"\n        )\n        uniform token subdivisionScheme = "none"\n    }\n`;var R}(g)}\n}\n`;s[b]=function(x){let E='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n';return E+=x,ky(E)}(w)}y.uuid in c||(c[y.uuid]=y),a+=function(w,x,E){const T="Object_"+w.id,I=function(L){const R=L.elements;return`( ${wd(R,0)}, ${wd(R,4)}, ${wd(R,8)}, ${wd(R,12)} )`}(w.matrixWorld);return w.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",w),`def Xform "${T}" (\n    prepend references = @./geometries/Geometry_${x.id}.usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ${I}\n    uniform token[] xformOpOrder = ["xformOp:transform"]\n\n    rel material:binding = </Materials/Material_${E.id}>\n}\n\n`}(m,g,y)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",m)}),a+=function(m,g){const y=[];for(const b in m)y.push(kx(m[b],g));return`def "Materials"\n{\n${y.join("")}\n}\n\n`}(c,h),s["model.usda"]=ky(a),a=null;for(const m in h){const g=h[m],y=m.split("_")[1],b=1023===g.format,w=EI(g.image,y),x=yield new Promise(E=>w.toBlob(E,b?"image/png":"image/jpeg",1));s[`textures/Texture_${m}.${b?"png":"jpg"}`]=new Uint8Array(yield x.arrayBuffer())}let d=0;for(const m in s){const g=s[m];d+=34+m.length;const y=63&d;if(4!==y){const b=new Uint8Array(64-y);s[m]=[g,{extra:{12345:b}}]}d=g.length}return function xI(f,r){r||(r={});var s={},a=[];GC(f,"",s,r);var oe,de,we,ke,je,c=0,h=0;for(var d in s){var m=s[d],g=m[0],y=m[1],b=0==y.level?0:8,w=(te=ky(d)).length,x=y.comment,E=x&&ky(x),T=E&&E.length,I=Ix(y.extra);if(w>65535)throw"filename too long";var L=b?bI(g,y):g,R=L.length,$=Tx();$.p(g),a.push(Rx(y,{size:g.length,crc:$.d(),c:L,f:te,m:E,u:w!=d.length||E&&x.length!=T,o:c,compression:b})),c+=30+w+I+R,h+=76+2*(w+I)+(T||0)+R}for(var B=new as(h+22),G=c,z=h-c,J=0;J<a.length;++J){var te=a[J];qC(B,te.o,te,te.f,te.u,te.c.length);var le=30+te.f.length+Ix(te.extra);B.set(te.c,te.o+le),qC(B,c,te,te.f,te.u,te.c.length,te.o,te.m),c+=16+le+(te.m?te.m.length:0)}return we=a.length,ke=z,je=G,zi(oe=B,de=c,101010256),zi(oe,de+8,we),zi(oe,de+10,we),zi(oe,de+12,ke),zi(oe,de+16,je),B}(s,{level:0})})()}}function EI(f,r){if(typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&f instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&f instanceof ImageBitmap){const s=1024/Math.max(f.width,f.height),a=document.createElement("canvas");a.width=f.width*Math.min(1,s),a.height=f.height*Math.min(1,s);const c=a.getContext("2d");if(c.drawImage(f,0,0,a.width,a.height),void 0!==r){const h=parseInt(r,16),d=(h>>16&255)/255,m=(h>>8&255)/255,g=(255&h)/255,y=c.getImageData(0,0,a.width,a.height),b=y.data;for(let w=0;w<b.length;w+=4)b[w+0]=b[w+0]*d,b[w+1]=b[w+1]*m,b[w+2]=b[w+2]*g;c.putImageData(y,0,0)}return a}}function wd(f,r){return`(${f[r+0]}, ${f[r+1]}, ${f[r+2]}, ${f[r+3]})`}function Px(f,r){if(void 0===f)return console.warn("USDZExporter: Normals missing."),Array(r).fill("(0, 0, 0)").join(", ");const s=[];for(let a=0;a<f.count;a++){const c=f.getX(a),h=f.getY(a),d=f.getZ(a);s.push(`(${c.toPrecision(7)}, ${h.toPrecision(7)}, ${d.toPrecision(7)})`)}return s.join(", ")}function kx(f,r){const s="            ",a=[],c=[];function h(d,m,g){const y=d.id+(g?"_"+g.getHexString():""),b=1023===d.format;return r[y]=d,`\n        def Shader "Transform2d_${m}" (\n            sdrMetadata = {\n                string role = "math"\n            }\n        )\n        {\n            uniform token info:id = "UsdTransform2d"\n            float2 inputs:in.connect = </Materials/Material_${f.id}/uvReader_st.outputs:result>\n            float2 inputs:scale = ${Ny(d.repeat)}\n            float2 inputs:translation = ${Ny(d.offset)}\n            float2 outputs:result\n        }\n\n        def Shader "Texture_${d.id}_${m}"\n        {\n            uniform token info:id = "UsdUVTexture"\n            asset inputs:file = @textures/Texture_${y}.${b?"png":"jpg"}@\n            float2 inputs:st.connect = </Materials/Material_${f.id}/Transform2d_${m}.outputs:result>\n            token inputs:wrapS = "repeat"\n            token inputs:wrapT = "repeat"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n            ${f.transparent||f.alphaTest>0?"float outputs:a":""}\n        }`}return null!==f.map?(a.push(`${s}color3f inputs:diffuseColor.connect = </Materials/Material_${f.id}/Texture_${f.map.id}_diffuse.outputs:rgb>`),f.transparent?a.push(`${s}float inputs:opacity.connect = </Materials/Material_${f.id}/Texture_${f.map.id}_diffuse.outputs:a>`):f.alphaTest>0&&(a.push(`${s}float inputs:opacity.connect = </Materials/Material_${f.id}/Texture_${f.map.id}_diffuse.outputs:a>`),a.push(`${s}float inputs:opacityThreshold = ${f.alphaTest}`)),c.push(h(f.map,"diffuse",f.color))):a.push(`${s}color3f inputs:diffuseColor = ${Hg(f.color)}`),null!==f.emissiveMap?(a.push(`${s}color3f inputs:emissiveColor.connect = </Materials/Material_${f.id}/Texture_${f.emissiveMap.id}_emissive.outputs:rgb>`),c.push(h(f.emissiveMap,"emissive"))):f.emissive.getHex()>0&&a.push(`${s}color3f inputs:emissiveColor = ${Hg(f.emissive)}`),null!==f.normalMap&&(a.push(`${s}normal3f inputs:normal.connect = </Materials/Material_${f.id}/Texture_${f.normalMap.id}_normal.outputs:rgb>`),c.push(h(f.normalMap,"normal"))),null!==f.aoMap&&(a.push(`${s}float inputs:occlusion.connect = </Materials/Material_${f.id}/Texture_${f.aoMap.id}_occlusion.outputs:r>`),c.push(h(f.aoMap,"occlusion"))),null!==f.roughnessMap&&1===f.roughness?(a.push(`${s}float inputs:roughness.connect = </Materials/Material_${f.id}/Texture_${f.roughnessMap.id}_roughness.outputs:g>`),c.push(h(f.roughnessMap,"roughness"))):a.push(`${s}float inputs:roughness = ${f.roughness}`),null!==f.metalnessMap&&1===f.metalness?(a.push(`${s}float inputs:metallic.connect = </Materials/Material_${f.id}/Texture_${f.metalnessMap.id}_metallic.outputs:b>`),c.push(h(f.metalnessMap,"metallic"))):a.push(`${s}float inputs:metallic = ${f.metalness}`),null!==f.alphaMap?(a.push(`${s}float inputs:opacity.connect = </Materials/Material_${f.id}/Texture_${f.alphaMap.id}_opacity.outputs:r>`),a.push(`${s}float inputs:opacityThreshold = 0.0001`),c.push(h(f.alphaMap,"opacity"))):a.push(`${s}float inputs:opacity = ${f.opacity}`),f.isMeshPhysicalMaterial&&(a.push(`${s}float inputs:clearcoat = ${f.clearcoat}`),a.push(`${s}float inputs:clearcoatRoughness = ${f.clearcoatRoughness}`),a.push(`${s}float inputs:ior = ${f.ior}`)),`\n    def Material "Material_${f.id}"\n    {\n        def Shader "PreviewSurface"\n        {\n            uniform token info:id = "UsdPreviewSurface"\n${a.join("\n")}\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_${f.id}/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = "st"\n\n        def Shader "uvReader_st"\n        {\n            uniform token info:id = "UsdPrimvarReader_float2"\n            token inputs:varname.connect = </Materials/Material_${f.id}.inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n${c.join("\n")}\n\n    }\n`}function Hg(f){return`(${f.r}, ${f.g}, ${f.b})`}function Ny(f){return`(${f.x}, ${f.y})`}var Mc=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};let Nx=!1,Bl=!1;const Lx=(Ox=["quick-look","scene-viewer","webxr","none"],f=>{try{const r=gi(f),s=(r.length?r[0].terms:[]).filter(c=>c&&"ident"===c.type).map(c=>c.value).filter(c=>Ox.indexOf(c)>-1),a=new Set;for(const c of s)a.add(c);return a}catch{}return new Set});var Ox;const pp="quick-look",Fx="scene-viewer",Oy="none",Vl=Symbol("arButtonContainer"),mp=Symbol("enterARWithWebXR"),qu=Symbol("openSceneViewer"),zg=Symbol("openIOSARQuickLook"),xd=Symbol("canActivateAR"),pa=Symbol("arMode"),$u=Symbol("arModes"),Md=Symbol("arAnchor"),gp=Symbol("preload"),vp=Symbol("onARButtonContainerClick"),yp=Symbol("onARStatus"),_p=Symbol("onARTracking"),jg=Symbol("onARTap"),Xu=Symbol("selectARMode"),Fy=Symbol("triggerLoad");var $C,Bx,By;const Ed=Symbol("evaluate"),bp=Symbol("lastValue");class oi{constructor(){this[$C]=null}static evaluatableFor(r,s=wc){if(r instanceof oi)return r;if("number"===r.type)return"%"===r.unit?new Ux(r,s):r;switch(r.name.value){case"calc":return new Hx(r,s);case"env":return new SI(r)}return wc}static evaluate(r){return r instanceof oi?r.evaluate():r}static isConstant(r){return!(r instanceof oi)||r.isConstant}static applyIntrinsics(r,s){const{basis:a,keywords:c}=s,{auto:h}=c;return a.map((d,m)=>{const g=h[m]??d;let y=r[m]?r[m]:g;if("ident"===y.type){const b=y.value;b in c&&(y=c[b][m])}return null!=y&&"ident"!==y.type||(y=g),"%"===y.unit?Ki(y.number/100*d.number,d.unit):(y=Wa(y,d),y.unit!==d.unit?d:y)})}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[bp]||(this[bp]=this[Ed]()),this[bp]}}$C=bp;const Vx=Symbol("percentage"),Os=Symbol("basis");class Ux extends oi{constructor(r,s){super(),this[Vx]=r,this[Os]=s}get isConstant(){return!0}[Ed](){return Ki(this[Vx].number/100*this[Os].number,this[Os].unit)}}const Gg=Symbol("identNode");class SI extends oi{constructor(r){super(),this[Bx]=null;const s=r.arguments.length?r.arguments[0].terms[0]:null;null!=s&&"ident"===s.type&&(this[Gg]=s)}get isConstant(){return!1}[(Bx=Gg,Ed)](){return null!=this[Gg]&&"window-scroll-y"===this[Gg].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:wc}}const XC=/[\*\/]/,Ec=Symbol("evalutor");class Hx extends oi{constructor(r,s=wc){if(super(),this[By]=null,1!==r.arguments.length)return;const a=r.arguments[0].terms.slice(),c=[];for(;a.length;){const h=a.shift();if(c.length>0){const d=c[c.length-1];if("operator"===d.type&&XC.test(d.value)){const m=c.pop(),g=c.pop();if(null==g)return;c.push(new Hy(m,oi.evaluatableFor(g,s),oi.evaluatableFor(h,s)));continue}}c.push("operator"===h.type?h:oi.evaluatableFor(h,s))}for(;c.length>2;){const[h,d,m]=c.splice(0,3);if("operator"!==d.type)return;c.unshift(new Hy(d,oi.evaluatableFor(h,s),oi.evaluatableFor(m,s)))}1===c.length&&(this[Ec]=c[0])}get isConstant(){return null==this[Ec]||oi.isConstant(this[Ec])}[(By=Ec,Ed)](){return null!=this[Ec]?oi.evaluate(this[Ec]):wc}}const zx=Symbol("operator"),Vy=Symbol("left"),Uy=Symbol("right");class Hy extends oi{constructor(r,s,a){super(),this[zx]=r,this[Vy]=s,this[Uy]=a}get isConstant(){return oi.isConstant(this[Vy])&&oi.isConstant(this[Uy])}[Ed](){const r=Wa(oi.evaluate(this[Vy])),s=Wa(oi.evaluate(this[Uy])),{number:a,unit:c}=r,{number:h,unit:d}=s;if(null!=d&&null!=c&&d!=c)return wc;const m=c||d;let g;switch(this[zx].value){case"+":g=a+h;break;case"-":g=a-h;break;case"/":g=a/h;break;case"*":g=a*h;break;default:return wc}return{type:"number",number:g,unit:m}}}const zy=Symbol("evaluatables"),jy=Symbol("intrinsics");class jx extends oi{constructor(r,s){super(),this[jy]=s;const a=r[0],c=null!=a?a.terms:[];this[zy]=s.basis.map((h,d)=>{const m=c[d];return null==m?{type:"ident",value:"auto"}:"ident"===m.type?m:oi.evaluatableFor(m,h)})}get isConstant(){for(const r of this[zy])if(!oi.isConstant(r))return!1;return!0}[Ed](){const r=this[zy].map(s=>oi.evaluate(s));return oi.applyIntrinsics(r,this[jy]).map(s=>s.number)}}var Gx,Gy,Wy,Wx;const Fs=Symbol("instances"),Wg=Symbol("activateListener"),qx=Symbol("deactivateListener"),qy=Symbol("notifyInstances"),KC=Symbol("notify"),$y=Symbol("callback");class Ka{constructor(r){this[$y]=r}static[qy](){for(const r of Ka[Fs])r[KC]()}static[(Gx=Fs,Wg)](){window.addEventListener("scroll",this[qy],{passive:!0})}static[qx](){window.removeEventListener("scroll",this[qy])}observe(){0===Ka[Fs].size&&Ka[Wg](),Ka[Fs].add(this)}disconnect(){Ka[Fs].delete(this),0===Ka[Fs].size&&Ka[qx]()}[KC](){this[$y]()}}Ka[Gx]=new Set;const $x=Symbol("computeStyleCallback"),Xx=Symbol("astWalker"),Ku=Symbol("dependencies"),Kx=Symbol("onScroll");class YC{constructor(r){this[Gy]={},this[Wy]=new ix(["function"]),this[Wx]=()=>{this[$x]({relatedState:"window-scroll"})},this[$x]=r}observeEffectsFor(r){const s={},a=this[Ku];this[Xx].walk(r,c=>{const{name:h}=c,d=c.arguments[0].terms[0];if("env"===h.value&&null!=d&&"ident"===d.type&&"window-scroll-y"===d.value&&null==s["window-scroll"]){const m="window-scroll"in a?a["window-scroll"]:new Ka(this[Kx]);m.observe(),delete a["window-scroll"],s["window-scroll"]=m}});for(const c in a)a[c].disconnect();this[Ku]=s}dispose(){for(const r in this[Ku])this[Ku][r].disconnect()}}Gy=Ku,Wy=Xx,Wx=Kx;const ma=f=>{const r=f.observeEffects||!1,s=f.intrinsics instanceof Function?f.intrinsics:()=>f.intrinsics;return(a,c)=>{const h=a.updated,d=a.connectedCallback,m=a.disconnectedCallback,g=Symbol(`${c}StyleEffector`),y=Symbol(`${c}StyleEvaluator`),b=Symbol(`${c}UpdateEvaluator`),w=Symbol(`${c}EvaluateAndSync`);Object.defineProperties(a,{[g]:{value:null,writable:!0},[y]:{value:null,writable:!0},[b]:{value:function(){const x=gi(this[c]);this[y]=new jx(x,s(this)),null==this[g]&&r&&(this[g]=new YC(()=>this[w]())),null!=this[g]&&this[g].observeEffectsFor(x)}},[w]:{value:function(){if(null==this[y])return;const x=this[y].evaluate();this[f.updateHandler](x)}},updated:{value:function(x){x.has(c)&&(this[b](),this[w]()),h.call(this,x)}},connectedCallback:{value:function(){d.call(this),this.requestUpdate(c,this[c])}},disconnectedCallback:{value:function(){m.call(this),null!=this[g]&&(this[g].dispose(),this[g]=null)}}})}},Xy=new Me,Yx=new F,Ky=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,interactionPolicy:"always-allow",touchAction:"pan-y"}),Sd=Math.PI/8,qg="user-interaction";class Jx extends U{constructor(r,s,a){super(),this.camera=r,this.element=s,this.scene=a,this.sensitivity=1,this.isUserChange=!1,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.panProjection=new vt,this.panPerPixel=0,this.spherical=new Jm,this.goalSpherical=new Jm,this.thetaDamper=new no,this.phiDamper=new no,this.radiusDamper=new no,this.logFov=Math.log(Ky.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new no,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=c=>{if(this.enablePan)c.preventDefault();else for(const h of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:h.id})))},this.touchModeZoom=(c,h)=>{if(!this._disableZoom){const d=this.twoTouchDistance(this.pointers[0],this.pointers[1]),m=.04*(this.lastSeparation-d)*50/this.scene.height;this.lastSeparation=d,this.userAdjustOrbit(0,0,m)}this.panPerPixel>0&&this.movePan(c,h)},this.disableScroll=c=>{c.preventDefault()},this.touchModeRotate=(c,h)=>{const{touchAction:d}=this._options;if(!this.touchDecided&&"none"!==d){this.touchDecided=!0;const m=Math.abs(c),g=Math.abs(h);if(this.isUserChange&&("pan-y"===d&&g>m||"pan-x"===d&&m>g))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(c,h)},this.onPointerDown=c=>{if(!this.canInteract||this.pointers.length>2)return;const{element:h}=this;0===this.pointers.length&&(h.addEventListener("pointermove",this.onPointerMove),h.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=c.clientX,this.startPointerPosition.clientY=c.clientY,this.startTime=performance.now());try{h.setPointerCapture(c.pointerId)}catch{}this.pointers.push({clientX:c.clientX,clientY:c.clientY,id:c.pointerId}),this.isUserPointing=!1,"touch"===c.pointerType?(this.isUserChange=!c.altKey,this.onTouchChange(c)):(this.isUserChange=!0,this.onMouseDown(c))},this.onPointerMove=c=>{const h=this.pointers.find(y=>y.id===c.pointerId);if(null==h)return;const d=this.pointers.length,m=(c.clientX-h.clientX)/d,g=(c.clientY-h.clientY)/d;0===m&&0===g||(h.clientX=c.clientX,h.clientY=c.clientY,"touch"===c.pointerType?(this.isUserChange=!c.altKey,null!==this.touchMode&&this.touchMode(m,g)):(this.isUserChange=!0,this.panPerPixel>0?this.movePan(m,g):this.handleSinglePointerMove(m,g)))},this.onPointerUp=c=>{const{element:h}=this,d=this.pointers.findIndex(m=>m.id===c.pointerId);-1!==d&&this.pointers.splice(d,1),this.panPerPixel>0&&!c.altKey&&this.resetRadius(),0===this.pointers.length?(h.removeEventListener("pointermove",this.onPointerMove),h.removeEventListener("pointerup",this.onPointerUp),h.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.recenter(c)):null!==this.touchMode&&this.onTouchChange(c),this.scene.element[Ad].style.opacity=0,h.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=c=>{this.canInteract&&(this.isUserChange=!0,this.userAdjustOrbit(0,0,c.deltaY*(1==c.deltaMode?18:1)*.04/30),c.preventDefault())},this.onKeyDown=c=>{let h=!0;const{isUserChange:d}=this;switch(this.isUserChange=!0,c.keyCode){case 33:this.userAdjustOrbit(0,0,.04);break;case 34:this.userAdjustOrbit(0,0,-.04);break;case 38:this.userAdjustOrbit(0,-Sd,0);break;case 40:this.userAdjustOrbit(0,Sd,0);break;case 37:this.userAdjustOrbit(-Sd,0,0);break;case 39:this.userAdjustOrbit(Sd,0,0);break;default:h=!1,this.isUserChange=d}h&&c.preventDefault()},this._options=Object.assign({},Ky),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){const{element:r}=this;r.addEventListener("pointerdown",this.onPointerDown),r.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||r.addEventListener("wheel",this.onWheel),r.addEventListener("keydown",this.onKeyDown),r.addEventListener("touchmove",()=>{},{passive:!1}),r.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){const{element:r}=this;r.removeEventListener("pointerdown",this.onPointerDown),r.removeEventListener("pointermove",this.onPointerMove),r.removeEventListener("pointerup",this.onPointerUp),r.removeEventListener("pointercancel",this.onPointerUp),r.removeEventListener("wheel",this.onWheel),r.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("contextmenu",this.onContext),r.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(r){this._disableZoom!=r&&(this._disableZoom=r,!0===r?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(r=new Jm){return r.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(r){Object.assign(this._options,r),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(r,s){this.camera.near=Math.max(r,s/1e3),this.camera.far=s,this.camera.updateProjectionMatrix()}updateAspect(r){this.camera.aspect=r,this.camera.updateProjectionMatrix()}setOrbit(r=this.goalSpherical.theta,s=this.goalSpherical.phi,a=this.goalSpherical.radius){const{minimumAzimuthalAngle:c,maximumAzimuthalAngle:h,minimumPolarAngle:d,maximumPolarAngle:m,minimumRadius:g,maximumRadius:y}=this._options,{theta:b,phi:w,radius:x}=this.goalSpherical,E=bc(r,c,h);isFinite(c)||isFinite(h)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-E)+E);const T=bc(s,d,m),I=bc(a,g,y);return(E!==b||T!==w||I!==x)&&(this.goalSpherical.theta=E,this.goalSpherical.phi=T,this.goalSpherical.radius=I,this.goalSpherical.makeSafe(),!0)}setRadius(r){this.goalSpherical.radius=r,this.setOrbit()}setFieldOfView(r){const{minimumFieldOfView:s,maximumFieldOfView:a}=this._options;r=bc(r,s,a),this.goalLogFov=Math.log(r)}setDamperDecayTime(r){this.thetaDamper.setDecayTime(r),this.phiDamper.setDecayTime(r),this.radiusDamper.setDecayTime(r),this.fovDamper.setDecayTime(r)}adjustOrbit(r,s,a){const{theta:c,phi:h,radius:d}=this.goalSpherical,{minimumRadius:m,maximumRadius:g,minimumFieldOfView:y,maximumFieldOfView:b}=this._options,w=this.spherical.theta-c,x=Math.PI-.001,E=c-bc(r,-x-w,x-w),T=h-s,I=0===a?0:((a>0?g:m)-d)/(Math.log(a>0?b:y)-this.goalLogFov),L=d+a*(isFinite(I)?I:2*(g-m));this.setOrbit(E,T,L),0!==a&&this.setFieldOfView(Math.exp(this.goalLogFov+a))}jumpToGoal(){this.update(0,1e4)}update(r,s){if(this.isStationary())return;const{maximumPolarAngle:a,maximumRadius:c}=this._options,h=this.spherical.theta-this.goalSpherical.theta;Math.abs(h)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(h)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,s,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,s,a),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,s,c),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,s,1),this.moveCamera()}updateTouchActionStyle(){const{style:r}=this.element;if(this._interactionEnabled){const{touchAction:s}=this._options;r.touchAction=this._disableZoom&&"none"!==s?"manipulation":s}else r.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}dispatchChange(){this.dispatchEvent({type:"change",source:this.isUserChange?qg:"none"})}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Qn(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix()),this.dispatchChange()}get canInteract(){return"allow-when-focused"==this._options.interactionPolicy?this.element.getRootNode().activeElement===this.element:"always-allow"===this._options.interactionPolicy}userAdjustOrbit(r,s,a){this.adjustOrbit(r*this.sensitivity,s*this.sensitivity,a),this.dispatchChange()}wrapAngle(r){const s=(r+Math.PI)/(2*Math.PI);return 2*(s-Math.floor(s))*Math.PI-Math.PI}pixelLengthToSphericalAngle(r){return 2*Math.PI*r/this.element.clientHeight}twoTouchDistance(r,s){const{clientX:a,clientY:c}=r,{clientX:h,clientY:d}=s,m=h-a,g=d-c;return Math.sqrt(m*m+g*g)}handleSinglePointerMove(r,s){const a=this.pixelLengthToSphericalAngle(r),c=this.pixelLengthToSphericalAngle(s);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(a,c,0)}initializePan(){const{theta:r,phi:s}=this.spherical,a=r-this.scene.yaw;this.panPerPixel=.018/this.scene.height,this.panProjection.set(-Math.cos(a),-Math.cos(s)*Math.sin(a),0,0,Math.sin(s),0,Math.sin(a),-Math.cos(s)*Math.cos(a),0)}movePan(r,s){const{scene:a}=this,c=Yx.set(r,s,0),h=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;c.multiplyScalar(h);const d=a.getTarget();d.add(c.applyMatrix3(this.panProjection)),a.boundingSphere.clampPoint(d,d),a.setTarget(d.x,d.y,d.z),this.dispatchChange()}recenter(r){if(performance.now()>this.startTime+300||Math.abs(r.clientX-this.startPointerPosition.clientX)>2||Math.abs(r.clientY-this.startPointerPosition.clientY)>2)return;const{scene:s}=this,a=s.positionAndNormalFromPoint(s.getNDC(r.clientX,r.clientY));if(null==a){const{cameraTarget:c}=s.element;s.element.cameraTarget="",s.element.cameraTarget=c,this.userAdjustOrbit(0,0,1)}else s.target.worldToLocal(a.position),s.setTarget(a.position.x,a.position.y,a.position.z)}resetRadius(){const{scene:r}=this,s=r.positionAndNormalFromPoint(Xy.set(0,0));if(null==s)return;r.target.worldToLocal(s.position);const a=r.getTarget(),{theta:c,phi:h}=this.spherical,d=c-r.yaw,m=Yx.set(Math.sin(h)*Math.sin(d),Math.cos(h),Math.sin(h)*Math.cos(d)),g=m.dot(s.position.sub(a));a.add(m.multiplyScalar(g)),r.setTarget(a.x,a.y,a.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-g)}onTouchChange(r){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),r.altKey||(this.scene.element[Ad].style.opacity=1))}}onMouseDown(r){this.panPerPixel=0,this.enablePan&&(2===r.button||r.ctrlKey||r.metaKey||r.shiftKey)&&(this.initializePan(),this.scene.element[Ad].style.opacity=1),this.element.style.cursor="grabbing"}}const Jy=f=>f<.5?2*f*f:(4-2*f)*f-1,Qy=(f,r,s=Jy)=>a=>f+(r-f)*s(a),ro=f=>{const r=[],s=[];let a=f.initialValue;for(let c=0;c<f.keyframes.length;++c){const h=f.keyframes[c],{value:d,frames:m}=h,y=Qy(a,d,h.ease||Jy);r.push(y),s.push(m),a=d}return((c,h)=>{const d=h.map((m=0,g=>m+=g));var m;return g=>{g=bc(g,0,1),g*=d[d.length-1];const y=d.findIndex(x=>x>=g),b=y<1?0:d[y-1];return c[y]((g-b)/(d[y]-b))}})(r,s)};var _i=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const $g=ro({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),wp=ro({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),JC=["front","right","back","left"],e_=["upper-","","lower-"],Cd="auto",Qx="when-focused",eA=f=>({basis:[ep(Ki(f.enablePan?30:45,"deg"))],keywords:{auto:[null]}}),tA=f=>({basis:[ep(Ki(f.enablePan?12:25,"deg"))],keywords:{auto:[null]}}),nA=(()=>{const f=gi("0deg 75deg 105%")[0].terms,r=Wa(f[0]),s=Wa(f[1]);return a=>{const c=a[Mt].idealCameraDistance();return{basis:[r,s,Ki(c,"m")],keywords:{auto:[null,null,Ki(105,"%")]}}}})(),rA=f=>{const r=1.1*f[Mt].boundingSphere.radius*(f.enablePan?2:1);return{basis:[Ki(-1/0,"rad"),Ki(Math.PI/8,"rad"),Ki(r,"m")],keywords:{auto:[null,null,null]}}},iA=f=>{const r=nA(f),s=new jx([],r).evaluate()[2];return{basis:[Ki(1/0,"rad"),Ki(Math.PI-Math.PI/8,"rad"),Ki(s,"m")],keywords:{auto:[null,null,null]}}},sA=f=>{const r=f[Mt].boundingBox.getCenter(new F);return{basis:[Ki(r.x,"m"),Ki(r.y,"m"),Ki(r.z,"m")],keywords:{auto:[null,null,null]}}},t1=Math.PI/2,DI=Math.PI/3,n1=t1/2,qn=2*Math.PI,ei=Symbol("controls"),Ad=Symbol("panElement"),Xg=Symbol("promptElement"),t_=Symbol("promptAnimatedContainer"),n_=Symbol("fingerAnimatedContainers"),Kg=Symbol("deferInteractionPrompt"),r1=Symbol("updateAria"),s1=Symbol("updateCameraForRadius"),Td=Symbol("onBlur"),Ul=Symbol("onFocus"),r_=Symbol("onChange"),Hl=Symbol("onPointerChange"),zl=Symbol("waitingToPromptUser"),Mp=Symbol("userHasInteracted"),jl=Symbol("promptElementVisibleTime"),Ep=Symbol("lastPromptOffset"),io=Symbol("focusedTime"),Yu=Symbol("lastSpherical"),Ii=Symbol("jumpCamera"),Gl=Symbol("initialized"),Sc=Symbol("maintainThetaPhi"),xo=Symbol("syncCameraOrbit"),xs=Symbol("syncFieldOfView"),Zu=Symbol("syncCameraTarget"),Ju=Symbol("syncMinCameraOrbit"),Qu=Symbol("syncMaxCameraOrbit"),eh=Symbol("syncMinFieldOfView"),th=Symbol("syncMaxFieldOfView");var Ya=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const Wl="auto",Cc=Symbol("defaultProgressBarElement"),i_=Symbol("defaultProgressMaskElement"),Za=Symbol("posterContainerElement"),rh=Symbol("defaultPosterElement"),Rd=Symbol("posterDismissalSource"),Yg=Symbol("hidePoster"),Sp=Symbol("modelIsRevealed"),s_=Symbol("updateProgressBar"),Cp=Symbol("lastReportedProgress"),Ap=Symbol("transitioned"),vi=Symbol("onTransitionEnd"),oA=Symbol("ariaLabelCallToAction"),Id=Symbol("onClick"),Nr=Symbol("onKeydown"),Tp=Symbol("onProgress");class o_{constructor(){this.pluginCallbacks=[],this.register(function(r){return new d1(r)}),this.register(function(r){return new f1(r)}),this.register(function(r){return new p1(r)}),this.register(function(r){return new RI(r)}),this.register(function(r){return new uA(r)}),this.register(function(r){return new m1(r)})}register(r){return-1===this.pluginCallbacks.indexOf(r)&&this.pluginCallbacks.push(r),this}unregister(r){return-1!==this.pluginCallbacks.indexOf(r)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(r),1),this}parse(r,s,a,c){"object"==typeof a&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),c=a);const h=new h1,d=[];for(let m=0,g=this.pluginCallbacks.length;m<g;m++)d.push(this.pluginCallbacks[m](h));h.setPlugins(d),h.write(r,s,c).catch(a)}parseAsync(r,s){const a=this;return new Promise(function(c,h){a.parse(r,c,h,s)})}}const ai={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987,1001:33071,1e3:10497,1002:33648},Rp={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function Dc(f,r){return f.length===r.length&&f.every(function(s,a){return s===r[a]})}function u_(f){return 4*Math.ceil(f/4)}function Jg(f,r=0){const s=u_(f.byteLength);if(s!==f.byteLength){const a=new Uint8Array(s);if(a.set(new Uint8Array(f)),0!==r)for(let c=f.byteLength;c<s;c++)a[c]=r;return a.buffer}return f}let h_=null;class h1{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(r){this.plugins=r}write(r,s,a){var c=this;return(0,Y.Z)(function*(){c.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},a),c.options.animations.length>0&&(c.options.trs=!0),c.processInput(r),yield Promise.all(c.pending);const m=c.json;a=c.options;const g=c.extensionsUsed,y=new Blob(c.buffers,{type:"application/octet-stream"}),b=Object.keys(g);if(b.length>0&&(m.extensionsUsed=b),m.buffers&&m.buffers.length>0&&(m.buffers[0].byteLength=y.size),!0===a.binary){const w=new window.FileReader;w.readAsArrayBuffer(y),w.onloadend=function(){const x=Jg(w.result),E=new DataView(new ArrayBuffer(8));E.setUint32(0,x.byteLength,!0),E.setUint32(4,5130562,!0);const T=Jg(function(z){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(z).buffer;const J=new Uint8Array(new ArrayBuffer(z.length));for(let te=0,le=z.length;te<le;te++){const oe=z.charCodeAt(te);J[te]=oe>255?32:oe}return J.buffer}(JSON.stringify(m)),32),I=new DataView(new ArrayBuffer(8));I.setUint32(0,T.byteLength,!0),I.setUint32(4,1313821514,!0);const L=new ArrayBuffer(12),R=new DataView(L);R.setUint32(0,1179937895,!0),R.setUint32(4,2,!0),R.setUint32(8,12+I.byteLength+T.byteLength+E.byteLength+x.byteLength,!0);const B=new Blob([L,I,T,E,x],{type:"application/octet-stream"}),G=new window.FileReader;G.readAsArrayBuffer(B),G.onloadend=function(){s(G.result)}}}else if(m.buffers&&m.buffers.length>0){const w=new window.FileReader;w.readAsDataURL(y),w.onloadend=function(){m.buffers[0].uri=w.result,s(m)}}else s(m)})()}serializeUserData(r,s){if(0===Object.keys(r.userData).length)return;const a=this.options,c=this.extensionsUsed;try{const h=JSON.parse(JSON.stringify(r.userData));if(a.includeCustomExtensions&&h.gltfExtensions){void 0===s.extensions&&(s.extensions={});for(const d in h.gltfExtensions)s.extensions[d]=h.gltfExtensions[d],c[d]=!0;delete h.gltfExtensions}Object.keys(h).length>0&&(s.extras=h)}catch(h){console.warn("THREE.GLTFExporter: userData of '"+r.name+"' won't be serialized because of JSON.stringify error - "+h.message)}}getUID(r){return this.uids.has(r)||this.uids.set(r,this.uid++),this.uids.get(r)}isNormalizedNormalAttribute(r){if(this.cache.attributesNormalized.has(r))return!1;const s=new F;for(let a=0,c=r.count;a<c;a++)if(Math.abs(s.fromBufferAttribute(r,a).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(r){const s=this.cache;if(s.attributesNormalized.has(r))return s.attributesNormalized.get(r);const a=r.clone(),c=new F;for(let h=0,d=a.count;h<d;h++)c.fromBufferAttribute(a,h),0===c.x&&0===c.y&&0===c.z?c.setX(1):c.normalize(),a.setXYZ(h,c.x,c.y,c.z);return s.attributesNormalized.set(r,a),a}applyTextureTransform(r,s){let a=!1;const c={};0===s.offset.x&&0===s.offset.y||(c.offset=s.offset.toArray(),a=!0),0!==s.rotation&&(c.rotation=s.rotation,a=!0),1===s.repeat.x&&1===s.repeat.y||(c.scale=s.repeat.toArray(),a=!0),a&&(r.extensions=r.extensions||{},r.extensions.KHR_texture_transform=c,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(r,s){if(r===s)return r;console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const a=r?.image,c=s?.image,h=Math.max(a?.width||0,c?.width||0),d=Math.max(a?.height||0,c?.height||0),m=document.createElement("canvas");m.width=h,m.height=d;const g=m.getContext("2d");g.fillStyle="#00ffff",g.fillRect(0,0,h,d);const y=g.getImageData(0,0,h,d);if(a){g.drawImage(a,0,0,h,d);const w=g.getImageData(0,0,h,d).data;for(let x=2;x<w.length;x+=4)y.data[x]=w[x]}if(c){g.drawImage(c,0,0,h,d);const w=g.getImageData(0,0,h,d).data;for(let x=1;x<w.length;x+=4)y.data[x]=w[x]}g.putImageData(y,0,0);const b=(r||s).clone();return b.source=new j(m),b}processBuffer(r){const s=this.json,a=this.buffers;return s.buffers||(s.buffers=[{byteLength:0}]),a.push(r),0}processBufferView(r,s,a,c,h){const d=this.json;let m;d.bufferViews||(d.bufferViews=[]),m=5121===s?1:5123===s?2:4;const g=u_(c*r.itemSize*m),y=new DataView(new ArrayBuffer(g));let b=0;for(let x=a;x<a+c;x++)for(let E=0;E<r.itemSize;E++){let T;r.itemSize>4?T=r.array[x*r.itemSize+E]:0===E?T=r.getX(x):1===E?T=r.getY(x):2===E?T=r.getZ(x):3===E&&(T=r.getW(x)),5126===s?y.setFloat32(b,T,!0):5125===s?y.setUint32(b,T,!0):5123===s?y.setUint16(b,T,!0):5121===s&&y.setUint8(b,T),b+=m}const w={buffer:this.processBuffer(y.buffer),byteOffset:this.byteOffset,byteLength:g};return void 0!==h&&(w.target=h),34962===h&&(w.byteStride=r.itemSize*m),this.byteOffset+=g,d.bufferViews.push(w),{id:d.bufferViews.length-1,byteLength:0}}processBufferViewImage(r){const s=this,a=s.json;return a.bufferViews||(a.bufferViews=[]),new Promise(function(c){const h=new window.FileReader;h.readAsArrayBuffer(r),h.onloadend=function(){const d=Jg(h.result),m={buffer:s.processBuffer(d),byteOffset:s.byteOffset,byteLength:d.byteLength};s.byteOffset+=d.byteLength,c(a.bufferViews.push(m)-1)}})}processAccessor(r,s,a,c){const h=this.options,d=this.json;let m;if(r.array.constructor===Float32Array)m=5126;else if(r.array.constructor===Uint32Array)m=5125;else if(r.array.constructor===Uint16Array)m=5123;else{if(r.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");m=5121}if(void 0===a&&(a=0),void 0===c&&(c=r.count),h.truncateDrawRange&&void 0!==s&&null===s.index){const x=a+c,E=s.drawRange.count===1/0?r.count:s.drawRange.start+s.drawRange.count;a=Math.max(a,s.drawRange.start),(c=Math.min(x,E)-a)<0&&(c=0)}if(0===c)return null;const g=function(x,E,T){const I={min:new Array(x.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(x.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let L=E;L<E+T;L++)for(let R=0;R<x.itemSize;R++){let $;x.itemSize>4?$=x.array[L*x.itemSize+R]:0===R?$=x.getX(L):1===R?$=x.getY(L):2===R?$=x.getZ(L):3===R&&($=x.getW(L)),I.min[R]=Math.min(I.min[R],$),I.max[R]=Math.max(I.max[R],$)}return I}(r,a,c);let y;void 0!==s&&(y=r===s.index?34963:34962);const b=this.processBufferView(r,m,a,c,y),w={bufferView:b.id,byteOffset:b.byteOffset,componentType:m,count:c,max:g.max,min:g.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[r.itemSize]};return!0===r.normalized&&(w.normalized=!0),d.accessors||(d.accessors=[]),d.accessors.push(w)-1}processImage(r,s,a,c="image/png"){const h=this,d=h.cache,m=h.json,g=h.options,y=h.pending;d.images.has(r)||d.images.set(r,{});const b=d.images.get(r),w=c+":flipY/"+a.toString();if(void 0!==b[w])return b[w];m.images||(m.images=[]);const x={mimeType:c};if(g.embedImages){const T=h_=h_||document.createElement("canvas");T.width=Math.min(r.width,g.maxTextureSize),T.height=Math.min(r.height,g.maxTextureSize);const I=T.getContext("2d");if(!0===a&&(I.translate(0,T.height),I.scale(1,-1)),typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&r instanceof ImageBitmap)I.drawImage(r,0,0,T.width,T.height);else{1023!==s&&console.error("GLTFExporter: Only RGBAFormat is supported."),(r.width>g.maxTextureSize||r.height>g.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",r);const L=new Uint8ClampedArray(r.height*r.width*4);for(let R=0;R<L.length;R+=4)L[R+0]=r.data[R+0],L[R+1]=r.data[R+1],L[R+2]=r.data[R+2],L[R+3]=r.data[R+3];I.putImageData(new ImageData(L,r.width,r.height),0,0)}!0===g.binary?y.push(new Promise(function(L){T.toBlob(function(R){h.processBufferViewImage(R).then(function($){x.bufferView=$,L()})},c)})):x.uri=T.toDataURL(c)}else x.uri=r.src;const E=m.images.push(x)-1;return b[w]=E,E}processSampler(r){const s=this.json;return s.samplers||(s.samplers=[]),s.samplers.push({magFilter:ai[r.magFilter],minFilter:ai[r.minFilter],wrapS:ai[r.wrapS],wrapT:ai[r.wrapT]})-1}processTexture(r){const s=this.cache,a=this.json;if(s.textures.has(r))return s.textures.get(r);a.textures||(a.textures=[]);let c=r.userData.mimeType;"image/webp"===c&&(c="image/png");const h={sampler:this.processSampler(r),source:this.processImage(r.image,r.format,r.flipY,c)};r.name&&(h.name=r.name),this._invokeAll(function(m){m.writeTexture&&m.writeTexture(r,h)});const d=a.textures.push(h)-1;return s.textures.set(r,d),d}processMaterial(r){const s=this.cache,a=this.json;if(s.materials.has(r))return s.materials.get(r);if(r.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;a.materials||(a.materials=[]);const c={pbrMetallicRoughness:{}};!0!==r.isMeshStandardMaterial&&!0!==r.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const h=r.color.toArray().concat([r.opacity]);if(Dc(h,[1,1,1,1])||(c.pbrMetallicRoughness.baseColorFactor=h),r.isMeshStandardMaterial?(c.pbrMetallicRoughness.metallicFactor=r.metalness,c.pbrMetallicRoughness.roughnessFactor=r.roughness):(c.pbrMetallicRoughness.metallicFactor=.5,c.pbrMetallicRoughness.roughnessFactor=.5),r.metalnessMap||r.roughnessMap){const m=this.buildMetalRoughTexture(r.metalnessMap,r.roughnessMap),g={index:this.processTexture(m)};this.applyTextureTransform(g,m),c.pbrMetallicRoughness.metallicRoughnessTexture=g}if(r.map){const m={index:this.processTexture(r.map)};this.applyTextureTransform(m,r.map),c.pbrMetallicRoughness.baseColorTexture=m}if(r.emissive){const m=r.emissive.clone().multiplyScalar(r.emissiveIntensity),g=Math.max(m.r,m.g,m.b);if(g>1&&(m.multiplyScalar(1/g),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),g>0&&(c.emissiveFactor=m.toArray()),r.emissiveMap){const y={index:this.processTexture(r.emissiveMap)};this.applyTextureTransform(y,r.emissiveMap),c.emissiveTexture=y}}if(r.normalMap){const m={index:this.processTexture(r.normalMap)};r.normalScale&&1!==r.normalScale.x&&(m.scale=r.normalScale.x),this.applyTextureTransform(m,r.normalMap),c.normalTexture=m}if(r.aoMap){const m={index:this.processTexture(r.aoMap),texCoord:1};1!==r.aoMapIntensity&&(m.strength=r.aoMapIntensity),this.applyTextureTransform(m,r.aoMap),c.occlusionTexture=m}r.transparent?c.alphaMode="BLEND":r.alphaTest>0&&(c.alphaMode="MASK",c.alphaCutoff=r.alphaTest),2===r.side&&(c.doubleSided=!0),""!==r.name&&(c.name=r.name),this.serializeUserData(r,c),this._invokeAll(function(m){m.writeMaterial&&m.writeMaterial(r,c)});const d=a.materials.push(c)-1;return s.materials.set(r,d),d}processMesh(r){const s=this.cache,a=this.json,c=[r.geometry.uuid];if(Array.isArray(r.material))for(let B=0,G=r.material.length;B<G;B++)c.push(r.material[B].uuid);else c.push(r.material.uuid);const h=c.join(":");if(s.meshes.has(h))return s.meshes.get(h);const d=r.geometry;let m;if(m=r.isLineSegments?1:r.isLineLoop?2:r.isLine?3:r.isPoints?0:r.material.wireframe?1:4,!0!==d.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const g={},y={},b=[],w=[],x={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},E=d.getAttribute("normal");void 0===E||this.isNormalizedNormalAttribute(E)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),d.setAttribute("normal",this.createNormalizedNormalAttribute(E)));let T=null;for(let B in d.attributes){if("morph"===B.slice(0,5))continue;const G=d.attributes[B];if(B=x[B]||B.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(B)||(B="_"+B),s.attributes.has(this.getUID(G))){y[B]=s.attributes.get(this.getUID(G));continue}T=null;const z=G.array;"JOINTS_0"!==B||z instanceof Uint16Array||z instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),T=new jt(new Uint16Array(z),G.itemSize,G.normalized));const J=this.processAccessor(T||G,d);null!==J&&(y[B]=J,s.attributes.set(this.getUID(G),J))}if(void 0!==E&&d.setAttribute("normal",E),0===Object.keys(y).length)return null;if(void 0!==r.morphTargetInfluences&&r.morphTargetInfluences.length>0){const B=[],G=[],z={};if(void 0!==r.morphTargetDictionary)for(const J in r.morphTargetDictionary)z[r.morphTargetDictionary[J]]=J;for(let J=0;J<r.morphTargetInfluences.length;++J){const te={};let le=!1;for(const oe in d.morphAttributes){if("position"!==oe&&"normal"!==oe){le||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),le=!0);continue}const de=d.morphAttributes[oe][J],we=oe.toUpperCase(),ke=d.attributes[oe];if(s.attributes.has(this.getUID(de))){te[we]=s.attributes.get(this.getUID(de));continue}const je=de.clone();if(!d.morphTargetsRelative)for(let me=0,Ve=de.count;me<Ve;me++)je.setXYZ(me,de.getX(me)-ke.getX(me),de.getY(me)-ke.getY(me),de.getZ(me)-ke.getZ(me));te[we]=this.processAccessor(je,d),s.attributes.set(this.getUID(ke),te[we])}w.push(te),B.push(r.morphTargetInfluences[J]),void 0!==r.morphTargetDictionary&&G.push(z[J])}g.weights=B,G.length>0&&(g.extras={},g.extras.targetNames=G)}const I=Array.isArray(r.material);if(I&&0===d.groups.length)return null;const L=I?r.material:[r.material],R=I?d.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let B=0,G=R.length;B<G;B++){const z={mode:m,attributes:y};if(this.serializeUserData(d,z),w.length>0&&(z.targets=w),null!==d.index){let te=this.getUID(d.index);void 0===R[B].start&&void 0===R[B].count||(te+=":"+R[B].start+":"+R[B].count),s.attributes.has(te)?z.indices=s.attributes.get(te):(z.indices=this.processAccessor(d.index,d,R[B].start,R[B].count),s.attributes.set(te,z.indices)),null===z.indices&&delete z.indices}const J=this.processMaterial(L[R[B].materialIndex]);null!==J&&(z.material=J),b.push(z)}g.primitives=b,a.meshes||(a.meshes=[]),this._invokeAll(function(B){B.writeMesh&&B.writeMesh(r,g)});const $=a.meshes.push(g)-1;return s.meshes.set(h,$),$}processCamera(r){const s=this.json;s.cameras||(s.cameras=[]);const a=r.isOrthographicCamera,c={type:a?"orthographic":"perspective"};return a?c.orthographic={xmag:2*r.right,ymag:2*r.top,zfar:r.far<=0?.001:r.far,znear:r.near<0?0:r.near}:c.perspective={aspectRatio:r.aspect,yfov:ft.degToRad(r.fov),zfar:r.far<=0?.001:r.far,znear:r.near<0?0:r.near},""!==r.name&&(c.name=r.type),s.cameras.push(c)-1}processAnimation(r,s){const a=this.json,c=this.nodeMap;a.animations||(a.animations=[]);const h=(r=o_.Utils.mergeMorphTargetTracks(r.clone(),s)).tracks,d=[],m=[];for(let g=0;g<h.length;++g){const y=h[g],b=tr.parseTrackName(y.name);let w=tr.findNode(s,b.nodeName);const x=Rp[b.propertyName];if("bones"===b.objectName&&(w=!0===w.isSkinnedMesh?w.skeleton.getBoneByName(b.objectIndex):void 0),!w||!x)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',y.name),null;const E=1;let T,I=y.values.length/y.times.length;x===Rp.morphTargetInfluences&&(I/=w.morphTargetInfluences.length),!0===y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(T="CUBICSPLINE",I/=3):T=2300===y.getInterpolation()?"STEP":"LINEAR",m.push({input:this.processAccessor(new jt(y.times,E)),output:this.processAccessor(new jt(y.values,I)),interpolation:T}),d.push({sampler:m.length-1,target:{node:c.get(w),path:x}})}return a.animations.push({name:r.name||"clip_"+a.animations.length,samplers:m,channels:d}),a.animations.length-1}processSkin(r){const s=this.json,a=this.nodeMap,c=s.nodes[a.get(r)],h=r.skeleton;if(void 0===h)return null;const d=r.skeleton.bones[0];if(void 0===d)return null;const m=[],g=new Float32Array(16*h.bones.length),y=new mt;for(let b=0;b<h.bones.length;++b)m.push(a.get(h.bones[b])),y.copy(h.boneInverses[b]),y.multiply(r.bindMatrix).toArray(g,16*b);return void 0===s.skins&&(s.skins=[]),s.skins.push({inverseBindMatrices:this.processAccessor(new jt(g,16)),joints:m,skeleton:a.get(d)}),c.skin=s.skins.length-1}processNode(r){const s=this.json,a=this.options,c=this.nodeMap;s.nodes||(s.nodes=[]);const h={};if(a.trs){const m=r.quaternion.toArray(),g=r.position.toArray(),y=r.scale.toArray();Dc(m,[0,0,0,1])||(h.rotation=m),Dc(g,[0,0,0])||(h.translation=g),Dc(y,[1,1,1])||(h.scale=y)}else r.matrixAutoUpdate&&r.updateMatrix(),!1===Dc(r.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(h.matrix=r.matrix.elements);if(""!==r.name&&(h.name=String(r.name)),this.serializeUserData(r,h),r.isMesh||r.isLine||r.isPoints){const m=this.processMesh(r);null!==m&&(h.mesh=m)}else r.isCamera&&(h.camera=this.processCamera(r));if(r.isSkinnedMesh&&this.skins.push(r),r.children.length>0){const m=[];for(let g=0,y=r.children.length;g<y;g++){const b=r.children[g];if(b.visible||!1===a.onlyVisible){const w=this.processNode(b);null!==w&&m.push(w)}}m.length>0&&(h.children=m)}this._invokeAll(function(m){m.writeNode&&m.writeNode(r,h)});const d=s.nodes.push(h)-1;return c.set(r,d),d}processScene(r){const s=this.json,a=this.options;s.scenes||(s.scenes=[],s.scene=0);const c={};""!==r.name&&(c.name=r.name),s.scenes.push(c);const h=[];for(let d=0,m=r.children.length;d<m;d++){const g=r.children[d];if(g.visible||!1===a.onlyVisible){const y=this.processNode(g);null!==y&&h.push(y)}}h.length>0&&(c.nodes=h),this.serializeUserData(r,c)}processObjects(r){const s=new ta;s.name="AuxScene";for(let a=0;a<r.length;a++)s.children.push(r[a]);this.processScene(s)}processInput(r){const s=this.options;r=r instanceof Array?r:[r],this._invokeAll(function(c){c.beforeParse&&c.beforeParse(r)});const a=[];for(let c=0;c<r.length;c++)r[c]instanceof ta?this.processScene(r[c]):a.push(r[c]);a.length>0&&this.processObjects(a);for(let c=0;c<this.skins.length;++c)this.processSkin(this.skins[c]);for(let c=0;c<s.animations.length;++c)this.processAnimation(s.animations[c],r[0]);this._invokeAll(function(c){c.afterParse&&c.afterParse(r)})}_invokeAll(r){for(let s=0,a=this.plugins.length;s<a;s++)r(this.plugins[s])}}class d1{constructor(r){this.writer=r,this.name="KHR_lights_punctual"}writeNode(r,s){if(!r.isLight)return;if(!r.isDirectionalLight&&!r.isPointLight&&!r.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",r);const a=this.writer,c=a.json,h=a.extensionsUsed,d={};r.name&&(d.name=r.name),d.color=r.color.toArray(),d.intensity=r.intensity,r.isDirectionalLight?d.type="directional":r.isPointLight?(d.type="point",r.distance>0&&(d.range=r.distance)):r.isSpotLight&&(d.type="spot",r.distance>0&&(d.range=r.distance),d.spot={},d.spot.innerConeAngle=(r.penumbra-1)*r.angle*-1,d.spot.outerConeAngle=r.angle),void 0!==r.decay&&2!==r.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!r.target||r.target.parent===r&&0===r.target.position.x&&0===r.target.position.y&&-1===r.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),h[this.name]||(c.extensions=c.extensions||{},c.extensions[this.name]={lights:[]},h[this.name]=!0);const m=c.extensions[this.name].lights;m.push(d),s.extensions=s.extensions||{},s.extensions[this.name]={light:m.length-1}}}class f1{constructor(r){this.writer=r,this.name="KHR_materials_unlit"}writeMaterial(r,s){if(!r.isMeshBasicMaterial)return;const a=this.writer.extensionsUsed;s.extensions=s.extensions||{},s.extensions[this.name]={},a[this.name]=!0,s.pbrMetallicRoughness.metallicFactor=0,s.pbrMetallicRoughness.roughnessFactor=.9}}class p1{constructor(r){this.writer=r,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(r,s){if(!r.isGLTFSpecularGlossinessMaterial)return;const a=this.writer,c=a.extensionsUsed,h={};s.pbrMetallicRoughness.baseColorFactor&&(h.diffuseFactor=s.pbrMetallicRoughness.baseColorFactor);const d=[1,1,1];if(r.specular.toArray(d,0),h.specularFactor=d,h.glossinessFactor=r.glossiness,s.pbrMetallicRoughness.baseColorTexture&&(h.diffuseTexture=s.pbrMetallicRoughness.baseColorTexture),r.specularMap){const m={index:a.processTexture(r.specularMap)};a.applyTextureTransform(m,r.specularMap),h.specularGlossinessTexture=m}s.extensions=s.extensions||{},s.extensions[this.name]=h,c[this.name]=!0}}class m1{constructor(r){this.writer=r,this.name="KHR_materials_clearcoat"}writeMaterial(r,s){if(!r.isMeshPhysicalMaterial)return;const a=this.writer,c=a.extensionsUsed,h={};if(h.clearcoatFactor=r.clearcoat,r.clearcoatMap){const d={index:a.processTexture(r.clearcoatMap)};a.applyTextureTransform(d,r.clearcoatMap),h.clearcoatTexture=d}if(h.clearcoatRoughnessFactor=r.clearcoatRoughness,r.clearcoatRoughnessMap){const d={index:a.processTexture(r.clearcoatRoughnessMap)};a.applyTextureTransform(d,r.clearcoatRoughnessMap),h.clearcoatRoughnessTexture=d}if(r.clearcoatNormalMap){const d={index:a.processTexture(r.clearcoatNormalMap)};a.applyTextureTransform(d,r.clearcoatNormalMap),h.clearcoatNormalTexture=d}s.extensions=s.extensions||{},s.extensions[this.name]=h,c[this.name]=!0}}class RI{constructor(r){this.writer=r,this.name="KHR_materials_transmission"}writeMaterial(r,s){if(!r.isMeshPhysicalMaterial||0===r.transmission)return;const a=this.writer,c=a.extensionsUsed,h={};if(h.transmissionFactor=r.transmission,r.transmissionMap){const d={index:a.processTexture(r.transmissionMap)};a.applyTextureTransform(d,r.transmissionMap),h.transmissionTexture=d}s.extensions=s.extensions||{},s.extensions[this.name]=h,c[this.name]=!0}}class uA{constructor(r){this.writer=r,this.name="KHR_materials_volume"}writeMaterial(r,s){if(!r.isMeshPhysicalMaterial||0===r.transmission)return;const a=this.writer,c=a.extensionsUsed,h={};if(h.thicknessFactor=r.thickness,r.thicknessMap){const d={index:a.processTexture(r.thicknessMap)};a.applyTextureTransform(d,r.thicknessMap),h.thicknessTexture=d}h.attenuationDistance=r.attenuationDistance,h.attenuationColor=r.attenuationColor.toArray(),s.extensions=s.extensions||{},s.extensions[this.name]=h,c[this.name]=!0}}o_.Utils={insertKeyframe:function(f,r){const a=f.getValueSize(),c=new f.TimeBufferType(f.times.length+1),h=new f.ValueBufferType(f.values.length+a),d=f.createInterpolant(new f.ValueBufferType(a));let m;if(0===f.times.length){c[0]=r;for(let g=0;g<a;g++)h[g]=0;m=0}else if(r<f.times[0]){if(Math.abs(f.times[0]-r)<.001)return 0;c[0]=r,c.set(f.times,1),h.set(d.evaluate(r),0),h.set(f.values,a),m=0}else if(r>f.times[f.times.length-1]){if(Math.abs(f.times[f.times.length-1]-r)<.001)return f.times.length-1;c[c.length-1]=r,c.set(f.times,0),h.set(f.values,0),h.set(d.evaluate(r),f.values.length),m=c.length-1}else for(let g=0;g<f.times.length;g++){if(Math.abs(f.times[g]-r)<.001)return g;if(f.times[g]<r&&f.times[g+1]>r){c.set(f.times.slice(0,g+1),0),c[g+1]=r,c.set(f.times.slice(g+1),g+2),h.set(f.values.slice(0,(g+1)*a),0),h.set(d.evaluate(r),(g+1)*a),h.set(f.values.slice((g+1)*a),(g+2)*a),m=g+1;break}}return f.times=c,f.values=h,m},mergeMorphTargetTracks:function(f,r){const s=[],a={},c=f.tracks;for(let h=0;h<c.length;++h){let d=c[h];const m=tr.parseTrackName(d.name),g=tr.findNode(r,m.nodeName);if("morphTargetInfluences"!==m.propertyName||void 0===m.propertyIndex){s.push(d);continue}if(d.createInterpolant!==d.InterpolantFactoryMethodDiscrete&&d.createInterpolant!==d.InterpolantFactoryMethodLinear){if(d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),d=d.clone(),d.setInterpolation(2301)}const y=g.morphTargetInfluences.length,b=g.morphTargetDictionary[m.propertyIndex];if(void 0===b)throw new Error("THREE.GLTFExporter: Morph target name not found: "+m.propertyIndex);let w;if(void 0===a[g.uuid]){w=d.clone();const E=new w.ValueBufferType(y*w.times.length);for(let T=0;T<w.times.length;T++)E[T*y+b]=w.values[T];w.name=(m.nodeName||"")+".morphTargetInfluences",w.values=E,a[g.uuid]=w,s.push(w);continue}const x=d.createInterpolant(new d.ValueBufferType(1));w=a[g.uuid];for(let E=0;E<w.times.length;E++)w.values[E*y+b]=x.evaluate(w.times[E]);for(let E=0;E<d.times.length;E++){const T=this.insertKeyframe(w,d.times[E]);w.values[T*y+b]=d.values[E]}}return f.tracks=s,f}};const g1=f=>void 0!==f.material&&f.userData&&f.userData.variantMaterials&&!!Array.from(f.userData.variantMaterials.values()).filter(r=>Ip(r.material)),Ip=f=>f&&f.isMaterial&&!Array.isArray(f);class hA{constructor(r){this.writer=r,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(r){const s=new Set;for(const a of r)a.traverse(c=>{if(!g1(c))return;const h=c.userData.variantMaterials,d=c.userData.variantData;for(const[m,g]of d){const y=h.get(g.index);Ip(y.material)&&s.add(m)}});s.forEach(a=>this.variantNames.push(a))}writeMesh(r,s){if(!g1(r))return;const a=r.userData,c=a.variantMaterials,h=a.variantData,d=new Map,m=new Map,g=Array.from(h.values()).sort((w,x)=>w.index-x.index);for(const[w,x]of g.entries())m.set(x.index,w);for(const w of h.values()){const x=c.get(w.index).material;if(!Ip(x))continue;const E=this.writer.processMaterial(x);d.has(E)||d.set(E,{material:E,variants:[]}),d.get(E).variants.push(m.get(w.index))}const y=Array.from(d.values()).map(w=>w.variants.sort((x,E)=>x-E)&&w).sort((w,x)=>w.material-x.material);if(0===y.length)return;const b=Ip(a.originalMaterial)?this.writer.processMaterial(a.originalMaterial):-1;for(const w of s.primitives)b>=0&&(w.material=b),w.extensions=w.extensions||{},w.extensions[this.name]={mappings:y}}afterParse(){if(0===this.variantNames.length)return;const r=this.writer.json;r.extensions=r.extensions||{};const s=this.variantNames.map(a=>({name:a}));r.extensions[this.name]={variants:s},this.writer.extensionsUsed[this.name]=!0}}const Vn=Symbol("correlatedObjects"),dr=Symbol("sourceObject"),ga=Symbol("onUpdate");class Pp{constructor(r,s,a=null){this[ga]=r,this[dr]=s,this[Vn]=a}}const v1=new wv,y1=new Bi,_1=new Nh(2,2);let b1=0;const ql=Symbol("threeTexture");class dA extends Pp{get[ql](){var r;return console.assert(null!=this[Vn]&&this[Vn].size>0,"Image correlated object is undefined"),null===(r=this[Vn])||void 0===r?void 0:r.values().next().value}constructor(r,s,a){super(r,a=a??{name:s&&s.image&&s.image.src?s.image.src.split("/").pop():"adhoc_image",uri:s&&s.image&&s.image.src?s.image.src:"adhoc_image"+b1++},new Set(s?[s]:[]))}get name(){return this[dr].name||""}get uri(){return this[dr].uri}get bufferView(){return this[dr].bufferView}get type(){return null!=this.uri?"external":"embedded"}set name(r){this[dr].name=r}setURI(r){var s=this;return(0,Y.Z)(function*(){s[dr].uri=r,s[dr].name=r.split("/").pop();const a=yield new Promise((h,d)=>{v1.load(r,h,void 0,d)}),c=s[ql];c.image=a,c.needsUpdate=!0,s[ga]()})()}createThumbnail(r,s){var a=this;return(0,Y.Z)(function*(){const c=new ta;y1.map=a[ql];const h=new xt(_1,y1);c.add(h);const d=new zn(-1,1,1,-1,0,1),{threeRenderer:m}=$a.singleton,g=new K(r,s);m.setRenderTarget(g),m.render(c,d),m.setRenderTarget(null);const y=new Uint8Array(r*s*4);m.readRenderTargetPixels(g,0,0,r,s,y),Po.width=r,Po.height=s;const b=Po.getContext("2d"),w=b.createImageData(r,s);return w.data.set(y),b.putImageData(w,0,0),new Promise(function(){var x=(0,Y.Z)(function*(E,T){Po.toBlob(I=>{if(!I)return T("Failed to capture thumbnail.");E(URL.createObjectURL(I))},"image/png")});return function(E,T){return x.apply(this,arguments)}}())})()}}var Lo,Rc,f;(f=Lo||(Lo={}))[f.Nearest=9728]="Nearest",f[f.Linear=9729]="Linear",f[f.NearestMipmapNearest=9984]="NearestMipmapNearest",f[f.LinearMipmapNearest=9985]="LinearMipmapNearest",f[f.NearestMipmapLinear=9986]="NearestMipmapLinear",f[f.LinearMipmapLinear=9987]="LinearMipmapLinear",function(f){f[f.ClampToEdge=33071]="ClampToEdge",f[f.MirroredRepeat=33648]="MirroredRepeat",f[f.Repeat=10497]="Repeat"}(Rc||(Rc={}));const fA=(()=>{const f=[Lo.Nearest,Lo.Linear,Lo.NearestMipmapNearest,Lo.LinearMipmapLinear,Lo.NearestMipmapLinear,Lo.LinearMipmapLinear];return r=>f.indexOf(r)>-1})(),w1=(()=>{const f=[Lo.Nearest,Lo.Linear];return r=>f.indexOf(r)>-1})(),II=(()=>{const f=[Rc.ClampToEdge,Rc.MirroredRepeat,Rc.Repeat];return r=>f.indexOf(r)>-1})(),d_=Symbol("threeTextures"),ls=Symbol("setProperty"),Vs=Symbol("sourceSampler");class pA extends Pp{get[d_](){return console.assert(null!=this[Vn]&&this[Vn].size>0,"Sampler correlated object is undefined"),this[Vn]}get[Vs](){return console.assert(null!=this[dr],"Sampler source is undefined"),this[dr]}constructor(r,s,a){null==(a=a??{}).minFilter&&(a.minFilter=s?s.minFilter:Lo.LinearMipmapLinear),null==a.magFilter&&(a.magFilter=s?s.magFilter:Lo.Linear),null==a.wrapS&&(a.wrapS=s?s.wrapS:Rc.Repeat),null==a.wrapT&&(a.wrapT=s?s.wrapT:Rc.Repeat),super(r,a,new Set(s?[s]:[]))}get name(){return this[dr].name||""}get minFilter(){return this[Vs].minFilter}get magFilter(){return this[Vs].magFilter}get wrapS(){return this[Vs].wrapS}get wrapT(){return this[Vs].wrapT}setMinFilter(r){this[ls]("minFilter",r)}setMagFilter(r){this[ls]("magFilter",r)}setWrapS(r){this[ls]("wrapS",r)}setWrapT(r){this[ls]("wrapT",r)}[ls](r,s){const a=this[Vs];if(null!=a){if(((c,h)=>{switch(c){case"minFilter":return fA(h);case"magFilter":return w1(h);case"wrapS":case"wrapT":return II(h);default:throw new Error(`Cannot configure property "${c}" on Sampler`)}})(r,s)){a[r]=s;for(const c of this[d_])c[r]=s,c.needsUpdate=!0}this[ga]()}}}const x1=Symbol("image"),va=Symbol("sampler");class Oo extends Pp{constructor(r,s,a=null,c=null,h=null){super(r,a||{},new Set(s?[s]:[])),this[va]=new pA(r,s,c),this[x1]=new dA(r,s,h)}get name(){return this[dr].name||""}set name(r){this[dr].name=r}get sampler(){return this[va]}get source(){return this[x1]}}var Fo,f_;const kp=Symbol("texture"),ih=Symbol("transform"),p_=Symbol("materials"),M1=Symbol("usage");var Bo;!function(f){f[f.Base=0]="Base",f[f.MetallicRoughness=1]="MetallicRoughness",f[f.Normal=2]="Normal",f[f.Occlusion=3]="Occlusion",f[f.Emissive=4]="Emissive"}(Bo||(Bo={}));class sh{constructor(r,s,a,c,h,d){if(this[Fo]=null,this[f_]={rotation:0,scale:new Me(1,1),offset:new Me(0,0)},d&&a){const m=h.textures?h.textures[d.index]:null,g=m&&h.samplers?h.samplers[m.sampler]:null,y=m&&h.images?h.images[m.source]:null;this[ih].rotation=a.rotation,this[ih].scale.copy(a.repeat),this[ih].offset.copy(a.offset),this[kp]=new Oo(r,a,m,g,y)}this.onUpdate=r,this[p_]=c,this[M1]=s}get texture(){return this[kp]}setTexture(r){const s=null!=r?r.source[ql]:null;let a=3001;if(this[kp]=r,this[p_])for(const c of this[p_]){switch(this[M1]){case Bo.Base:c.map=s;break;case Bo.MetallicRoughness:a=3e3,c.metalnessMap=s,c.roughnessMap=s;break;case Bo.Normal:a=3e3,c.normalMap=s;break;case Bo.Occlusion:a=3e3,c.aoMap=s;break;case Bo.Emissive:c.emissiveMap=s}c.needsUpdate=!0}s&&(s.encoding=a,s.rotation=this[ih].rotation,s.repeat=this[ih].scale,s.offset=this[ih].offset),this.onUpdate()}}Fo=kp,f_=ih;const Ic=Symbol("threeMaterials"),E1=Symbol("baseColorTexture"),m_=Symbol("metallicRoughnessTexture");class mA extends Pp{constructor(r,s,a,c){super(r,a,c),null==a.baseColorFactor&&(a.baseColorFactor=[1,1,1,1]),null==a.roughnessFactor&&(a.roughnessFactor=1),null==a.metallicFactor&&(a.metallicFactor=1);const{baseColorTexture:h,metallicRoughnessTexture:d}=a,{map:m,metalnessMap:g}=c.values().next().value;this[E1]=new sh(r,Bo.Base,m,c,s,h||null),this[m_]=new sh(r,Bo.MetallicRoughness,g,c,s,d||null)}get[Ic](){return this[Vn]}get baseColorFactor(){return this[dr].baseColorFactor}get metallicFactor(){return this[dr].metallicFactor}get roughnessFactor(){return this[dr].roughnessFactor}get baseColorTexture(){return this[E1]}get metallicRoughnessTexture(){return this[m_]}setBaseColorFactor(r){for(const s of this[Ic])s.color.fromArray(r),s.opacity=r[3];this[dr].baseColorFactor=r,this[ga]()}setMetallicFactor(r){for(const s of this[Ic])s.metalness=r;this[dr].metallicFactor=r,this[ga]()}setRoughnessFactor(r){for(const s of this[Ic])s.roughness=r;this[dr].roughnessFactor=r,this[ga]()}}var g_;const v_=Symbol("pbrMetallicRoughness"),Np=Symbol("normalTexture"),S1=Symbol("occlusionTexture"),y_=Symbol("emissiveTexture"),ni=Symbol("backingThreeMaterial"),Qa=Symbol("applyAlphaCutoff"),el=Symbol("lazyLoadGLTFInfo"),Qg=Symbol("initialize"),e0=Symbol("getLoadedMaterial"),Us=Symbol("ensureMaterialIsLoaded"),__=Symbol("gltfIndex"),kd=Symbol("setActive"),Lp=Symbol("variantIndices"),t0=Symbol("isActive"),Op=Symbol("variantSet"),C1=Symbol("modelVariants");class b_ extends Pp{constructor(r,s,a,c,h,d,m,g){super(r,a,m),this[g_]=new Set,this[__]=c,this[t0]=h,this[C1]=d,null==g?this[Qg](s):this[el]=g}get[(g_=Op,ni)](){return this[Vn].values().next().value}[Qg](r){const s=this[ga],a=this[dr],c=this[Vn];a.extensions&&a.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${a.name} uses a deprecated extension\n          "KHR_materials_pbrSpecularGlossiness", please use\n          "pbrMetallicRoughness" instead. Specular Glossiness materials are\n          currently supported for rendering, but not for our scene-graph API,\n          nor for auto-generation of USDZ for Quick Look.`),null==a.pbrMetallicRoughness&&(a.pbrMetallicRoughness={}),this[v_]=new mA(s,r,a.pbrMetallicRoughness,c),null==a.emissiveFactor&&(a.emissiveFactor=[0,0,0]),null==a.doubleSided&&(a.doubleSided=!1),null==a.alphaMode&&(a.alphaMode="OPAQUE"),null==a.alphaCutoff&&(a.alphaCutoff=.5);const{normalTexture:h,occlusionTexture:d,emissiveTexture:m}=a,{normalMap:g,aoMap:y,emissiveMap:b}=c.values().next().value;this[Np]=new sh(s,Bo.Normal,g,c,r,h||null),this[S1]=new sh(s,Bo.Occlusion,y,c,r,d||null),this[y_]=new sh(s,Bo.Emissive,b,c,r,m||null)}[e0](){var r=this;return(0,Y.Z)(function*(){if(null!=r[el]){const{set:s,material:a}=yield r[el].doLazyLoad();return r[Vn]=s,r[Qg](r[el].gltf),r[el]=void 0,r.ensureLoaded=(0,Y.Z)(function*(){}),a}return r[Vn].values().next().value})()}[Us](){if(null!=this[el])throw new Error(`Material "${this.name}" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material.`)}ensureLoaded(){var r=this;return(0,Y.Z)(function*(){yield r[e0]()})()}get isLoaded(){return null==this[el]}get isActive(){return this[t0]}[kd](r){this[t0]=r}get name(){return this[dr].name}set name(r){const s=this[dr];if(null!=s&&(s.name=r),null!=this[Vn])for(const a of this[Vn])a.name=r}get pbrMetallicRoughness(){return this[Us](),this[v_]}get normalTexture(){return this[Us](),this[Np]}get occlusionTexture(){return this[Us](),this[S1]}get emissiveTexture(){return this[Us](),this[y_]}get emissiveFactor(){return this[Us](),this[dr].emissiveFactor}get index(){return this[__]}[Lp](){return this[Op]}hasVariant(r){const s=this[C1].get(r);return null!=s&&this[Op].has(s.index)}setEmissiveFactor(r){this[Us]();for(const s of this[Vn])s.emissive.fromArray(r);this[dr].emissiveFactor=r,this[ga]()}[Qa](){this[Us]();const r=this[dr];for(const s of this[Vn])s.alphaTest="MASK"===this[dr].alphaMode?r.alphaCutoff:void 0,s.needsUpdate=!0}setAlphaCutoff(r){this[Us](),this[dr].alphaCutoff=r,this[Qa](),this[ga]()}getAlphaCutoff(){return this[Us](),this[dr].alphaCutoff}setDoubleSided(r){this[Us]();for(const s of this[Vn])s.side=r?2:0,s.needsUpdate=!0;this[dr].doubleSided=r,this[ga]()}getDoubleSided(){return this[Us](),this[dr].doubleSided}setAlphaMode(r){this[Us]();const s=(a,c)=>{a.transparent=c,a.depthWrite=!c};this[dr].alphaMode=r;for(const a of this[Vn])s(a,"BLEND"===r),this[Qa](),a.needsUpdate=!0;this[ga]()}getAlphaMode(){return this[Us](),this[dr].alphaMode}}var A1,T1,D1;const Pc=Symbol("materials"),$l=Symbol("variantToMaterialMap"),Xl=Symbol("modelVariants"),R1=Symbol("mesh"),I1=Symbol("children"),P1=Symbol("initialMaterialIdx"),w_=Symbol("activeMaterialIdx");class k1{constructor(r){this.name="",this[A1]=new Array,this.name=r}}A1=I1;class N1 extends k1{constructor(r,s,a,c){super(r.name),this[T1]=new Map,this[D1]=new Map,this[R1]=r;const{gltf:h,threeGLTF:d,threeObjectMap:m}=c;this[Xl]=a,this.mesh.userData.variantData=a;const g=m.get(r.material);null!=g.materials?this[P1]=this[w_]=g.materials:console.error(`Primitive (${r.name}) missing initial material reference.`);const y=r.userData.associations||{};if(null==y.meshes)return void console.error("Mesh is missing primitive index association");const b=((h.meshes||[])[y.meshes].primitives||[])[y.primitives];if(null!=b){if(null!=b.material)this[Pc].set(b.material,s[b.material]);else{const w=s.findIndex(x=>"Default"===x.name);w>=0?this[Pc].set(w,s[w]):console.warn("gltfPrimitive has no material!")}if(b.extensions&&b.extensions.KHR_materials_variants){const w=b.extensions.KHR_materials_variants,x=d.parser.json.extensions.KHR_materials_variants.variants;for(const E of w.mappings){const T=s[E.material];this[Pc].set(E.material,T);for(const I of E.variants){const{name:L}=x[I];this[$l].set(I,T),T[Lp]().add(I),a.has(L)||a.set(L,{name:L,index:I})}}}}else console.error("Mesh primitive definition is missing.")}get mesh(){return this[R1]}setActiveMaterial(r){var s=this;return(0,Y.Z)(function*(){const a=s[Pc].get(r);return null!=a&&(s.mesh.material=yield a[e0](),s[w_]=r),s.mesh.material})()}getActiveMaterial(){return this[Pc].get(this[w_])}getMaterial(r){return this[Pc].get(r)}enableVariant(r){var s=this;return(0,Y.Z)(function*(){if(null==r)return s.setActiveMaterial(s[P1]);if(null!=s[$l]&&s[Xl].has(r)){const a=s[Xl].get(r);return s.enableVariantHelper(a.index)}return null})()}enableVariantHelper(r){var s=this;return(0,Y.Z)(function*(){if(null!=s[$l]&&null!=r){const a=s[$l].get(r);if(null!=a)return s.setActiveMaterial(a.index)}return null})()}instantiateVariants(){var r=this;return(0,Y.Z)(function*(){if(null!=r[$l])for(const s of r[$l].keys()){if(null!=r.mesh.userData.variantMaterials.get(s).material)continue;const a=yield r.enableVariantHelper(s);null!=a&&(r.mesh.userData.variantMaterials.get(s).material=a)}})()}get variantInfo(){return this[$l]}addVariant(r,s){if(!this.ensureVariantIsUnused(s))return!1;this[Xl].has(s)||this[Xl].set(s,{name:s,index:this[Xl].size});const a=this[Xl].get(s).index;return r[Lp]().add(a),this[$l].set(a,r),this[Pc].set(r.index,r),this.updateVariantUserData(a,r),!0}deleteVariant(r){this.variantInfo.has(r)&&(this.variantInfo.delete(r),this.mesh.userData.variantMaterials?.delete(r))}updateVariantUserData(r,s){s[Lp]().add(r),this.mesh.userData.variantData=this[Xl],this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(r,{material:s[Vn].values().next().value,gltfMaterialIndex:s.index})}ensureVariantIsUnused(r){const s=this[Xl].get(r);return null==s||!this.variantInfo.has(s.index)||(console.warn(`Primitive cannot add variant '${r}' for this material, it already exists.`),!1)}}var L1,O1,F1,B1,x_,M_;T1=Pc,D1=$l;const kc=Symbol("materials"),n0=Symbol("hierarchy"),E_=Symbol("roots"),tl=Symbol("primitives"),r0=Symbol("correlatedSceneGraph"),S_=Symbol("prepareVariantsForExport"),C_=Symbol("switchVariant"),s0=Symbol("threeScene"),o0=Symbol("materialsFromPoint"),Nc=Symbol("materialFromPoint"),Ms=Symbol("variantData"),A_=Symbol("availableVariants"),Lc=Symbol("modelOnUpdate"),gA=Symbol("cloneMaterial");class Hs{constructor(r,s,a,c){this.gltf=r,this.gltfElementMap=s,this.mapKey=a,this.doLazyLoad=c}}class PI{constructor(r,s=(()=>{})){this[L1]=new Array,this[O1]=new Array,this[F1]=new Array,this[B1]=new Array,this[x_]=()=>{},this[M_]=new Map,this[Lc]=s,this[r0]=r;const{gltf:a,threeGLTF:c,gltfElementMap:h}=r;this[s0]=c.scene;for(const[g,y]of a.materials.entries()){const b=h.get(y);if(null!=b)this[kc].push(new b_(s,a,y,g,!0,this[Ms],b));else{const w=(a.materials||[])[g],x=g,E=function(){var T=(0,Y.Z)(function*(){const I=yield c.parser.getDependency("material",x),L=new Set;return h.set(w,L),L.add(I),{set:L,material:I}});return function(){return T.apply(this,arguments)}}();this[kc].push(new b_(s,a,w,g,!1,this[Ms],b,new Hs(a,h,w,E)))}}const d=new Map,m=new Array;for(const g of c.scene.children)m.push(g);for(;m.length>0;){const g=m.pop();let y=null;g instanceof xt?(y=new N1(g,this.materials,this[Ms],r),this[tl].push(y)):y=new k1(g.name);const b=d.get(g);null!=b?b[I1].push(y):this[E_].push(y),this[n0].push(y);for(const w of g.children)m.push(w),d.set(g,y)}}get materials(){return this[kc]}[(L1=kc,O1=n0,F1=E_,B1=tl,x_=Lc,M_=Ms,A_)](){const r=Array.from(this[Ms].values());return r.sort((s,a)=>s.index-a.index),r.map(s=>s.name)}getMaterialByName(r){const s=this[kc].filter(a=>a.name===r);return s.length>0?s[0]:null}[o0](r){return r.intersectObject(this[s0],!0).map(s=>{const a=this[n0].find(c=>c instanceof N1&&c.mesh===s.object);return null!=a?a.getActiveMaterial():null})}[Nc](r){const s=this[o0](r);return s.length>0?s[0]:null}[C_](r){var s=this;return(0,Y.Z)(function*(){for(const a of s[tl])yield a.enableVariant(r);for(const a of s.materials)a[kd](!1);for(const a of s[tl])s.materials[a.getActiveMaterial().index][kd](!0)})()}[S_](){var r=this;return(0,Y.Z)(function*(){const s=new Array;for(const a of r[tl])s.push(a.instantiateVariants());yield Promise.all(s)})()}[gA](r,s){const a=this.materials[r];a.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");const c=a[Vn],h=JSON.parse(JSON.stringify(a[dr]));h.name=s,this[r0].gltf.materials.push(h);const d=new Set;for(const[g,y]of c.entries()){const b=y.clone();b.name=s+(c.size>1?"_inst"+g:""),d.add(b)}const m=new b_(this[Lc],this[r0].gltf,h,this[kc].length,!1,this[Ms],d);return this[kc].push(m),m}createMaterialInstanceForVariant(r,s,a,c=!0){let h=null;for(const d of this[tl]){const m=this[Ms].get(a);null!=m&&d.variantInfo.has(m.index)||null!=d.getMaterial(r)&&(this.hasVariant(a)||this.createVariant(a),null==h&&(h=this[gA](r,s)),d.addVariant(h,a))}if(c&&null!=h){h[kd](!0),this.materials[r][kd](!1);for(const d of this[tl])d.enableVariant(a)}return h}createVariant(r){this[Ms].has(r)?console.warn(`Variant '${r}'' already exists`):this[Ms].set(r,{name:r,index:this[Ms].size})}hasVariant(r){return this[Ms].has(r)}setMaterialToVariant(r,s){if(null!=this[A_]().find(a=>a===s))if(r<0||r>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const a of this[tl]){const c=a.getMaterial(r);null!=c&&a.addVariant(c,s)}else console.warn(`Can't add material to '${s}', the variant does not exist.'`)}updateVariantName(r,s){const a=this[Ms].get(r);null!=a&&(a.name=s,this[Ms].set(s,a),this[Ms].delete(r))}deleteVariant(r){const s=this[Ms].get(r);if(null!=s){for(const a of this.materials)a.hasVariant(r)&&a[Op].delete(s.index);for(const a of this[tl])a.deleteVariant(s.index);this[Ms].delete(r)}}}var a0=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const Nd=Symbol("currentGLTF"),Fp=Symbol("model"),Pt=Symbol("getOnUpdateMethod"),V1=Symbol("textureLoader"),T_=Symbol("originalGltfJson");var D_=function(f,r,s,a){for(var c,h=arguments.length,d=h<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,s):a,m=f.length-1;m>=0;m--)(c=f[m])&&(d=(h<3?c(d):h>3?c(r,s,d):c(r,s))||d);return h>3&&d&&Object.defineProperty(r,s,d),d};const Ld=Math.PI/32,vA={basis:[ep(Ki(Ld,"rad"))],keywords:{auto:[null]}},Kl=Symbol("autoRotateStartTime"),Od=Symbol("radiansPerSecond"),fi=Symbol("syncRotationRate"),U1=Symbol("onCameraChange"),H1=(f=>{var r,s,a;class c extends f{constructor(){super(...arguments),this[r]=new Map,this[s]=d=>{d.forEach(m=>{m instanceof MutationRecord&&"childList"!==m.type||(m.addedNodes.forEach(g=>{this[Cy](g)}),m.removedNodes.forEach(g=>{this[Ay](g)}),this[os]())})},this[a]=new MutationObserver(this[Sy])}connectedCallback(){super.connectedCallback();for(let m=0;m<this.children.length;++m)this[Cy](this.children[m]);const{ShadyDOM:d}=self;null==d?this[_d].observe(this,{childList:!0}):this[_d]=d.observeChildren(this,this[Sy])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:d}=self;null==d?this[_d].disconnect():d.unobserveChildren(this[_d])}[(r=yd,s=Sy,a=_d,Xa)](d,m){super[Xa](d,m);const g=this[Mt],{annotationRenderer:y}=g,b=g.getCamera();g.shouldRender()&&(g.updateHotspots(b.position),y.domElement.style.display="",y.render(g,b))}updateHotspot(d){const m=this[yd].get(d.name);null!=m&&(m.updatePosition(d.position),m.updateNormal(d.normal),this[os]())}positionAndNormalFromPoint(d,m){const g=this[Mt],y=g.getNDC(d,m),b=g.positionAndNormalFromPoint(y);if(null==b)return null;Lg.copy(g.target.matrixWorld).invert();const w=ap(b.position.applyMatrix4(Lg));Og.getNormalMatrix(Lg);const x=ap(b.normal.applyNormalMatrix(Og));let E=null;return null!=b.uv&&(E=Pg(b.uv)),{position:w,normal:x,uv:E}}[Cy](d){if(!(d instanceof HTMLElement&&0===d.slot.indexOf("hotspot")))return;let m=this[yd].get(d.slot);null!=m?m.increment():(m=new ox({name:d.slot,position:d.dataset.position,normal:d.dataset.normal}),this[yd].set(d.slot,m),this[Mt].addHotspot(m)),this[Mt].queueRender()}[Ay](d){if(!(d instanceof HTMLElement))return;const m=this[yd].get(d.slot);m&&(m.decrement()&&(this[Mt].removeHotspot(m),this[yd].delete(d.slot)),this[Mt].queueRender())}}return c})((f=>{var r,s,a,c;class h extends f{constructor(){super(...arguments),this[r]=void 0,this[s]=null,this[a]=new $m,this[c]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[Fp]}get availableVariants(){return this.model?this.model[A_]():[]}get originalGltfJson(){return this[T_]}[(r=Fp,s=Nd,a=V1,c=T_,Pt)](){return()=>{this[os]()}}createTexture(m,g="image/png"){var y=this;return(0,Y.Z)(function*(){const b=y[Nd],w=yield new Promise(x=>y[V1].load(m,x));return b&&w?(w.encoding=3001,w.wrapS=1e3,w.wrapT=1e3,w.flipY=!1,w.userData.mimeType=g,new Oo(y[Pt](),w)):null})()}updated(m){var g=()=>super.updated,y=this;return(0,Y.Z)(function*(){if(g().call(y,m),m.has("variantName")){const b=y[Nd],{variantName:w}=y;null!=b&&(yield y[Fp][C_](w),y[os](),y.dispatchEvent(new CustomEvent("variant-applied")))}if(m.has("orientation")||m.has("scale")){const{modelContainer:b}=y[Mt],w=gi(y.orientation)[0].terms,x=Wa(w[0]).number,E=Wa(w[1]).number,T=Wa(w[2]).number;b.quaternion.setFromEuler(new Qn(E,T,x,"YXZ"));const I=gi(y.scale)[0].terms;b.scale.set(I[0].number,I[1].number,I[2].number),y[Mt].updateBoundingBox(),y[Mt].updateShadow(),y[Qr].arRenderer.onUpdateScene(),y[os]()}})()}[Ll](){super[Ll]();const{currentGLTF:m}=this[Mt];if(null!=m){const{correlatedSceneGraph:g}=m;null!=g&&m!==this[Nd]&&(this[Fp]=new PI(g,this[Pt]()),this[T_]=JSON.parse(JSON.stringify(g.gltf))),"variants"in m.userData&&this.requestUpdate("variantName")}this[Nd]=m,this.dispatchEvent(new CustomEvent("scene-graph-ready"))}exportScene(m){var g=this;return(0,Y.Z)(function*(){const y=g[Mt];return new Promise(function(){var b=(0,Y.Z)(function*(w){const x={binary:!0,onlyVisible:!0,maxTextureSize:1/0,forcePowerOfTwoTextures:!1,includeCustomExtensions:!1,embedImages:!0};Object.assign(x,m),x.animations=y.animations,x.truncateDrawRange=!0;const E=y.shadow;let T=!1;null!=E&&(T=E.visible,E.visible=!1),yield g[Fp][S_](),(new o_).register(I=>new hA(I)).parse(y.modelContainer.children[0],I=>w(new Blob([x.binary?I:JSON.stringify(I)],{type:x.binary?"application/octet-stream":"application/json"})),x),null!=E&&(E.visible=T)});return function(w){return b.apply(this,arguments)}}())})()}materialFromPoint(m,g){const y=this[Mt],b=y.getNDC(m,g);return y.raycaster.setFromCamera(b,y.getCamera()),this[Fp][Nc](y.raycaster)}}return a0([ie({type:String,attribute:"variant-name"})],h.prototype,"variantName",void 0),a0([ie({type:String,attribute:"orientation"})],h.prototype,"orientation",void 0),a0([ie({type:String,attribute:"scale"})],h.prototype,"scale",void 0),h})((f=>{var r,s,a;class c extends f{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[r]=performance.now(),this[s]=0,this[a]=d=>{this.autoRotate&&"user-interaction"===d.detail.source&&(this[Kl]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[U1]),this[Kl]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[U1]),this[Kl]=performance.now()}updated(d){super.updated(d),d.has("autoRotate")&&(this[Kl]=performance.now())}[(r=Kl,s=Od,fi)](d){this[Od]=d[0]}[Xa](d,m){if(super[Xa](d,m),!this.autoRotate||!this[vd]()||this[Qr].isPresenting)return;const g=Math.min(m,d-this[Kl]-this.autoRotateDelay);g>0&&(this[Mt].yaw=this.turntableRotation+this[Od]*g*.001)}get turntableRotation(){return this[Mt].yaw}resetTurntableRotation(d=0){this[Mt].yaw=d}}return a=U1,D_([ie({type:Boolean,attribute:"auto-rotate"})],c.prototype,"autoRotate",void 0),D_([ie({type:Number,attribute:"auto-rotate-delay"})],c.prototype,"autoRotateDelay",void 0),D_([ma({intrinsics:vA,updateHandler:fi}),ie({type:String,attribute:"rotation-per-second"})],c.prototype,"rotationPerSecond",void 0),c})((f=>{var r,s,a;class c extends f{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this[r]=null,this[s]=null,this[a]=d=>{d.element===this&&this[yg]()}}connectedCallback(){super.connectedCallback(),this[Qr].loader.addEventListener("preload",this[ey])}disconnectedCallback(){super.disconnectedCallback(),this[Qr].loader.removeEventListener("preload",this[ey])}updated(d){super.updated(d),d.has("shadowIntensity")&&(this[Mt].setShadowIntensity(.5*this.shadowIntensity),this[os]()),d.has("shadowSoftness")&&(this[Mt].setShadowSoftness(this.shadowSoftness),this[os]()),d.has("exposure")&&(this[Mt].exposure=this.exposure,this[os]()),(d.has("environmentImage")||d.has("skyboxImage"))&&this[ju]()&&this[yg]()}hasBakedShadow(){return this[Mt].bakedShadows.size>0}[(r=tp,s=kl,a=ey,Ll)](){super[Ll](),null!=this[tp]&&this[np](this[tp])}[yg](){var d=this;return(0,Y.Z)(function*(){const{skyboxImage:m,environmentImage:g}=d;null!=d[kl]&&(d[kl](),d[kl]=null);const{textureUtils:y}=d[Qr];if(null!=y)try{const{environmentMap:b,skybox:w}=yield new Promise(function(){var x=(0,Y.Z)(function*(E,T){const I=y.generateEnvironmentMapAndSkybox(tx(m),g,{progressTracker:d[gd]});d[kl]=()=>T(I),E(yield I)});return function(E,T){return x.apply(this,arguments)}}());d[Mt].background=null!=w?w.name===b.name?b:w:null,d[np](b),d[Mt].dispatchEvent({type:"envmap-update"})}catch(b){if(b instanceof Error)throw d[np](null),b}})()}[np](d){this[Mt].environment!==d&&(this[tp]=d,this[Mt].environment=this[tp],this.dispatchEvent(new CustomEvent("environment-change")),this[os]())}}return Ou([ie({type:String,attribute:"environment-image"})],c.prototype,"environmentImage",void 0),Ou([ie({type:String,attribute:"skybox-image"})],c.prototype,"skyboxImage",void 0),Ou([ie({type:Number,attribute:"shadow-intensity"})],c.prototype,"shadowIntensity",void 0),Ou([ie({type:Number,attribute:"shadow-softness"})],c.prototype,"shadowSoftness",void 0),Ou([ie({type:Number})],c.prototype,"exposure",void 0),c})((f=>{var r,s,a,c,h,d,m,g,y,b,w,x,E,T,I,L,R,$;class B extends f{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit="0deg 75deg 105%",this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPromptStyle="wiggle",this.interactionPrompt=Cd,this.interactionPolicy="always-allow",this.orbitSensitivity=1,this.touchAction="pan-y",this.disableZoom=!1,this.enablePan=!1,this.interpolationDecay=50,this.bounds="legacy",this[r]=this.shadowRoot.querySelector(".interaction-prompt"),this[s]=this.shadowRoot.querySelector("#prompt"),this[a]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[c]=this.shadowRoot.querySelector(".pan-target"),this[h]=1/0,this[d]=0,this[m]=1/0,this[g]=!1,this[y]=!1,this[b]=new Jx(this[Mt].camera,this[Kr],this[Mt]),this[w]=new Jm,this[x]=!1,this[E]=!1,this[T]=!1,this[I]=()=>{isFinite(this[io])||(this[io]=performance.now()),this.interactionPrompt!==Qx||this[Mp]||(this[zl]=!0)},this[L]=()=>{this.interactionPrompt===Qx&&(this[zl]=!1,this[Xg].classList.remove("visible"),this[jl]=1/0,this[io]=1/0)},this[R]=({source:z})=>{this[r1](),this[os](),z===qg&&(this[Mp]=!0,this[Kg]()),this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:z}}))},this[$]=z=>{"pointer-change-start"===z.type?this[md].classList.add("pointer-tumbling"):this[md].classList.remove("pointer-tumbling")}}getCameraOrbit(){const{theta:z,phi:J,radius:te}=this[Yu];return{theta:z,phi:J,radius:te,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return ap(this[Qr].isPresenting?this[Qr].arRenderer.target:this[Mt].getTarget())}getFieldOfView(){return this[ei].getFieldOfView()}getMinimumFieldOfView(){return this[ei].options.minimumFieldOfView}getMaximumFieldOfView(){return this[ei].options.maximumFieldOfView}getIdealAspect(){return this[Mt].idealAspect}jumpCameraToGoal(){this[Ii]=!0,this.requestUpdate(Ii,!1)}resetInteractionPrompt(){this[Ep]=0,this[jl]=1/0,this[Mp]=!1,this[zl]=this.interactionPrompt===Cd&&this.cameraControls}zoom(z){const J=new WheelEvent("wheel",{deltaY:-30*z});this[Kr].dispatchEvent(J)}connectedCallback(){super.connectedCallback(),this[ei].addEventListener("change",this[r_]),this[ei].addEventListener("pointer-change-start",this[Hl]),this[ei].addEventListener("pointer-change-end",this[Hl])}disconnectedCallback(){super.disconnectedCallback(),this[ei].removeEventListener("change",this[r_]),this[ei].removeEventListener("pointer-change-start",this[Hl]),this[ei].removeEventListener("pointer-change-end",this[Hl])}updated(z){super.updated(z);const J=this[ei],te=this[Mt],le=this[Kr];z.has("cameraControls")&&(this.cameraControls?(J.enableInteraction(),this.interactionPrompt===Cd&&(this[zl]=!0),le.addEventListener("focus",this[Ul]),le.addEventListener("blur",this[Td])):(le.removeEventListener("focus",this[Ul]),le.removeEventListener("blur",this[Td]),J.disableInteraction(),this[Kg]()),this[Kr].setAttribute("aria-label",this[fd])),z.has("disableZoom")&&(J.disableZoom=this.disableZoom),z.has("enablePan")&&(J.enablePan=this.enablePan),z.has("bounds")&&(te.tightBounds="tight"===this.bounds),(z.has("interactionPrompt")||z.has("cameraControls")||z.has("src"))&&(this.interactionPrompt===Cd&&this.cameraControls&&!this[Mp]?this[zl]=!0:this[Kg]()),z.has("interactionPolicy")&&J.applyOptions({interactionPolicy:this.interactionPolicy}),z.has("touchAction")&&(J.applyOptions({touchAction:this.touchAction}),J.updateTouchActionStyle()),z.has("orbitSensitivity")&&(J.sensitivity=this.orbitSensitivity),z.has("interpolationDecay")&&(J.setDamperDecayTime(this.interpolationDecay),te.setTargetDamperDecayTime(this.interpolationDecay)),!0===this[Ii]&&Promise.resolve().then(()=>{J.jumpToGoal(),te.jumpToGoal(),this[Ii]=!1})}updateFraming(){var z=this;return(0,Y.Z)(function*(){const J=z[Mt],te=J.adjustedFoV(J.framedFoVDeg);yield J.updateFraming();const le=J.adjustedFoV(J.framedFoVDeg),oe=z[ei].getFieldOfView()/te;z[ei].setFieldOfView(le*oe),z[Sc]=!0,z.requestUpdate("maxFieldOfView"),z.requestUpdate("fieldOfView"),z.requestUpdate("minCameraOrbit"),z.requestUpdate("maxCameraOrbit"),z.requestUpdate("cameraOrbit"),yield z.updateComplete})()}interact(z,J,te){const le=this[Kr],oe=this[n_];if("1"===oe[0].style.opacity)return void console.warn("interact() failed because an existing interaction is running.");const de=new Array;de.push({x:ro(J.x),y:ro(J.y)});const we=[{x:de[0].x(0),y:de[0].y(0)}];null!=te&&(de.push({x:ro(te.x),y:ro(te.y)}),we.push({x:de[1].x(0),y:de[1].y(0)}));let ke=performance.now();const{width:je,height:me}=this[Mt],Ve=We=>{for(const[ze,Oe]of we.entries()){const{style:Ct}=oe[ze];Ct.transform=`translateX(${je*Oe.x}px) translateY(${me*Oe.y}px)`,"pointerdown"===We?Ct.opacity="1":"pointerup"===We&&(Ct.opacity="0"),le.dispatchEvent(new PointerEvent(We,{pointerId:ze-5678,pointerType:"touch",target:le,clientX:je*Oe.x,clientY:me*Oe.y,altKey:!0}))}},Ne=()=>{if(this[ei].isUserChange){for(const ze of this[n_])ze.style.opacity="0";return void Ve("pointercancel")}const We=Math.min(1,(performance.now()-ke)/z);for(const[ze,Oe]of we.entries())Oe.x=de[ze].x(We),Oe.y=de[ze].y(We);Ve("pointermove"),We<1?requestAnimationFrame(Ne):(Ve("pointerup"),document.removeEventListener("visibilitychange",tt))},tt=()=>{let We=0;"hidden"===document.visibilityState?We=performance.now()-ke:ke=performance.now()-We};document.addEventListener("visibilitychange",tt),Ve("pointerdown"),requestAnimationFrame(Ne)}[(r=Xg,s=t_,a=n_,c=Ad,h=io,d=Ep,m=jl,g=Mp,y=zl,b=ei,w=Yu,x=Ii,E=Gl,T=Sc,xs)](z){const J=this[Mt];J.framedFoVDeg=180*z[0]/Math.PI,this[ei].setFieldOfView(J.adjustedFoV(J.framedFoVDeg))}[xo](z){const J=this[ei];if(this[Sc]){const{theta:te,phi:le}=this.getCameraOrbit();z[0]=te,z[1]=le,this[Sc]=!1}J.isUserChange=!1,J.setOrbit(z[0],z[1],z[2])}[Ju](z){this[ei].applyOptions({minimumAzimuthalAngle:z[0],minimumPolarAngle:z[1],minimumRadius:z[2]}),this.jumpCameraToGoal()}[Qu](z){this[ei].applyOptions({maximumAzimuthalAngle:z[0],maximumPolarAngle:z[1],maximumRadius:z[2]}),this[s1](z[2]),this.jumpCameraToGoal()}[eh](z){this[ei].applyOptions({minimumFieldOfView:180*z[0]/Math.PI}),this.jumpCameraToGoal()}[th](z){const J=this[Mt].adjustedFoV(180*z[0]/Math.PI);this[ei].applyOptions({maximumFieldOfView:J}),this.jumpCameraToGoal()}[Zu](z){const[J,te,le]=z;this[Qr].arRenderer.isPresenting||this[Mt].setTarget(J,te,le),this[ei].isUserChange=!1,this[Qr].arRenderer.updateTarget()}[Xa](z,J){if(super[Xa](z,J),this[Qr].isPresenting||!this[vd]())return;const te=this[ei],le=this[Mt],oe=performance.now();if(this[zl]){const de=this.interactionPrompt===Cd?this[op]:this[io];this.loaded&&oe>de+this.interactionPromptThreshold&&(this[zl]=!1,this[jl]=oe,this[Xg].classList.add("visible"))}if(isFinite(this[jl])&&"wiggle"===this.interactionPromptStyle){const de=(oe-this[jl])/5e3%1,we=$g(de),ke=wp(de);if(this[t_].style.opacity=`${ke}`,we!==this[Ep]){const me=(we-this[Ep])*Math.PI/16;this[t_].style.transform=`translateX(${we*le.width*.05}px)`,te.isUserChange=!1,te.adjustOrbit(me,0,0),this[Ep]=we}}te.update(z,J),le.updateTarget(J)&&this[r_]({type:"change",source:te.isUserChange?qg:"none"})}[Kg](){this[zl]=!1,this[Xg].classList.remove("visible"),this[jl]=1/0}[s1](z){const J=2*Math.max(this[Mt].boundingSphere.radius,z);this[ei].updateNearFar(0,J)}[r1](){const{theta:z,phi:J}=this[ei].getCameraSpherical(this[Yu]),te=(4+Math.floor((z%qn+n1)/t1))%4,le=Math.floor(J/DI);this[by](`View from stage ${e_[le]}${JC[te]}`)}get[fd](){return super[fd]+(this.cameraControls?". Use mouse, touch or arrow keys to move.":"")}[Ig](z){var J=le=>super[le],te=this;return(0,Y.Z)(function*(){const le=te[ei],oe=te[Mt],de=oe.adjustedFoV(oe.framedFoVDeg);J(Ig).call(te,z);const we=oe.adjustedFoV(oe.framedFoVDeg)/de,ke=le.getFieldOfView()*(isFinite(we)?we:1);le.updateAspect(te[Mt].aspect),te.requestUpdate("maxFieldOfView",te.maxFieldOfView),yield te.updateComplete,te[ei].setFieldOfView(ke),te.jumpCameraToGoal()})()}[Ll](){super[Ll](),this[Gl]?this[Sc]=!0:this[Gl]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return I=Ul,L=Td,R=r_,$=Hl,_i([ie({type:Boolean,attribute:"camera-controls"})],B.prototype,"cameraControls",void 0),_i([ma({intrinsics:nA,observeEffects:!0,updateHandler:xo}),ie({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],B.prototype,"cameraOrbit",void 0),_i([ma({intrinsics:sA,observeEffects:!0,updateHandler:Zu}),ie({type:String,attribute:"camera-target",hasChanged:()=>!0})],B.prototype,"cameraTarget",void 0),_i([ma({intrinsics:eA,observeEffects:!0,updateHandler:xs}),ie({type:String,attribute:"field-of-view",hasChanged:()=>!0})],B.prototype,"fieldOfView",void 0),_i([ma({intrinsics:rA,updateHandler:Ju}),ie({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],B.prototype,"minCameraOrbit",void 0),_i([ma({intrinsics:iA,updateHandler:Qu}),ie({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],B.prototype,"maxCameraOrbit",void 0),_i([ma({intrinsics:tA,updateHandler:eh}),ie({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],B.prototype,"minFieldOfView",void 0),_i([ma({intrinsics:eA,updateHandler:th}),ie({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],B.prototype,"maxFieldOfView",void 0),_i([ie({type:Number,attribute:"interaction-prompt-threshold"})],B.prototype,"interactionPromptThreshold",void 0),_i([ie({type:String,attribute:"interaction-prompt-style"})],B.prototype,"interactionPromptStyle",void 0),_i([ie({type:String,attribute:"interaction-prompt"})],B.prototype,"interactionPrompt",void 0),_i([ie({type:String,attribute:"interaction-policy"})],B.prototype,"interactionPolicy",void 0),_i([ie({type:Number,attribute:"orbit-sensitivity"})],B.prototype,"orbitSensitivity",void 0),_i([ie({type:String,attribute:"touch-action"})],B.prototype,"touchAction",void 0),_i([ie({type:Boolean,attribute:"disable-zoom"})],B.prototype,"disableZoom",void 0),_i([ie({type:Boolean,attribute:"enable-pan"})],B.prototype,"enablePan",void 0),_i([ie({type:Number,attribute:"interpolation-decay"})],B.prototype,"interpolationDecay",void 0),_i([ie({type:String,attribute:"bounds"})],B.prototype,"bounds",void 0),B})((f=>{var r,s,a,c,h,d,m,g,y,b;class w extends f{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer",this.iosSrc=null,this.xrEnvironment=!1,this[r]=!1,this[s]=this.shadowRoot.querySelector(".ar-button"),this[a]=document.createElement("a"),this[c]=new Set,this[h]=Oy,this[d]=!1,this[m]=E=>{E.preventDefault(),this.activateAR()},this[g]=({status:E})=>{E!==cd&&this[Qr].arRenderer.presentedScene!==this[Mt]||(this.setAttribute("ar-status",E),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:E}})),E===cd?this.removeAttribute("ar-tracking"):E===sy&&this.setAttribute("ar-tracking",cx))},this[y]=({status:E})=>{this.setAttribute("ar-tracking",E),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:E}}))},this[b]=E=>{"_apple_ar_quicklook_button_tapped"==E.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[pa]!==Oy}connectedCallback(){super.connectedCallback(),this[Qr].arRenderer.addEventListener("status",this[yp]),this.setAttribute("ar-status",cd),this[Qr].arRenderer.addEventListener("tracking",this[_p]),this[Md].addEventListener("message",this[jg])}disconnectedCallback(){super.disconnectedCallback(),this[Qr].arRenderer.removeEventListener("status",this[yp]),this[Qr].arRenderer.removeEventListener("tracking",this[_p]),this[Md].removeEventListener("message",this[jg])}update(E){var T=()=>super.update,I=this;return(0,Y.Z)(function*(){T().call(I,E),E.has("arScale")&&(I[Mt].canScale="fixed"!==I.arScale),E.has("arPlacement")&&(I[Mt].updateShadow(),I[os]()),(E.has("ar")||E.has("arModes")||E.has("src")||E.has("iosSrc"))&&(E.has("arModes")&&(I[$u]=Lx(I.arModes)),I[Xu]())})()}activateAR(){var E=this;return(0,Y.Z)(function*(){switch(E[pa]){case pp:E[zg]();break;case"webxr":yield E[mp]();break;case Fx:E[qu]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}})()}[(r=xd,s=Vl,a=Md,c=$u,h=pa,d=gp,m=vp,g=yp,y=_p,b=jg,Xu)](){var E=this;return(0,Y.Z)(function*(){if(E[pa]=Oy,E.ar){if(null!=E.src)for(const T of E[$u]){if("webxr"===T&&Nv&&!Nx&&(yield E[Qr].arRenderer.supportsPresentation())){E[pa]="webxr";break}if("scene-viewer"===T&&aC&&!Bl){E[pa]=Fx;break}if("quick-look"===T&&og){E[pa]=pp;break}}!E.canActivateAR&&null!=E.iosSrc&&og&&(E[pa]=pp)}if(E.canActivateAR)E[Vl].classList.add("enabled"),E[Vl].addEventListener("click",E[vp]);else if(E[Vl].classList.contains("enabled")){E[Vl].removeEventListener("click",E[vp]),E[Vl].classList.remove("enabled");const T="failed";E.setAttribute("ar-status",T),E.dispatchEvent(new CustomEvent("ar-status",{detail:{status:T}}))}})()}[mp](){var E=this;return(0,Y.Z)(function*(){console.log("Attempting to present in AR with WebXR..."),yield E[Fy]();try{E[Vl].removeEventListener("click",E[vp]);const{arRenderer:T}=E[Qr];T.placeOnWall="wall"===E.arPlacement,yield T.present(E[Mt],E.xrEnvironment)}catch(T){console.warn("Error while trying to present in AR with WebXR"),console.error(T),yield E[Qr].arRenderer.stopPresenting(),Nx=!0,console.warn("Falling back to next ar-mode"),yield E[Xu](),E.activateAR()}finally{E[Xu]()}})()}[Fy](){var E=this;return(0,Y.Z)(function*(){E.loaded||(E[gp]=!0,E[Nl](),yield((T,I,L=null)=>new Promise(R=>{T.addEventListener(I,function $(B){L&&!L(B)||(R(B),T.removeEventListener(I,$))})}))(E,"load"),E[gp]=!1)})()}[ju](){return super[ju]()||this[gp]}[qu](){const E=self.location.toString(),T=new URL(E),I=new URL(this.src,E),L=new URLSearchParams(I.search);if(T.hash="#model-viewer-no-ar-fallback",L.set("mode","ar_preferred"),L.has("disable_occlusion")||L.set("disable_occlusion","true"),"fixed"===this.arScale&&L.set("resizable","false"),"wall"===this.arPlacement&&L.set("enable_vertical_placement","true"),L.has("sound")){const $=new URL(L.get("sound"),E);L.set("sound",$.toString())}if(L.has("link")){const $=new URL(L.get("link"),E);L.set("link",$.toString())}const R=`intent://arvr.google.com/scene-viewer/1.0?${L.toString()+"&file="+encodeURIComponent(I.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(T.toString())};end;`;self.addEventListener("hashchange",()=>{"#model-viewer-no-ar-fallback"===self.location.hash&&(Bl=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[Xu]())},{once:!0}),this[Md].setAttribute("href",R),console.log("Attempting to present in AR with Scene Viewer..."),this[Md].click()}[zg](){var E=this;return(0,Y.Z)(function*(){const T=!E.iosSrc;E[Vl].classList.remove("enabled");const I=T?yield E.prepareUSDZ():E.iosSrc,L=new URL(I,self.location.toString());"fixed"===E.arScale&&(L.hash&&(L.hash+="&"),L.hash+="allowsContentScaling=0");const R=E[Md];R.setAttribute("rel","ar");const $=document.createElement("img");R.appendChild($),R.setAttribute("href",L.toString()),T&&R.setAttribute("download","model.usdz"),console.log("Attempting to present in AR with Quick Look..."),R.click(),R.removeChild($),T&&URL.revokeObjectURL(I),E[Vl].classList.add("enabled")})()}prepareUSDZ(){var E=this;return(0,Y.Z)(function*(){const T=E[gd].beginActivity();yield E[Fy]();const I=E[Mt],L=I.shadow;let R=!1;null!=L&&(R=L.visible,L.visible=!1),T(.2);const $=new MI,B=yield $.parse(I.modelContainer),G=new Blob([B],{type:"model/vnd.usdz+zip"}),z=URL.createObjectURL(G);return T(1),null!=L&&(L.visible=R),z})()}}return Mc([ie({type:Boolean,attribute:"ar"})],w.prototype,"ar",void 0),Mc([ie({type:String,attribute:"ar-scale"})],w.prototype,"arScale",void 0),Mc([ie({type:String,attribute:"ar-placement"})],w.prototype,"arPlacement",void 0),Mc([ie({type:String,attribute:"ar-modes"})],w.prototype,"arModes",void 0),Mc([ie({type:String,attribute:"ios-src"})],w.prototype,"iosSrc",void 0),Mc([ie({type:Boolean,attribute:"xr-environment"})],w.prototype,"xrEnvironment",void 0),w})((f=>{var r,s,a,c,h,d,m,g,y,b,w,x,E,T;class I extends f{constructor(...R){super(...R),this.poster=null,this.reveal=Wl,this.loading="auto",this.generateSchema=!1,this.seamlessPoster=!1,this[r]=!1,this[s]=!1,this[a]=0,this[c]=null,this[h]=this.shadowRoot.querySelector(".slot.poster"),this[d]=this.shadowRoot.querySelector("#default-poster"),this[m]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[g]=this.shadowRoot.querySelector("#default-progress-bar > .mask"),this[y]=this[rh].getAttribute("aria-label"),this[b]=((z,J)=>{let te=null;const le=(...oe)=>{null==te&&(z(...oe),te=self.setTimeout(()=>te=null,100))};return le.flush=()=>{null!=te&&(self.clearTimeout(te),te=null)},le})(z=>{const J=this[Cc].parentNode;requestAnimationFrame(()=>{this[i_].style.opacity=""+.2*(1-z),this[Cc].style.transform=`scaleX(${z})`,0===z&&(J.removeChild(this[Cc]),J.appendChild(this[Cc])),1===z?this[Cc].classList.add("hide"):this[Cc].classList.remove("hide")})}),this[w]=()=>{"manual"!==this.reveal&&this.reveal!==Wl&&this.dismissPoster()},this[x]=z=>{if("manual"!==this.reveal)switch(z.keyCode){case 32:case 13:this.dismissPoster()}},this[E]=z=>{const J=z.detail.totalProgress;this[Cp]=Math.max(J,this[Cp]),1===J&&(this[s_].flush(),!this[ko]()||null==this[Rd]&&this.reveal!==Wl||this[Yg]()),this[s_](J),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:J}}))},this[T]=()=>{this[Ap]=!0;const z=this.getRootNode();z&&z.activeElement===this&&this[Kr].focus();const J=this[rh];J.setAttribute("aria-hidden","true"),J.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))};const $=self.ModelViewerElement||{};Xi.setDRACODecoderLocation($.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.4.1/"),Xi.setKTX2TranscoderLocation($.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/"),$.meshoptDecoderLocation&&Xi.setMeshoptDecoderLocation($.meshoptDecoderLocation)}static set dracoDecoderLocation(R){Xi.setDRACODecoderLocation(R)}static get dracoDecoderLocation(){return Xi.getDRACODecoderLocation()}static set ktx2TranscoderLocation(R){Xi.setKTX2TranscoderLocation(R)}static get ktx2TranscoderLocation(){return Xi.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(R){Xi.setMeshoptDecoderLocation(R)}static get meshoptDecoderLocation(){return Xi.getMeshoptDecoderLocation()}static mapURLs(R){$a.singleton.loader[Il].manager.setURLModifier(R)}dismissPoster(){this[ko]()?this[Yg]():(this[Rd]="interaction",this[Nl]())}showPoster(){const R=this[Za],$=this[rh];$.removeAttribute("tabindex"),$.removeAttribute("aria-hidden"),R.classList.add("show");const B=this.modelIsVisible;this[Sp]=!1,this[Dg](B),this[Ap]=!1}getDimensions(){return ap(this[Mt].size)}connectedCallback(){super.connectedCallback(),this[Za].addEventListener("click",this[Id]),this[Za].addEventListener("keydown",this[Nr]),this[gd].addEventListener("progress",this[Tp])}disconnectedCallback(){super.disconnectedCallback(),this[Za].removeEventListener("click",this[Id]),this[Za].removeEventListener("keydown",this[Nr]),this[gd].removeEventListener("progress",this[Tp])}updated(R){var $=()=>super.updated,B=this;return(0,Y.Z)(function*(){$().call(B,R),R.has("poster")&&null!=B.poster&&(B[rh].style.backgroundImage=`url(${B.poster})`),R.has("alt")&&B[rh].setAttribute("aria-label",B[_y]),(R.has("reveal")||R.has("loading"))&&B[Nl](),R.has("generateSchema")&&B[Mt].updateSchema(!0===B.generateSchema?B.src:null),R.has("seamlessPoster")&&(!0===B.seamlessPoster?B[Za].classList.add("quick"):B[Za].classList.remove("quick"))})()}[(r=Sp,s=Ap,a=Cp,c=Rd,h=Za,d=rh,m=Cc,g=i_,y=oA,b=s_,w=Id,x=Nr,E=Tp,ju)](){return!!this.src&&(null!=this[Rd]||"eager"===this.loading||this.reveal===Wl&&this[zu])}[ko](){const{src:R}=this;return!!R&&super[ko]()&&1===this[Cp]}[(T=vi,Yg)](){this[Rd]=null;const R=this[Za];if(R.classList.contains("show")){const $=this.modelIsVisible;this[Sp]=!0,this[Dg]($),requestAnimationFrame(()=>{R.classList.remove("show"),!0===this.seamlessPoster?this[vi]():R.addEventListener("transitionend",this[vi],{once:!0})})}else this[Ap]=!0}[My](){return super[My]()&&this[Sp]}[vd](){return super[vd]()&&this[Ap]}[Nl](){var R=B=>super[B],$=this;return(0,Y.Z)(function*(){$[Cp]=0,!0===$.generateSchema&&$[Mt].updateSchema($.src),null!=$[Mt].currentGLTF&&null!=$.src&&$[ju]()||$.showPoster(),$[by]("Loading"),yield R(Nl).call($)})()}}return Ya([ie({type:String})],I.prototype,"poster",void 0),Ya([ie({type:String})],I.prototype,"reveal",void 0),Ya([ie({type:String})],I.prototype,"loading",void 0),Ya([ie({type:Boolean,attribute:"generate-schema"})],I.prototype,"generateSchema",void 0),Ya([ie({type:Boolean,attribute:"seamless-poster"})],I.prototype,"seamlessPoster",void 0),I})((f=>{var r;class s extends f{constructor(...c){super(c),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[r]=!0,this[Mt].subscribeMixerEvent("loop",h=>{this.dispatchEvent(new CustomEvent("loop",{detail:{count:h.action._loopCount}}))}),this[Mt].subscribeMixerEvent("finished",()=>{this[Ol]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[Mt].animationNames:[]}get duration(){return this[Mt].duration}get paused(){return this[Ol]}get currentTime(){return this[Mt].animationTime}set currentTime(c){this[Mt].animationTime=c,this[os]()}get timeScale(){return this[Mt].animationTimeScale}set timeScale(c){this[Mt].animationTimeScale=c}pause(){this[Ol]||(this[Ol]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(c){this.availableAnimations.length>0&&(this[Ol]=!1,this[Ey](c),this.dispatchEvent(new CustomEvent("play")))}[(r=Ol,Ll)](){super[Ll](),this[Ol]=!0,this.autoplay&&this.play()}[Xa](c,h){super[Xa](c,h),this[Ol]||!this[vd]()&&!this[Qr].isPresenting||(this[Mt].updateAnimation(h/1e3),this[os]())}updated(c){super.updated(c),c.has("autoplay")&&this.autoplay&&this.play(),c.has("animationName")&&this[Ey]()}[Nl](){var c=d=>super[d],h=this;return(0,Y.Z)(function*(){return h[Mt].stopAnimation(),c(Nl).call(h)})()}[Ey](c=zC){var h;const d=null!==(h=c.repetitions)&&void 0!==h?h:1/0;this[Mt].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,c.pingpong?2202:1===d?2200:2201,d),this[Ol]&&(this[Mt].updateAnimation(0),this[os]())}}return Ng([ie({type:Boolean})],s.prototype,"autoplay",void 0),Ng([ie({type:String,attribute:"animation-name"})],s.prototype,"animationName",void 0),Ng([ie({type:Number,attribute:"animation-crossfade-duration"})],s.prototype,"animationCrossfadeDuration",void 0),s})((f=>{var r;const s=Symbol("endPolyfillCoordination");return r=s,class extends f{constructor(){super(...arguments),this[r]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),null==this[s]&&(this[s]=(a=>{if(null==a.shadowRoot||a.hasAttribute("data-js-focus-visible"))return()=>{};if(!self.applyFocusVisiblePolyfill){const c=()=>{self.applyFocusVisiblePolyfill(a.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",c,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",c)}}return self.applyFocusVisiblePolyfill(a.shadowRoot),()=>{}})(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),null!=this[s]&&(this[s](),this[s]=null)}}})(kg)))))))));customElements.define("model-viewer",H1)},8103:(et,ot,pe)=>{"use strict";function Y(n){return"function"==typeof n}function He(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ie=He(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ve(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class U{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const l of t)l.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Y(i))try{i()}catch(l){e=l instanceof ie?l.errors:[l]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const l of o)try{be(l)}catch(u){e=e??[],u instanceof ie?e=[...e,...u.errors]:e.push(u)}}if(e)throw new ie(e)}}add(e){var t;if(e&&e!==this)if(this.closed)be(e);else{if(e instanceof U){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ve(t,e)}remove(e){const{_finalizers:t}=this;t&&ve(t,e),e instanceof U&&e._removeParent(this)}}U.EMPTY=(()=>{const n=new U;return n.closed=!0,n})();const Se=U.EMPTY;function Ge(n){return n instanceof U||n&&"closed"in n&&Y(n.remove)&&Y(n.add)&&Y(n.unsubscribe)}function be(n){Y(n)?n():n.unsubscribe()}const Ce={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Je={setTimeout(n,e,...t){const{delegate:i}=Je;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Je;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ye(n){Je.setTimeout(()=>{const{onUnhandledError:e}=Ce;if(!e)throw n;e(n)})}function De(){}const Be=nt("C",void 0,void 0);function nt(n,e,t){return{kind:n,value:e,error:t}}let ft=null;function Me(n){if(Ce.useDeprecatedSynchronousErrorHandling){const e=!ft;if(e&&(ft={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=ft;if(ft=null,t)throw i}}else n()}class Ht extends U{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ge(e)&&e.add(this)):this.destination=Kt}static create(e,t,i){return new Un(e,t,i)}next(e){this.isStopped?cn(function ct(n){return nt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?cn(function Ye(n){return nt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cn(Be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Lt=Function.prototype.bind;function ht(n,e){return Lt.call(n,e)}class Zt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){yn(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){yn(i)}else yn(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yn(t)}}}class Un extends Ht{constructor(e,t,i){let o;if(super(),Y(e)||!e)o={next:e??void 0,error:t??void 0,complete:i??void 0};else{let l;this&&Ce.useDeprecatedNextContext?(l=Object.create(e),l.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&ht(e.next,l),error:e.error&&ht(e.error,l),complete:e.complete&&ht(e.complete,l)}):o=e}this.destination=new Zt(o)}}function yn(n){Ce.useDeprecatedSynchronousErrorHandling?function vt(n){Ce.useDeprecatedSynchronousErrorHandling&&ft&&(ft.errorThrown=!0,ft.error=n)}(n):ye(n)}function cn(n,e){const{onStoppedNotification:t}=Ce;t&&Je.setTimeout(()=>t(n,e))}const Kt={closed:!0,next:De,error:function xr(n){throw n},complete:De},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(n){return n}function D(n){return 0===n.length?W:1===n.length?n[0]:function(t){return n.reduce((i,o)=>o(i),t)}}let P=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,o){const l=function ne(n){return n&&n instanceof Ht||function j(n){return n&&Y(n.next)&&Y(n.error)&&Y(n.complete)}(n)&&Ge(n)}(t)?t:new Un(t,i,o);return Me(()=>{const{operator:u,source:p}=this;l.add(u?u.call(l,p):p?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=O(i))((o,l)=>{const u=new Un({next:p=>{try{t(p)}catch(v){l(v),u.unsubscribe()}},error:l,complete:o});this.subscribe(u)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Ae](){return this}pipe(...t){return D(t)(this)}toPromise(t){return new(t=O(t))((i,o)=>{let l;this.subscribe(u=>l=u,u=>o(u),()=>i(l))})}}return n.create=e=>new n(e),n})();function O(n){var e;return null!==(e=n??Ce.Promise)&&void 0!==e?e:Promise}const he=He(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let q=(()=>{class n extends P{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new k(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new he}next(t){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:o,observers:l}=this;return i||o?Se:(this.currentObservers=null,l.push(t),new U(()=>{this.currentObservers=null,ve(l,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:o,isStopped:l}=this;i?t.error(o):l&&t.complete()}asObservable(){const t=new P;return t.source=this,t}}return n.create=(e,t)=>new k(e,t),n})();class k extends q{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Se}}function K(n){return Y(n?.lift)}function rt(n){return e=>{if(K(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function it(n,e,t,i,o){return new V(n,e,t,i,o)}class V extends Ht{constructor(e,t,i,o,l,u){super(e),this.onFinalize=l,this.shouldUnsubscribe=u,this._next=t?function(p){try{t(p)}catch(v){e.error(v)}}:super._next,this._error=o?function(p){try{o(p)}catch(v){e.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(p){e.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function F(n,e){return rt((t,i)=>{let o=0;t.subscribe(it(i,l=>{i.next(n.call(e,l,o++))}))})}function Ln(n){return this instanceof Ln?(this.v=n,this):new Ln(n)}function Ks(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=t.apply(n,e||[]),l=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(N){i[N]&&(o[N]=function(H){return new Promise(function(X,ee){l.push([N,H,X,ee])>1||p(N,H)})})}function p(N,H){try{!function v(N){N.value instanceof Ln?Promise.resolve(N.value.v).then(_,M):C(l[0][2],N)}(i[N](H))}catch(X){C(l[0][3],X)}}function _(N){p("next",N)}function M(N){p("throw",N)}function C(N,H){N(H),l.shift(),l.length&&p(l[0][0],l[0][1])}}function cr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Li(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(p,v){!function o(l,u,p,v){Promise.resolve(v).then(function(_){l({value:_,done:p})},u)}(p,v,(u=n[l](u)).done,u.value)})}}}const vr=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Er(n){return Y(n?.then)}function ps(n){return Y(n[Ae])}function mt(n){return Symbol.asyncIterator&&Y(n?.[Symbol.asyncIterator])}function hr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Fr=function Oi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Br(n){return Y(n?.[Fr])}function is(n){return Ks(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:o}=yield Ln(t.read());if(o)return yield Ln(void 0);yield yield Ln(i)}}finally{t.releaseLock()}})}function _r(n){return Y(n?.getReader)}function Qt(n){if(n instanceof P)return n;if(null!=n){if(ps(n))return function Ra(n){return new P(e=>{const t=n[Ae]();if(Y(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(vr(n))return function Vr(n){return new P(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Er(n))return function Qn(n){return new P(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ye)})}(n);if(mt(n))return Ur(n);if(Br(n))return function Xo(n){return new P(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(_r(n))return function Hr(n){return Ur(is(n))}(n)}throw hr(n)}function Ur(n){return new P(e=>{(function Ys(n,e){var t,i,o,l;return function Et(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=cr(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(u){o={error:u}}finally{try{i&&!i.done&&(l=t.return)&&(yield l.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function En(n,e,t,i=0,o=!1){const l=e.schedule(function(){t(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(l),!o)return l}function Cr(n,e,t=1/0){return Y(e)?Cr((i,o)=>F((l,u)=>e(i,l,o,u))(Qt(n(i,o))),t):("number"==typeof e&&(t=e),rt((i,o)=>function Sr(n,e,t,i,o,l,u,p){const v=[];let _=0,M=0,C=!1;const N=()=>{C&&!v.length&&!_&&e.complete()},H=ee=>_<i?X(ee):v.push(ee),X=ee=>{l&&e.next(ee),_++;let ge=!1;Qt(t(ee,M++)).subscribe(it(e,fe=>{o?.(fe),l?H(fe):e.next(fe)},()=>{ge=!0},void 0,()=>{if(ge)try{for(_--;v.length&&_<i;){const fe=v.shift();u?En(e,u,()=>X(fe)):X(fe)}N()}catch(fe){e.error(fe)}}))};return n.subscribe(it(e,H,()=>{C=!0,N()})),()=>{p?.()}}(i,o,n,t)))}function yr(n=1/0){return Cr(W,n)}const Wn=new P(n=>n.complete());function Rr(n){return n&&Y(n.schedule)}function Ko(n){return n[n.length-1]}function Ir(n){return Y(Ko(n))?n.pop():void 0}function Bt(n){return Rr(Ko(n))?n.pop():void 0}function Fi(n,e=0){return rt((t,i)=>{t.subscribe(it(i,o=>En(i,n,()=>i.next(o),e),()=>En(i,n,()=>i.complete(),e),o=>En(i,n,()=>i.error(o),e)))})}function po(n,e=0){return rt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function oc(n,e){if(!n)throw new Error("Iterable cannot be null");return new P(t=>{En(t,e,()=>{const i=n[Symbol.asyncIterator]();En(t,e,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Sn(n,e){return e?function eu(n,e){if(null!=n){if(ps(n))return function Wi(n,e){return Qt(n).pipe(po(e),Fi(e))}(n,e);if(vr(n))return function Ds(n,e){return new P(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Er(n))return function Ts(n,e){return Qt(n).pipe(po(e),Fi(e))}(n,e);if(mt(n))return oc(n,e);if(Br(n))return function Th(n,e){return new P(t=>{let i;return En(t,e,()=>{i=n[Fr](),En(t,e,()=>{let o,l;try{({value:o,done:l}=i.next())}catch(u){return void t.error(u)}l?t.complete():t.next(o)},0,!0)}),()=>Y(i?.return)&&i.return()})}(n,e);if(_r(n))return function Qc(n,e){return oc(is(n),e)}(n,e)}throw hr(n)}(n,e):Qt(n)}function tu(...n){const e=Bt(n),t=function Si(n,e){return"number"==typeof Ko(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Qt(i[0]):yr(t)(Sn(i,e)):Wn}function jr(n={}){const{connector:e=(()=>new q),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=n;return l=>{let u,p,v,_=0,M=!1,C=!1;const N=()=>{p?.unsubscribe(),p=void 0},H=()=>{N(),u=v=void 0,M=C=!1},X=()=>{const ee=u;H(),ee?.unsubscribe()};return rt((ee,ge)=>{_++,!C&&!M&&N();const fe=v=v??e();ge.add(()=>{_--,0===_&&!C&&!M&&(p=Bi(X,o))}),fe.subscribe(ge),!u&&_>0&&(u=new Un({next:Ie=>fe.next(Ie),error:Ie=>{C=!0,N(),p=Bi(H,t,Ie),fe.error(Ie)},complete:()=>{M=!0,N(),p=Bi(H,i),fe.complete()}}),Qt(ee).subscribe(u))})(l)}}function Bi(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Un({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function tn(n){for(let e in n)if(n[e]===tn)return e;throw Error("Could not find renamed property on target object.")}function Ia(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function jt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(jt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ac(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Dh=tn({__forward_ref__:tn});function wn(n){return n.__forward_ref__=wn,n.toString=function(){return jt(this())},n}function rn(n){return Zs(n)?n():n}function Zs(n){return"function"==typeof n&&n.hasOwnProperty(Dh)&&n.__forward_ref__===wn}class Xe extends Error{constructor(e,t){super(function ms(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function sn(n){return"string"==typeof n?n:null==n?"":String(n)}function Ih(n,e){throw new Xe(-201,!1)}function gs(n,e){null==n&&function xt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function An(n){return{providers:n.providers||[],imports:n.imports||[]}}function af(n){return Vi(n,Ph)||Vi(n,zb)}function Vi(n,e){return n.hasOwnProperty(e)?n[e]:null}function cf(n){return n&&(n.hasOwnProperty(W0)||n.hasOwnProperty(yl))?n[W0]:null}const Ph=tn({\u0275prov:tn}),W0=tn({\u0275inj:tn}),zb=tn({ngInjectableDef:tn}),yl=tn({ngInjectorDef:tn});var Wt=(()=>((Wt=Wt||{})[Wt.Default=0]="Default",Wt[Wt.Host=1]="Host",Wt[Wt.Self=2]="Self",Wt[Wt.SkipSelf=4]="SkipSelf",Wt[Wt.Optional=8]="Optional",Wt))();let kh;function mo(n){const e=kh;return kh=n,e}function jb(n,e,t){const i=af(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Wt.Optional?null:void 0!==e?e:void Ih(jt(n))}function xn(n){return{toString:n}.toString()}var _t=(()=>((_t=_t||{})[_t.OnPush=0]="OnPush",_t[_t.Default=1]="Default",_t))(),Zo=(()=>{return(n=Zo||(Zo={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Zo;var n})();const Gr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Lh={},zn=[],uf=tn({\u0275cmp:tn}),hf=tn({\u0275dir:tn}),mm=tn({\u0275pipe:tn}),gm=tn({\u0275mod:tn}),Rs=tn({\u0275fac:tn}),Pa=tn({__NG_ELEMENT_ID__:tn});let Gb=0;function go(n){return xn(()=>{const t=!0===n.standalone,i={},o={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===_t.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||zn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Zo.Emulated,id:"c"+Gb++,styles:n.styles||zn,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.dependencies,u=n.features;return o.inputs=$b(n.inputs,i),o.outputs=$b(n.outputs),u&&u.forEach(p=>p(o)),o.directiveDefs=l?()=>("function"==typeof l?l():l).map(df).filter(q0):null,o.pipeDefs=l?()=>("function"==typeof l?l():l).map(Ps).filter(q0):null,o})}function df(n){return kr(n)||Is(n)}function q0(n){return null!==n}const qb={};function Pr(n){return xn(()=>{const e={type:n.type,bootstrap:n.bootstrap||zn,declarations:n.declarations||zn,imports:n.imports||zn,exports:n.exports||zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(qb[n.id]=n.type),e})}function $b(n,e){if(null==n)return Lh;const t={};for(const i in n)if(n.hasOwnProperty(i)){let o=n[i],l=o;Array.isArray(o)&&(l=o[1],o=o[0]),t[o]=i,e&&(e[o]=l)}return t}const qt=go;function kr(n){return n[uf]||null}function Is(n){return n[hf]||null}function Ps(n){return n[mm]||null}function ks(n,e){const t=n[gm]||null;if(!t&&!0===e)throw new Error(`Type ${jt(n)} does not have '\u0275mod' property.`);return t}function eo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Qo(n){return Array.isArray(n)&&!0===n[1]}function X0(n){return 0!=(8&n.flags)}function _m(n){return 2==(2&n.flags)}function bm(n){return 1==(1&n.flags)}function ea(n){return null!==n.template}function _S(n){return 0!=(256&n[2])}function lu(n,e){return n.hasOwnProperty(Rs)?n[Rs]:null}class Kb{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function vo(){return Yb}function Yb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zb),mf}function mf(){const n=Jb(this),e=n?.current;if(e){const t=n.previous;if(t===Lh)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Zb(n,e,t,i){const o=Jb(n)||function Y0(n,e){return n[K0]=e}(n,{previous:Lh,current:null}),l=o.current||(o.current={}),u=o.previous,p=this.declaredInputs[t],v=u[p];l[p]=new Kb(v&&v.currentValue,e,u===Lh),n[i]=e}vo.ngInherit=!0;const K0="__ngSimpleChanges__";function Jb(n){return n[K0]||null}function Ai(n){for(;Array.isArray(n);)n=n[0];return n}function Sm(n,e){return Ai(e[n])}function To(n,e){return Ai(e[n.index])}function Cm(n,e){return n.data[e]}function yo(n,e){const t=e[n];return eo(t)?t:t[0]}function ew(n){return 4==(4&n[2])}function J0(n){return 64==(64&n[2])}function hc(n,e){return null==e?null:n[e]}function Q0(n){n[18]=0}function ev(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const an={lFrame:Pm(null),bindingsEnabled:!0};function tv(){return an.bindingsEnabled}function Qe(){return an.lFrame.lView}function er(){return an.lFrame.tView}function ka(n){return an.lFrame.contextLView=n,n[8]}function Na(n){return an.lFrame.contextLView=null,n}function un(){let n=ta();for(;null!==n&&64===n.type;)n=n.parent;return n}function ta(){return an.lFrame.currentTNode}function ci(n,e){const t=an.lFrame;t.currentTNode=n,t.isParent=e}function dc(){return an.lFrame.isParent}function gf(){an.lFrame.isParent=!1}function xl(){return an.lFrame.bindingIndex++}function iv(n,e){const t=an.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uh(e)}function Uh(n){an.lFrame.currentDirectiveIndex=n}function Dm(n){const e=an.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function sv(){return an.lFrame.currentQueryIndex}function Rm(n){an.lFrame.currentQueryIndex=n}function LS(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function ov(n,e,t){if(t&Wt.SkipSelf){let o=e,l=n;for(;!(o=o.parent,null!==o||t&Wt.Host||(o=LS(l),null===o||(l=l[15],10&o.type))););if(null===o)return!1;e=o,n=l}const i=an.lFrame=Im();return i.currentTNode=e,i.lView=n,!0}function bf(n){const e=Im(),t=n[1];an.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Im(){const n=an.lFrame,e=null===n?null:n.child;return null===e?Pm(n):e}function Pm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function av(){const n=an.lFrame;return an.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const nw=av;function wf(){const n=av();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _s(){return an.lFrame.selectedIndex}function na(n){an.lFrame.selectedIndex=n}function Jr(){const n=an.lFrame;return Cm(n.tView,n.selectedIndex)}function hu(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const l=n.data[t].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:p,ngAfterViewInit:v,ngAfterViewChecked:_,ngOnDestroy:M}=l;u&&(n.contentHooks||(n.contentHooks=[])).push(-t,u),p&&((n.contentHooks||(n.contentHooks=[])).push(t,p),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,p)),v&&(n.viewHooks||(n.viewHooks=[])).push(-t,v),_&&((n.viewHooks||(n.viewHooks=[])).push(t,_),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,_)),null!=M&&(n.destroyHooks||(n.destroyHooks=[])).push(t,M)}}function xf(n,e,t){uv(n,e,3,t)}function Mf(n,e,t,i){(3&n[2])===t&&uv(n,e,t,i)}function Hh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function uv(n,e,t,i){const l=i??-1,u=e.length-1;let p=0;for(let v=void 0!==i?65535&n[18]:0;v<u;v++)if("number"==typeof e[v+1]){if(p=e[v],null!=i&&p>=i)break}else e[v]<0&&(n[18]+=65536),(p<l||-1==l)&&(Nm(n,t,e,v),n[18]=(4294901760&n[18])+v+2),v++}function Nm(n,e,t,i){const o=t[i]<0,l=t[i+1],p=n[o?-t[i]:t[i]];if(o){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{l.call(p)}finally{}}}else try{l.call(p)}finally{}}class du{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function jh(n,e,t){let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const l=t[i++],u=t[i++],p=t[i++];n.setAttribute(e,u,p,l)}else{const l=o,u=t[++i];Bm(l)?n.setProperty(e,l,u):n.setAttribute(e,l,u),i++}}return i}function Ef(n){return 3===n||4===n||6===n}function Bm(n){return 64===n.charCodeAt(0)}function Gh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?t=o:0===t||Vm(n,t,o,null,-1===t||2===t?e[++i]:null)}}return n}function Vm(n,e,t,i,o){let l=0,u=n.length;if(-1===e)u=-1;else for(;l<n.length;){const p=n[l++];if("number"==typeof p){if(p===e){u=-1;break}if(p>e){u=l-1;break}}}for(;l<n.length;){const p=n[l];if("number"==typeof p)break;if(p===t){if(null===i)return void(null!==o&&(n[l+1]=o));if(i===n[l+1])return void(n[l+2]=o)}l++,null!==i&&l++,null!==o&&l++}-1!==u&&(n.splice(u,0,e),l=u+1),n.splice(l++,0,t),null!==i&&n.splice(l++,0,i),null!==o&&n.splice(l++,0,o)}function fv(n){return-1!==n}function fu(n){return 32767&n}function Oa(n,e){let t=function Sf(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Cf=!0;function Af(n){const e=Cf;return Cf=n,e}let gv=0;const ra={};function pu(n,e){const t=vv(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,mu(i.data,n),mu(e,null),mu(i.blueprint,null));const o=Tf(n,e),l=n.injectorIndex;if(fv(o)){const u=fu(o),p=Oa(o,e),v=p[1].data;for(let _=0;_<8;_++)e[l+_]=p[u+_]|v[u+_]}return e[l+8]=o,l}function mu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Tf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,o=e;for(;null!==o;){if(i=If(o),null===i)return-1;if(t++,o=o[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function ia(n,e,t){!function FS(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Pa)&&(i=t[Pa]),null==i&&(i=t[Pa]=gv++);const o=255&i;e.data[n+(o>>5)]|=1<<o}(n,e,t)}function aw(n,e,t){if(t&Wt.Optional)return n;Ih()}function lw(n,e,t,i){if(t&Wt.Optional&&void 0===i&&(i=null),0==(t&(Wt.Self|Wt.Host))){const o=n[9],l=mo(void 0);try{return o?o.get(e,i,t&Wt.Optional):jb(e,i,t&Wt.Optional)}finally{mo(l)}}return aw(i,0,t)}function cw(n,e,t,i=Wt.Default,o){if(null!==n){if(1024&e[2]){const u=function jm(n,e,t,i,o){let l=n,u=e;for(;null!==l&&null!==u&&1024&u[2]&&!(256&u[2]);){const p=uw(l,u,t,i|Wt.Self,ra);if(p!==ra)return p;let v=l.parent;if(!v){const _=u[21];if(_){const M=_.get(t,ra,i);if(M!==ra)return M}v=If(u),u=u[15]}l=v}return o}(n,e,t,i,ra);if(u!==ra)return u}const l=uw(n,e,t,i,ra);if(l!==ra)return l}return lw(e,t,i,o)}function uw(n,e,t,i,o){const l=function yv(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Pa)?n[Pa]:void 0;return"number"==typeof e?e>=0?255&e:di:e}(t);if("function"==typeof l){if(!ov(e,n,i))return i&Wt.Host?aw(o,0,i):lw(e,t,i,o);try{const u=l(i);if(null!=u||i&Wt.Optional)return u;Ih()}finally{nw()}}else if("number"==typeof l){let u=null,p=vv(n,e),v=-1,_=i&Wt.Host?e[16][6]:null;for((-1===p||i&Wt.SkipSelf)&&(v=-1===p?Tf(n,e):e[p+8],-1!==v&&gu(i,!1)?(u=e[1],p=fu(v),e=Oa(v,e)):p=-1);-1!==p;){const M=e[1];if(hw(l,p,M.data)){const C=BS(p,e,t,u,i,_);if(C!==ra)return C}v=e[p+8],-1!==v&&gu(i,e[1].data[p+8]===_)&&hw(l,p,e)?(u=M,p=fu(v),e=Oa(v,e)):p=-1}}return o}function BS(n,e,t,i,o,l){const u=e[1],p=u.data[n+8],M=Hm(p,u,t,null==i?_m(p)&&Cf:i!=u&&0!=(3&p.type),o&Wt.Host&&l===p);return null!==M?Rf(e,u,M,p):ra}function Hm(n,e,t,i,o){const l=n.providerIndexes,u=e.data,p=1048575&l,v=n.directiveStart,M=l>>20,N=o?p+M:n.directiveEnd;for(let H=i?p:p+M;H<N;H++){const X=u[H];if(H<v&&t===X||H>=v&&X.type===t)return H}if(o){const H=u[v];if(H&&ea(H)&&H.type===t)return v}return null}function Rf(n,e,t,i){let o=n[t];const l=e.data;if(function Lm(n){return n instanceof du}(o)){const u=o;u.resolving&&function Xr(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function on(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():sn(n)}(l[t]));const p=Af(u.canSeeViewProviders);u.resolving=!0;const v=u.injectImpl?mo(u.injectImpl):null;ov(n,i,Wt.Default);try{o=n[t]=u.factory(void 0,l,n,i),e.firstCreatePass&&t>=i.directiveStart&&function km(n,e,t){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:l}=e.type.prototype;if(i){const u=Yb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,u),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,u)}o&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,o),l&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,l),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,l))}(t,l[t],e)}finally{null!==v&&mo(v),Af(p),u.resolving=!1,nw()}}return o}function hw(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function gu(n,e){return!(n&Wt.Self||n&Wt.Host&&e)}class Wh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return cw(this._tNode,this._lView,e,i,t)}}function di(){return new Wh(un(),Qe())}function Di(n){return xn(()=>{const e=n.prototype.constructor,t=e[Rs]||zm(e),i=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==i;){const l=o[Rs]||zm(o);if(l&&l!==t)return l;o=Object.getPrototypeOf(o)}return l=>new l})}function zm(n){return Zs(n)?()=>{const e=zm(rn(n));return e&&e()}:lu(n)}function If(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Fa(n){return function Df(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let o=0;for(;o<i;){const l=t[o];if(Ef(l))break;if(0===l)o+=2;else if("number"==typeof l)for(o++;o<i&&"string"==typeof t[o];)o++;else{if(l===e)return t[o+1];o+=2}}}return null}(un(),n)}const yu="__parameters__";function _u(n,e,t){return xn(()=>{const i=function Va(n){return function(...t){if(n){const i=n(...t);for(const o in i)this[o]=i[o]}}}(e);function o(...l){if(this instanceof o)return i.apply(this,l),this;const u=new o(...l);return p.annotation=u,p;function p(v,_,M){const C=v.hasOwnProperty(yu)?v[yu]:Object.defineProperty(v,yu,{value:[]})[yu];for(;C.length<=M;)C.push(null);return(C[M]=C[M]||[]).push(u),v}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class St{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=yt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _v=new St("AnalyzeForEntryComponents");function to(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),to(i,e)):e!==n&&e.push(i)}return e}function Sl(n,e){n.forEach(t=>Array.isArray(t)?Sl(t,e):e(t))}function sa(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Cl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Xh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function wo(n,e,t){let i=Yh(n,e);return i>=0?n[1|i]=t:(i=~i,function wu(n,e,t,i){let o=n.length;if(o==e)n.push(t,i);else if(1===o)n.push(i,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;)n[o]=n[o-2],o--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function pc(n,e){const t=Yh(n,e);if(t>=0)return n[1|t]}function Yh(n,e){return function Ua(n,e,t){let i=0,o=n.length>>t;for(;o!==i;){const l=i+(o-i>>1),u=n[l<<t];if(e===u)return l<<t;u>e?o=l:i=l+1}return~(o<<t)}(n,e,1)}const xu={},Km="__NG_DI_FLAG__",Nf="ngTempTokenPath",Lf=/\n/gm,Mv="__source";let mc;function Mu(n){const e=mc;return mc=n,e}function Ev(n,e=Wt.Default){if(void 0===mc)throw new Xe(-203,!1);return null===mc?jb(n,void 0,e):mc.get(n,e&Wt.Optional?null:void 0,e)}function Re(n,e=Wt.Default){return(function pm(){return kh}()||Ev)(rn(n),e)}function Hi(n,e=Wt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Re(n,e)}function Ym(n){const e=[];for(let t=0;t<n.length;t++){const i=rn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Xe(900,!1);let o,l=Wt.Default;for(let u=0;u<i.length;u++){const p=i[u],v=ZS(p);"number"==typeof v?-1===v?o=p.token:l|=v:o=p}e.push(Re(o,l))}else e.push(Re(i))}return e}function Eu(n,e){return n[Km]=e,n.prototype[Km]=e,n}function ZS(n){return n[Km]}const za=Eu(_u("Optional"),8),Zh=Eu(_u("SkipSelf"),4);let tg,Hf;function Tu(n){return function zf(){if(void 0===Hf&&(Hf=null,Gr.trustedTypes))try{Hf=Gr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hf}()?.createHTML(n)||n}class vc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yc extends vc{getTypeName(){return"HTML"}}class Mw extends vc{getTypeName(){return"Style"}}class iC extends vc{getTypeName(){return"Script"}}class Jh extends vc{getTypeName(){return"URL"}}class Wf extends vc{getTypeName(){return"ResourceURL"}}function ss(n){return n instanceof vc?n.changingThisBreaksApplicationSecurity:n}function la(n,e){const t=function qf(n){return n instanceof vc&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class rg{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Tu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Qh{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Tu(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Tu(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let o=t.length-1;0<o;o--){const u=t.item(o).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&e.removeAttribute(u)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Tw=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ed=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $f(n){return(n=String(n)).match(Tw)||n.match(ed)?n:"unsafe:"+n}function Ns(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Xf(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const nd=Ns("area,br,col,hr,img,wbr"),Kf=Ns("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dw=Ns("rp,rt"),Dv=Xf(nd,Xf(Kf,Ns("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xf(Dw,Ns("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xf(Dw,Kf)),ig=Ns("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yf=Ns("srcset"),Iv=Xf(ig,Yf,Ns("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ns("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Iw=Ns("script,style,template");class Pw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=this.checkClobberedElement(t,t.nextSibling);if(o){t=o;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Dv.hasOwnProperty(t))return this.sanitizedSomething=!0,!Iw.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let o=0;o<i.length;o++){const l=i.item(o),u=l.name,p=u.toLowerCase();if(!Iv.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let v=l.value;ig[p]&&(v=$f(v)),Yf[p]&&(n=v,v=(n=String(n)).split(",").map(e=>$f(e.trim())).join(", ")),this.buf.push(" ",u,'="',Nv(v),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Dv.hasOwnProperty(t)&&!nd.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Nv(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Pv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kv=/([^\#-~ |!])/g;function Nv(n){return n.replace(/&/g,"&amp;").replace(Pv,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(kv,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sg;function kw(n,e){let t=null;try{sg=sg||function Tv(n){const e=new Qh(n);return function $i(){try{return!!(new window.DOMParser).parseFromString(Tu(""),"text/html")}catch{return!1}}()?new rg(e):e}(n);let i=e?String(e):"";t=sg.getInertBodyElement(i);let o=5,l=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=l,l=t.innerHTML,t=sg.getInertBodyElement(i)}while(i!==l);return Tu((new Pw).sanitizeChildren(og(t)||t))}finally{if(t){const i=og(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function og(n){return"content"in n&&function oC(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var br=(()=>((br=br||{})[br.NONE=0]="NONE",br[br.HTML=1]="HTML",br[br.STYLE=2]="STYLE",br[br.SCRIPT=3]="SCRIPT",br[br.URL=4]="URL",br[br.RESOURCE_URL=5]="RESOURCE_URL",br))();function rd(n){const e=function Zf(){const n=Qe();return n&&n[12]}();return e?e.sanitize(br.URL,n)||"":la(n,"URL")?ss(n):$f(sn(n))}const Lv=new St("ENVIRONMENT_INITIALIZER"),Lw=new St("INJECTOR",-1),Ow=new St("INJECTOR_DEF_TYPES");class Fw{get(e,t=xu){if(t===xu){const i=new Error(`NullInjectorError: No provider for ${jt(e)}!`);throw i.name="NullInjectorError",i}return t}}function fC(...n){return{\u0275providers:Bw(0,n)}}function Bw(n,...e){const t=[],i=new Set;let o;return Sl(e,l=>{const u=l;Fv(u,t,[],i)&&(o||(o=[]),o.push(u))}),void 0!==o&&Ov(o,t),t}function Ov(n,e){for(let t=0;t<n.length;t++){const{providers:o}=n[t];Sl(o,l=>{e.push(l)})}}function Fv(n,e,t,i){if(!(n=rn(n)))return!1;let o=null,l=cf(n);const u=!l&&kr(n);if(l||u){if(u&&!u.standalone)return!1;o=n}else{const v=n.ngModule;if(l=cf(v),!l)return!1;o=v}const p=i.has(o);if(u){if(p)return!1;if(i.add(o),u.dependencies){const v="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const _ of v)Fv(_,e,t,i)}}else{if(!l)return!1;{if(null!=l.imports&&!p){let _;i.add(o);try{Sl(l.imports,M=>{Fv(M,e,t,i)&&(_||(_=[]),_.push(M))})}finally{}void 0!==_&&Ov(_,e)}if(!p){const _=lu(o)||(()=>new o);e.push({provide:o,useFactory:_,deps:zn},{provide:Ow,useValue:o,multi:!0},{provide:Lv,useValue:()=>Re(o),multi:!0})}const v=l.providers;null==v||p||Sl(v,M=>{e.push(M)})}}return o!==n&&void 0!==n.providers}const pC=tn({provide:String,useValue:tn});function Bv(n){return null!==n&&"object"==typeof n&&pC in n}function Iu(n){return"function"==typeof n}const Tl=new St("Set Injector scope."),lg={},gC={};let Vv;function cg(){return void 0===Vv&&(Vv=new Fw),Vv}class _c{}class Uw extends _c{constructor(e,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zv(e,u=>this.processProvider(u)),this.records.set(Lw,Pu(void 0,this)),o.has("environment")&&this.records.set(_c,Pu(void 0,this));const l=this.records.get(Tl);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Ow.multi,zn,Wt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Mu(this),i=mo(void 0);try{return e()}finally{Mu(t),mo(i)}}get(e,t=xu,i=Wt.Default){this.assertNotDestroyed();const o=Mu(this),l=mo(void 0);try{if(!(i&Wt.SkipSelf)){let p=this.records.get(e);if(void 0===p){const v=function Hv(n){return"function"==typeof n||"object"==typeof n&&n instanceof St}(e)&&af(e);p=v&&this.injectableDefInScope(v)?Pu(Uv(e),lg):null,this.records.set(e,p)}if(null!=p)return this.hydrate(e,p)}return(i&Wt.Self?cg():this.parent).get(e,t=i&Wt.Optional&&t===xu?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[Nf]=u[Nf]||[]).unshift(jt(e)),o)throw u;return function JS(n,e,t,i){const o=n[Nf];throw e[Mv]&&o.unshift(e[Mv]),n.message=function QS(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let o=jt(e);if(Array.isArray(e))o=e.map(jt).join(" -> ");else if("object"==typeof e){let l=[];for(let u in e)if(e.hasOwnProperty(u)){let p=e[u];l.push(u+":"+("string"==typeof p?JSON.stringify(p):jt(p)))}o=`{${l.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${n.replace(Lf,"\n  ")}`}("\n"+n.message,o,t,i),n.ngTokenPath=o,n[Nf]=null,n}(u,e,"R3InjectorError",this.source)}throw u}finally{mo(l),Mu(o)}}resolveInjectorInitializers(){const e=Mu(this),t=mo(void 0);try{const i=this.get(Lv.multi,zn,Wt.Self);for(const o of i)o()}finally{Mu(e),mo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(jt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processProvider(e){let t=Iu(e=rn(e))?e:rn(e&&e.provide);const i=function zw(n){return Bv(n)?Pu(void 0,n.useValue):Pu(id(n),lg)}(e);if(Iu(e)||!0!==e.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=Pu(void 0,lg,!0),o.factory=()=>Ym(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===lg&&(t.value=gC,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Gw(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=rn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Uv(n){const e=af(n),t=null!==e?e.factory:lu(n);if(null!==t)return t;if(n instanceof St)throw new Xe(204,!1);if(n instanceof Function)return function Hw(n){const e=n.length;if(e>0)throw Xh(e,"?"),new Xe(204,!1);const t=function lf(n){const e=n&&(n[Ph]||n[zb]);if(e){const t=function fm(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Xe(204,!1)}function id(n,e,t){let i;if(Iu(n)){const o=rn(n);return lu(o)||Uv(o)}if(Bv(n))i=()=>rn(n.useValue);else if(function ag(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Ym(n.deps||[]));else if(function Vw(n){return!(!n||!n.useExisting)}(n))i=()=>Re(rn(n.useExisting));else{const o=rn(n&&(n.useClass||n.provide));if(!function jw(n){return!!n.deps}(n))return lu(o)||Uv(o);i=()=>new o(...Ym(n.deps))}return i}function Pu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function sd(n){return!!n.\u0275providers}function zv(n,e){for(const t of n)Array.isArray(t)?zv(t,e):sd(t)?zv(t.\u0275providers,e):e(t)}class Ww{}class ku{resolveComponentFactory(e){throw function yC(n){const e=Error(`No component factory found for ${jt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Nu=(()=>{class n{}return n.NULL=new ku,n})();function _C(){return Lu(un(),Qe())}function Lu(n,e){return new si(To(n,e))}let si=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=_C,n})();function bC(n){return n instanceof si?n.nativeElement:n}class od{}let ja=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function xC(){const n=Qe(),t=yo(un().index,n);return(eo(t)?t:n)[11]}(),n})(),jv=(()=>{class n{}return n.\u0275prov=yt({token:n,providedIn:"root",factory:()=>null}),n})();class Dl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ga=new Dl("14.1.0"),hg={};function Il(n){return n.ngOriginalError}class bs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Il(e);for(;t&&Il(t);)t=Il(t);return t||null}}const $v=new Map;let tx=0;const Ki="__ngContext__";function gi(n,e){eo(e)?(n[Ki]=e[20],function SC(n){$v.set(n[20],n)}(e)):n[Ki]=e}function ad(n){const e=n[Ki];return"number"==typeof e?function Xv(n){return $v.get(n)||null}(e):e||null}function Yv(n){const e=ad(n);return e?eo(e)?e:e.lView:null}const ox=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Gr))();function qa(n){return n instanceof Function?n():n}var Yi=(()=>((Yi=Yi||{})[Yi.Important=1]="Important",Yi[Yi.DashCase=2]="DashCase",Yi))();function Ou(n,e){return undefined(n,e)}function kl(n){const e=n[3];return Qo(e)?e[3]:e}function ty(n){return ry(n[13])}function ny(n){return ry(n[4])}function ry(n){for(;null!==n&&!Qo(n);)n=n[4];return n}function Fu(n,e,t,i,o){if(null!=i){let l,u=!1;Qo(i)?l=i:eo(i)&&(u=!0,i=i[0]);const p=Ai(i);0===n&&null!==t?null==o?fx(e,t,p):Bu(e,t,p,o||null,!0):1===n&&null!==t?Bu(e,t,p,o||null,!0):2===n?function vx(n,e,t){const i=ip(n,e);i&&function px(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,p,u):3===n&&e.destroyNode(p),null!=l&&function UC(n,e,t,i,o){const l=t[7];l!==Ai(t)&&Fu(e,n,i,l,o);for(let p=10;p<t.length;p++){const v=t[p];hd(v[1],v,n,e,i,l)}}(e,n,l,t,o)}}function oy(n,e,t){return n.createElement(e,t)}function ux(n,e){const t=n[9],i=t.indexOf(e),o=e[3];512&e[2]&&(e[2]&=-513,ev(o,-1)),t.splice(i,1)}function ay(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const o=i[17];null!==o&&o!==n&&ux(o,i),e>0&&(n[t-1][4]=i[4]);const l=Cl(n,10+e);!function cx(n,e){hd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const u=l[19];null!==u&&u.detachView(l[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function hx(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&hd(n,e,t,3,null,null),function OC(n){let e=n[13];if(!e)return bg(n[1],n);for(;e;){let t=null;if(eo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)eo(e)&&bg(e[1],e),e=e[3];null===e&&(e=n),eo(e)&&bg(e[1],e),t=e&&e[4]}e=t}}(e)}}function bg(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function wg(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const o=e[t[i]];if(!(o instanceof du)){const l=t[i+1];if(Array.isArray(l))for(let u=0;u<l.length;u+=2){const p=o[l[u]],v=l[u+1];try{v.call(p)}finally{}}else try{l.call(o)}finally{}}}}(n,e),function dx(n,e){const t=n.cleanup,i=e[7];let o=-1;if(null!==t)for(let l=0;l<t.length-1;l+=2)if("string"==typeof t[l]){const u=t[l+1],p="function"==typeof u?u(e):Ai(e[u]),v=i[o=t[l+2]],_=t[l+3];"boolean"==typeof _?p.removeEventListener(t[l],v,_):_>=0?i[o=_]():i[o=-_].unsubscribe(),l+=2}else{const u=i[o=t[l+1]];t[l].call(u)}if(null!==i){for(let l=o+1;l<i.length;l++)(0,i[l])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Qo(e[3])){t!==e[3]&&ux(t,e);const i=e[19];null!==i&&i.detachView(n)}!function bc(n){$v.delete(n[20])}(e)}}function ha(n,e,t){return function rp(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const o=n.data[i.directiveStart].encapsulation;if(o===Zo.None||o===Zo.Emulated)return null}return To(i,t)}(n,e.parent,t)}function Bu(n,e,t,i,o){n.insertBefore(e,t,i,o)}function fx(n,e,t){n.appendChild(e,t)}function ly(n,e,t,i,o){null!==i?Bu(n,e,t,i,o):fx(n,e,t)}function ip(n,e){return n.parentNode(e)}function cy(n,e,t){return hy(n,e,t)}let hy=function uy(n,e,t){return 40&n.type?To(n,t):null};function xg(n,e,t,i){const o=ha(n,i,e),l=e[11],p=cy(i.parent||e[6],i,e);if(null!=o)if(Array.isArray(t))for(let v=0;v<t.length;v++)ly(l,o,t[v],p,!1);else ly(l,o,t,p,!1)}function Mg(n,e){if(null!==e){const t=e.type;if(3&t)return To(e,n);if(4&t)return dy(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Mg(n,i);{const o=n[e.index];return Qo(o)?dy(-1,o):Ai(o)}}if(32&t)return Ou(e,n)()||Ai(n[e.index]);{const i=gx(n,e);return null!==i?Array.isArray(i)?i[0]:Mg(kl(n[16]),i):Mg(n,e.next)}}return null}function gx(n,e){return null!==e?n[16][6].projection[e.projection]:null}function dy(n,e){const t=10+n+1;if(t<e.length){const i=e[t],o=i[1].firstChild;if(null!==o)return Mg(i,o)}return e[7]}function Eg(n,e,t,i,o,l,u){for(;null!=t;){const p=i[t.index],v=t.type;if(u&&0===e&&(p&&gi(Ai(p),i),t.flags|=4),64!=(64&t.flags))if(8&v)Eg(n,e,t.child,i,o,l,!1),Fu(e,n,o,p,l);else if(32&v){const _=Ou(t,i);let M;for(;M=_();)Fu(e,n,o,M,l);Fu(e,n,o,p,l)}else 16&v?$a(n,e,i,t,o,l):Fu(e,n,o,p,l);t=u?t.projectionNext:t.next}}function hd(n,e,t,i,o,l){Eg(t,i,n.firstChild,e,o,l,!1)}function $a(n,e,t,i,o,l){const u=t[16],v=u[6].projection[i.projection];if(Array.isArray(v))for(let _=0;_<v.length;_++)Fu(e,n,o,v[_],l);else Eg(n,e,v,u[3],o,l,!0)}function fy(n,e,t){n.setAttribute(e,"style",t)}function Cg(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function py(n,e,t){let i=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const l=e.length;if(o+l===i||n.charCodeAt(o+l)<=32)return o}t=o+1}}const my="ng-template";function _x(n,e,t){let i=0;for(;i<n.length;){let o=n[i++];if(t&&"class"===o){if(o=n[i],-1!==py(o.toLowerCase(),e,0))return!0}else if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}}return!1}function gy(n){return 4===n.type&&n.value!==my}function bx(n,e,t){return e===(4!==n.type||t?n.value:my)}function wx(n,e,t){let i=4;const o=n.attrs||[],l=function vy(n){for(let e=0;e<n.length;e++)if(Ef(n[e]))return e;return n.length}(o);let u=!1;for(let p=0;p<e.length;p++){const v=e[p];if("number"!=typeof v){if(!u)if(4&i){if(i=2|1&i,""!==v&&!bx(n,v,t)||""===v&&1===e.length){if(Io(i))return!1;u=!0}}else{const _=8&i?v:e[++p];if(8&i&&null!==n.attrs){if(!_x(n.attrs,_,t)){if(Io(i))return!1;u=!0}continue}const C=xx(8&i?"class":v,o,gy(n),t);if(-1===C){if(Io(i))return!1;u=!0;continue}if(""!==_){let N;N=C>l?"":o[C+1].toLowerCase();const H=8&i?N:null;if(H&&-1!==py(H,_,0)||2&i&&_!==N){if(Io(i))return!1;u=!0}}}}else{if(!u&&!Io(i)&&!Io(v))return!1;if(u&&Io(v))continue;u=!1,i=v|1&i}}return Io(i)||u}function Io(n){return 0==(1&n)}function xx(n,e,t,i){if(null===e)return-1;let o=0;if(i||!t){let l=!1;for(;o<e.length;){const u=e[o];if(u===n)return o;if(3===u||6===u)l=!0;else{if(1===u||2===u){let p=e[++o];for(;"string"==typeof p;)p=e[++o];continue}if(4===u)break;if(0===u){o+=4;continue}}o+=l?1:2}return-1}return function Mx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Ag(n,e,t=!1){for(let i=0;i<e.length;i++)if(wx(n,e[i],t))return!0;return!1}function Tg(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let o=0;o<n.length;o++)if(n[o]!==i[o])continue e;return!0}}return!1}function dd(n,e){return n?":not("+e.trim()+")":e}function yy(n){let e=n[0],t=1,i=2,o="",l=!1;for(;t<n.length;){let u=n[t];if("string"==typeof u)if(2&i){const p=n[++t];o+="["+u+(p.length>0?'="'+p+'"':"")+"]"}else 8&i?o+="."+u:4&i&&(o+=" "+u);else""!==o&&!Io(u)&&(e+=dd(l,o),o=""),i=u,l=l||!Io(i);t++}return""!==o&&(e+=dd(l,o)),e}const mn={};function ar(n){Hu(er(),Qe(),_s()+n,!1)}function Hu(n,e,t,i){if(!i)if(3==(3&e[2])){const l=n.preOrderCheckHooks;null!==l&&xf(e,l,t)}else{const l=n.preOrderHooks;null!==l&&Mf(e,l,0,t)}na(t)}function wy(n,e=null,t=null,i){const o=md(n,e,t,i);return o.resolveInjectorInitializers(),o}function md(n,e=null,t=null,i,o=new Set){const l=[t||zn,fC(n)];return i=i||("object"==typeof n?void 0:jt(n)),new Uw(l,e||cg(),i||null,o)}let Kr=(()=>{class n{static create(t,i){if(Array.isArray(t))return wy({name:""},i,t,"");{const o=t.name??"";return wy({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=xu,n.NULL=new Fw,n.\u0275prov=yt({token:n,providedIn:"any",factory:()=>Re(Lw)}),n.__NG_ELEMENT_ID__=-1,n})();function Te(n,e=Wt.Default){const t=Qe();return null===t?Re(n,e):cw(un(),t,rn(n),e)}function cp(){throw new Error("invalid")}function up(n,e){return n<<17|e<<2}function No(n){return n>>17&32767}function Fg(n){return 2|n}function da(n){return(131068&n)>>2}function Yr(n,e){return-131069&n|e<<2}function Gu(n){return 1|n}function Ly(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i],l=t[i+1];if(-1!==l){const u=n.data[l];Rm(o),u.contentQueries(2,e[l],l)}}}function mp(n,e,t,i,o,l,u,p,v,_,M){const C=e.blueprint.slice();return C[0]=o,C[2]=76|i,(null!==M||n&&1024&n[2])&&(C[2]|=1024),Q0(C),C[3]=C[15]=n,C[8]=t,C[10]=u||n&&n[10],C[11]=p||n&&n[11],C[12]=v||n&&n[12]||null,C[9]=_||n&&n[9]||null,C[6]=l,C[20]=function nx(){return tx++}(),C[21]=M,C[16]=2==e.type?n[16]:C,C}function qu(n,e,t,i,o){let l=n.data[e];if(null===l)l=function zg(n,e,t,i,o){const l=ta(),u=dc(),v=n.data[e]=function Ed(n,e,t,i,o,l){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?l:l&&l.parent,t,e,i,o);return null===n.firstChild&&(n.firstChild=v),null!==l&&(u?null==l.child&&null!==v.parent&&(l.child=v):null===l.next&&(l.next=v)),v}(n,e,t,i,o),function Tm(){return an.lFrame.inI18n}()&&(l.flags|=64);else if(64&l.type){l.type=t,l.value=i,l.attrs=o;const u=function La(){const n=an.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();l.injectorIndex=null===u?-1:u.injectorIndex}return ci(l,!0),l}function xd(n,e,t,i){if(0===t)return-1;const o=e.length;for(let l=0;l<t;l++)e.push(i),n.blueprint.push(i),n.data.push(null);return o}function pa(n,e,t){bf(e);try{const i=n.viewQuery;null!==i&&Yy(1,i,t);const o=n.template;null!==o&&gp(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ly(n,e),n.staticViewQueries&&Yy(2,n.viewQuery,t);const l=n.components;null!==l&&function Vl(n,e){for(let t=0;t<e.length;t++)Kx(n,e[t])}(e,l)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,wf()}}function $u(n,e,t,i){const o=e[2];if(128!=(128&o)){bf(e);try{Q0(e),function nv(n){return an.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&gp(n,e,t,2,i);const u=3==(3&o);if(u){const _=n.preOrderCheckHooks;null!==_&&xf(e,_,null)}else{const _=n.preOrderHooks;null!==_&&Mf(e,_,0,null),Hh(e,0)}if(function $x(n){for(let e=ty(n);null!==e;e=ny(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const o=t[i],l=o[3];0==(512&o[2])&&ev(l,1),o[2]|=512}}}(e),function Ka(n){for(let e=ty(n);null!==e;e=ny(e))for(let t=10;t<e.length;t++){const i=e[t],o=i[1];J0(i)&&$u(o,i,o.template,i[8])}}(e),null!==n.contentQueries&&Ly(n,e),u){const _=n.contentCheckHooks;null!==_&&xf(e,_)}else{const _=n.contentHooks;null!==_&&Mf(e,_,1),Hh(e,1)}!function Fx(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)na(~o);else{const l=o,u=t[++i],p=t[++i];iv(u,l),p(2,e[l])}}}finally{na(-1)}}(n,e);const p=n.components;null!==p&&function Oy(n,e){for(let t=0;t<e.length;t++)Xx(n,e[t])}(e,p);const v=n.viewQuery;if(null!==v&&Yy(2,v,i),u){const _=n.viewCheckHooks;null!==_&&xf(e,_)}else{const _=n.viewHooks;null!==_&&Mf(e,_,2),Hh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ev(e[3],-1))}finally{wf()}}}function Md(n,e,t,i){const o=e[10],u=ew(e);try{!u&&o.begin&&o.begin(),u&&pa(n,e,i),$u(n,e,t,i)}finally{!u&&o.end&&o.end()}}function gp(n,e,t,i,o){const l=_s(),u=2&i;try{na(-1),u&&e.length>22&&Hu(n,e,22,!1),t(i,o)}finally{na(l)}}function vp(n,e,t){if(X0(e)){const o=e.directiveEnd;for(let l=e.directiveStart;l<o;l++){const u=n.data[l];u.contentQueries&&u.contentQueries(1,t[l],l)}}}function yp(n,e,t){!tv()||(function Vy(n,e,t,i){const o=t.directiveStart,l=t.directiveEnd;n.firstCreatePass||pu(t,e),gi(i,e);const u=t.initialInputs;for(let p=o;p<l;p++){const v=n.data[p],_=ea(v);_&&Wx(e,t,v);const M=Rf(e,n,p,t);gi(M,e),null!==u&&qx(0,p-o,M,v,0,u),_&&(yo(t.index,e)[8]=M)}}(n,e,t,To(t,e)),128==(128&t.flags)&&function Uy(n,e,t){const i=t.directiveStart,o=t.directiveEnd,l=t.index,u=function tw(){return an.lFrame.currentDirectiveIndex}();try{na(l);for(let p=i;p<o;p++){const v=n.data[p],_=e[p];Uh(p),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&Hy(v,_)}}finally{na(-1),Uh(u)}}(n,e,t))}function _p(n,e,t=To){const i=e.localNames;if(null!==i){let o=e.index+1;for(let l=0;l<i.length;l+=2){const u=i[l+1],p=-1===u?t(e,n):n[u];n[o++]=p}}}function jg(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Xu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Xu(n,e,t,i,o,l,u,p,v,_){const M=22+i,C=M+o,N=function Fy(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:mn);return t}(M,C),H="function"==typeof _?_():_;return N[1]={type:n,blueprint:N,template:t,queries:null,viewQuery:p,declTNode:e,data:N.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:v,consts:H,incompleteFirstPass:!1}}function By(n,e,t,i){const o=qg(e);null===t?o.push(i):(o.push(t),n.firstCreatePass&&Zy(n).push(i,o.length-1))}function bp(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const o=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,o):t[i]=[e,o]}return t}function oi(n,e){const i=e.directiveEnd,o=n.data,l=e.attrs,u=[];let p=null,v=null;for(let _=e.directiveStart;_<i;_++){const M=o[_],C=M.inputs,N=null===l||gy(e)?null:qy(C,l);u.push(N),p=bp(C,_,p),v=bp(M.outputs,_,v)}null!==p&&(p.hasOwnProperty("class")&&(e.flags|=16),p.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=u,e.inputs=p,e.outputs=v}function Os(n,e,t,i,o,l,u,p){const v=To(e,t);let M,_=e.inputs;!p&&null!=_&&(M=_[i])?(Qy(n,t,M,i,o),_m(e)&&Ux(t,e.index)):3&e.type&&(i=function Vx(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),o=null!=u?u(o,e.value||"",i):o,l.setProperty(v,i,o))}function Ux(n,e){const t=yo(e,n);16&t[2]||(t[2]|=32)}function Ec(n,e,t,i){let o=!1;if(tv()){const l=function zy(n,e,t){const i=n.directiveRegistry;let o=null;if(i)for(let l=0;l<i.length;l++){const u=i[l];Ag(t,u.selectors,!1)&&(o||(o=[]),ia(pu(t,e),n,u.type),ea(u)?(jy(n,t),o.unshift(u)):o.push(u))}return o}(n,e,t),u=null===i?null:{"":-1};if(null!==l){o=!0,Gy(t,n.data.length,l.length);for(let M=0;M<l.length;M++){const C=l[M];C.providersResolver&&C.providersResolver(C)}let p=!1,v=!1,_=xd(n,e,l.length,null);for(let M=0;M<l.length;M++){const C=l[M];t.mergedAttrs=Gh(t.mergedAttrs,C.hostAttrs),Wy(n,t,e,_,C),Gx(_,C,u),null!==C.contentQueries&&(t.flags|=8),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(t.flags|=128);const N=C.type.prototype;!p&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),p=!0),!v&&(N.ngOnChanges||N.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),v=!0),_++}oi(n,t)}u&&function jx(n,e,t){if(e){const i=n.localNames=[];for(let o=0;o<e.length;o+=2){const l=t[e[o+1]];if(null==l)throw new Xe(-301,!1);i.push(e[o],l)}}}(t,i,u)}return t.mergedAttrs=Gh(t.mergedAttrs,t.attrs),o}function Hx(n,e,t,i,o,l){const u=l.hostBindings;if(u){let p=n.hostBindingOpCodes;null===p&&(p=n.hostBindingOpCodes=[]);const v=~e.index;(function zx(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(p)!=v&&p.push(v),p.push(i,o,u)}}function Hy(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function jy(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function Gx(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ea(e)&&(t[""]=n)}}function Gy(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Wy(n,e,t,i,o){n.data[i]=o;const l=o.factory||(o.factory=lu(o.type)),u=new du(l,ea(o),Te);n.blueprint[i]=u,t[i]=u,Hx(n,e,0,i,xd(n,t,o.hostVars,mn),o)}function Wx(n,e,t){const i=To(e,n),o=jg(t),l=n[10],u=ma(n,mp(n,o,null,t.onPush?32:16,i,e,l,l.createRenderer(i,t),null,null,null));n[e.index]=u}function Fs(n,e,t,i,o,l){const u=To(n,e);!function Wg(n,e,t,i,o,l,u){if(null==l)n.removeAttribute(e,o,t);else{const p=null==u?sn(l):u(l,i||"",o);n.setAttribute(e,o,p,t)}}(e[11],u,l,n.value,t,i,o)}function qx(n,e,t,i,o,l){const u=l[e];if(null!==u){const p=i.setInput;for(let v=0;v<u.length;){const _=u[v++],M=u[v++],C=u[v++];null!==p?i.setInput(t,C,_,M):t[M]=C}}}function qy(n,e){let t=null,i=0;for(;i<e.length;){const o=e[i];if(0!==o)if(5!==o){if("number"==typeof o)break;n.hasOwnProperty(o)&&(null===t&&(t=[]),t.push(o,n[o],e[i+1])),i+=2}else i+=2;else i+=4}return t}function $y(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function Xx(n,e){const t=yo(e,n);if(J0(t)){const i=t[1];48&t[2]?$u(i,t,i.template,t[8]):t[5]>0&&Ku(t)}}function Ku(n){for(let i=ty(n);null!==i;i=ny(i))for(let o=10;o<i.length;o++){const l=i[o];if(512&l[2]){const u=l[1];$u(u,l,u.template,l[8])}else l[5]>0&&Ku(l)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const o=yo(t[i],n);J0(o)&&o[5]>0&&Ku(o)}}function Kx(n,e){const t=yo(e,n),i=t[1];(function YC(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),pa(i,t,t[8])}function ma(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Xy(n){for(;n;){n[2]|=32;const e=kl(n);if(_S(n)&&!e)return n;n=e}return null}function Zx(n){!function Ky(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Yv(t);if(null!==i){const o=i[1];Md(o,i,o.template,t)}}}(n[8])}function Yy(n,e,t){Rm(0),e(n,t)}const ZC=(()=>Promise.resolve(null))();function qg(n){return n[7]||(n[7]=[])}function Zy(n){return n.cleanup||(n.cleanup=[])}function Jx(n,e,t){return(null===n||ea(n))&&(t=function AS(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Jy(n,e){const t=n[9],i=t?t.get(bs,null):null;i&&i.handleError(e)}function Qy(n,e,t,i,o){for(let l=0;l<t.length;){const u=t[l++],p=t[l++],v=e[u],_=n.data[u];null!==_.setInput?_.setInput(v,o,i,p):v[p]=o}}function _i(n,e,t){let i=t?n.styles:null,o=t?n.classes:null,l=0;if(null!==e)for(let u=0;u<e.length;u++){const p=e[u];"number"==typeof p?l=p:1==l?o=ac(o,p):2==l&&(i=ac(i,p+": "+e[++u]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=o:n.classesWithoutHost=o}function $g(n,e,t,i,o=!1){for(;null!==t;){const l=e[t.index];if(null!==l&&i.push(Ai(l)),Qo(l))for(let p=10;p<l.length;p++){const v=l[p],_=v[1].firstChild;null!==_&&$g(v[1],v,_,i)}const u=t.type;if(8&u)$g(n,e,t.child,i);else if(32&u){const p=Ou(t,e);let v;for(;v=p();)i.push(v)}else if(16&u){const p=gx(e,t);if(Array.isArray(p))i.push(...p);else{const v=kl(e[16]);$g(v[1],v,p,i,!0)}}t=o?t.projectionNext:t.next}return i}class wp{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return $g(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(ay(e,i),Cl(t,i))}this._attachedToViewContainer=!1}hx(this._lView[1],this._lView)}onDestroy(e){By(this._lView[1],this._lView,null,e)}markForCheck(){Xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Sd(n,e,t){const i=e[10];i.begin&&i.begin();try{$u(n,e,n.template,t)}catch(o){throw Jy(e,o),o}finally{i.end&&i.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _g(n,e){hd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=e}}class JC extends wp{constructor(e){super(e),this._view=e}detectChanges(){Zx(this._view)}checkNoChanges(){}get context(){return null}}class e_ extends Nu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=kr(e);return new xp(t,this.ngModule)}}function Cd(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class e1{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const o=this.injector.get(e,hg,i);return o!==hg||t===hg?o:this.parentInjector.get(e,t,i)}}class xp extends Ww{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Uu(n){return n.map(yy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Cd(this.componentDef.inputs)}get outputs(){return Cd(this.componentDef.outputs)}create(e,t,i,o){let l=(o=o||this.ngModule)instanceof _c?o:o?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const u=l?new e1(e,l):e,p=u.get(od,null);if(null===p)throw new Xe(407,!1);const v=u.get(jv,null),_=p.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",C=i?function Bx(n,e,t){return n.selectRootElement(e,t===Zo.ShadowDom)}(_,i,this.componentDef.encapsulation):oy(p.createRenderer(null,this.componentDef),M,function Qx(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(M)),N=this.componentDef.onPush?288:272,H=function sA(n,e){return{components:[],scheduler:n||ox,clean:ZC,playerHandler:e||null,flags:0}}(),X=Xu(0,null,null,1,0,null,null,null,null,null),ee=mp(null,X,H,N,null,null,p,_,v,u,null);let ge,fe;bf(ee);try{const Ie=function rA(n,e,t,i,o,l){const u=t[1];t[22]=n;const v=qu(u,22,2,"#host",null),_=v.mergedAttrs=e.hostAttrs;null!==_&&(_i(v,_,!0),null!==n&&(jh(o,n,_),null!==v.classes&&Cg(o,n,v.classes),null!==v.styles&&fy(o,n,v.styles)));const M=i.createRenderer(n,e),C=mp(t,jg(e),null,e.onPush?32:16,t[22],v,i,M,l||null,null,null);return u.firstCreatePass&&(ia(pu(v,t),u,e.type),jy(u,v),Gy(v,t.length,1)),ma(t,C),t[22]=C}(C,this.componentDef,ee,p,_);if(C)if(i)jh(_,C,["ng-version",Ga.full]);else{const{attrs:Ee,classes:st}=function Ex(n){const e=[],t=[];let i=1,o=2;for(;i<n.length;){let l=n[i];if("string"==typeof l)2===o?""!==l&&e.push(l,n[++i]):8===o&&t.push(l);else{if(!Io(o))break;o=l}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);Ee&&jh(_,C,Ee),st&&st.length>0&&Cg(_,C,st.join(" "))}if(fe=Cm(X,22),void 0!==t){const Ee=fe.projection=[];for(let st=0;st<this.ngContentSelectors.length;st++){const wt=t[st];Ee.push(null!=wt?Array.from(wt):null)}}ge=function iA(n,e,t,i,o){const l=t[1],u=function XC(n,e,t){const i=un();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Wy(n,i,e,xd(n,e,1,null),t),oi(n,i));const o=Rf(e,n,i.directiveStart,i);gi(o,e);const l=To(i,e);return l&&gi(l,e),o}(l,t,e);if(i.components.push(u),n[8]=u,null!==o)for(const v of o)v(u,e);if(e.contentQueries){const v=un();e.contentQueries(1,u,v.directiveStart)}const p=un();return!l.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(na(p.index),Hx(t[1],p,0,p.directiveStart,p.directiveEnd,e),Hy(e,u)),u}(Ie,this.componentDef,ee,H,[t1]),pa(X,ee,null)}finally{wf()}return new tA(this.componentType,ge,Lu(fe,ee),ee,fe)}}class tA extends class vC{}{constructor(e,t,i,o,l){super(),this.location=i,this._rootLView=o,this._tNode=l,this.instance=t,this.hostView=this.changeDetectorRef=new JC(o),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let o;if(null!==i&&(o=i[e])){const l=this._rootLView;Qy(l[1],l,o,e,t),Ux(l,this._tNode.index)}}get injector(){return new Wh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function t1(){const n=un();hu(Qe()[1],n)}function qn(n){let e=function n1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let o;if(ea(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Xe(903,!1);o=e.\u0275dir}if(o){if(t){i.push(o);const u=n;u.inputs=Ad(n.inputs),u.declaredInputs=Ad(n.declaredInputs),u.outputs=Ad(n.outputs);const p=o.hostBindings;p&&n_(n,p);const v=o.viewQuery,_=o.contentQueries;if(v&&Xg(n,v),_&&t_(n,_),Ia(n.inputs,o.inputs),Ia(n.declaredInputs,o.declaredInputs),Ia(n.outputs,o.outputs),ea(o)&&o.data.animation){const M=n.data;M.animation=(M.animation||[]).concat(o.data.animation)}}const l=o.features;if(l)for(let u=0;u<l.length;u++){const p=l[u];p&&p.ngInherit&&p(n),p===qn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function ei(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const o=n[i];o.hostVars=e+=o.hostVars,o.hostAttrs=Gh(o.hostAttrs,t=Gh(t,o.hostAttrs))}}(i)}function Ad(n){return n===Lh?{}:n===zn?[]:n}function Xg(n,e){const t=n.viewQuery;n.viewQuery=t?(i,o)=>{e(i,o),t(i,o)}:e}function t_(n,e){const t=n.contentQueries;n.contentQueries=t?(i,o,l)=>{e(i,o,l),t(i,o,l)}:e}function n_(n,e){const t=n.hostBindings;n.hostBindings=t?(i,o)=>{e(i,o),t(i,o)}:e}let Td=null;function Ul(){if(!Td){const n=Gr.Symbol;if(n&&n.iterator)Td=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Td=i)}}}return Td}function Ii(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function xs(n,e,t,i){const o=Qe();return Ii(o,xl(),e)&&(er(),Fs(Jr(),o,n,e,t,i)),xs}function Ju(n,e,t,i){return Ii(n,xl(),t)?e+sn(t)+i:mn}function vi(n,e,t,i,o,l,u,p){const v=Qe(),_=er(),M=n+22,C=_.firstCreatePass?function Ap(n,e,t,i,o,l,u,p,v){const _=e.consts,M=qu(e,n,4,u||null,hc(_,p));Ec(e,t,M,hc(_,v)),hu(e,M);const C=M.tViews=Xu(2,M,i,o,l,e.directiveRegistry,e.pipeRegistry,null,e.schemas,_);return null!==e.queries&&(e.queries.template(e,M),C.queries=e.queries.embeddedTView(M)),M}(M,_,v,e,t,i,o,l,u):_.data[M];ci(C,!1);const N=v[11].createComment("");xg(_,v,N,C),gi(N,v),ma(v,v[M]=$y(N,v,N,C)),bm(C)&&yp(_,v,C),null!=u&&_p(v,C,p)}function Id(n){return function cu(n,e){return n[e]}(function yf(){return an.lFrame.contextLView}(),22+n)}function Nr(n,e,t){const i=Qe();return Ii(i,xl(),e)&&Os(er(),Jr(),i,n,e,i[11],t,!1),Nr}function Tp(n,e,t,i,o){const u=o?"class":"style";Qy(n,t,e.inputs[u],u,i)}function hn(n,e,t,i){const o=Qe(),l=er(),u=22+n,p=o[11],v=o[u]=oy(p,e,function cv(){return an.lFrame.currentNamespace}()),_=l.firstCreatePass?function o_(n,e,t,i,o,l,u){const p=e.consts,_=qu(e,n,2,o,hc(p,l));return Ec(e,t,_,hc(p,u)),null!==_.attrs&&_i(_,_.attrs,!1),null!==_.mergedAttrs&&_i(_,_.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,_),_}(u,l,o,0,e,t,i):l.data[u];ci(_,!0);const M=_.mergedAttrs;null!==M&&jh(p,v,M);const C=_.classes;null!==C&&Cg(p,v,C);const N=_.styles;return null!==N&&fy(p,v,N),64!=(64&_.flags)&&xg(l,o,v,_),0===function IS(){return an.lFrame.elementDepthCount}()&&gi(v,o),function PS(){an.lFrame.elementDepthCount++}(),bm(_)&&(yp(l,o,_),vp(l,_,o)),null!==i&&_p(o,_),hn}function dn(){let n=un();dc()?gf():(n=n.parent,ci(n,!1));const e=n;!function kS(){an.lFrame.elementDepthCount--}();const t=er();return t.firstCreatePass&&(hu(t,n),X0(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function hv(n){return 0!=(16&n.flags)}(e)&&Tp(t,e,Qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Do(n){return 0!=(32&n.flags)}(e)&&Tp(t,e,Qe(),e.stylesWithoutHost,!1),dn}function Bs(n,e,t,i){return hn(n,e,t,i),dn(),Bs}function Ac(n,e,t){const i=Qe(),o=er(),l=n+22,u=o.firstCreatePass?function aA(n,e,t,i,o){const l=e.consts,u=hc(l,i),p=qu(e,n,8,"ng-container",u);return null!==u&&_i(p,u,!0),Ec(e,t,p,hc(l,o)),null!==e.queries&&e.queries.elementStart(e,p),p}(l,o,i,e,t):o.data[l];ci(u,!0);const p=i[l]=i[11].createComment("");return xg(o,i,p,u),gi(p,i),bm(u)&&(yp(o,i,u),vp(o,u,i)),null!=t&&_p(i,u),Ac}function Ja(){let n=un();const e=er();return dc()?gf():(n=n.parent,ci(n,!1)),e.firstCreatePass&&(hu(e,n),X0(n)&&e.queries.elementEnd(n)),Ja}function Tc(){return Qe()}function Pd(n){return!!n&&"function"==typeof n.then}const l_=function a_(n){return!!n&&"function"==typeof n.subscribe};function ti(n,e,t,i){const o=Qe(),l=er(),u=un();return l1(l,o,o[11],u,n,e,0,i),ti}function c_(n,e){const t=un(),i=Qe(),o=er();return l1(o,i,Jx(Dm(o.data),t,i),t,n,e),c_}function l1(n,e,t,i,o,l,u,p){const v=bm(i),M=n.firstCreatePass&&Zy(n),C=e[8],N=qg(e);let H=!0;if(3&i.type||p){const ge=To(i,e),fe=p?p(ge):ge,Ie=N.length,Ee=p?wt=>p(Ai(wt[i.index])):i.index;let st=null;if(!p&&v&&(st=function lA(n,e,t,i){const o=n.cleanup;if(null!=o)for(let l=0;l<o.length-1;l+=2){const u=o[l];if(u===t&&o[l+1]===i){const p=e[7],v=o[l+2];return p.length>v?p[v]:null}"string"==typeof u&&(l+=2)}return null}(n,e,o,i.index)),null!==st)(st.__ngLastListenerFn__||st).__ngNextListenerFn__=l,st.__ngLastListenerFn__=l,H=!1;else{l=u1(i,e,C,l,!1);const wt=t.listen(fe,o,l);N.push(l,wt),M&&M.push(o,Ee,Ie,Ie+1)}}else l=u1(i,e,C,l,!1);const X=i.outputs;let ee;if(H&&null!==X&&(ee=X[o])){const ge=ee.length;if(ge)for(let fe=0;fe<ge;fe+=2){const Yt=e[ee[fe]][ee[fe+1]].subscribe(l),Or=N.length;N.push(l,Yt),M&&M.push(o,i.index,Or,-(Or+1))}}}function c1(n,e,t,i){try{return!1!==t(i)}catch(o){return Jy(n,o),!1}}function u1(n,e,t,i,o){return function l(u){if(u===Function)return i;Xy(2&n.flags?yo(n.index,e):e);let v=c1(e,0,i,u),_=l.__ngNextListenerFn__;for(;_;)v=c1(e,0,_,u)&&v,_=_.__ngNextListenerFn__;return o&&!1===v&&(u.preventDefault(),u.returnValue=!1),v}}function Pi(n=1){return function lv(n){return(an.lFrame.contextLView=function rw(n,e){for(;n>0;)e=e[15],n--;return e}(n,an.lFrame.contextLView))[8]}(n)}function cA(n,e){let t=null;const i=function Po(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let o=0;o<e.length;o++){const l=e[o];if("*"!==l){if(null===i?Ag(n,l,!0):Tg(i,l))return o}else t=o}return t}function Dp(n){const e=Qe()[16][6];if(!e.projection){const i=e.projection=Xh(n?n.length:1,null),o=i.slice();let l=e.child;for(;null!==l;){const u=n?cA(l,n):0;null!==u&&(o[u]?o[u].projectionNext=l:i[u]=l,o[u]=l),l=l.next}}}function ai(n,e=0,t){const i=Qe(),o=er(),l=qu(o,22+n,16,null,t||null);null===l.projection&&(l.projection=e),gf(),64!=(64&l.flags)&&function Sg(n,e,t){$a(e[11],0,e,t,ha(n,t,e),cy(t.parent||e[6],t,e))}(o,i,l)}function Rp(n,e,t){return Dc(n,"",e,"",t),Rp}function Dc(n,e,t,i,o){const l=Qe(),u=Ju(l,e,t,i);return u!==mn&&Os(er(),Jr(),l,n,u,l[11],o,!1),Dc}function Ip(n,e,t,i,o){const l=n[t+1],u=null===e;let p=i?No(l):da(l),v=!1;for(;0!==p&&(!1===v||u);){const M=n[p+1];hA(n[p],e)&&(v=!0,n[p+1]=i?Gu(M):Fg(M)),p=i?No(M):da(M)}v&&(n[t+1]=i?Fg(l):Gu(l))}function hA(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Yh(n,e)>=0}function ls(n,e){return function Oo(n,e,t,i){const o=Qe(),l=er(),u=function bo(n){const e=an.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);l.firstUpdatePass&&function kp(n,e,t,i){const o=n.data;if(null===o[t+1]){const l=o[_s()],u=function f_(n,e){return e>=n.expandoStartIndex}(n,t);(function y_(n,e){return 0!=(n.flags&(e?16:32))})(l,i)&&null===e&&!u&&(e=!1),e=function ih(n,e,t,i){const o=Dm(n);let l=i?e.residualClasses:e.residualStyles;if(null===o)0===(i?e.classBindings:e.styleBindings)&&(t=Ic(t=sh(null,n,e,t,i),e.attrs,i),l=null);else{const u=e.directiveStylingLast;if(-1===u||n[u]!==o)if(t=sh(o,n,e,t,i),null===l){let v=function p_(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==da(i))return n[No(i)]}(n,e,i);void 0!==v&&Array.isArray(v)&&(v=sh(null,n,e,v[1],i),v=Ic(v,e.attrs,i),function M1(n,e,t,i){n[No(t?e.classBindings:e.styleBindings)]=i}(n,e,i,v))}else l=function Bo(n,e,t){let i;const o=e.directiveEnd;for(let l=1+e.directiveStylingLast;l<o;l++)i=Ic(i,n[l].hostAttrs,t);return Ic(i,e.attrs,t)}(n,e,i)}return void 0!==l&&(i?e.residualClasses=l:e.residualStyles=l),t}(o,l,e,i),function uA(n,e,t,i,o,l){let u=l?e.classBindings:e.styleBindings,p=No(u),v=da(u);n[i]=t;let M,_=!1;if(Array.isArray(t)){const C=t;M=C[1],(null===M||Yh(C,M)>0)&&(_=!0)}else M=t;if(o)if(0!==v){const N=No(n[p+1]);n[i+1]=up(N,p),0!==N&&(n[N+1]=Yr(n[N+1],i)),n[p+1]=function Dy(n,e){return 131071&n|e<<17}(n[p+1],i)}else n[i+1]=up(p,0),0!==p&&(n[p+1]=Yr(n[p+1],i)),p=i;else n[i+1]=up(v,0),0===p?p=i:n[v+1]=Yr(n[v+1],i),v=i;_&&(n[i+1]=Fg(n[i+1])),Ip(n,M,i,!0),Ip(n,M,i,!1),function g1(n,e,t,i,o){const l=o?n.residualClasses:n.residualStyles;null!=l&&"string"==typeof e&&Yh(l,e)>=0&&(t[i+1]=Gu(t[i+1]))}(e,M,n,i,l),u=up(p,v),l?e.classBindings=u:e.styleBindings=u}(o,l,e,t,u,i)}}(l,n,u,i),e!==mn&&Ii(o,u,e)&&function g_(n,e,t,i,o,l,u,p){if(!(3&e.type))return;const v=n.data,_=v[p+1];Np(function xc(n){return 1==(1&n)}(_)?v_(v,e,t,o,da(_),u):void 0)||(Np(l)||function Sx(n){return 2==(2&n)}(_)&&(l=v_(v,null,t,o,p,u)),function yx(n,e,t,i,o){if(e)o?n.addClass(t,i):n.removeClass(t,i);else{let l=-1===i.indexOf("-")?void 0:Yi.DashCase;null==o?n.removeStyle(t,i,l):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),l|=Yi.Important),n.setStyle(t,i,o,l))}}(i,u,Sm(_s(),t),o,l))}(l,l.data[_s()],o,o[11],n,o[u+1]=function S1(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=jt(ss(n)))),n}(e,t),i,u)}(n,e,null,!0),ls}function sh(n,e,t,i,o){let l=null;const u=t.directiveEnd;let p=t.directiveStylingLast;for(-1===p?p=t.directiveStart:p++;p<u&&(l=e[p],i=Ic(i,l.hostAttrs,o),l!==n);)p++;return null!==n&&(t.directiveStylingLast=p),i}function Ic(n,e,t){const i=t?1:2;let o=-1;if(null!==e)for(let l=0;l<e.length;l++){const u=e[l];"number"==typeof u?o=u:o===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),wo(n,u,!!t||e[++l]))}return void 0===n?null:n}function v_(n,e,t,i,o,l){const u=null===e;let p;for(;o>0;){const v=n[o],_=Array.isArray(v),M=_?v[1]:v,C=null===M;let N=t[o+1];N===mn&&(N=C?zn:void 0);let H=C?pc(N,i):M===i?N:void 0;if(_&&!Np(H)&&(H=pc(v,i)),Np(H)&&(p=H,u))return p;const X=n[o+1];o=u?No(X):da(X)}if(null!==e){let v=l?e.residualClasses:e.residualStyles;null!=v&&(p=pc(v,i))}return p}function Np(n){return void 0!==n}function ni(n,e=""){const t=Qe(),i=er(),o=n+22,l=i.firstCreatePass?qu(i,o,1,e,null):i.data[o],u=t[o]=function cd(n,e){return n.createText(e)}(t[11],e);xg(i,t,u,l),ci(l,!1)}function Qa(n){return el("",n,""),Qa}function el(n,e,t){const i=Qe(),o=Ju(i,n,e,t);return o!==mn&&function ro(n,e,t){const i=Sm(e,n);!function sy(n,e,t){n.setValue(e,t)}(n[11],i,t)}(i,_s(),o),el}function s0(n,e,t){const i=Qe();return Ii(i,xl(),e)&&Os(er(),Jr(),i,n,e,i[11],t,!0),s0}function o0(n,e,t){const i=Qe();if(Ii(i,xl(),e)){const l=er(),u=Jr();Os(l,u,i,n,e,Jx(Dm(l.data),u,i),t,!0)}return o0}const Ld="en-US";let H1=Ld;function ue(n,e,t,i,o){if(n=rn(n),Array.isArray(n))for(let l=0;l<n.length;l++)ue(n[l],e,t,i,o);else{const l=er(),u=Qe();let p=Iu(n)?n:rn(n.provide),v=id(n);const _=un(),M=1048575&_.providerIndexes,C=_.directiveStart,N=_.providerIndexes>>20;if(Iu(n)||!n.multi){const H=new du(v,o,Te),X=lt(p,e,o?M:M+N,C);-1===X?(ia(pu(_,u),l,p),Ue(l,n,e.length),e.push(p),_.directiveStart++,_.directiveEnd++,o&&(_.providerIndexes+=1048576),t.push(H),u.push(H)):(t[X]=H,u[X]=H)}else{const H=lt(p,e,M+N,C),X=lt(p,e,M,M+N),ee=H>=0&&t[H],ge=X>=0&&t[X];if(o&&!ge||!o&&!ee){ia(pu(_,u),l,p);const fe=function kn(n,e,t,i,o){const l=new du(n,t,Te);return l.multi=[],l.index=e,l.componentProviders=0,Ke(l,o,i&&!t),l}(o?vn:dt,t.length,o,i,v);!o&&ge&&(t[X].providerFactory=fe),Ue(l,n,e.length,0),e.push(p),_.directiveStart++,_.directiveEnd++,o&&(_.providerIndexes+=1048576),t.push(fe),u.push(fe)}else Ue(l,n,H>-1?H:X,Ke(t[o?X:H],v,!o&&i));!o&&i&&ge&&t[X].componentProviders++}}}function Ue(n,e,t,i){const o=Iu(e),l=function mC(n){return!!n.useClass}(e);if(o||l){const v=(l?rn(e.useClass):e).prototype.ngOnDestroy;if(v){const _=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){const M=_.indexOf(t);-1===M?_.push(t,[i,v]):_[M+1].push(i,v)}else _.push(t,v)}}}function Ke(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function lt(n,e,t,i){for(let o=t;o<i;o++)if(e[o]===n)return o;return-1}function dt(n,e,t,i){return Pn(this.multi,[])}function vn(n,e,t,i){const o=this.multi;let l;if(this.providerFactory){const u=this.providerFactory.componentProviders,p=Rf(t,t[1],this.providerFactory.index,i);l=p.slice(0,u),Pn(o,l);for(let v=u;v<p.length;v++)l.push(p[v])}else l=[],Pn(o,l);return l}function Pn(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function zt(n,e=[]){return t=>{t.providersResolver=(i,o)=>function Y1(n,e,t){const i=er();if(i.firstCreatePass){const o=ea(n);ue(t,i.data,i.blueprint,o,!0),ue(e,i.data,i.blueprint,o,!1)}}(i,o?o(n):n,e)}}class qr{}class pr{}class Fd extends qr{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new e_(this);const i=ks(e);this._bootstrapComponents=qa(i.bootstrap),this._r3Injector=md(e,t,[{provide:qr,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver}],jt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class so extends pr{constructor(e){super(),this.moduleType=e}create(e){return new Fd(this.moduleType,e)}}class k_ extends qr{constructor(e,t,i){super(),this.componentFactoryResolver=new e_(this),this.instance=null;const o=new Uw([...e,{provide:qr,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver}],t||cg(),i,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ya(n,e,t=null){return new k_(n,e,t).injector}function CA(n){return e=>{setTimeout(n,void 0,e)}}const pi=class zF extends q{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let o=e,l=t||(()=>null),u=i;if(e&&"object"==typeof e){const v=e;o=v.next?.bind(v),l=v.error?.bind(v),u=v.complete?.bind(v)}this.__isAsync&&(l=CA(l),o&&(o=CA(o)),u&&(u=CA(u)));const p=super.subscribe({next:o,error:l,complete:u});return e instanceof U&&e.add(p),p}};function jF(){return this._results[Ul()]()}class AA{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ul(),i=AA.prototype;i[t]||(i[t]=jF)}get changes(){return this._changes||(this._changes=new pi)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const o=to(e);(this._changesDetected=!function qS(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let o=n[i],l=e[i];if(t&&(o=t(o),l=t(l)),l!==o)return!1}return!0}(i._results,o,t))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Fc=(()=>{class n{}return n.__NG_ELEMENT_ID__=qF,n})();const GF=Fc,WF=class extends GF{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,o=mp(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);o[17]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[19];return null!==u&&(o[19]=u.createEmbeddedView(i)),pa(i,o,e),new wp(o)}};function qF(){return tM(un(),Qe())}function tM(n,e){return 4&n.type?new WF(e,n,Lu(n,e)):null}let nl=(()=>{class n{}return n.__NG_ELEMENT_ID__=$F,n})();function $F(){return UI(un(),Qe())}const XF=nl,BI=class extends XF{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Lu(this._hostTNode,this._hostLView)}get injector(){return new Wh(this._hostTNode,this._hostLView)}get parentInjector(){const e=Tf(this._hostTNode,this._hostLView);if(fv(e)){const t=Oa(e,this._hostLView),i=fu(e);return new Wh(t[1].data[i+8],t)}return new Wh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=VI(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let o,l;"number"==typeof i?o=i:null!=i&&(o=i.index,l=i.injector);const u=e.createEmbeddedView(t||{},l);return this.insert(u,o),u}createComponent(e,t,i,o,l){const u=e&&!function Wr(n){return"function"==typeof n}(e);let p;if(u)p=t;else{const C=t||{};p=C.index,i=C.injector,o=C.projectableNodes,l=C.environmentInjector||C.ngModuleRef}const v=u?e:new xp(kr(e)),_=i||this.parentInjector;if(!l&&null==v.ngModule){const N=(u?_:this.parentInjector).get(_c,null);N&&(l=N)}const M=v.create(_,o,void 0,l);return this.insert(M.hostView,p),M}insert(e,t){const i=e._lView,o=i[1];if(function DS(n){return Qo(n[3])}(i)){const M=this.indexOf(e);if(-1!==M)this.detach(M);else{const C=i[3],N=new BI(C,C[6],C[3]);N.detach(N.indexOf(e))}}const l=this._adjustIndex(t),u=this._lContainer;!function FC(n,e,t,i){const o=10+i,l=t.length;i>0&&(t[o-1][4]=e),i<l-10?(e[4]=t[o],sa(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const u=e[17];null!==u&&t!==u&&function BC(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(u,e);const p=e[19];null!==p&&p.insertView(n),e[2]|=64}(o,i,u,l);const p=dy(l,u),v=i[11],_=ip(v,u[7]);return null!==_&&function LC(n,e,t,i,o,l){i[0]=o,i[6]=e,hd(n,i,t,1,o,l)}(o,u[6],v,i,_,p),e.attachToViewContainerRef(),sa(TA(u),l,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=VI(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=ay(this._lContainer,t);i&&(Cl(TA(this._lContainer),t),hx(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=ay(this._lContainer,t);return i&&null!=Cl(TA(this._lContainer),t)?new wp(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function VI(n){return n[8]}function TA(n){return n[8]||(n[8]=[])}function UI(n,e){let t;const i=e[n.index];if(Qo(i))t=i;else{let o;if(8&n.type)o=Ai(i);else{const l=e[11];o=l.createComment("");const u=To(n,e);Bu(l,ip(l,u),o,function mx(n,e){return n.nextSibling(e)}(l,u),!1)}e[n.index]=t=$y(i,e,o,n),ma(e,t)}return new BI(t,n,e)}class DA{constructor(e){this.queryList=e,this.matches=null}clone(){return new DA(this.queryList)}setDirty(){this.queryList.setDirty()}}class RA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,o=[];for(let l=0;l<i;l++){const u=t.getByIndex(l);o.push(this.queries[u.indexInDeclarationView].clone())}return new RA(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==WI(e,t).matches&&this.queries[t].setDirty()}}class HI{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class IA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const o=null!==t?t.length:0,l=this.getByIndex(i).embeddedTView(e,o);l&&(l.indexInDeclarationView=i,null!==t?t.push(l):t=[l])}return null!==t?new IA(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class PA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new PA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const l=i[o];this.matchTNodeWithReadOption(e,t,ZF(t,l)),this.matchTNodeWithReadOption(e,t,Hm(t,e,l,!1,!1))}else i===Fc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===si||o===nl||o===Fc&&4&t.type)this.addMatch(t.index,-2);else{const l=Hm(t,e,o,!1,!1);null!==l&&this.addMatch(t.index,l)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ZF(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function QF(n,e,t,i){return-1===t?function JF(n,e){return 11&n.type?Lu(n,e):4&n.type?tM(n,e):null}(e,n):-2===t?function eB(n,e,t){return t===si?Lu(e,n):t===Fc?tM(e,n):t===nl?UI(e,n):void 0}(n,e,i):Rf(n,n[1],t,e)}function zI(n,e,t,i){const o=e[19].queries[i];if(null===o.matches){const l=n.data,u=t.matches,p=[];for(let v=0;v<u.length;v+=2){const _=u[v];p.push(_<0?null:QF(e,l[_],u[v+1],t.metadata.read))}o.matches=p}return o.matches}function kA(n,e,t,i){const o=n.queries.getByIndex(t),l=o.matches;if(null!==l){const u=zI(n,e,o,t);for(let p=0;p<l.length;p+=2){const v=l[p];if(v>0)i.push(u[p/2]);else{const _=l[p+1],M=e[-v];for(let C=10;C<M.length;C++){const N=M[C];N[17]===N[3]&&kA(N[1],N,_,i)}if(null!==M[9]){const C=M[9];for(let N=0;N<C.length;N++){const H=C[N];kA(H[1],H,_,i)}}}}}return i}function zs(n){const e=Qe(),t=er(),i=sv();Rm(i+1);const o=WI(t,i);if(n.dirty&&ew(e)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const l=o.crossesNgTemplate?kA(t,e,i,[]):zI(t,e,o,i);n.reset(l,bC),n.notifyOnChanges()}return!0}return!1}function c0(n,e,t){const i=er();i.firstCreatePass&&(GI(i,new HI(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),jI(i,Qe(),e)}function rl(n,e,t,i){const o=er();if(o.firstCreatePass){const l=un();GI(o,new HI(e,t,i),l.index),function nB(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(o,n),2==(2&t)&&(o.staticContentQueries=!0)}jI(o,Qe(),t)}function js(){return function tB(n,e){return n[19].queries[e].queryList}(Qe(),sv())}function jI(n,e,t){const i=new AA(4==(4&t));By(n,e,i,i.destroy),null===e[19]&&(e[19]=new RA),e[19].queries.push(new DA(i))}function GI(n,e,t){null===n.queries&&(n.queries=new IA),n.queries.track(new PA(e,t))}function WI(n,e){return n.queries.getByIndex(e)}function nM(n,e){return tM(n,e)}function iM(...n){}const sM=new St("Application Initializer");let oM=(()=>{class n{constructor(t){this.appInits=t,this.resolve=iM,this.reject=iM,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const l=this.appInits[o]();if(Pd(l))t.push(l);else if(l_(l)){const u=new Promise((p,v)=>{l.subscribe({complete:p,error:v})});t.push(u)}}Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Re(sM,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V_=new St("AppId",{providedIn:"root",factory:function h2(){return`${BA()}${BA()}${BA()}`}});function BA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const d2=new St("Platform Initializer"),VA=new St("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),f2=new St("appBootstrapListener"),jp=new St("AnimationModuleType");let xB=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Bc=new St("LocaleId",{providedIn:"root",factory:()=>Hi(Bc,Wt.Optional|Wt.SkipSelf)||function MB(){return typeof $localize<"u"&&$localize.locale||Ld}()});class SB{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let UA=(()=>{class n{compileModuleSync(t){return new so(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),l=qa(ks(t).declarations).reduce((u,p)=>{const v=kr(p);return v&&u.push(new xp(v)),u},[]);return new SB(i,l)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TB=(()=>Promise.resolve(0))();function HA(n){typeof Zone>"u"?TB.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Xn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pi(!1),this.onMicrotaskEmpty=new pi(!1),this.onStable=new pi(!1),this.onError=new pi(!1),typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();const o=this;if(o._nesting=0,o._outer=o._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const l=Zone.AsyncStackTaggingZoneSpec;o._inner=o._inner.fork(new l("Angular"))}Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&t,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function DB(){let n=Gr.requestAnimationFrame,e=Gr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function PB(n){const e=()=>{!function IB(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jA(n),n.isCheckStableRunning=!0,zA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,o,l,u,p)=>{try{return g2(n),t.invokeTask(o,l,u,p)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||n.shouldCoalesceRunChangeDetection)&&e(),v2(n)}},onInvoke:(t,i,o,l,u,p,v)=>{try{return g2(n),t.invoke(o,l,u,p,v)}finally{n.shouldCoalesceRunChangeDetection&&e(),v2(n)}},onHasTask:(t,i,o,l)=>{t.hasTask(o,l),i===o&&("microTask"==l.change?(n._hasPendingMicrotasks=l.microTask,jA(n),zA(n)):"macroTask"==l.change&&(n.hasPendingMacrotasks=l.macroTask))},onHandleError:(t,i,o,l)=>(t.handleError(o,l),n.runOutsideAngular(()=>n.onError.emit(l)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xn.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if(Xn.isInAngularZone())throw new Xe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,o){const l=this._inner,u=l.scheduleEventTask("NgZoneEvent: "+o,e,RB,iM,iM);try{return l.runTask(u,t,i)}finally{l.cancelTask(u)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const RB={};function zA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function g2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function v2(n){n._nesting--,zA(n)}class kB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pi,this.onMicrotaskEmpty=new pi,this.onStable=new pi,this.onError=new pi}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,o){return e.apply(t,i)}}const y2=new St(""),aM=new St("");let qA,GA=(()=>{class n{constructor(t,i,o){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,qA||(function NB(n){qA=n}(o),o.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xn.assertNotInAngularZone(),HA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())HA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,o){let l=-1;i&&i>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==l),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:l,updateCb:o})}whenStable(t,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,o){return[]}}return n.\u0275fac=function(t){return new(t||n)(Re(Xn),Re(WA),Re(aM))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),WA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return qA?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Vd=null;const _2=new St("AllowMultipleToken"),$A=new St("PlatformDestroyListeners");class b2{constructor(e,t){this.name=e,this.token=t}}function x2(n,e,t=[]){const i=`Platform: ${e}`,o=new St(i);return(l=[])=>{let u=XA();if(!u||u.injector.get(_2,!1)){const p=[...t,...l,{provide:o,useValue:!0}];n?n(p):function FB(n){if(Vd&&!Vd.get(_2,!1))throw new Xe(400,!1);Vd=n;const e=n.get(E2);(function w2(n){const e=n.get(d2,null);e&&e.forEach(t=>t())})(n)}(function M2(n=[],e){return Kr.create({name:e,providers:[{provide:Tl,useValue:"platform"},{provide:$A,useValue:new Set([()=>Vd=null])},...n]})}(p,i))}return function VB(n){const e=XA();if(!e)throw new Xe(401,!1);return e}()}}function XA(){return Vd?.get(E2)??null}let E2=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const o=function UB(n,e){let t;return t="noop"===n?new kB:("zone.js"===n?void 0:n)||new Xn(e),t}(i?.ngZone,function S2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),l=[{provide:Xn,useValue:o}];return o.run(()=>{const u=Kr.create({providers:l,parent:this.injector,name:t.moduleType.name}),p=t.create(u),v=p.injector.get(bs,null);if(!v)throw new Xe(402,!1);return o.runOutsideAngular(()=>{const _=o.onError.subscribe({next:M=>{v.handleError(M)}});p.onDestroy(()=>{lM(this._modules,p),_.unsubscribe()})}),function C2(n,e,t){try{const i=t();return Pd(i)?i.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(v,o,()=>{const _=p.injector.get(oM);return _.runInitializers(),_.donePromise.then(()=>(function f(n){gs(n,"Expected localeId to be defined"),"string"==typeof n&&(H1=n.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Bc,Ld)||Ld),this._moduleDoBootstrap(p),p))})})}bootstrapModule(t,i=[]){const o=A2({},i);return function LB(n,e,t){const i=new so(t);return Promise.resolve(i)}(0,0,t).then(l=>this.bootstrapModuleFactory(l,o))}_moduleDoBootstrap(t){const i=t.injector.get(f0);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new Xe(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get($A,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Re(Kr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function A2(n,e){return Array.isArray(e)?e.reduce(A2,n):{...n,...e}}let f0=(()=>{class n{constructor(t,i,o){this._zone=t,this._injector=i,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new P(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),u=new P(p=>{let v;this._zone.runOutsideAngular(()=>{v=this._zone.onStable.subscribe(()=>{Xn.assertNotInAngularZone(),HA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{Xn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{v.unsubscribe(),_.unsubscribe()}});this.isStable=tu(l,u.pipe(jr()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const o=t instanceof Ww;if(!this._injector.get(oM).done)throw!o&&function h0(n){const e=kr(n)||Is(n)||Ps(n);return null!==e&&e.standalone}(t),new Xe(405,false);let u;u=o?t:this._injector.get(Nu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);const p=function OB(n){return n.isBoundToModule}(u)?void 0:this._injector.get(qr),_=u.create(Kr.NULL,[],i||u.selector,p),M=_.location.nativeElement,C=_.injector.get(y2,null);return C?.registerApplication(M),_.onDestroy(()=>{this.detachView(_.hostView),lM(this.components,_),C?.unregisterApplication(M)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Xe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;lM(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(f2,[]).concat(this._bootstrapListeners).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lM(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Xe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Re(Xn),Re(_c),Re(bs))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let D2=!0,p0=(()=>{class n{}return n.__NG_ELEMENT_ID__=jB,n})();function jB(n){return function GB(n,e,t){if(_m(n)&&!t){const i=yo(n.index,e);return new wp(i,i)}return 47&n.type?new wp(e[16],e):null}(un(),Qe(),16==(16&n))}const r4=x2(null,"core",[]);let i4=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Re(f0))},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})();let dM=null;function Vc(){return dM}const rr=new St("DocumentToken");let fM=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:function(){return function l4(){return Re(U2)}()},providedIn:"platform"}),n})();const c4=new St("Location Initialized");let U2=(()=>{class n extends fM{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vc().getBaseHref(this._doc)}onPopState(t){const i=Vc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Vc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,o){H2()?this._history.pushState(t,i,o):this.location.hash=o}replaceState(t,i,o){H2()?this._history.replaceState(t,i,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:function(){return function u4(){return new U2(Re(rr))}()},providedIn:"platform"}),n})();function H2(){return!!window.history.pushState}function QA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ch(n){return n&&"?"!==n[0]?"?"+n:n}let Wp=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:function(){return function h4(){const n=Re(rr).location;return new G2(Re(fM),n&&n.origin||"")}()},providedIn:"root"}),n})();const j2=new St("appBaseHref");let G2=(()=>{class n extends Wp{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QA(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ch(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${i}${o}`:i}pushState(t,i,o,l){const u=this.prepareExternalUrl(o+ch(l));this._platformLocation.pushState(t,i,u)}replaceState(t,i,o,l){const u=this.prepareExternalUrl(o+ch(l));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Re(fM),Re(j2,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),d4=(()=>{class n extends Wp{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=QA(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,o,l){let u=this.prepareExternalUrl(o+ch(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,o,l){let u=this.prepareExternalUrl(o+ch(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Re(fM),Re(j2,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),pM=(()=>{class n{constructor(t){this._subject=new pi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=z2(W2(i)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ch(i))}normalize(t){return n.stripTrailingSlash(function p4(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,W2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",o=null){this._locationStrategy.pushState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ch(i)),o)}replaceState(t,i="",o=null){this._locationStrategy.replaceState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ch(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(o=>o(t,i))}subscribe(t,i,o){return this._subject.subscribe({next:t,error:i,complete:o})}}return n.normalizeQueryParams=ch,n.joinWithSlash=QA,n.stripTrailingSlash=z2,n.\u0275fac=function(t){return new(t||n)(Re(Wp))},n.\u0275prov=yt({token:n,factory:function(){return function f4(){return new pM(Re(Wp))}()},providedIn:"root"}),n})();function W2(n){return n.replace(/\/index.html$/,"")}let j_=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new r5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rP("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rP("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Te(nl),Te(Fc))},n.\u0275dir=qt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class r5{constructor(){this.$implicit=null,this.ngIf=null}}function rP(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${jt(e)}'.`)}class cT{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let EM=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=qt({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),iP=(()=>{class n{constructor(t,i,o){this.ngSwitch=o,o._addCase(),this._view=new cT(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(Te(nl),Te(Fc),Te(EM,9))},n.\u0275dir=qt({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),dT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})();const aP="browser";let N5=(()=>{class n{}return n.\u0275prov=yt({token:n,providedIn:"root",factory:()=>new L5(Re(rr),window)}),n})();class L5{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function O5(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const l=o.shadowRoot;if(l){const u=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(u)return u}o=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(i-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lP(this.window.history)||lP(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lP(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fT extends class B5 extends class a4{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function o4(n){dM||(dM=n)}(new fT)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function V5(){return G_=G_||document.querySelector("base"),G_?G_.getAttribute("href"):null}();return null==t?null:function U5(n){SM=SM||document.createElement("a"),SM.setAttribute("href",n);const e=SM.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){G_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Z4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[o,l]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let SM,G_=null;const cP=new St("TRANSITION_ID"),z5=[{provide:sM,useFactory:function H5(n,e,t){return()=>{t.get(oM).donePromise.then(()=>{const i=Vc(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)i.remove(o[l])})}},deps:[cP,rr,Kr],multi:!0}];let G5=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const CM=new St("EventManagerPlugins");let AM=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}addGlobalEventListener(t,i,o){return this._findPluginFor(i).addGlobalEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const o=this._plugins;for(let l=0;l<o.length;l++){const u=o[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Re(CM),Re(Xn))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();class uP{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const o=Vc().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,i)}}let hP=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),i.add(o))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),W_=(()=>{class n extends hP{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,o){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,o.push(i.appendChild(u))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(dP),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,o)=>{this._addStylesToHost(t,o,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(dP))}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();function dP(n){Vc().remove(n)}const pT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mT=/%COMP%/g;function TM(n,e,t){for(let i=0;i<e.length;i++){let o=e[i];Array.isArray(o)?TM(n,o,t):(o=o.replace(mT,n),t.push(o))}return t}function mP(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let DM=(()=>{class n{constructor(t,i,o){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new gT(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Zo.Emulated:{let o=this.rendererByCompId.get(i.id);return o||(o=new Y5(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,o)),o.applyToHost(t),o}case 1:case Zo.ShadowDom:return new Z5(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const o=TM(i.id,i.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Re(AM),Re(W_),Re(V_))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();class gT{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pT[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(vP(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(vP(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,o){if(o){t=o+":"+t;const l=pT[o];l?e.setAttributeNS(l,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const o=pT[i];o?e.removeAttributeNS(o,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,o){o&(Yi.DashCase|Yi.Important)?e.style.setProperty(t,i,o&Yi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Yi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mP(i)):this.eventManager.addEventListener(e,t,mP(i))}}function vP(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Y5 extends gT{constructor(e,t,i,o){super(e),this.component=i;const l=TM(o+"-"+i.id,i.styles,[]);t.addStyles(l),this.contentAttr=function $5(n){return"_ngcontent-%COMP%".replace(mT,n)}(o+"-"+i.id),this.hostAttr=function X5(n){return"_nghost-%COMP%".replace(mT,n)}(o+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Z5 extends gT{constructor(e,t,i,o){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=TM(o.id,o.styles,[]);for(let u=0;u<l.length;u++){const p=document.createElement("style");p.textContent=l[u],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let J5=(()=>{class n extends uP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const yP=["alt","control","meta","shift"],eV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_P={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nV=(()=>{class n extends uP{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,o){const l=n.parseEventName(i),u=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vc().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(i.pop());let u="";if(yP.forEach(v=>{const _=i.indexOf(v);_>-1&&(i.splice(_,1),u+=v+".")}),u+=l,0!=i.length||0===l.length)return null;const p={};return p.domEventName=o,p.fullKey=u,p}static getEventFullKey(t){let i="",o=function rV(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_P.hasOwnProperty(e)&&(e=_P[e]))}return eV[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),yP.forEach(l=>{l!=o&&(0,tV[l])(t)&&(i+=l+".")}),i+=o,i}static eventCallback(t,i,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>i(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const aV=x2(r4,"browser",[{provide:VA,useValue:aP},{provide:d2,useValue:function iV(){fT.makeCurrent()},multi:!0},{provide:rr,useFactory:function oV(){return function _w(n){tg=n}(document),document},deps:[]}]),wP=new St(""),xP=[{provide:aM,useClass:class j5{addToWindow(e){Gr.getAngularTestability=(i,o=!0)=>{const l=e.findTestabilityInTree(i,o);if(null==l)throw new Error("Could not find testability for element.");return l},Gr.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gr.getAllAngularRootElements=()=>e.getAllRootElements(),Gr.frameworkStabilizers||(Gr.frameworkStabilizers=[]),Gr.frameworkStabilizers.push(i=>{const o=Gr.getAllAngularTestabilities();let l=o.length,u=!1;const p=function(v){u=u||v,l--,0==l&&i(u)};o.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Vc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:y2,useClass:GA,deps:[Xn,WA,aM]},{provide:GA,useClass:GA,deps:[Xn,WA,aM]}],MP=[{provide:Tl,useValue:"root"},{provide:bs,useFactory:function sV(){return new bs},deps:[]},{provide:CM,useClass:J5,multi:!0,deps:[rr,Xn,VA]},{provide:CM,useClass:nV,multi:!0,deps:[rr]},{provide:DM,useClass:DM,deps:[AM,W_,V_]},{provide:od,useExisting:DM},{provide:hP,useExisting:W_},{provide:W_,useClass:W_,deps:[rr]},{provide:AM,useClass:AM,deps:[CM,Xn]},{provide:class F5{},useClass:G5,deps:[]},[]];let EP=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:V_,useValue:t.appId},{provide:cP,useExisting:V_},z5]}}}return n.\u0275fac=function(t){return new(t||n)(Re(wP,12))},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({providers:[...MP,...xP],imports:[dT,i4]}),n})(),SP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:function(t){let i=null;return i=t?new t:function cV(){return new SP(Re(rr))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let bT,_T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:function(t){let i=null;return i=t?new(t||n):Re(TP),i},providedIn:"root"}),n})(),TP=(()=>{class n extends _T{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case br.NONE:return i;case br.HTML:return la(i,"HTML")?ss(i):kw(this._doc,String(i)).toString();case br.STYLE:return la(i,"Style")?ss(i):i;case br.SCRIPT:if(la(i,"Script"))return ss(i);throw new Error("unsafe value used in a script context");case br.URL:return la(i,"URL")?ss(i):$f(String(i));case br.RESOURCE_URL:if(la(i,"ResourceURL"))return ss(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function Ew(n){return new yc(n)}(t)}bypassSecurityTrustStyle(t){return function Sw(n){return new Mw(n)}(t)}bypassSecurityTrustScript(t){return function Ru(n){return new iC(n)}(t)}bypassSecurityTrustUrl(t){return function Cw(n){return new Jh(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Aw(n){return new Wf(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:function(t){let i=null;return i=t?new t:function vV(n){return new TP(n.get(rr))}(Re(Kr)),i},providedIn:"root"}),n})();try{bT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{bT=!1}let m0,jo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function k5(n){return n===aP}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Re(VA))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DP=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function RP(){if(m0)return m0;if("object"!=typeof document||!document)return m0=new Set(DP),m0;let n=document.createElement("input");return m0=new Set(DP.filter(e=>(n.setAttribute("type",e),n.type===e))),m0}let q_,qp,wT;function RM(n){return function yV(){if(null==q_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>q_=!0}))}finally{q_=q_||!1}return q_}()?n:!!n.capture}function _V(){if(null==qp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qp=!1,qp;if("scrollBehavior"in document.documentElement.style)qp=!0;else{const n=Element.prototype.scrollTo;qp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return qp}function $p(n){return n.composedPath?n.composedPath()[0]:n.target}function xT(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class ol extends q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Gt(...n){return Sn(n,Bt(n))}function tc(n,e){return rt((t,i)=>{let o=0;t.subscribe(it(i,l=>n.call(e,l,o++)&&i.next(l)))})}function IP(n){return tc((e,t)=>n<=t)}function TV(n,e){return n===e}function Xp(n){return rt((e,t)=>{Qt(n).subscribe(it(t,()=>t.complete(),De)),!t.closed&&e.subscribe(t)})}function Hd(n){return null!=n&&"false"!=`${n}`}function PM(n){return Array.isArray(n)?n:[n]}function ts(n){return null==n?"":"string"==typeof n?n:`${n}px`}function hh(n){return n instanceof si?n.nativeElement:n}const{isArray:IV}=Array,{getPrototypeOf:PV,prototype:kV,keys:NV}=Object;function PP(n){if(1===n.length){const e=n[0];if(IV(e))return{args:e,keys:null};if(function LV(n){return n&&"object"==typeof n&&PV(n)===kV}(e)){const t=NV(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:OV}=Array;function MT(n){return F(e=>function FV(n,e){return OV(e)?n(...e):n(e)}(n,e))}function kP(n,e){return n.reduce((t,i,o)=>(t[i]=e[o],t),{})}function ET(...n){const e=Bt(n),t=Ir(n),{args:i,keys:o}=PP(n);if(0===i.length)return Sn([],e);const l=new P(function BV(n,e,t=W){return i=>{NP(e,()=>{const{length:o}=n,l=new Array(o);let u=o,p=o;for(let v=0;v<o;v++)NP(e,()=>{const _=Sn(n[v],e);let M=!1;_.subscribe(it(i,C=>{l[v]=C,M||(M=!0,p--),p||i.next(t(l.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,e,o?u=>kP(o,u):W));return t?l.pipe(MT(t)):l}function NP(n,e,t){n?En(t,n,e):e()}function kM(...n){return function VV(){return yr(1)}()(Sn(n,Bt(n)))}function Uc(n){return n<=0?()=>Wn:rt((e,t)=>{let i=0;e.subscribe(it(t,o=>{++i<=n&&(t.next(o),n<=i&&t.complete())}))})}class UV extends U{constructor(e,t){super()}schedule(e,t=0){return this}}const NM={setInterval(n,e,...t){const{delegate:i}=NM;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=NM;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class ST extends UV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return NM.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;NM.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,i=!1;try{this.work(e)}catch(l){i=!0,o=l||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ve(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const LP={now:()=>(LP.delegate||Date).now(),delegate:void 0};class $_{constructor(e,t=$_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}$_.now=LP.now;class CT extends $_{constructor(e,t=$_.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const AT=new CT(ST),HV=AT;function OP(n,e=AT){return rt((t,i)=>{let o=null,l=null,u=null;const p=()=>{if(o){o.unsubscribe(),o=null;const _=l;l=null,i.next(_)}};function v(){const _=u+n,M=e.now();if(M<_)return o=this.schedule(void 0,_-M),void i.add(o);p()}t.subscribe(it(i,_=>{l=_,u=e.now(),o||(o=e.schedule(v,n),i.add(o))},()=>{p(),i.complete()},void 0,()=>{l=o=null}))})}function X_(...n){const e=Bt(n);return rt((t,i)=>{(e?kM(n,t,e):kM(n,t)).subscribe(i)})}const FP=new Set;let g0,zV=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):GV}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function jV(n){if(!FP.has(n))try{g0||(g0=document.createElement("style"),g0.setAttribute("type","text/css"),document.head.appendChild(g0)),g0.sheet&&(g0.sheet.insertRule(`@media ${n} {body{ }}`,0),FP.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Re(jo))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GV(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let TT=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new q}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return BP(PM(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let l=ET(BP(PM(t)).map(u=>this._registerQuery(u).observable));return l=kM(l.pipe(Uc(1)),l.pipe(IP(1),OP(0))),l.pipe(F(u=>{const p={matches:!1,breakpoints:{}};return u.forEach(({matches:v,query:_})=>{p.matches=p.matches||v,p.breakpoints[_]=v}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),l={observable:new P(u=>{const p=v=>this._zone.run(()=>u.next(v));return i.addListener(p),()=>{i.removeListener(p)}}).pipe(X_(i),F(({matches:u})=>({query:t,matches:u})),Xp(this._destroySubject)),mql:i};return this._queries.set(t,l),l}}return n.\u0275fac=function(t){return new(t||n)(Re(zV),Re(Xn))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BP(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function zP(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function jP(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const QV=new St("cdk-input-modality-detector-options"),eU={ignoreKeys:[18,17,224,91,16]},v0=RM({passive:!0,capture:!0});let tU=(()=>{class n{constructor(t,i,o,l){this._platform=t,this._mostRecentTarget=null,this._modality=new ol(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(p=>p===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=$p(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zP(u)?"keyboard":"mouse"),this._mostRecentTarget=$p(u))},this._onTouchstart=u=>{jP(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=$p(u))},this._options={...eU,...l},this.modalityDetected=this._modality.pipe(IP(1)),this.modalityChanged=this.modalityDetected.pipe(function AV(n,e=W){return n=n??TV,rt((t,i)=>{let o,l=!0;t.subscribe(it(i,u=>{const p=e(u);(l||!n(o,p))&&(l=!1,o=p,i.next(u))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,v0),o.addEventListener("mousedown",this._onMousedown,v0),o.addEventListener("touchstart",this._onTouchstart,v0)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,v0),document.removeEventListener("mousedown",this._onMousedown,v0),document.removeEventListener("touchstart",this._onTouchstart,v0))}}return n.\u0275fac=function(t){return new(t||n)(Re(jo),Re(Xn),Re(rr),Re(QV,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nU=new St("liveAnnouncerElement",{providedIn:"root",factory:function rU(){return null}}),iU=new St("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let WP=(()=>{class n{constructor(t,i,o,l){this._ngZone=i,this._defaultOptions=l,this._document=o,this._liveElement=t||this._createLiveElement()}announce(t,...i){const o=this._defaultOptions;let l,u;return 1===i.length&&"number"==typeof i[0]?u=i[0]:[l,u]=i,this.clear(),clearTimeout(this._previousTimeout),l||(l=o&&o.politeness?o.politeness:"polite"),null==u&&o&&(u=o.duration),this._liveElement.setAttribute("aria-live",l),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(p=>this._currentResolve=p)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof u&&(this._previousTimeout=setTimeout(()=>this.clear(),u)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),o=this._document.createElement("div");for(let l=0;l<i.length;l++)i[l].remove();return o.classList.add(t),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),this._document.body.appendChild(o),o}}return n.\u0275fac=function(t){return new(t||n)(Re(nU,8),Re(Xn),Re(rr),Re(iU,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sU=new St("cdk-focus-monitor-default-options"),LM=RM({passive:!0,capture:!0});let oU=(()=>{class n{constructor(t,i,o,l,u){this._ngZone=t,this._platform=i,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new q,this._rootNodeFocusAndBlurListener=p=>{for(let _=$p(p);_;_=_.parentElement)"focus"===p.type?this._onFocus(p,_):this._onBlur(p,_)},this._document=l,this._detectionMode=u?.detectionMode||0}monitor(t,i=!1){const o=hh(t);if(!this._platform.isBrowser||1!==o.nodeType)return Gt(null);const l=function wV(n){if(function bV(){if(null==wT){const n=typeof document<"u"?document.head:null;wT=!(!n||!n.createShadowRoot&&!n.attachShadow)}return wT}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),u=this._elementInfo.get(o);if(u)return i&&(u.checkChildren=!0),u.subject;const p={checkChildren:i,subject:new q,rootNode:l};return this._elementInfo.set(o,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(t){const i=hh(t),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(t,i,o){const l=hh(t);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([p,v])=>this._originChanged(p,i,v)):(this._setOrigin(i),"function"==typeof l.focus&&l.focus(o))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const o=this._elementInfo.get(i),l=$p(t);!o||!o.checkChildren&&i!==l||this._originChanged(i,this._getFocusOrigin(l),o)}_onBlur(t,i){const o=this._elementInfo.get(i);!o||o.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(o,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,LM),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,LM)}),this._rootNodeFocusListenerCount.set(i,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xp(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,LM),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,LM),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,o){this._setClasses(t,i),this._emitOrigin(o,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((o,l)=>{(l===t||o.checkChildren&&l.contains(t))&&i.push([l,o])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const l=t.labels;if(l)for(let u=0;u<l.length;u++)if(l[u].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Re(Xn),Re(jo),Re(tU),Re(rr,8),Re(sU,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qP="cdk-high-contrast-black-on-white",$P="cdk-high-contrast-white-on-black",DT="cdk-high-contrast-active";let aU=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Hi(TT).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(t):null,l=(o&&o.backgroundColor||"").replace(/ /g,"");switch(t.remove(),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(DT,qP,$P),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(DT,qP):2===i&&t.add(DT,$P)}}}return n.\u0275fac=function(t){return new(t||n)(Re(jo),Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lU=new St("cdk-dir-doc",{providedIn:"root",factory:function cU(){return Hi(rr)}}),uU=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let XP=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new pi,t){const o=t.documentElement?t.documentElement.dir:null;this.value=function hU(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?uU.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||o||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Re(lU,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})();const fU=new St("mat-sanity-checks",{providedIn:"root",factory:function dU(){return!0}});let ba=(()=>{class n{constructor(t,i,o){this._sanityChecks=i,this._document=o,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!xT()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Re(aU),Re(fU,8),Re(rr))},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[K_,K_]}),n})();function pU(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Hd(e)}}}function RT(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function mU(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Hd(e)}}}function gU(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,l=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);l!==e&&(this.errorState=l,this.stateChanges.next())}}}let ZP=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yU{constructor(e,t,i,o=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const JP={enterDuration:225,exitDuration:150},IT=RM({passive:!0}),QP=["mousedown","touchstart"],ek=["mouseup","mouseleave","touchend","touchcancel"];class bU{constructor(e,t,i,o){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=hh(i))}fadeInRipple(e,t,i={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l={...JP,...i.animation};i.centered&&(e=o.left+o.width/2,t=o.top+o.height/2);const u=i.radius||function wU(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),o=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+o*o)}(e,t,o),p=e-o.left,v=t-o.top,_=l.enterDuration,M=document.createElement("div");M.classList.add("mat-ripple-element"),M.style.left=p-u+"px",M.style.top=v-u+"px",M.style.height=2*u+"px",M.style.width=2*u+"px",null!=i.color&&(M.style.backgroundColor=i.color),M.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(M);const C=window.getComputedStyle(M),H=C.transitionDuration,X="none"===C.transitionProperty||"0s"===H||"0s, 0s"===H,ee=new yU(this,M,i,X);M.style.transform="scale3d(1, 1, 1)",ee.state=0,i.persistent||(this._mostRecentTransientRipple=ee);let ge=null;return!X&&(_||l.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const fe=()=>this._finishRippleTransition(ee),Ie=()=>this._destroyRipple(ee);M.addEventListener("transitionend",fe),M.addEventListener("transitioncancel",Ie),ge={onTransitionEnd:fe,onTransitionCancel:Ie}}),this._activeRipples.set(ee,ge),(X||!_)&&this._finishRippleTransition(ee),ee}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...JP,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=hh(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(QP))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ek),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=zP(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!jP(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,IT)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(QP.forEach(e=>{this._triggerElement.removeEventListener(e,this,IT)}),this._pointerUpEventsRegistered&&ek.forEach(e=>{this._triggerElement.removeEventListener(e,this,IT)}))}}const xU=new St("mat-ripple-global-options");let tk=(()=>{class n{constructor(t,i,o,l,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=l||{},this._rippleRenderer=new bU(this,i,t,o)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,o){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(Te(si),Te(Xn),Te(jo),Te(xU,8),Te(jp,8))},n.\u0275dir=qt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&ls("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),MU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[ba,ba]}),n})();const EU=["mat-button",""],SU=["*"],AU=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],TU=RT(pU(mU(class{constructor(n){this._elementRef=n}})));let PT=(()=>{class n extends TU{constructor(t,i,o){super(t),this._focusMonitor=i,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const l of AU)this._hasHostAttributes(l)&&this._getHostElement().classList.add(l);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(Te(si),Te(oU),Te(jp,8))},n.\u0275cmp=go({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&c0(tk,5),2&t){let o;zs(o=js())&&(i.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(xs("disabled",i.disabled||null),ls("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[qn],attrs:EU,ngContentSelectors:SU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Dp(),hn(0,"span",0),ai(1),dn(),Bs(2,"span",1)(3,"span",2)),2&t&&(ar(2),ls("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Nr("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[tk],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),nk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[MU,ba,ba]}),n})();const DU=["*",[["mat-card-footer"]]],RU=["*","mat-card-footer"];let IU=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(Te(jp,8))},n.\u0275cmp=go({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&ls("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:RU,decls:2,vars:0,template:function(t,i){1&t&&(Dp(DU),ai(0),ai(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),PU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[ba,ba]}),n})();function y0(n,e){const t=Y(n)?n:()=>n,i=o=>o.error(t());return new P(e?o=>e.schedule(i,0,o):i)}function rk(...n){const e=Ir(n),{args:t,keys:i}=PP(n),o=new P(l=>{const{length:u}=t;if(!u)return void l.complete();const p=new Array(u);let v=u,_=u;for(let M=0;M<u;M++){let C=!1;Qt(t[M]).subscribe(it(l,N=>{C||(C=!0,_--),p[M]=N},()=>v--,void 0,()=>{(!v||!C)&&(_||l.next(i?kP(i,p):p),l.complete())}))}});return e?o.pipe(MT(e)):o}function hs(n,e,t){const i=Y(n)||e||t?{next:n,error:e,complete:t}:n;return i?rt((o,l)=>{var u;null===(u=i.subscribe)||void 0===u||u.call(i);let p=!0;o.subscribe(it(l,v=>{var _;null===(_=i.next)||void 0===_||_.call(i,v),l.next(v)},()=>{var v;p=!1,null===(v=i.complete)||void 0===v||v.call(i),l.complete()},v=>{var _;p=!1,null===(_=i.error)||void 0===_||_.call(i,v),l.error(v)},()=>{var v,_;p&&(null===(v=i.unsubscribe)||void 0===v||v.call(i)),null===(_=i.finalize)||void 0===_||_.call(i)}))}):W}function dh(n){return rt((e,t)=>{let l,i=null,o=!1;i=e.subscribe(it(t,void 0,void 0,u=>{l=Qt(n(u,dh(n)(e))),i?(i.unsubscribe(),i=null,l.subscribe(t)):o=!0})),o&&(i.unsubscribe(),i=null,l.subscribe(t))})}function OM(n){return rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zd(n,e){return Y(e)?Cr(n,e,1):Cr(n,1)}class kU{}class jd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const o=t.slice(0,i),l=o.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(o,l),this.headers.has(l)?this.headers.get(l).push(u):this.headers.set(l,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const o=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(o,i),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof jd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new jd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof jd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":const l=e.value;if(l){let u=this.headers.get(t);if(!u)return;u=u.filter(p=>-1===l.indexOf(p)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class NU{encodeKey(e){return ik(e)}encodeValue(e){return ik(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const OU=/%(\d[a-f0-9])/gi,FU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ik(n){return encodeURIComponent(n).replace(OU,(e,t)=>FU[t]??e)}function FM(n){return`${n}`}class Gd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new NU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function LU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const l=o.indexOf("="),[u,p]=-1==l?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,l)),e.decodeValue(o.slice(l+1))],v=t.get(u)||[];v.push(p),t.set(u,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],o=Array.isArray(i)?i.map(FM):[FM(i)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const o=e[i];Array.isArray(o)?o.forEach(l=>{t.push({param:i,value:l,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Gd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(FM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const o=i.indexOf(FM(e.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class BU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function sk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ok(n){return typeof Blob<"u"&&n instanceof Blob}function ak(n){return typeof FormData<"u"&&n instanceof FormData}class Z_{constructor(e,t,i,o){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function VU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,l=o):l=i,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new jd),this.context||(this.context=new BU),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+u}}else this.params=new Gd,this.urlWithParams=t}serializeBody(){return null===this.body?null:sk(this.body)||ok(this.body)||ak(this.body)||function UU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ak(this.body)?null:ok(this.body)?this.body.type||null:sk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,_=e.params||this.params;const M=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((C,N)=>C.set(N,e.setHeaders[N]),v)),e.setParams&&(_=Object.keys(e.setParams).reduce((C,N)=>C.set(N,e.setParams[N]),_)),new Z_(t,i,l,{params:_,headers:v,context:M,reportProgress:p,responseType:o,withCredentials:u})}}var Gs=(()=>((Gs=Gs||{})[Gs.Sent=0]="Sent",Gs[Gs.UploadProgress=1]="UploadProgress",Gs[Gs.ResponseHeader=2]="ResponseHeader",Gs[Gs.DownloadProgress=3]="DownloadProgress",Gs[Gs.Response=4]="Response",Gs[Gs.User=5]="User",Gs))();class kT extends class HU{constructor(e,t=200,i="OK"){this.headers=e.headers||new jd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Gs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new kT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function NT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ck=(()=>{class n{constructor(t){this.handler=t}request(t,i,o={}){let l;if(t instanceof Z_)l=t;else{let v,_;v=o.headers instanceof jd?o.headers:new jd(o.headers),o.params&&(_=o.params instanceof Gd?o.params:new Gd({fromObject:o.params})),l=new Z_(t,i,void 0!==o.body?o.body:null,{headers:v,context:o.context,params:_,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const u=Gt(l).pipe(zd(v=>this.handler.handle(v)));if(t instanceof Z_||"events"===o.observe)return u;const p=u.pipe(tc(v=>v instanceof kT));switch(o.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe(F(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return p.pipe(F(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return p.pipe(F(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return p.pipe(F(v=>v.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Gd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,NT(o,i))}post(t,i,o={}){return this.request("POST",t,NT(o,i))}put(t,i,o={}){return this.request("PUT",t,NT(o,i))}}return n.\u0275fac=function(t){return new(t||n)(Re(kU))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const jU=["*"];let BM;function J_(n){return function GU(){if(void 0===BM&&(BM=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(BM=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return BM}()?.createHTML(n)||n}function uk(n){return Error(`Unable to find icon with the name "${n}"`)}function hk(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function dk(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Kp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let VM=(()=>{class n{constructor(t,i,o,l){this._httpClient=t,this._sanitizer=i,this._errorHandler=l,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(t,i,o){return this.addSvgIconInNamespace("",t,i,o)}addSvgIconLiteral(t,i,o){return this.addSvgIconLiteralInNamespace("",t,i,o)}addSvgIconInNamespace(t,i,o,l){return this._addSvgIconConfig(t,i,new Kp(o,null,l))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,o,l){const u=this._sanitizer.sanitize(br.HTML,o);if(!u)throw dk(o);const p=J_(u);return this._addSvgIconConfig(t,i,new Kp("",p,l))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,o){return this._addSvgIconSetConfig(t,new Kp(i,null,o))}addSvgIconSetLiteralInNamespace(t,i,o){const l=this._sanitizer.sanitize(br.HTML,i);if(!l)throw dk(i);const u=J_(l);return this._addSvgIconSetConfig(t,new Kp("",u,o))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(br.RESOURCE_URL,t);if(!i)throw hk(t);const o=this._cachedIconsByUrl.get(i);return o?Gt(UM(o)):this._loadSvgIconFromConfig(new Kp(t,null)).pipe(hs(l=>this._cachedIconsByUrl.set(i,l)),F(l=>UM(l)))}getNamedSvgIcon(t,i=""){const o=fk(i,t);let l=this._svgIconConfigs.get(o);if(l)return this._getSvgFromConfig(l);if(l=this._getIconConfigFromResolvers(i,t),l)return this._svgIconConfigs.set(o,l),this._getSvgFromConfig(l);const u=this._iconSetConfigs.get(i);return u?this._getSvgFromIconSetConfigs(t,u):y0(uk(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Gt(UM(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(F(i=>UM(i)))}_getSvgFromIconSetConfigs(t,i){const o=this._extractIconWithNameFromAnySet(t,i);return o?Gt(o):rk(i.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(dh(p=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(br.RESOURCE_URL,u.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(_)),Gt(null)})))).pipe(F(()=>{const u=this._extractIconWithNameFromAnySet(t,i);if(!u)throw uk(t);return u}))}_extractIconWithNameFromAnySet(t,i){for(let o=i.length-1;o>=0;o--){const l=i[o];if(l.svgText&&l.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(l),p=this._extractSvgIconFromSet(u,t,l.options);if(p)return p}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(hs(i=>t.svgText=i),F(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Gt(null):this._fetchIcon(t).pipe(hs(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,o){const l=t.querySelector(`[id="${i}"]`);if(!l)return null;const u=l.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,o);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),o);const p=this._svgElementFromString(J_("<svg></svg>"));return p.appendChild(u),this._setSvgAttributes(p,o)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const o=i.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(t){const i=this._svgElementFromString(J_("<svg></svg>")),o=t.attributes;for(let l=0;l<o.length;l++){const{name:u,value:p}=o[l];"id"!==u&&i.setAttribute(u,p)}for(let l=0;l<t.childNodes.length;l++)t.childNodes[l].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[l].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:o}=t,l=o?.withCredentials??!1;if(!this._httpClient)throw function WU(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const u=this._sanitizer.sanitize(br.RESOURCE_URL,i);if(!u)throw hk(i);const p=this._inProgressUrlFetches.get(u);if(p)return p;const v=this._httpClient.get(u,{responseType:"text",withCredentials:l}).pipe(F(_=>J_(_)),OM(()=>this._inProgressUrlFetches.delete(u)),jr());return this._inProgressUrlFetches.set(u,v),v}_addSvgIconConfig(t,i,o){return this._svgIconConfigs.set(fk(t,i),o),this}_addSvgIconSetConfig(t,i){const o=this._iconSetConfigs.get(t);return o?o.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let o=0;o<this._resolvers.length;o++){const l=this._resolvers[o](i,t);if(l)return $U(l)?new Kp(l.url,null,l.options):new Kp(l,null)}}}return n.\u0275fac=function(t){return new(t||n)(Re(ck,8),Re(_T),Re(rr,8),Re(bs))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UM(n){return n.cloneNode(!0)}function fk(n,e){return n+":"+e}function $U(n){return!(!n.url||!n.options)}const XU=RT(class{constructor(n){this._elementRef=n}}),KU=new St("MAT_ICON_DEFAULT_OPTIONS"),YU=new St("mat-icon-location",{providedIn:"root",factory:function ZU(){const n=Hi(rr),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),pk=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],JU=pk.map(n=>`[${n}]`).join(", "),QU=/^url\(['"]?#(.*?)['"]?\)$/;let e6=(()=>{class n extends XU{constructor(t,i,o,l,u,p){super(t),this._iconRegistry=i,this._location=l,this._errorHandler=u,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=U.EMPTY,p&&(p.color&&(this.color=this.defaultColor=p.color),p.fontSet&&(this.fontSet=p.fontSet)),o||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Hd(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const o=t.childNodes[i];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>t.classList.remove(o)),i.forEach(o=>t.classList.add(o)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((o,l)=>{o.forEach(u=>{l.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(JU),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let l=0;l<i.length;l++)pk.forEach(u=>{const p=i[l],v=p.getAttribute(u),_=v?v.match(QU):null;if(_){let M=o.get(p);M||(M=[],o.set(p,M)),M.push({name:u,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,o]=this._splitIconName(t);i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe(Uc(1)).subscribe(l=>this._setSvgElement(l),l=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${o}! ${l.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(Te(si),Te(VM),Fa("aria-hidden"),Te(YU),Te(bs),Te(KU,8))},n.\u0275cmp=go({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(xs("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),ls("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[qn],ngContentSelectors:jU,decls:1,vars:0,template:function(t,i){1&t&&(Dp(),ai(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),t6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[ba,ba]}),n})();const mk=RM({passive:!0});let n6=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Wn;const i=hh(t),o=this._monitoredElements.get(i);if(o)return o.subject;const l=new q,u="cdk-text-field-autofilled",p=v=>{"cdk-text-field-autofill-start"!==v.animationName||i.classList.contains(u)?"cdk-text-field-autofill-end"===v.animationName&&i.classList.contains(u)&&(i.classList.remove(u),this._ngZone.run(()=>l.next({target:v.target,isAutofilled:!1}))):(i.classList.add(u),this._ngZone.run(()=>l.next({target:v.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",p,mk),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:l,unlisten:()=>{i.removeEventListener("animationstart",p,mk)}}),l}stopMonitoring(t){const i=hh(t),o=this._monitoredElements.get(i);o&&(o.unlisten(),o.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(Re(jo),Re(Xn))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})(),vk=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(Te(ja),Te(si))},n.\u0275dir=qt({type:n}),n})(),Yp=(()=>{class n extends vk{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Di(n)))(i||n)}}(),n.\u0275dir=qt({type:n,features:[qn]}),n})();const Hc=new St("NgValueAccessor"),i6={provide:Hc,useExisting:wn(()=>HM),multi:!0},o6=new St("CompositionEventMode");let HM=(()=>{class n extends vk{constructor(t,i,o){super(t,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function s6(){const n=Vc()?Vc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(Te(ja),Te(si),Te(o6,8))},n.\u0275dir=qt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&ti("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[zt([i6]),qn]}),n})();function Wd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function _k(n){return null!=n&&"number"==typeof n.length}const oo=new St("NgValidators"),qd=new St("NgAsyncValidators"),l6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class c6{static min(e){return function bk(n){return e=>{if(Wd(e.value)||Wd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function wk(n){return e=>{if(Wd(e.value)||Wd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function xk(n){return Wd(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Mk(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ek(n){return Wd(n.value)||l6.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Sk(n){return e=>Wd(e.value)||!_k(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ck(n){return e=>_k(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ak(n){if(!n)return zM;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Wd(i.value))return null;const o=i.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return kk(e)}static composeAsync(e){return Nk(e)}}function zM(n){return null}function Tk(n){return null!=n}function Dk(n){return Pd(n)?Sn(n):n}function Rk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ik(n,e){return e.map(t=>t(n))}function Pk(n){return n.map(e=>function u6(n){return!n.validate}(e)?e:t=>e.validate(t))}function kk(n){if(!n)return null;const e=n.filter(Tk);return 0==e.length?null:function(t){return Rk(Ik(t,e))}}function LT(n){return null!=n?kk(Pk(n)):null}function Nk(n){if(!n)return null;const e=n.filter(Tk);return 0==e.length?null:function(t){return rk(Ik(t,e).map(Dk)).pipe(F(Rk))}}function OT(n){return null!=n?Nk(Pk(n)):null}function Lk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ok(n){return n._rawValidators}function Fk(n){return n._rawAsyncValidators}function FT(n){return n?Array.isArray(n)?n:[n]:[]}function jM(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bk(n,e){const t=FT(e);return FT(n).forEach(o=>{jM(t,o)||t.push(o)}),t}function Vk(n,e){return FT(e).filter(t=>!jM(n,t))}class Uk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class So extends Uk{get formDirective(){return null}get path(){return null}}class fh extends Uk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let zk=(()=>{class n extends class Hk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Te(fh,2))},n.\u0275dir=qt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&ls("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[qn]}),n})();const Q_="VALID",WM="INVALID",_0="PENDING",eb="DISABLED";function HT(n){return(qM(n)?n.validators:n)||null}function Gk(n){return Array.isArray(n)?LT(n):n||null}function zT(n,e){return(qM(e)?e.asyncValidators:n)||null}function Wk(n){return Array.isArray(n)?OT(n):n||null}function qM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Xk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Gk(this._rawValidators),this._composedAsyncValidatorFn=Wk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Q_}get invalid(){return this.status===WM}get pending(){return this.status==_0}get disabled(){return this.status===eb}get enabled(){return this.status!==eb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Gk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Wk(e)}addValidators(e){this.setValidators(Bk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Vk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Vk(e,this._rawAsyncValidators))}hasValidator(e){return jM(this._rawValidators,e)}hasAsyncValidator(e){return jM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=eb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Q_,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Q_||this.status===_0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eb:Q_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_0,this._hasOwnPendingAsyncValidator=!0;const t=Dk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pi,this.statusChanges=new pi}_calculateStatus(){return this._allControlsDisabled()?eb:this.errors?WM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_0)?_0:this._anyControlsHaveStatus(WM)?WM:Q_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class jT extends Xk{constructor(e,t,i){super(HT(t),zT(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function $k(n,e,t){n._forEachChild((i,o)=>{if(void 0===t[o])throw new Xe(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function qk(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new Xe(1e3,"");if(!i[t])throw new Xe(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const o=this.controls[i];o&&o.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,o)=>{i.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,o)=>((i.enabled||this.disabled)&&(t[o]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((o,l)=>{i=t(i,o,l)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function tb(n,e){GT(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function b6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Kk(n,e)})}(n,e),function x6(n,e){const t=(i,o)=>{e.valueAccessor.writeValue(i),o&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function w6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Kk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function _6(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function XM(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),YM(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function KM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GT(n,e){const t=Ok(n);null!==e.validator?n.setValidators(Lk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=Fk(n);null!==e.asyncValidator?n.setAsyncValidators(Lk(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const o=()=>n.updateValueAndValidity();KM(e._rawValidators,o),KM(e._rawAsyncValidators,o)}function YM(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Ok(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(u=>u!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=Fk(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(u=>u!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const i=()=>{};return KM(e._rawValidators,i),KM(e._rawAsyncValidators,i),t}function Kk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Yk(n,e){GT(n,e)}function Jk(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const A6={provide:So,useExisting:wn(()=>ZM)},nb=(()=>Promise.resolve(null))();let ZM=(()=>{class n extends So{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new pi,this.form=new jT({},LT(t),OT(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nb.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),tb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){nb.then(()=>{const i=this._findContainer(t.path),o=new jT({});Yk(o,t),i.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){nb.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Jk(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(Te(oo,10),Te(qd,10))},n.\u0275dir=qt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&ti("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zt([A6]),qn]}),n})();function Qk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function e3(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const t3=class extends Xk{constructor(e=null,t,i){super(HT(t),zT(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=e3(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){e3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},R6={provide:fh,useExisting:wn(()=>$T)},s3=(()=>Promise.resolve(null))();let $T=(()=>{class n extends fh{constructor(t,i,o,l,u){super(),this._changeDetectorRef=u,this.control=new t3,this._registered=!1,this.update=new pi,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function qT(n,e){if(!e)return null;let t,i,o;return Array.isArray(e),e.forEach(l=>{l.constructor===HM?t=l:function S6(n){return Object.getPrototypeOf(n.constructor)===Yp}(l)?i=l:o=l}),o||i||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function WT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){s3.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,o=0!==i&&function lh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);s3.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $M(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(Te(So,9),Te(oo,10),Te(qd,10),Te(Hc,10),Te(p0,8))},n.\u0275dir=qt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zt([R6]),qn,vo]}),n})(),a3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})();const F6={provide:So,useExisting:wn(()=>JM)};let JM=(()=>{class n extends So{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pi,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(YM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return tb(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){XM(t.control||null,t,!1),function C6(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Jk(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,o=this.form.get(t.path);i!==o&&(XM(i||null,t),(n=>n instanceof t3)(o)&&(tb(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);Yk(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function M6(n,e){return YM(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GT(this.form,this),this._oldForm&&YM(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(Te(oo,10),Te(qd,10))},n.\u0275dir=qt({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&ti("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zt([F6]),qn,vo]}),n})(),tH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[a3]}),n})(),nH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[tH]}),n})(),S3=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iH=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=hh(t);return new P(o=>{const u=this._observeElement(i).subscribe(o);return()=>{u.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new q,o=this._mutationObserverFactory.create(l=>i.next(l));o&&o.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:o,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:o}=this._observedElements.get(t);i&&i.disconnect(),o.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Re(S3))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sH=(()=>{class n{constructor(t,i,o){this._contentObserver=t,this._elementRef=i,this._ngZone=o,this.event=new pi,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Hd(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function DV(n,e=0){return function RV(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(OP(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(Te(iH),Te(si),Te(Xn))},n.\u0275dir=qt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),oH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({providers:[S3]}),n})();const aH=["addListener","removeListener"],lH=["addEventListener","removeEventListener"],cH=["on","off"];function QM(n,e,t,i){if(Y(t)&&(i=t,t=void 0),i)return QM(n,e,t).pipe(MT(i));const[o,l]=function dH(n){return Y(n.addEventListener)&&Y(n.removeEventListener)}(n)?lH.map(u=>p=>n[u](e,p,t)):function uH(n){return Y(n.addListener)&&Y(n.removeListener)}(n)?aH.map(C3(n,e)):function hH(n){return Y(n.on)&&Y(n.off)}(n)?cH.map(C3(n,e)):[];if(!o&&vr(n))return Cr(u=>QM(u,e,t))(Qt(n));if(!o)throw new TypeError("Invalid event target");return new P(u=>{const p=(...v)=>u.next(1<v.length?v:v[0]);return o(p),()=>l(p)})}function C3(n,e){return t=>i=>n[t](e,i)}class A3{}const ph="*";function T3(n,e){return{type:7,name:n,definitions:e,options:{}}}function QT(n,e=null){return{type:4,styles:e,timings:n}}function D3(n,e=null){return{type:2,steps:n,options:e}}function Jp(n){return{type:6,styles:n,offset:null}}function eD(n,e,t){return{type:0,name:n,styles:e,options:t}}function tD(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function R3(n){Promise.resolve(null).then(n)}class rb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){R3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class I3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,o=0;const l=this.players.length;0==l?R3(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==l&&this._onFinish()}),u.onDestroy(()=>{++i==l&&this._onDestroy()}),u.onStart(()=>{++o==l&&this._onStart()})}),this.totalTime=this.players.reduce((u,p)=>Math.max(u,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const o=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(o)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const pH=["connectionContainer"],mH=["inputContainer"],gH=["label"];function vH(n,e){1&n&&(Ac(0),hn(1,"div",14),Bs(2,"div",15)(3,"div",16)(4,"div",17),dn(),hn(5,"div",18),Bs(6,"div",15)(7,"div",16)(8,"div",17),dn(),Ja())}function yH(n,e){if(1&n){const t=Tc();hn(0,"div",19),ti("cdkObserveContent",function(){return ka(t),Na(Pi().updateOutlineGap())}),ai(1,1),dn()}2&n&&Nr("cdkObserveContentDisabled","outline"!=Pi().appearance)}function _H(n,e){if(1&n&&(Ac(0),ai(1,2),hn(2,"span"),ni(3),dn(),Ja()),2&n){const t=Pi(2);ar(3),Qa(t._control.placeholder)}}function bH(n,e){1&n&&ai(0,3,["*ngSwitchCase","true"])}function wH(n,e){1&n&&(hn(0,"span",23),ni(1," *"),dn())}function xH(n,e){if(1&n){const t=Tc();hn(0,"label",20,21),ti("cdkObserveContent",function(){return ka(t),Na(Pi().updateOutlineGap())}),vi(2,_H,4,1,"ng-container",12),vi(3,bH,1,0,"ng-content",12),vi(4,wH,2,0,"span",22),dn()}if(2&n){const t=Pi();ls("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Nr("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),xs("for",t._control.id)("aria-owns",t._control.id),ar(2),Nr("ngSwitchCase",!1),ar(1),Nr("ngSwitchCase",!0),ar(1),Nr("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function MH(n,e){1&n&&(hn(0,"div",24),ai(1,4),dn())}function EH(n,e){if(1&n&&(hn(0,"div",25),Bs(1,"span",26),dn()),2&n){const t=Pi();ar(1),ls("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function SH(n,e){1&n&&(hn(0,"div"),ai(1,5),dn()),2&n&&Nr("@transitionMessages",Pi()._subscriptAnimationState)}function CH(n,e){if(1&n&&(hn(0,"div",30),ni(1),dn()),2&n){const t=Pi(2);Nr("id",t._hintLabelId),ar(1),Qa(t.hintLabel)}}function AH(n,e){if(1&n&&(hn(0,"div",27),vi(1,CH,2,2,"div",28),ai(2,6),Bs(3,"div",29),ai(4,7),dn()),2&n){const t=Pi();Nr("@transitionMessages",t._subscriptAnimationState),ar(1),Nr("ngIf",t.hintLabel)}}const TH=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],DH=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],RH=new St("MatError"),IH={transitionMessages:T3("transitionMessages",[eD("enter",Jp({opacity:1,transform:"translateY(0%)"})),tD("void => enter",[Jp({opacity:0,transform:"translateY(-5px)"}),QT("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let rD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=qt({type:n}),n})();const PH=new St("MatHint");let iD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=qt({type:n,selectors:[["mat-label"]]}),n})(),kH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=qt({type:n,selectors:[["mat-placeholder"]]}),n})();const NH=new St("MatPrefix"),LH=new St("MatSuffix");let P3=0;const FH=RT(class{constructor(n){this._elementRef=n}},"primary"),BH=new St("MAT_FORM_FIELD_DEFAULT_OPTIONS"),N3=new St("MatFormField");let VH=(()=>{class n extends FH{constructor(t,i,o,l,u,p,v){super(t),this._changeDetectorRef=i,this._dir=o,this._defaults=l,this._platform=u,this._ngZone=p,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new q,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+P3++,this._labelId="mat-form-field-label-"+P3++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==v,this.appearance=l?.appearance||"legacy",l&&(this._hideRequiredMarker=Boolean(l.hideRequiredMarker),l.color&&(this.color=this.defaultColor=l.color))}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Hd(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(X_(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Xp(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Xp(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),tu(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(X_(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(X_(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Xp(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,QM(this._label.nativeElement,"transitionend").pipe(Uc(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(l=>"start"===l.align):null,o=this._hintChildren?this._hintChildren.find(l=>"end"===l.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),o&&t.push(o.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,o=".mat-form-field-outline-start",l=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const M=i.querySelectorAll(`${o}, ${l}`);for(let C=0;C<M.length;C++)M[C].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,p=0;const v=i.querySelectorAll(o),_=i.querySelectorAll(l);if(this._label&&this._label.nativeElement.children.length){const M=i.getBoundingClientRect();if(0===M.width&&0===M.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const C=this._getStartEnd(M),N=t.children,H=this._getStartEnd(N[0].getBoundingClientRect());let X=0;for(let ee=0;ee<N.length;ee++)X+=N[ee].offsetWidth;u=Math.abs(H-C)-5,p=X>0?.75*X+10:0}for(let M=0;M<v.length;M++)v[M].style.width=`${u}px`;for(let M=0;M<_.length;M++)_[M].style.width=`${p}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(Te(si),Te(p0),Te(XP,8),Te(BH,8),Te(jo),Te(Xn),Te(jp,8))},n.\u0275cmp=go({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,o){if(1&t&&(rl(o,rD,5),rl(o,rD,7),rl(o,iD,5),rl(o,iD,7),rl(o,kH,5),rl(o,RH,5),rl(o,PH,5),rl(o,NH,5),rl(o,LH,5)),2&t){let l;zs(l=js())&&(i._controlNonStatic=l.first),zs(l=js())&&(i._controlStatic=l.first),zs(l=js())&&(i._labelChildNonStatic=l.first),zs(l=js())&&(i._labelChildStatic=l.first),zs(l=js())&&(i._placeholderChild=l.first),zs(l=js())&&(i._errorChildren=l),zs(l=js())&&(i._hintChildren=l),zs(l=js())&&(i._prefixChildren=l),zs(l=js())&&(i._suffixChildren=l)}},viewQuery:function(t,i){if(1&t&&(c0(pH,7),c0(mH,5),c0(gH,5)),2&t){let o;zs(o=js())&&(i._connectionContainerRef=o.first),zs(o=js())&&(i._inputContainerRef=o.first),zs(o=js())&&(i._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&ls("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[zt([{provide:N3,useExisting:n}]),qn],ngContentSelectors:DH,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(Dp(TH),hn(0,"div",0)(1,"div",1,2),ti("click",function(l){return i._control.onContainerClick&&i._control.onContainerClick(l)}),vi(3,vH,9,0,"ng-container",3),vi(4,yH,2,1,"div",4),hn(5,"div",5,6),ai(7),hn(8,"span",7),vi(9,xH,5,16,"label",8),dn()(),vi(10,MH,2,0,"div",9),dn(),vi(11,EH,2,4,"div",10),hn(12,"div",11),vi(13,SH,2,1,"div",12),vi(14,AH,5,2,"div",13),dn()()),2&t&&(ar(3),Nr("ngIf","outline"==i.appearance),ar(1),Nr("ngIf",i._prefixChildren.length),ar(5),Nr("ngIf",i._hasFloatingLabel()),ar(1),Nr("ngIf",i._suffixChildren.length),ar(1),Nr("ngIf","outline"!=i.appearance),ar(1),Nr("ngSwitch",i._getDisplayedMessages()),ar(1),Nr("ngSwitchCase","error"),ar(1),Nr("ngSwitchCase","hint"))},dependencies:[j_,EM,iP,sH],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[IH.transitionMessages]},changeDetection:0}),n})(),L3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[dT,ba,oH,ba]}),n})();const UH=new St("MAT_INPUT_VALUE_ACCESSOR"),HH=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let zH=0;const jH=gU(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new q}});let GH=(()=>{class n extends jH{constructor(t,i,o,l,u,p,v,_,M,C){super(p,l,u,o),this._elementRef=t,this._platform=i,this._autofillMonitor=_,this._formField=C,this._uid="mat-input-"+zH++,this.focused=!1,this.stateChanges=new q,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(X=>RP().has(X)),this._iOSKeyupListener=X=>{const ee=X.target;!ee.value&&0===ee.selectionStart&&0===ee.selectionEnd&&(ee.setSelectionRange(1,1),ee.setSelectionRange(0,0))};const N=this._elementRef.nativeElement,H=N.nodeName.toLowerCase();this._inputValueAccessor=v||N,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&M.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===H,this._isTextarea="textarea"===H,this._isInFormField=!!C,this._isNativeSelect&&(this.controlType=N.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Hd(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(c6.required)??!1}set required(t){this._required=Hd(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&RP().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Hd(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,i=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=i,i?o.setAttribute("placeholder",i):o.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){HH.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(Te(si),Te(jo),Te(fh,10),Te(ZM,8),Te(JM,8),Te(ZP),Te(UH,10),Te(n6),Te(Xn),Te(N3,8))},n.\u0275dir=qt({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&ti("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(s0("disabled",i.disabled)("required",i.required),xs("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),ls("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[zt([{provide:rD,useExisting:n}]),qn,vo]}),n})(),WH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({providers:[ZP],imports:[gk,L3,ba,gk,L3]}),n})();const ib={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=ib;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const o=e(l=>{t=void 0,n(l)});return new U(()=>t?.(o))},requestAnimationFrame(...n){const{delegate:e}=ib;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=ib;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class $H extends CT{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let o;e=e||i.shift();do{if(o=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,o){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw o}}}(class qH extends ST{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ib.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(o=>o.id===t)||(ib.cancelAnimationFrame(t),e._scheduled=void 0)}});let sD,KH=1;const eE={};function O3(n){return n in eE&&(delete eE[n],!0)}const YH={setImmediate(n){const e=KH++;return eE[e]=!0,sD||(sD=Promise.resolve()),sD.then(()=>O3(e)&&n()),e},clearImmediate(n){O3(n)}},{setImmediate:ZH,clearImmediate:JH}=YH,tE={setImmediate(...n){const{delegate:e}=tE;return(e?.setImmediate||ZH)(...n)},clearImmediate(n){const{delegate:e}=tE;return(e?.clearImmediate||JH)(n)},delegate:void 0};new class e8 extends CT{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let o;e=e||i.shift();do{if(o=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,o){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw o}}}(class QH extends ST{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=tE.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(o=>o.id===t)||(tE.clearImmediate(t),e._scheduled=void 0)}});function F3(n,e=AT){return function n8(n){return rt((e,t)=>{let i=!1,o=null,l=null,u=!1;const p=()=>{if(l?.unsubscribe(),l=null,i){i=!1;const _=o;o=null,t.next(_)}u&&t.complete()},v=()=>{l=null,u&&t.complete()};e.subscribe(it(t,_=>{i=!0,o=_,l||Qt(n(_)).subscribe(l=it(t,p,v))},()=>{u=!0,(!i||!l||l.closed)&&t.complete()}))})}(()=>function i8(n=0,e,t=HV){let i=-1;return null!=e&&(Rr(e)?t=e:i=e),new P(o=>{let l=function r8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;l<0&&(l=0);let u=0;return t.schedule(function(){o.closed||(o.next(u++),0<=i?this.schedule(void 0,i):o.complete())},l)})}(n,e))}let o8=(()=>{class n{constructor(t,i,o){this._ngZone=t,this._platform=i,this._scrolled=new q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new P(i=>{this._globalSubscription||this._addGlobalListener();const o=t>0?this._scrolled.pipe(F3(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Gt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const o=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(tc(l=>!l||o.indexOf(l)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((o,l)=>{this._scrollableContainsElement(l,t)&&i.push(l)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let o=hh(i),l=t.getElementRef().nativeElement;do{if(o==l)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>QM(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Re(Xn),Re(jo),Re(rr,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),B3=(()=>{class n{constructor(t,i,o){this._platform=t,this._change=new q,this._changeListener=l=>{this._change.next(l)},this._document=o,i.runOutsideAngular(()=>{if(t.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),o=t.documentElement,l=o.getBoundingClientRect();return{top:-l.top||t.body.scrollTop||i.scrollY||o.scrollTop||0,left:-l.left||t.body.scrollLeft||i.scrollX||o.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(F3(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Re(jo),Re(Xn),Re(rr,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})(),U3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[K_,V3,K_,V3]}),n})();class oD{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class aD extends oD{constructor(e,t,i,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=o}}class H3 extends oD{constructor(e,t,i,o){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=o}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class l8 extends oD{constructor(e){super(),this.element=e instanceof si?e.nativeElement:e}}class lD{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof aD?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof H3?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof l8?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class c8 extends lD{constructor(e,t,i,o,l){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=o,this.attachDomPortal=u=>{const p=u.element,v=this._document.createComment("dom-portal");p.parentNode.insertBefore(v,p),this.outletElement.appendChild(p),this._attachedPortal=u,super.setDisposeFn(()=>{v.parentNode&&v.parentNode.replaceChild(p,v)})},this._document=l}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let o;return e.viewContainerRef?(o=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=i.create(e.injector||this._defaultInjector||Kr.NULL),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=e,o}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(o=>this.outletElement.appendChild(o)),i.detectChanges(),this.setDisposeFn(()=>{let o=t.indexOf(i);-1!==o&&t.remove(o)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let z3=(()=>{class n extends lD{constructor(t,i,o){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new pi,this.attachDomPortal=l=>{const u=l.element,p=this._document.createComment("dom-portal");l.setAttachedHost(this),u.parentNode.insertBefore(p,u),this._getRootNode().appendChild(u),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(u,p)})},this._document=o}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,l=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=i.createComponent(l,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(Te(Nu),Te(nl),Te(rr))},n.\u0275dir=qt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[qn]}),n})(),j3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})();const G3=_V();class u8{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ts(-this._previousScrollPosition.left),e.style.top=ts(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,o=this._document.body.style,l=i.scrollBehavior||"",u=o.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),G3&&(i.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),G3&&(i.scrollBehavior=l,o.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class h8{constructor(e,t,i,o){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class W3{enable(){}disable(){}attach(){}}function cD(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function q3(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class d8{constructor(e,t,i,o){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=o,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:o}=this._viewportRuler.getViewportSize();cD(t,[{width:i,height:o,bottom:o,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let f8=(()=>{class n{constructor(t,i,o,l){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=o,this.noop=()=>new W3,this.close=u=>new h8(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new u8(this._viewportRuler,this._document),this.reposition=u=>new d8(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=l}}return n.\u0275fac=function(t){return new(t||n)(Re(o8),Re(B3),Re(Xn),Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $3{constructor(e){if(this.scrollStrategy=new W3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class p8{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let X3=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m8=(()=>{class n extends X3{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=o=>{const l=this._attachedOverlays;for(let u=l.length-1;u>-1;u--)if(l[u]._keydownEvents.observers.length>0){const p=l[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Re(rr),Re(Xn,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g8=(()=>{class n extends X3{constructor(t,i,o){super(t),this._platform=i,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=l=>{this._pointerDownEventTarget=$p(l)},this._clickListener=l=>{const u=$p(l),p="click"===l.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const v=this._attachedOverlays.slice();for(let _=v.length-1;_>-1;_--){const M=v[_];if(M._outsidePointerEvents.observers.length<1||!M.hasAttached())continue;if(M.overlayElement.contains(u)||M.overlayElement.contains(p))break;const C=M._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>C.next(l)):C.next(l)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Re(rr),Re(jo),Re(Xn,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K3=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||xT()){const o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let l=0;l<o.length;l++)o[l].remove()}const i=this._document.createElement("div");i.classList.add(t),xT()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Re(rr),Re(jo))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class v8{constructor(e,t,i,o,l,u,p,v,_,M=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=o,this._ngZone=l,this._keyboardDispatcher=u,this._document=p,this._location=v,this._outsideClickDispatcher=_,this._animationsDisabled=M,this._backdropElement=null,this._backdropClick=new q,this._attachments=new q,this._detachments=new q,this._locationChanges=U.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new q,this._outsidePointerEvents=new q,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Uc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ts(this._config.width),e.height=ts(this._config.height),e.minWidth=ts(this._config.minWidth),e.minHeight=ts(this._config.minHeight),e.maxWidth=ts(this._config.maxWidth),e.maxHeight=ts(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const o=PM(t||[]).filter(l=>!!l);o.length&&(i?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Xp(tu(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Y3="cdk-overlay-connected-position-bounding-box",y8=/([A-Za-z%]+)$/;class _8{constructor(e,t,i,o,l){this._viewportRuler=t,this._document=i,this._platform=o,this._overlayContainer=l,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new q,this._resizeSubscription=U.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Y3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,o=this._containerRect,l=[];let u;for(let p of this._preferredPositions){let v=this._getOriginPoint(e,o,p),_=this._getOverlayPoint(v,t,p),M=this._getOverlayFit(_,t,i,p);if(M.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(p,v);this._canFitWithFlexibleDimensions(M,_,i)?l.push({position:p,origin:v,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(v,p)}):(!u||u.overlayFit.visibleArea<M.visibleArea)&&(u={overlayFit:M,overlayPoint:_,originPoint:v,position:p,overlayRect:t})}if(l.length){let p=null,v=-1;for(const _ of l){const M=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);M>v&&(v=M,p=_)}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Qp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Y3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let o,l;if("center"==i.originX)o=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,p=this._isRtl()?e.left:e.right;o="start"==i.originX?u:p}return t.left<0&&(o-=t.left),l="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(l-=t.top),{x:o,y:l}}_getOverlayPoint(e,t,i){let o,l;return o="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,l="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+o,y:e.y+l}}_getOverlayFit(e,t,i,o){const l=J3(t);let{x:u,y:p}=e,v=this._getOffset(o,"x"),_=this._getOffset(o,"y");v&&(u+=v),_&&(p+=_);let N=0-p,H=p+l.height-i.height,X=this._subtractOverflows(l.width,0-u,u+l.width-i.width),ee=this._subtractOverflows(l.height,N,H),ge=X*ee;return{visibleArea:ge,isCompletelyWithinViewport:l.width*l.height===ge,fitsInViewportVertically:ee===l.height,fitsInViewportHorizontally:X==l.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const o=i.bottom-t.y,l=i.right-t.x,u=Z3(this._overlayRef.getConfig().minHeight),p=Z3(this._overlayRef.getConfig().minWidth),_=e.fitsInViewportHorizontally||null!=p&&p<=l;return(e.fitsInViewportVertically||null!=u&&u<=o)&&_}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const o=J3(t),l=this._viewportRect,u=Math.max(e.x+o.width-l.width,0),p=Math.max(e.y+o.height-l.height,0),v=Math.max(l.top-i.top-e.y,0),_=Math.max(l.left-i.left-e.x,0);let M=0,C=0;return M=o.width<=l.width?_||-u:e.x<this._viewportMargin?l.left-i.left-e.x:0,C=o.height<=l.height?v||-p:e.y<this._viewportMargin?l.top-i.top-e.y:0,this._previousPushAmount={x:M,y:C},{x:e.x+M,y:e.y+C}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),o=new p8(e,i);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,o=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let l=0;l<t.length;l++)t[l].style.transformOrigin=`${i} ${o}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,o=this._isRtl();let l,u,p,M,C,N;if("top"===t.overlayY)u=e.y,l=i.height-u+this._viewportMargin;else if("bottom"===t.overlayY)p=i.height-e.y+2*this._viewportMargin,l=i.height-p+this._viewportMargin;else{const H=Math.min(i.bottom-e.y+i.top,e.y),X=this._lastBoundingBoxSize.height;l=2*H,u=e.y-H,l>X&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-X/2)}if("end"===t.overlayX&&!o||"start"===t.overlayX&&o)N=i.width-e.x+this._viewportMargin,M=e.x-this._viewportMargin;else if("start"===t.overlayX&&!o||"end"===t.overlayX&&o)C=e.x,M=i.right-e.x;else{const H=Math.min(i.right-e.x+i.left,e.x),X=this._lastBoundingBoxSize.width;M=2*H,C=e.x-H,M>X&&!this._isInitialRender&&!this._growAfterOpen&&(C=e.x-X/2)}return{top:u,left:C,bottom:p,right:N,width:M,height:l}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const l=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;o.height=ts(i.height),o.top=ts(i.top),o.bottom=ts(i.bottom),o.width=ts(i.width),o.left=ts(i.left),o.right=ts(i.right),o.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",o.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",l&&(o.maxHeight=ts(l)),u&&(o.maxWidth=ts(u))}this._lastBoundingBoxSize=i,Qp(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Qp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Qp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},o=this._hasExactPosition(),l=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(o){const M=this._viewportRuler.getViewportScrollPosition();Qp(i,this._getExactOverlayY(t,e,M)),Qp(i,this._getExactOverlayX(t,e,M))}else i.position="static";let p="",v=this._getOffset(t,"x"),_=this._getOffset(t,"y");v&&(p+=`translateX(${v}px) `),_&&(p+=`translateY(${_}px)`),i.transform=p.trim(),u.maxHeight&&(o?i.maxHeight=ts(u.maxHeight):l&&(i.maxHeight="")),u.maxWidth&&(o?i.maxWidth=ts(u.maxWidth):l&&(i.maxWidth="")),Qp(this._pane.style,i)}_getExactOverlayY(e,t,i){let o={top:"",bottom:""},l=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,i)),"bottom"===e.overlayY?o.bottom=this._document.documentElement.clientHeight-(l.y+this._overlayRect.height)+"px":o.top=ts(l.y),o}_getExactOverlayX(e,t,i){let u,o={left:"",right:""},l=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,i)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?o.right=this._document.documentElement.clientWidth-(l.x+this._overlayRect.width)+"px":o.left=ts(l.x),o}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:q3(e,i),isOriginOutsideView:cD(e,i),isOverlayClipped:q3(t,i),isOverlayOutsideView:cD(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,o)=>i-Math.max(o,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&PM(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof si)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Qp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Z3(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(y8);return t&&"px"!==t?null:parseFloat(e)}return n||null}function J3(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Q3="cdk-global-overlay-wrapper";class b8{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Q3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:o,height:l,maxWidth:u,maxHeight:p}=i,v=!("100%"!==o&&"100vw"!==o||u&&"100%"!==u&&"100vw"!==u),_=!("100%"!==l&&"100vh"!==l||p&&"100%"!==p&&"100vh"!==p),M=this._xPosition,C=this._xOffset,N="rtl"===this._overlayRef.getConfig().direction;let H="",X="",ee="";v?ee="flex-start":"center"===M?(ee="center",N?X=C:H=C):N?"left"===M||"end"===M?(ee="flex-end",H=C):("right"===M||"start"===M)&&(ee="flex-start",X=C):"left"===M||"start"===M?(ee="flex-start",H=C):("right"===M||"end"===M)&&(ee="flex-end",X=C),e.position=this._cssPosition,e.marginLeft=v?"0":H,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=v?"0":X,t.justifyContent=ee,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Q3),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let w8=(()=>{class n{constructor(t,i,o,l){this._viewportRuler=t,this._document=i,this._platform=o,this._overlayContainer=l}global(){return new b8}flexibleConnectedTo(t){return new _8(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Re(B3),Re(rr),Re(jo),Re(K3))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x8=0,nE=(()=>{class n{constructor(t,i,o,l,u,p,v,_,M,C,N,H){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=o,this._positionBuilder=l,this._keyboardDispatcher=u,this._injector=p,this._ngZone=v,this._document=_,this._directionality=M,this._location=C,this._outsideClickDispatcher=N,this._animationsModuleType=H}create(t){const i=this._createHostElement(),o=this._createPaneElement(i),l=this._createPortalOutlet(o),u=new $3(t);return u.direction=u.direction||this._directionality.value,new v8(l,i,o,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+x8++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(f0)),new c8(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Re(f8),Re(K3),Re(Nu),Re(w8),Re(m8),Re(Kr),Re(Xn),Re(rr),Re(XP),Re(pM),Re(g8),Re(jp,8))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const S8={provide:new St("cdk-connected-overlay-scroll-strategy"),deps:[nE],useFactory:function E8(n){return()=>n.scrollStrategies.reposition()}};let C8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({providers:[nE,S8],imports:[K_,j3,U3,U3]}),n})();function A8(n,e){if(1&n){const t=Tc();hn(0,"div",2)(1,"button",3),ti("click",function(){return ka(t),Na(Pi().action())}),ni(2),dn()()}if(2&n){const t=Pi();ar(2),Qa(t.data.action)}}function T8(n,e){}const eN=new St("MatSnackBarData");class rE{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const D8=Math.pow(2,31)-1;class uD{constructor(e,t){this._overlayRef=t,this._afterDismissed=new q,this._afterOpened=new q,this._onAction=new q,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,D8))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let R8=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(Te(uD),Te(eN))},n.\u0275cmp=go({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(hn(0,"span",0),ni(1),dn(),vi(2,A8,3,1,"div",1)),2&t&&(ar(1),Qa(i.data.message),ar(1),Nr("ngIf",i.hasAction))},dependencies:[j_,PT],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const I8={snackBarState:T3("state",[eD("void, hidden",Jp({transform:"scale(0.8)",opacity:0})),eD("visible",Jp({transform:"scale(1)",opacity:1})),tD("* => visible",QT("150ms cubic-bezier(0, 0, 0.2, 1)")),tD("* => void, * => hidden",QT("75ms cubic-bezier(0.4, 0.0, 1, 1)",Jp({opacity:0})))])};let P8=(()=>{class n extends lD{constructor(t,i,o,l,u){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=o,this._platform=l,this.snackBarConfig=u,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new q,this._onExit=new q,this._onEnter=new q,this._animationState="void",this.attachDomPortal=p=>{this._assertNotAttached();const v=this._portalOutlet.attachDomPortal(p);return this._afterPortalAttached(),v},this._live="assertive"!==u.politeness||u.announcementMessage?"off"===u.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),i}attachTemplatePortal(t){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),i}onAnimationEnd(t){const{fromState:i,toState:o}=t;if(("void"===o&&"void"!==i||"hidden"===o)&&this._completeExit(),"visible"===o){const l=this._onEnter;this._ngZone.run(()=>{l.next(),l.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Uc(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(o=>t.classList.add(o)):t.classList.add(i))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(o=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(Te(Xn),Te(si),Te(p0),Te(jo),Te(rE))},n.\u0275dir=qt({type:n,viewQuery:function(t,i){if(1&t&&c0(z3,7),2&t){let o;zs(o=js())&&(i._portalOutlet=o.first)}},features:[qn]}),n})(),k8=(()=>{class n extends P8{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Di(n)))(i||n)}}(),n.\u0275cmp=go({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&c_("@state.done",function(l){return i.onAnimationEnd(l)}),2&t&&o0("@state",i._animationState)},features:[qn],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(hn(0,"div",0),vi(1,T8,0,0,"ng-template",1),dn(),Bs(2,"div")),2&t&&(ar(2),xs("aria-live",i._live)("role",i._role))},dependencies:[z3],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[I8.snackBarState]}}),n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[C8,j3,dT,nk,ba,ba]}),n})();const nN=new St("mat-snack-bar-default-options",{providedIn:"root",factory:function N8(){return new rE}});let L8=(()=>{class n{constructor(t,i,o,l,u,p){this._overlay=t,this._live=i,this._injector=o,this._breakpointObserver=l,this._parentSnackBar=u,this._defaultConfig=p,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",o){const l={...this._defaultConfig,...o};return l.data={message:t,action:i},l.announcementMessage===t&&(l.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,l)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const l=Kr.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:rE,useValue:i}]}),u=new aD(this.snackBarContainerComponent,i.viewContainerRef,l),p=t.attach(u);return p.instance.snackBarConfig=i,p.instance}_attach(t,i){const o={...new rE,...this._defaultConfig,...i},l=this._createOverlay(o),u=this._attachSnackBarContainer(l,o),p=new uD(u,l);if(t instanceof Fc){const v=new H3(t,null,{$implicit:o.data,snackBarRef:p});p.instance=u.attachTemplatePortal(v)}else{const v=this._createInjector(o,p),_=new aD(t,void 0,v),M=u.attachComponentPortal(_);p.instance=M.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Xp(l.detachments())).subscribe(v=>{l.overlayElement.classList.toggle(this.handsetCssClass,v.matches)}),o.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(p,o),this._openedSnackBarRef=p,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new $3;i.direction=t.direction;let o=this._overlay.position().global();const l="rtl"===t.direction,u="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!l||"end"===t.horizontalPosition&&l,p=!u&&"center"!==t.horizontalPosition;return u?o.left("0"):p?o.right("0"):o.centerHorizontally(),"top"===t.verticalPosition?o.top("0"):o.bottom("0"),i.positionStrategy=o,this._overlay.create(i)}_createInjector(t,i){return Kr.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:uD,useValue:i},{provide:eN,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(Re(nE),Re(WP),Re(Kr),Re(TT),Re(n,12),Re(nN))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),O8=(()=>{class n extends L8{constructor(t,i,o,l,u,p){super(t,i,o,l,u,p),this.simpleSnackBarComponent=R8,this.snackBarContainerComponent=k8,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(Re(nE),Re(WP),Re(Kr),Re(TT),Re(n,12),Re(nN))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:tN}),n})(),F8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[nk,PU,t6,WH,tN]}),n})();function rN(n){return new P(e=>{Qt(n()).subscribe(e)})}const b0=He(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function hD(){return rt((n,e)=>{let t=null;n._refCount++;const i=it(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class iN extends P{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,K(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new U;const t=this.getSubject();e.add(this.source.subscribe(it(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=U.EMPTY)}return e}refCount(){return hD()(this)}}function zc(n,e){return rt((t,i)=>{let o=null,l=0,u=!1;const p=()=>u&&!o&&i.complete();t.subscribe(it(i,v=>{o?.unsubscribe();let _=0;const M=l++;Qt(n(v,M)).subscribe(o=it(i,C=>i.next(e?e(v,C,M,_++):C),()=>{o=null,p()}))},()=>{u=!0,p()}))})}function iE(n){return rt((e,t)=>{let i=!1;e.subscribe(it(t,o=>{i=!0,t.next(o)},()=>{i||t.next(n),t.complete()}))})}function sN(n=B8){return rt((e,t)=>{let i=!1;e.subscribe(it(t,o=>{i=!0,t.next(o)},()=>i?t.complete():t.error(n())))})}function B8(){return new b0}function $d(n,e){const t=arguments.length>=2;return i=>i.pipe(n?tc((o,l)=>n(o,l,i)):W,Uc(1),t?iE(e):sN(()=>new b0))}function V8(n,e,t,i,o){return(l,u)=>{let p=t,v=e,_=0;l.subscribe(it(u,M=>{const C=_++;v=p?n(v,M,C):(p=!0,M),i&&u.next(v)},o&&(()=>{p&&u.next(v),u.complete()})))}}function oN(n,e){return rt(V8(n,e,arguments.length>=2,!0))}function dD(n){return n<=0?()=>Wn:rt((e,t)=>{let i=[];e.subscribe(it(t,o=>{i.push(o),n<i.length&&i.shift()},()=>{for(const o of i)t.next(o);t.complete()},void 0,()=>{i=null}))})}function aN(n,e){const t=arguments.length>=2;return i=>i.pipe(n?tc((o,l)=>n(o,l,i)):W,dD(1),t?iE(e):sN(()=>new b0))}const jn="primary";class z8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function w0(n){return new z8(n)}function j8(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const o={};for(let l=0;l<i.length;l++){const u=i[l],p=n[l];if(u.startsWith(":"))o[u.substring(1)]=p;else if(u!==p.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function jc(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!lN(n[o],e[o]))return!1;return!0}function lN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((o,l)=>i[l]===o)}return n===e}function cN(n){return Array.prototype.concat.apply([],n)}function uN(n){return n.length>0?n[n.length-1]:null}function Ws(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mh(n){return l_(n)?n:Pd(n)?Sn(Promise.resolve(n)):Gt(n)}const q8={exact:function fN(n,e,t){if(!tm(n.segments,e.segments)||!sE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!fN(n.children[i],e.children[i],t))return!1;return!0},subset:pN},hN={exact:function $8(n,e){return jc(n,e)},subset:function X8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lN(n[t],e[t]))},ignored:()=>!0};function dN(n,e,t){return q8[t.paths](n.root,e.root,t.matrixParams)&&hN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pN(n,e,t){return mN(n,e,e.segments,t)}function mN(n,e,t,i){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!tm(o,t)||e.hasChildren()||!sE(o,t,i))}if(n.segments.length===t.length){if(!tm(n.segments,t)||!sE(n.segments,t,i))return!1;for(const o in e.children)if(!n.children[o]||!pN(n.children[o],e.children[o],i))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(tm(n.segments,o)&&sE(n.segments,o,i)&&n.children[jn])&&mN(n.children[jn],e,l,i)}}function sE(n,e,t){return e.every((i,o)=>hN[t](n[o].parameters,i.parameters))}class em{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=w0(this.queryParams)),this._queryParamMap}toString(){return Z8.serialize(this)}}class Kn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ws(t,(i,o)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oE(this)}}class sb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=w0(this.parameters)),this._parameterMap}toString(){return bN(this)}}function tm(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class gN{}class vN{parse(e){const t=new oz(e);return new em(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ob(e.root,!0)}`,i=function ez(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(o=>`${aE(t)}=${aE(o)}`).join("&"):`${aE(t)}=${aE(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function J8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Z8=new vN;function oE(n){return n.segments.map(e=>bN(e)).join("/")}function ob(n,e){if(!n.hasChildren())return oE(n);if(e){const t=n.children[jn]?ob(n.children[jn],!1):"",i=[];return Ws(n.children,(o,l)=>{l!==jn&&i.push(`${l}:${ob(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Y8(n,e){let t=[];return Ws(n.children,(i,o)=>{o===jn&&(t=t.concat(e(i,o)))}),Ws(n.children,(i,o)=>{o!==jn&&(t=t.concat(e(i,o)))}),t}(n,(i,o)=>o===jn?[ob(n.children[jn],!1)]:[`${o}:${ob(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jn]?`${oE(n)}/${t[0]}`:`${oE(n)}/(${t.join("//")})`}}function yN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aE(n){return yN(n).replace(/%3B/gi,";")}function pD(n){return yN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lE(n){return decodeURIComponent(n)}function _N(n){return lE(n.replace(/\+/g,"%20"))}function bN(n){return`${pD(n.path)}${function Q8(n){return Object.keys(n).map(e=>`;${pD(e)}=${pD(n[e])}`).join("")}(n.parameters)}`}const tz=/^[^\/()?;=#]+/;function cE(n){const e=n.match(tz);return e?e[0]:""}const nz=/^[^=?&#]+/,iz=/^[^&#]+/;class oz{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kn([],{}):new Kn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[jn]=new Kn(e,t)),i}parseSegment(){const e=cE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Xe(4009,!1);return this.capture(e),new sb(lE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cE(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=cE(this.remaining);o&&(i=o,this.capture(i))}e[lE(t)]=lE(i)}parseQueryParam(e){const t=function rz(n){const e=n.match(nz);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function sz(n){const e=n.match(iz);return e?e[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const o=_N(t),l=_N(i);if(e.hasOwnProperty(o)){let u=e[o];Array.isArray(u)||(u=[u],e[o]=u),u.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=cE(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new Xe(4010,!1);let l;i.indexOf(":")>-1?(l=i.slice(0,i.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=jn);const u=this.parseChildren();t[l]=1===Object.keys(u).length?u[jn]:new Kn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Xe(4011,!1)}}function mD(n){return n.segments.length>0?new Kn([],{[jn]:n}):n}function uE(n){const e={};for(const i of Object.keys(n.children)){const l=uE(n.children[i]);(l.segments.length>0||l.hasChildren())&&(e[i]=l)}return function az(n){if(1===n.numberOfChildren&&n.children[jn]){const e=n.children[jn];return new Kn(n.segments.concat(e.segments),e.children)}return n}(new Kn(n.segments,e))}function nm(n){return n instanceof em}function uz(n,e,t,i,o){if(0===t.length)return x0(e.root,e.root,e.root,i,o);const l=function MN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xN(!0,0,n);let e=0,t=!1;const i=n.reduce((o,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Ws(l.outlets,(v,_)=>{p[_]="string"==typeof v?v.split("/"):v}),[...o,{outlets:p}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===u?(l.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,l]},[]);return new xN(t,e,i)}(t);return l.toRoot()?x0(e.root,e.root,new Kn([],{}),i,o):function u(v){const _=function dz(n,e,t,i){if(n.isAbsolute)return new M0(e.root,!0,0);if(-1===i)return new M0(t,t===e.root,0);return function EN(n,e,t){let i=n,o=e,l=t;for(;l>o;){if(l-=o,i=i.parent,!i)throw new Xe(4005,!1);o=i.segments.length}return new M0(i,!1,o-l)}(t,i+(ab(n.commands[0])?0:1),n.numberOfDoubleDots)}(l,e,n.snapshot?._urlSegment,v),M=_.processChildren?cb(_.segmentGroup,_.index,l.commands):vD(_.segmentGroup,_.index,l.commands);return x0(e.root,_.segmentGroup,M,i,o)}(n.snapshot?._lastPathIndex)}function ab(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lb(n){return"object"==typeof n&&null!=n&&n.outlets}function x0(n,e,t,i,o){let u,l={};i&&Ws(i,(v,_)=>{l[_]=Array.isArray(v)?v.map(M=>`${M}`):`${v}`}),u=n===e?t:wN(n,e,t);const p=mD(uE(u));return new em(p,l,o)}function wN(n,e,t){const i={};return Ws(n.children,(o,l)=>{i[l]=o===e?t:wN(o,e,t)}),new Kn(n.segments,i)}class xN{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ab(i[0]))throw new Xe(4003,!1);const o=i.find(lb);if(o&&o!==uN(i))throw new Xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class M0{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function vD(n,e,t){if(n||(n=new Kn([],{})),0===n.segments.length&&n.hasChildren())return cb(n,e,t);const i=function pz(n,e,t){let i=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=t.length)return l;const u=n.segments[o],p=t[i];if(lb(p))break;const v=`${p}`,_=i<t.length-1?t[i+1]:null;if(o>0&&void 0===v)break;if(v&&_&&"object"==typeof _&&void 0===_.outlets){if(!CN(v,_,u))return l;i+=2}else{if(!CN(v,{},u))return l;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(n,e,t),o=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const l=new Kn(n.segments.slice(0,i.pathIndex),{});return l.children[jn]=new Kn(n.segments.slice(i.pathIndex),n.children),cb(l,0,o)}return i.match&&0===o.length?new Kn(n.segments,{}):i.match&&!n.hasChildren()?yD(n,e,t):i.match?cb(n,0,o):yD(n,e,t)}function cb(n,e,t){if(0===t.length)return new Kn(n.segments,{});{const i=function fz(n){return lb(n[0])?n[0].outlets:{[jn]:n}}(t),o={};return Ws(i,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=vD(n.children[u],e,l))}),Ws(n.children,(l,u)=>{void 0===i[u]&&(o[u]=l)}),new Kn(n.segments,o)}}function yD(n,e,t){const i=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(lb(l)){const v=mz(l.outlets);return new Kn(i,v)}if(0===o&&ab(t[0])){i.push(new sb(n.segments[e].path,SN(t[0]))),o++;continue}const u=lb(l)?l.outlets[jn]:`${l}`,p=o<t.length-1?t[o+1]:null;u&&p&&ab(p)?(i.push(new sb(u,SN(p))),o+=2):(i.push(new sb(u,{})),o++)}return new Kn(i,{})}function mz(n){const e={};return Ws(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=yD(new Kn([],{}),0,t))}),e}function SN(n){const e={};return Ws(n,(t,i)=>e[i]=`${t}`),e}function CN(n,e,t){return n==t.path&&jc(e,t.parameters)}class gh{constructor(e,t){this.id=e,this.url=t}}class _D extends gh{constructor(e,t,i="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rm extends gh{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hE extends gh{constructor(e,t,i,o){super(e,t),this.reason=i,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AN extends gh{constructor(e,t,i,o){super(e,t),this.error=i,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gz extends gh{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vz extends gh{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yz extends gh{constructor(e,t,i,o,l){super(e,t),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _z extends gh{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bz extends gh{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wz{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xz{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mz{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ez{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sz{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cz{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TN{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class DN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=bD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=bD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return wD(e,this._root).map(t=>t.value)}}function bD(n,e){if(n===e.value)return e;for(const t of e.children){const i=bD(n,t);if(i)return i}return null}function wD(n,e){if(n===e.value)return[e];for(const t of e.children){const i=wD(n,t);if(i.length)return i.unshift(e),i}return[]}class vh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function E0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RN extends DN{constructor(e,t){super(e),this.snapshot=t,xD(this,e)}toString(){return this.snapshot.toString()}}function IN(n,e){const t=function Tz(n,e){const u=new dE([],{},{},"",{},jn,e,null,n.root,-1,{});return new kN("",new vh(u,[]))}(n,e),i=new ol([new sb("",{})]),o=new ol({}),l=new ol({}),u=new ol({}),p=new ol(""),v=new S0(i,o,u,p,l,jn,e,t.root);return v.snapshot=t.root,new RN(new vh(v,[]),t)}class S0{constructor(e,t,i,o,l,u,p,v){this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=l,this.outlet=u,this.component=p,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(e=>w0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(e=>w0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PN(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const o=t[i],l=t[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(l.component)break;i--}}return function Dz(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class dE{constructor(e,t,i,o,l,u,p,v,_,M,C,N){this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=l,this.outlet=u,this.component=p,this.routeConfig=v,this._urlSegment=_,this._lastPathIndex=M,this._correctedLastPathIndex=N??M,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=w0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=w0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kN extends DN{constructor(e,t){super(t),this.url=e,xD(this,t)}toString(){return NN(this._root)}}function xD(n,e){e.value._routerState=n,e.children.forEach(t=>xD(n,t))}function NN(n){const e=n.children.length>0?` { ${n.children.map(NN).join(", ")} } `:"";return`${n.value}${e}`}function MD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),jc(e.params,t.params)||n.params.next(t.params),function G8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),jc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ED(n,e){const t=jc(n.params,e.params)&&function K8(n,e){return tm(n,e)&&n.every((t,i)=>jc(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ED(n.parent,e.parent))}function ub(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const o=function Iz(n,e,t){return e.children.map(i=>{for(const o of t.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return ub(n,i,o);return ub(n,i)})}(n,e,t);return new vh(i,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const u=l.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(p=>ub(n,p)),u}}const i=function Pz(n){return new S0(new ol(n.url),new ol(n.params),new ol(n.queryParams),new ol(n.fragment),new ol(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>ub(n,l));return new vh(i,o)}}const SD="ngNavigationCancelingError";function LN(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=nm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=ON(!1,0,e);return o.url=t,o.navigationBehaviorOptions=i,o}function ON(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[SD]=!0,i.cancellationCode=e,t&&(i.url=t),i}function FN(n){return BN(n)&&nm(n.url)}function BN(n){return n&&n[SD]}class kz{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hb,this.attachRef=null}}class hb{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new kz,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const fE=!1;let VN=(()=>{class n{constructor(t,i,o,l,u){this.parentContexts=t,this.location=i,this.changeDetector=l,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new pi,this.deactivateEvents=new pi,this.attachEvents=new pi,this.detachEvents=new pi,this.name=o||jn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Xe(4012,fE);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Xe(4012,fE);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Xe(4012,fE);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Xe(4013,fE);this._activatedRoute=t;const o=this.location,u=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,v=new Nz(t,p,o.injector);if(i&&function Lz(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(u);this.activated=o.createComponent(_,o.length,v)}else this.activated=o.createComponent(u,{index:o.length,injector:v,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(Te(hb),Te(nl),Fa("name"),Te(p0),Te(_c))},n.\u0275dir=qt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Nz{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===S0?this.route:e===hb?this.childContexts:this.parent.get(e,t)}}let UN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=go({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&Bs(0,"router-outlet")},dependencies:[VN],encapsulation:2}),n})();function HN(n,e){return n.providers&&!n._injector&&(n._injector=ya(n.providers,e,`Route: ${n.path}`)),n._injector??e}function AD(n){const e=n.children&&n.children.map(AD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jn&&(t.component=UN),t}function al(n){return n.outlet||jn}function zN(n,e){const t=n.filter(i=>al(i)===e);return t.push(...n.filter(i=>al(i)!==e)),t}function jN(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Uz{constructor(e,t,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),MD(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const o=E0(t);e.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,o[u],i),delete o[u]}),Ws(o,(l,u)=>{this.deactivateRouteAndItsChildren(l,i)})}deactivateRoutes(e,t,i){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const u=i.getContext(o.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,i);else l&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,l=E0(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],o);if(i&&i.outlet){const u=i.outlet.detach(),p=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,l=E0(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],o);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const o=E0(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],i),this.forwardEvent(new Cz(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Ez(e.value.snapshot))}activateRoutes(e,t,i){const o=e.value,l=t?t.value:null;if(MD(o),o===l)if(o.component){const u=i.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,i);else if(o.component){const u=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),u.children.onOutletReAttached(p.contexts),u.attachRef=p.componentRef,u.route=p.route.value,u.outlet&&u.outlet.attach(p.componentRef,p.route.value),MD(p.route.value),this.activateChildRoutes(e,null,u.children)}else{const p=jN(o.snapshot),v=p?.get(Nu)??null;u.attachRef=null,u.route=o,u.resolver=v,u.injector=p,u.outlet&&u.outlet.activateWith(o,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,i)}}class GN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pE{constructor(e,t){this.component=e,this.route=t}}function Hz(n,e,t){const i=n._root;return db(i,e?e._root:null,t,[i.value])}function mE(n,e,t){return(jN(e)??t).get(n)}function db(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=E0(e);return n.children.forEach(u=>{(function jz(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,u=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const v=function Gz(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tm(n.url,e.url)||!jc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ED(n,e)||!jc(n.queryParams,e.queryParams);default:return!ED(n,e)}}(u,l,l.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new GN(i)):(l.data=u.data,l._resolvedData=u._resolvedData),db(n,e,l.component?p?p.children:null:t,i,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new pE(p.outlet.component,u))}else u&&fb(e,p,o),o.canActivateChecks.push(new GN(i)),db(n,null,l.component?p?p.children:null:t,i,o)})(u,l[u.value.outlet],t,i.concat([u.value]),o),delete l[u.value.outlet]}),Ws(l,(u,p)=>fb(u,t.getContext(p),o)),o}function fb(n,e,t){const i=E0(n),o=n.value;Ws(i,(l,u)=>{fb(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new pE(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function pb(n){return"function"==typeof n}const gE=Symbol("INITIAL_VALUE");function C0(){return zc(n=>ET(n.map(e=>e.pipe(Uc(1),X_(gE)))).pipe(F(e=>{for(const t of e)if(!0!==t){if(t===gE)return gE;if(!1===t||t instanceof em)return t}return!0}),tc(e=>e!==gE),Uc(1)))}function WN(n){return function S(...n){return D(n)}(hs(e=>{if(nm(e))throw LN(0,e)}),F(e=>!0===e))}const TD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qN(n,e,t,i,o){const l=DD(n,e,t);return l.matched?function aj(n,e,t,i){const o=e.canMatch;return o&&0!==o.length?Gt(o.map(u=>{const p=n.get(u),v=function Yz(n){return n&&pb(n.canMatch)}(p)?p.canMatch(e,t):p(e,t);return mh(v)})).pipe(C0(),WN()):Gt(!0)}(i=HN(e,i),e,t).pipe(F(u=>!0===u?l:{...TD})):Gt(l)}function DD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...TD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||j8)(t,n,e);if(!o)return{...TD};const l={};Ws(o.posParams,(p,v)=>{l[v]=p.path});const u=o.consumed.length>0?{...l,...o.consumed[o.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:u,positionalParamSegments:o.posParams??{}}}function vE(n,e,t,i,o="corrected"){if(t.length>0&&function uj(n,e,t){return t.some(i=>yE(n,e,i)&&al(i)!==jn)}(n,t,i)){const u=new Kn(e,function cj(n,e,t,i){const o={};o[jn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&al(l)!==jn){const u=new Kn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,o[al(l)]=u}return o}(n,e,i,new Kn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function hj(n,e,t){return t.some(i=>yE(n,e,i))}(n,t,i)){const u=new Kn(n.segments,function lj(n,e,t,i,o,l){const u={};for(const p of i)if(yE(n,t,p)&&!o[al(p)]){const v=new Kn([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===l?n.segments.length:e.length,u[al(p)]=v}return{...o,...u}}(n,e,t,i,n.children,o));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const l=new Kn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function yE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $N(n,e,t,i){return!!(al(n)===i||i!==jn&&yE(e,t,n))&&("**"===n.path||DD(e,n,t).matched)}function XN(n,e,t){return 0===e.length&&!n.children[t]}const _E=!1;class bE{constructor(e){this.segmentGroup=e||null}}class KN{constructor(e){this.urlTree=e}}function mb(n){return y0(new bE(n))}function YN(n){return y0(new KN(n))}class mj{constructor(e,t,i,o,l){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=o,this.config=l,this.allowRedirects=!0}apply(){const e=vE(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,jn).pipe(F(l=>this.createUrlTree(uE(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dh(l=>{if(l instanceof KN)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof bE?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,jn).pipe(F(o=>this.createUrlTree(uE(o),e.queryParams,e.fragment))).pipe(dh(o=>{throw o instanceof bE?this.noMatchError(o):o}))}noMatchError(e){return new Xe(4002,_E)}createUrlTree(e,t,i){const o=mD(e);return new em(o,t,i)}expandSegmentGroup(e,t,i,o){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(F(l=>new Kn([],l))):this.expandSegment(e,i,t,i.segments,o,!0)}expandChildren(e,t,i){const o=[];for(const l of Object.keys(i.children))"primary"===l?o.unshift(l):o.push(l);return Sn(o).pipe(zd(l=>{const u=i.children[l],p=zN(t,l);return this.expandSegmentGroup(e,p,u,l).pipe(F(v=>({segment:v,outlet:l})))}),oN((l,u)=>(l[u.outlet]=u.segment,l),{}),aN())}expandSegment(e,t,i,o,l,u){return Sn(i).pipe(zd(p=>this.expandSegmentAgainstRoute(e,t,i,p,o,l,u).pipe(dh(_=>{if(_ instanceof bE)return Gt(null);throw _}))),$d(p=>!!p),dh((p,v)=>{if(p instanceof b0||"EmptyError"===p.name)return XN(t,o,l)?Gt(new Kn([],{})):mb(t);throw p}))}expandSegmentAgainstRoute(e,t,i,o,l,u,p){return $N(o,t,l,u)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,u):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,o,l,u):mb(t):mb(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,o,l,u){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,o,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,o,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,o){const l=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?YN(l):this.lineralizeSegments(i,l).pipe(Cr(u=>{const p=new Kn(u,{});return this.expandSegment(e,p,t,u,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,o,l,u){const{matched:p,consumedSegments:v,remainingSegments:_,positionalParamSegments:M}=DD(t,o,l);if(!p)return mb(t);const C=this.applyRedirectCommands(v,o.redirectTo,M);return o.redirectTo.startsWith("/")?YN(C):this.lineralizeSegments(o,C).pipe(Cr(N=>this.expandSegment(e,t,i,N.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,i,o,l){return"**"===i.path?(e=HN(i,e),i.loadChildren?(i._loadedRoutes?Gt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(F(p=>(i._loadedRoutes=p.routes,i._loadedInjector=p.injector,new Kn(o,{})))):Gt(new Kn(o,{}))):qN(t,i,o,e).pipe(zc(({matched:u,consumedSegments:p,remainingSegments:v})=>u?this.getChildConfig(e=i._injector??e,i,o).pipe(Cr(M=>{const C=M.injector??e,N=M.routes,{segmentGroup:H,slicedSegments:X}=vE(t,p,v,N),ee=new Kn(H.segments,H.children);if(0===X.length&&ee.hasChildren())return this.expandChildren(C,N,ee).pipe(F(Ee=>new Kn(p,Ee)));if(0===N.length&&0===X.length)return Gt(new Kn(p,{}));const ge=al(i)===l;return this.expandSegment(C,ee,N,X,ge?jn:l,!0).pipe(F(Ie=>new Kn(p.concat(Ie.segments),Ie.children)))})):mb(t)))}getChildConfig(e,t,i){return t.children?Gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function oj(n,e,t,i){const o=e.canLoad;return void 0===o||0===o.length?Gt(!0):Gt(o.map(u=>{const p=n.get(u),v=function qz(n){return n&&pb(n.canLoad)}(p)?p.canLoad(e,t):p(e,t);return mh(v)})).pipe(C0(),WN())}(e,t,i).pipe(Cr(o=>o?this.configLoader.loadChildren(e,t).pipe(hs(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function fj(n){return y0(ON(_E,3))}())):Gt({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],o=t.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return Gt(i);if(o.numberOfChildren>1||!o.children[jn])return y0(new Xe(4e3,_E));o=o.children[jn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,o){const l=this.createSegmentGroup(e,t.root,i,o);return new em(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Ws(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);i[l]=t[p]}else i[l]=o}),i}createSegmentGroup(e,t,i,o){const l=this.createSegments(e,t.segments,i,o);let u={};return Ws(t.children,(p,v)=>{u[v]=this.createSegmentGroup(e,p,i,o)}),new Kn(l,u)}createSegments(e,t,i,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,i))}findPosParam(e,t,i){const o=i[t.path.substring(1)];if(!o)throw new Xe(4001,_E);return o}findOrReturn(e,t){let i=0;for(const o of t){if(o.path===e.path)return t.splice(i),o;i++}return e}}class vj{}class bj{constructor(e,t,i,o,l,u,p,v){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=o,this.url=l,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=p,this.urlSerializer=v}recognize(){const e=vE(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jn).pipe(F(t=>{if(null===t)return null;const i=new dE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new vh(i,t),l=new kN(this.url,o);return this.inheritParamsAndData(l._root),l}))}inheritParamsAndData(e){const t=e.value,i=PN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,o)}processChildren(e,t,i){return Sn(Object.keys(i.children)).pipe(zd(o=>{const l=i.children[o],u=zN(t,o);return this.processSegmentGroup(e,u,l,o)}),oN((o,l)=>o&&l?(o.push(...l),o):null),function U8(n,e=!1){return rt((t,i)=>{let o=0;t.subscribe(it(i,l=>{const u=n(l,o++);(u||e)&&i.next(l),!u&&i.complete()}))})}(o=>null!==o),iE(null),aN(),F(o=>{if(null===o)return null;const l=ZN(o);return function wj(n){n.sort((e,t)=>e.value.outlet===jn?-1:t.value.outlet===jn?1:e.value.outlet.localeCompare(t.value.outlet))}(l),l}))}processSegment(e,t,i,o,l){return Sn(t).pipe(zd(u=>this.processSegmentAgainstRoute(u._injector??e,u,i,o,l)),$d(u=>!!u),dh(u=>{if(u instanceof b0)return XN(i,o,l)?Gt([]):Gt(null);throw u}))}processSegmentAgainstRoute(e,t,i,o,l){if(t.redirectTo||!$N(t,i,o,l))return Gt(null);let u;if("**"===t.path){const p=o.length>0?uN(o).parameters:{},v=QN(i)+o.length;u=Gt({snapshot:new dE(o,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tL(t),al(t),t.component??t._loadedComponent??null,t,JN(i),v,nL(t),v),consumedSegments:[],remainingSegments:[]})}else u=qN(i,t,o,e).pipe(F(({matched:p,consumedSegments:v,remainingSegments:_,parameters:M})=>{if(!p)return null;const C=QN(i)+v.length;return{snapshot:new dE(v,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tL(t),al(t),t.component??t._loadedComponent??null,t,JN(i),C,nL(t),C),consumedSegments:v,remainingSegments:_}}));return u.pipe(zc(p=>{if(null===p)return Gt(null);const{snapshot:v,consumedSegments:_,remainingSegments:M}=p;e=t._injector??e;const C=t._loadedInjector??e,N=function xj(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:X}=vE(i,_,M,N.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution);if(0===X.length&&H.hasChildren())return this.processChildren(C,N,H).pipe(F(ge=>null===ge?null:[new vh(v,ge)]));if(0===N.length&&0===X.length)return Gt([new vh(v,[])]);const ee=al(t)===l;return this.processSegment(C,N,H,X,ee?jn:l).pipe(F(ge=>null===ge?null:[new vh(v,ge)]))}))}}function Mj(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ZN(n){const e=[],t=new Set;for(const i of n){if(!Mj(i)){e.push(i);continue}const o=e.find(l=>i.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...i.children),t.add(o)):e.push(i)}for(const i of t){const o=ZN(i.children);e.push(new vh(i.value,o))}return e.filter(i=>!t.has(i))}function JN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function QN(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tL(n){return n.data||{}}function nL(n){return n.resolve||{}}const RD=Symbol("RouteTitle");function rL(n){return"string"==typeof n.title||null===n.title}function ID(n){return zc(e=>{const t=n(e);return t?Sn(t).pipe(F(()=>e)):Gt(e)})}class kj extends class Pj{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const PD=new St("ROUTES");let kD=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=mh(t.loadComponent()).pipe(hs(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),OM(()=>{this.componentLoaders.delete(t)})),o=new iN(i,()=>new q).pipe(hD());return this.componentLoaders.set(t,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Gt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const l=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(F(p=>{this.onLoadEndListener&&this.onLoadEndListener(i);let v,_,M=!1;Array.isArray(p)?_=p:(v=p.create(t).injector,_=cN(v.get(PD,[],Wt.Self|Wt.Optional)));return{routes:_.map(AD),injector:v}}),OM(()=>{this.childrenLoaders.delete(i)})),u=new iN(l,()=>new q).pipe(hD());return this.childrenLoaders.set(i,u),u}loadModuleFactoryOrRoutes(t){return mh(t()).pipe(Cr(i=>i instanceof pr||Array.isArray(i)?Gt(i):Sn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Re(Kr),Re(UA))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();class Lj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Oj(n){throw n}function Fj(n,e,t){return e.parse("/")}const Bj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ao=(()=>{class n{constructor(t,i,o,l,u,p,v){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=o,this.location=l,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new q,this.errorHandler=Oj,this.malformedUriErrorHandler=Fj,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Gt(void 0),this.urlHandlingStrategy=new Lj,this.routeReuseStrategy=new kj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(kD),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new xz(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new wz(N)),this.ngModule=u.get(qr),this.console=u.get(xB);const C=u.get(Xn);this.isNgZoneEnabled=C instanceof Xn&&Xn.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function W8(){return new em(new Kn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=IN(this.currentUrlTree,this.rootComponentType),this.transitions=new ol({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(tc(o=>0!==o.id),F(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),zc(o=>{let l=!1,u=!1;return Gt(o).pipe(hs(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zc(p=>{const v=this.browserUrlTree.toString(),_=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return sL(p.source)&&(this.browserUrlTree=p.extractedUrl),Gt(p).pipe(zc(C=>{const N=this.transitions.getValue();return i.next(new _D(C.id,this.serializeUrl(C.extractedUrl),C.source,C.restoredState)),N!==this.transitions.getValue()?Wn:Promise.resolve(C)}),function gj(n,e,t,i){return zc(o=>function pj(n,e,t,i,o){return new mj(n,e,t,i,o).apply()}(n,e,t,o.extractedUrl,i).pipe(F(l=>({...o,urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),hs(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},o.urlAfterRedirects=C.urlAfterRedirects}),function Sj(n,e,t,i,o,l){return Cr(u=>function _j(n,e,t,i,o,l,u="emptyOnly",p="legacy"){return new bj(n,e,t,i,o,u,p,l).recognize().pipe(zc(v=>null===v?function yj(n){return new P(e=>e.error(n))}(new vj):Gt(v)))}(n,e,t,u.urlAfterRedirects,i.serialize(u.urlAfterRedirects),i,o,l).pipe(F(p=>({...u,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),hs(C=>{if(o.targetSnapshot=C.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!C.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);this.setBrowserUrl(H,C)}this.browserUrlTree=C.urlAfterRedirects}const N=new gz(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);i.next(N)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:H,source:X,restoredState:ee,extras:ge}=p,fe=new _D(N,this.serializeUrl(H),X,ee);i.next(fe);const Ie=IN(H,this.rootComponentType).snapshot;return Gt(o={...p,targetSnapshot:Ie,urlAfterRedirects:H,extras:{...ge,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Wn}),hs(p=>{const v=new vz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),F(p=>o={...p,guards:Hz(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function Jz(n,e){return Cr(t=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:u}}=t;return 0===u.length&&0===l.length?Gt({...t,guardsResult:!0}):function Qz(n,e,t,i){return Sn(n).pipe(Cr(o=>function sj(n,e,t,i,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?Gt(l.map(p=>{const v=mE(p,e,o);return mh(function Kz(n){return n&&pb(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,i):v(n,e,t,i)).pipe($d())})).pipe(C0()):Gt(!0)}(o.component,o.route,t,e,i)),$d(o=>!0!==o,!0))}(u,i,o,n).pipe(Cr(p=>p&&function Wz(n){return"boolean"==typeof n}(p)?function ej(n,e,t,i){return Sn(e).pipe(zd(o=>kM(function nj(n,e){return null!==n&&e&&e(new Mz(n)),Gt(!0)}(o.route.parent,i),function tj(n,e){return null!==n&&e&&e(new Sz(n)),Gt(!0)}(o.route,i),function ij(n,e,t){const i=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(u=>function zz(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>rN(()=>Gt(u.guards.map(v=>{const _=mE(v,u.node,t);return mh(function Xz(n){return n&&pb(n.canActivateChild)}(_)?_.canActivateChild(i,n):_(i,n)).pipe($d())})).pipe(C0())));return Gt(l).pipe(C0())}(n,o.path,t),function rj(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Gt(!0);const o=i.map(l=>rN(()=>{const u=mE(l,e,t);return mh(function $z(n){return n&&pb(n.canActivate)}(u)?u.canActivate(e,n):u(e,n)).pipe($d())}));return Gt(o).pipe(C0())}(n,o.route,t))),$d(o=>!0!==o,!0))}(i,l,n,e):Gt(p)),F(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),hs(p=>{if(o.guardsResult=p.guardsResult,nm(p.guardsResult))throw LN(0,p.guardsResult);const v=new yz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),tc(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),ID(p=>{if(p.guards.canActivateChecks.length)return Gt(p).pipe(hs(v=>{const _=new _z(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(_)}),zc(v=>{let _=!1;return Gt(v).pipe(function Cj(n,e){return Cr(t=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=t;if(!o.length)return Gt(t);let l=0;return Sn(o).pipe(zd(u=>function Aj(n,e,t,i){const o=n.routeConfig,l=n._resolve;return void 0!==o?.title&&!rL(o)&&(l[RD]=o.title),function Tj(n,e,t,i){const o=function Dj(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Gt({});const l={};return Sn(o).pipe(Cr(u=>function Rj(n,e,t,i){const o=mE(n,e,i);return mh(o.resolve?o.resolve(e,t):o(e,t))}(n[u],e,t,i).pipe($d(),hs(p=>{l[u]=p}))),dD(1),function H8(n){return F(()=>n)}(l),dh(u=>u instanceof b0?Wn:y0(u)))}(l,n,e,i).pipe(F(u=>(n._resolvedData=u,n.data=PN(n,t).resolve,o&&rL(o)&&(n.data[RD]=o.title),null)))}(u.route,i,n,e)),hs(()=>l++),dD(1),Cr(u=>l===o.length?Gt(t):Wn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),hs({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),hs(v=>{const _=new bz(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(_)}))}),ID(p=>{const v=_=>{const M=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&M.push(this.configLoader.loadComponent(_.routeConfig).pipe(hs(C=>{_.component=C}),F(()=>{})));for(const C of _.children)M.push(...v(C));return M};return ET(v(p.targetSnapshot.root)).pipe(iE(),Uc(1))}),ID(()=>this.afterPreactivation()),F(p=>{const v=function Rz(n,e,t){const i=ub(n,e._root,t?t._root:void 0);return new RN(i,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return o={...p,targetRouterState:v}}),hs(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>F(i=>(new Uz(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),hs({next(){l=!0},complete(){l=!0}}),OM(()=>{l||u||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),dh(p=>{if(u=!0,BN(p)){FN(p)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new hE(o.id,this.serializeUrl(o.extractedUrl),p.message,p.cancellationCode);if(i.next(v),FN(p)){const _=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sL(o.source)};this.scheduleNavigation(_,"imperative",null,M,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new AN(o.id,this.serializeUrl(o.extractedUrl),p,o.targetSnapshot??void 0);i.next(v);try{o.resolve(this.errorHandler(p))}catch(_){o.reject(_)}}return Wn}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const o={replaceUrl:!0},l=t.state?.navigationId?t.state:null;if(l){const p={...l};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,i,l,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(AD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:o,queryParams:l,fragment:u,queryParamsHandling:p,preserveFragment:v}=i,_=o||this.routerState.root,M=v?this.currentUrlTree.fragment:u;let C=null;switch(p){case"merge":C={...this.currentUrlTree.queryParams,...l};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=l||null}return null!==C&&(C=this.removeEmptyProps(C)),uz(_,this.currentUrlTree,t,C,M??null)}navigateByUrl(t,i={skipLocationChange:!1}){const o=nm(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Uj(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Xe(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return i}isActive(t,i){let o;if(o=!0===i?{...Bj}:!1===i?{...Vj}:i,nm(t))return dN(this.currentUrlTree,t,o);const l=this.parseUrl(t);return dN(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((i,o)=>{const l=t[o];return null!=l&&(i[o]=l),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new rm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,o,l,u){if(this.disposed)return Promise.resolve(!1);let p,v,_;u?(p=u.resolve,v=u.reject,_=u.promise):_=new Promise((N,H)=>{p=N,v=H});const M=++this.navigationId;let C;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),C=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):C=0,this.setTransition({id:M,targetPageId:C,source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:p,reject:v,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(N=>Promise.reject(N))}setBrowserUrl(t,i){const o=this.urlSerializer.serialize(t),l={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,o){const l=new hE(t.id,this.serializeUrl(t.extractedUrl),i,o);this.triggerEvent(l),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){cp()},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();function sL(n){return"imperative"!==n}let oL=(()=>{class n{buildTitle(t){let i,o=t.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(l=>l.outlet===jn);return i}getResolvedTitleForRoute(t){return t.data[RD]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:function(){return Hi(jj)},providedIn:"root"}),n})(),jj=(()=>{class n extends oL{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Re(SP))},n.\u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aL{}let lL=(()=>{class n{constructor(t,i,o,l,u){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(tc(t=>t instanceof rm),zd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const o=[];for(const l of i){l.providers&&!l._injector&&(l._injector=ya(l.providers,t,`Route: ${l.path}`));const u=l._injector??t,p=l._loadedInjector??u;l.loadChildren&&!l._loadedRoutes||l.loadComponent&&!l._loadedComponent?o.push(this.preloadConfig(u,l)):(l.children||l._loadedRoutes)&&o.push(this.processRoutes(p,l.children??l._loadedRoutes))}return Sn(o).pipe(yr())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Gt(null);const l=o.pipe(Cr(u=>null===u?Gt(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));return i.loadComponent&&!i._loadedComponent?Sn([l,this.loader.loadComponent(i)]).pipe(yr()):l})}}return n.\u0275fac=function(t){return new(t||n)(Re(ao),Re(UA),Re(_c),Re(aL),Re(kD))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const cL=new St("");let Gj=(()=>{class n{constructor(t,i,o={}){this.router=t,this.viewportScroller=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _D?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof rm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof TN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new TN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){cp()},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();const OD=new St("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),uL=new St("ROUTER_FORROOT_GUARD"),hL=new St(""),Wj=[pM,{provide:gN,useClass:vN},{provide:ao,useFactory:function Zj(n,e,t,i,o,l,u,p={},v,_){const M=new ao(null,n,e,t,i,o,cN(l));return v&&(M.urlHandlingStrategy=v),_&&(M.routeReuseStrategy=_),M.titleStrategy=u,function Jj(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(p,M),M},deps:[gN,hb,pM,Kr,UA,PD,oL,OD,[class Nj{},new za],[class Ij{},new za]]},hb,{provide:S0,useFactory:function Qj(n){return n.routerState.root},deps:[ao]},kD];function qj(){return new b2("Router",ao)}let dL=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[Wj,[],fL(t),{provide:uL,useFactory:Yj,deps:[[ao,new za,new Zh]]},{provide:OD,useValue:i||{}},i?.useHash?{provide:Wp,useClass:d4}:{provide:Wp,useClass:G2},{provide:cL,useFactory:()=>{const n=Hi(ao),e=Hi(N5),t=Hi(OD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Gj(n,e,t)}},i?.preloadingStrategy?o7(i.preloadingStrategy):[],{provide:b2,multi:!0,useFactory:qj},i?.initialNavigation?t7(i):[],[{provide:pL,useFactory:e7},{provide:f2,multi:!0,useExisting:pL}]]}}static forChild(t){return{ngModule:n,providers:[fL(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Re(uL,8),Re(ao,8))},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({}),n})();function Yj(n){return"guarded"}function fL(n){return[{provide:_v,multi:!0,useValue:n},{provide:PD,multi:!0,useValue:n}]}function e7(){const n=Hi(Kr);return e=>{const t=n.get(f0);if(e!==t.components[0])return;const i=n.get(ao),o=n.get(mL);null===n.get(FD,null,Wt.Optional)&&i.initialNavigation(),n.get(hL,null,Wt.Optional)?.setUpPreloading(),n.get(cL,null,Wt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const pL=new St("");function t7(n){return["disabled"===n.initialNavigation?[{provide:sM,multi:!0,useFactory:()=>{const n=Hi(ao);return()=>{n.setUpLocationChangeListener()}}},{provide:FD,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:FD,useValue:"enabledBlocking"},{provide:sM,multi:!0,deps:[Kr],useFactory:n=>{const e=n.get(c4,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(o=>{const l=n.get(ao),u=n.get(mL);(function i(o){n.get(ao).events.pipe(tc(u=>u instanceof rm||u instanceof hE||u instanceof AN),F(u=>u instanceof rm||u instanceof hE&&(0===u.code||1===u.code)&&null),tc(u=>null!==u),Uc(1)).subscribe(()=>{o()})})(()=>{o(!0),t=!0}),l.afterPreactivation=()=>(o(!0),t||u.closed?Gt(void 0):u),l.initialNavigation()}))}}]:[]]}const mL=new St("",{factory:()=>new q}),FD=new St("");function o7(n){return[lL,{provide:hL,useExisting:lL},{provide:aL,useExisting:n}]}const a7=[];let l7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({imports:[dL.forRoot(a7),dL]}),n})();var _h=pe(5861);let gL=!1,vL=!1;const ME={debug:1,default:2,info:2,warning:3,error:4,off:5};let yL=ME.default,BD=null;const _L=function u7(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}();var EE=(()=>{return(n=EE||(EE={})).DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF",EE;var n})(),ll=(()=>{return(n=ll||(ll={})).UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED",ll;var n})();const bL="0123456789abcdef";let Fe=(()=>{class n{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,i){const o=t.toLowerCase();null==ME[o]&&this.throwArgumentError("invalid log level name","logLevel",t),!(yL>ME[o])&&console.log.apply(console,i)}debug(...t){this._log(n.levels.DEBUG,t)}info(...t){this._log(n.levels.INFO,t)}warn(...t){this._log(n.levels.WARNING,t)}makeError(t,i,o){if(vL)return this.makeError("censored error",i,{});i||(i=n.errors.UNKNOWN_ERROR),o||(o={});const l=[];Object.keys(o).forEach(_=>{const M=o[_];try{if(M instanceof Uint8Array){let C="";for(let N=0;N<M.length;N++)C+=bL[M[N]>>4],C+=bL[15&M[N]];l.push(_+"=Uint8Array(0x"+C+")")}else l.push(_+"="+JSON.stringify(M))}catch{l.push(_+"="+JSON.stringify(o[_].toString()))}}),l.push(`code=${i}`),l.push(`version=${this.version}`);const u=t;let p="";switch(i){case ll.NUMERIC_FAULT:{p="NUMERIC_FAULT";const _=t;switch(_){case"overflow":case"underflow":case"division-by-zero":p+="-"+_;break;case"negative-power":case"negative-width":p+="-unsupported";break;case"unbound-bitwise-result":p+="-unbound-result"}break}case ll.CALL_EXCEPTION:case ll.INSUFFICIENT_FUNDS:case ll.MISSING_NEW:case ll.NONCE_EXPIRED:case ll.REPLACEMENT_UNDERPRICED:case ll.TRANSACTION_REPLACED:case ll.UNPREDICTABLE_GAS_LIMIT:p=i}p&&(t+=" [ See: https://links.ethers.org/v5-errors-"+p+" ]"),l.length&&(t+=" ("+l.join(", ")+")");const v=new Error(t);return v.reason=u,v.code=i,Object.keys(o).forEach(function(_){v[_]=o[_]}),v}throwError(t,i,o){throw this.makeError(t,i,o)}throwArgumentError(t,i,o){return this.throwError(t,n.errors.INVALID_ARGUMENT,{argument:i,value:o})}assert(t,i,o,l){t||this.throwError(i,o,l)}assertArgument(t,i,o,l){t||this.throwArgumentError(i,o,l)}checkNormalize(t){null==t&&(t="platform missing String.prototype.normalize"),_L&&this.throwError("platform missing String.prototype.normalize",n.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_L})}checkSafeUint53(t,i){"number"==typeof t&&(null==i&&(i="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(i,n.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(i,n.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,i,o){o=o?": "+o:"",t<i&&this.throwError("missing argument"+o,n.errors.MISSING_ARGUMENT,{count:t,expectedCount:i}),t>i&&this.throwError("too many arguments"+o,n.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:i})}checkNew(t,i){(t===Object||null==t)&&this.throwError("missing new",n.errors.MISSING_NEW,{name:i.name})}checkAbstract(t,i){t===i?this.throwError("cannot instantiate abstract class "+JSON.stringify(i.name)+" directly; use a sub-class",n.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||null==t)&&this.throwError("missing new",n.errors.MISSING_NEW,{name:i.name})}static globalLogger(){return BD||(BD=new n("logger/5.7.0")),BD}static setCensorship(t,i){if(!t&&i&&this.globalLogger().throwError("cannot permanently disable censorship",n.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),gL){if(!t)return;this.globalLogger().throwError("error censorship permanent",n.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}vL=!!t,gL=!!i}static setLogLevel(t){const i=ME[t.toLowerCase()];null!=i?yL=i:n.globalLogger().warn("invalid log level - "+t)}static from(t){return new n(t)}}return n.errors=ll,n.levels=EE,n})();const ki=new Fe("bytes/5.7.0");function wL(n){return!!n.toHexString}function A0(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return A0(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function VD(n){return Lr(n)&&!(n.length%2)||SE(n)}function xL(n){return"number"==typeof n&&n==n&&n%1==0}function SE(n){if(null==n)return!1;if(n.constructor===Uint8Array)return!0;if("string"==typeof n||!xL(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!xL(t)||t<0||t>=256)return!1}return!0}function ln(n,e){if(e||(e={}),"number"==typeof n){ki.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(255&n),n=parseInt(String(n/256));return 0===t.length&&t.push(0),A0(new Uint8Array(t))}if(e.allowMissingPrefix&&"string"==typeof n&&"0x"!==n.substring(0,2)&&(n="0x"+n),wL(n)&&(n=n.toHexString()),Lr(n)){let t=n.substring(2);t.length%2&&("left"===e.hexPad?t="0"+t:"right"===e.hexPad?t+="0":ki.throwArgumentError("hex data is odd-length","value",n));const i=[];for(let o=0;o<t.length;o+=2)i.push(parseInt(t.substring(o,o+2),16));return A0(new Uint8Array(i))}return SE(n)?A0(new Uint8Array(n)):ki.throwArgumentError("invalid arrayify value","value",n)}function Go(n){const e=n.map(o=>ln(o)),t=e.reduce((o,l)=>o+l.length,0),i=new Uint8Array(t);return e.reduce((o,l)=>(i.set(l,o),o+l.length),0),A0(i)}function T0(n){let e=ln(n);if(0===e.length)return e;let t=0;for(;t<e.length&&0===e[t];)t++;return t&&(e=e.slice(t)),e}function Lr(n,e){return!("string"!=typeof n||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const UD="0123456789abcdef";function Xt(n,e){if(e||(e={}),"number"==typeof n){ki.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=UD[15&n]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof n)return(n=n.toString(16)).length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&"string"==typeof n&&"0x"!==n.substring(0,2)&&(n="0x"+n),wL(n))return n.toHexString();if(Lr(n))return n.length%2&&("left"===e.hexPad?n="0x0"+n.substring(2):"right"===e.hexPad?n+="0":ki.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(SE(n)){let t="0x";for(let i=0;i<n.length;i++){let o=n[i];t+=UD[(240&o)>>4]+UD[15&o]}return t}return ki.throwArgumentError("invalid hexlify value","value",n)}function im(n){if("string"!=typeof n)n=Xt(n);else if(!Lr(n)||n.length%2)return null;return(n.length-2)/2}function lo(n,e,t){return"string"!=typeof n?n=Xt(n):(!Lr(n)||n.length%2)&&ki.throwArgumentError("invalid hexData","value",n),e=2+2*e,null!=t?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Wo(n){let e="0x";return n.forEach(t=>{e+=Xt(t).substring(2)}),e}function HD(n){const e=function f7(n){"string"!=typeof n&&(n=Xt(n)),Lr(n)||ki.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&"0"===n[e];)e++;return"0x"+n.substring(e)}(Xt(n,{hexPad:"left"}));return"0x"===e?"0x0":e}function Ni(n,e){for("string"!=typeof n?n=Xt(n):Lr(n)||ki.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&ki.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function gb(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(VD(n)){let t=ln(n);64===t.length?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Xt(t.slice(0,32)),e.s=Xt(t.slice(32,64))):65===t.length?(e.r=Xt(t.slice(0,32)),e.s=Xt(t.slice(32,64)),e.v=t[64]):ki.throwArgumentError("invalid signature string","signature",n),e.v<27&&(0===e.v||1===e.v?e.v+=27:ki.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Xt(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,null!=e._vs){const o=function d7(n,e){(n=ln(n)).length>e&&ki.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),A0(t)}(ln(e._vs),32);e._vs=Xt(o);const l=o[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=l:e.recoveryParam!==l&&ki.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),o[0]&=127;const u=Xt(o);null==e.s?e.s=u:e.s!==u&&ki.throwArgumentError("signature v mismatch _vs","signature",n)}null==e.recoveryParam?null==e.v?ki.throwArgumentError("signature missing v and recoveryParam","signature",n):e.recoveryParam=0===e.v||1===e.v?e.v:1-e.v%2:null==e.v?e.v=27+e.recoveryParam:e.recoveryParam!==(0===e.v||1===e.v?e.v:1-e.v%2)&&ki.throwArgumentError("signature recoveryParam mismatch v","signature",n),null!=e.r&&Lr(e.r)?e.r=Ni(e.r,32):ki.throwArgumentError("signature missing or invalid r","signature",n),null!=e.s&&Lr(e.s)?e.s=Ni(e.s,32):ki.throwArgumentError("signature missing or invalid s","signature",n);const t=ln(e.s);t[0]>=128&&ki.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const i=Xt(t);e._vs&&(Lr(e._vs)||ki.throwArgumentError("signature invalid _vs","signature",n),e._vs=Ni(e._vs,32)),null==e._vs?e._vs=i:e._vs!==i&&ki.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}var p7=pe(8538),Nn=pe.n(p7),vb=Nn().BN;const bh=new Fe("bignumber/5.7.0"),zD={},ML=9007199254740991;let EL=!1;class It{constructor(e,t){e!==zD&&bh.throwError("cannot call constructor directly; use BigNumber.from",Fe.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return qo(lr(this).fromTwos(e))}toTwos(e){return qo(lr(this).toTwos(e))}abs(){return"-"===this._hex[0]?It.from(this._hex.substring(1)):this}add(e){return qo(lr(this).add(lr(e)))}sub(e){return qo(lr(this).sub(lr(e)))}div(e){return It.from(e).isZero()&&cl("division-by-zero","div"),qo(lr(this).div(lr(e)))}mul(e){return qo(lr(this).mul(lr(e)))}mod(e){const t=lr(e);return t.isNeg()&&cl("division-by-zero","mod"),qo(lr(this).umod(t))}pow(e){const t=lr(e);return t.isNeg()&&cl("negative-power","pow"),qo(lr(this).pow(t))}and(e){const t=lr(e);return(this.isNegative()||t.isNeg())&&cl("unbound-bitwise-result","and"),qo(lr(this).and(t))}or(e){const t=lr(e);return(this.isNegative()||t.isNeg())&&cl("unbound-bitwise-result","or"),qo(lr(this).or(t))}xor(e){const t=lr(e);return(this.isNegative()||t.isNeg())&&cl("unbound-bitwise-result","xor"),qo(lr(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&cl("negative-width","mask"),qo(lr(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&cl("negative-width","shl"),qo(lr(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&cl("negative-width","shr"),qo(lr(this).shrn(e))}eq(e){return lr(this).eq(lr(e))}lt(e){return lr(this).lt(lr(e))}lte(e){return lr(this).lte(lr(e))}gt(e){return lr(this).gt(lr(e))}gte(e){return lr(this).gte(lr(e))}isNegative(){return"-"===this._hex[0]}isZero(){return lr(this).isZero()}toNumber(){try{return lr(this).toNumber()}catch{cl("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return bh.throwError("this platform does not support BigInt",Fe.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?EL||(EL=!0,bh.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):bh.throwError(16===arguments[0]?"BigNumber.toString does not accept any parameters; use bigNumber.toHexString()":"BigNumber.toString does not accept parameters",Fe.errors.UNEXPECTED_ARGUMENT,{})),lr(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof It)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new It(zD,yb(e)):e.match(/^-?[0-9]+$/)?new It(zD,yb(new vb(e))):bh.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&cl("underflow","BigNumber.from",e),(e>=ML||e<=-ML)&&cl("overflow","BigNumber.from",e),It.from(String(e));const t=e;if("bigint"==typeof t)return It.from(t.toString());if(SE(t))return It.from(Xt(t));if(t)if(t.toHexString){const i=t.toHexString();if("string"==typeof i)return It.from(i)}else{let i=t._hex;if(null==i&&"BigNumber"===t.type&&(i=t.hex),"string"==typeof i&&(Lr(i)||"-"===i[0]&&Lr(i.substring(1))))return It.from(i)}return bh.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function yb(n){if("string"!=typeof n)return yb(n.toString(16));if("-"===n[0])return"-"===(n=n.substring(1))[0]&&bh.throwArgumentError("invalid hex","value",n),"0x00"===(n=yb(n))?n:"-"+n;if("0x"!==n.substring(0,2)&&(n="0x"+n),"0x"===n)return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&"0x00"===n.substring(0,4);)n="0x"+n.substring(4);return n}function qo(n){return It.from(yb(n))}function lr(n){const e=It.from(n).toHexString();return new vb("-"===e[0]?"-"+e.substring(3):e.substring(2),16)}function cl(n,e,t){const i={fault:n,operation:e};return null!=t&&(i.value=t),bh.throwError(n,Fe.errors.NUMERIC_FAULT,i)}const CE=new Fe("properties/5.7.0");function gt(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function Gc(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||"object"!=typeof n.prototype)break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function ns(n){return function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){const e=Object.keys(n).map(i=>Promise.resolve(n[i]).then(l=>({key:i,value:l})));return(yield Promise.all(e)).reduce((i,o)=>(i[o.key]=o.value,i),{})})}function ds(n){const e={};for(const t in n)e[t]=n[t];return e}const b7={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function SL(n){if(null==n||b7[typeof n])return!0;if(Array.isArray(n)||"object"==typeof n){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let i=null;try{i=n[e[t]]}catch{continue}if(!SL(i))return!1}return!0}return CE.throwArgumentError("Cannot deepCopy "+typeof n,"object",n)}function w7(n){if(SL(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>wh(e)));if("object"==typeof n){const e={};for(const t in n){const i=n[t];void 0!==i&&gt(e,t,wh(i))}return e}return CE.throwArgumentError("Cannot deepCopy "+typeof n,"object",n)}function wh(n){return w7(n)}class _b{constructor(e){for(const t in e)this[t]=wh(e[t])}}const bb="abi/5.7.0",jD=new Fe(bb);class xh{constructor(e,t,i,o){this.name=e,this.type=t,this.localName=i,this.dynamic=o}_throwError(e,t){jD.throwArgumentError(e,this.localName,t)}}class GD{constructor(e){gt(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Wo(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Go(e._data))}writeBytes(e){let t=ln(e);const i=t.length%this.wordSize;return i&&(t=Go([t,this._padding.slice(i)])),this._writeData(t)}_getValue(e){let t=ln(It.from(e));return t.length>this.wordSize&&jD.throwError("value out-of-bounds",Fe.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=Go([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class AE{constructor(e,t,i,o){gt(this,"_data",ln(e)),gt(this,"wordSize",t||32),gt(this,"_coerceFunc",i),gt(this,"allowLoose",o),this._offset=0}get data(){return Xt(this._data)}get consumed(){return this._offset}static coerce(e,t){let i=e.match("^u?int([0-9]+)$");return i&&parseInt(i[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):AE.coerce(e,t)}_peekBytes(e,t,i){let o=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+o>this._data.length&&(this.allowLoose&&i&&this._offset+t<=this._data.length?o=t:jD.throwError("data out-of-bounds",Fe.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+o})),this._data.slice(this._offset,this._offset+o)}subReader(e){return new AE(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let i=this._peekBytes(0,e,!!t);return this._offset+=i.length,i.slice(0,e)}readValue(){return It.from(this.readBytes(this.wordSize))}}var M7=pe(4237),E7=pe.n(M7);function fs(n){return"0x"+E7().keccak_256(ln(n))}const Wc=new Fe("rlp/5.7.0");function CL(n){const e=[];for(;n;)e.unshift(255&n),n>>=8;return e}function AL(n,e,t){let i=0;for(let o=0;o<t;o++)i=256*i+n[e+o];return i}function TL(n){if(Array.isArray(n)){let i=[];if(n.forEach(function(l){i=i.concat(TL(l))}),i.length<=55)return i.unshift(192+i.length),i;const o=CL(i.length);return o.unshift(247+o.length),o.concat(i)}VD(n)||Wc.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(ln(n));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=CL(e.length);return t.unshift(183+t.length),t.concat(e)}function TE(n){return Xt(TL(n))}function DL(n,e,t,i){const o=[];for(;t<e+1+i;){const l=RL(n,t);o.push(l.result),(t+=l.consumed)>e+1+i&&Wc.throwError("child data too short",Fe.errors.BUFFER_OVERRUN,{})}return{consumed:1+i,result:o}}function RL(n,e){if(0===n.length&&Wc.throwError("data too short",Fe.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&Wc.throwError("data short segment too short",Fe.errors.BUFFER_OVERRUN,{});const i=AL(n,e+1,t);return e+1+t+i>n.length&&Wc.throwError("data long segment too short",Fe.errors.BUFFER_OVERRUN,{}),DL(n,e,e+1+t,t+i)}if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&Wc.throwError("data array too short",Fe.errors.BUFFER_OVERRUN,{}),DL(n,e,e+1,t)}if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&Wc.throwError("data array too short",Fe.errors.BUFFER_OVERRUN,{});const i=AL(n,e+1,t);return e+1+t+i>n.length&&Wc.throwError("data array too short",Fe.errors.BUFFER_OVERRUN,{}),{consumed:1+t+i,result:Xt(n.slice(e+1+t,e+1+t+i))}}if(n[e]>=128){const t=n[e]-128;return e+1+t>n.length&&Wc.throwError("data too short",Fe.errors.BUFFER_OVERRUN,{}),{consumed:1+t,result:Xt(n.slice(e+1,e+1+t))}}return{consumed:1,result:Xt(n[e])}}function WD(n){const e=ln(n),t=RL(e,0);return t.consumed!==e.length&&Wc.throwArgumentError("invalid rlp data","data",n),t.result}const Xd=new Fe("address/5.7.0");function IL(n){Lr(n,20)||Xd.throwArgumentError("invalid address","address",n);const e=(n=n.toLowerCase()).substring(2).split(""),t=new Uint8Array(40);for(let o=0;o<40;o++)t[o]=e[o].charCodeAt(0);const i=ln(fs(t));for(let o=0;o<40;o+=2)i[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(15&i[o>>1])>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}const qD={};for(let n=0;n<10;n++)qD[String(n)]=String(n);for(let n=0;n<26;n++)qD[String.fromCharCode(65+n)]=String(10+n);const PL=Math.floor(function T7(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}(9007199254740991));function Gi(n){let e=null;if("string"!=typeof n&&Xd.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==n.substring(0,2)&&(n="0x"+n),e=IL(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&Xd.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==function kL(n){let e=(n=(n=n.toUpperCase()).substring(4)+n.substring(0,2)+"00").split("").map(i=>qD[i]).join("");for(;e.length>=PL;){let i=e.substring(0,PL);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}(n)&&Xd.throwArgumentError("bad icap checksum","address",n),e=function g7(n){return new vb(n,36).toString(16)}(n.substring(4));e.length<40;)e="0"+e;e=IL("0x"+e)}else Xd.throwArgumentError("invalid address","address",n);return e}function NL(n){let e=null;try{e=Gi(n.from)}catch{Xd.throwArgumentError("missing from address","transaction",n)}return Gi(lo(fs(TE([e,T0(ln(It.from(n.nonce).toHexString()))])),12))}const LL=new Fe("strings/5.7.0");var D0=(()=>{return(n=D0||(D0={})).current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD",D0;var n})(),$o=(()=>{return(n=$o||($o={})).UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation",$o;var n})();function OL(n,e,t,i,o){if(n===$o.BAD_PREFIX||n===$o.UNEXPECTED_CONTINUE){let l=0;for(let u=e+1;u<t.length&&t[u]>>6==2;u++)l++;return l}return n===$o.OVERRUN?t.length-e-1:0}const P7=Object.freeze({error:function R7(n,e,t,i,o){return LL.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)},ignore:OL,replace:function I7(n,e,t,i,o){return n===$o.OVERLONG?(i.push(o),0):(i.push(65533),OL(n,e,t))}});function $D(n,e){null==e&&(e=P7.error),n=ln(n);const t=[];let i=0;for(;i<n.length;){const o=n[i++];if(o>>7==0){t.push(o);continue}let l=null,u=null;if(192==(224&o))l=1,u=127;else if(224==(240&o))l=2,u=2047;else{if(240!=(248&o)){i+=e(128==(192&o)?$o.UNEXPECTED_CONTINUE:$o.BAD_PREFIX,i-1,n,t);continue}l=3,u=65535}if(i-1+l>=n.length){i+=e($o.OVERRUN,i-1,n,t);continue}let p=o&(1<<8-l-1)-1;for(let v=0;v<l;v++){let _=n[i];if(128!=(192&_)){i+=e($o.MISSING_CONTINUE,i,n,t),p=null;break}p=p<<6|63&_,i++}if(null!==p){if(p>1114111){i+=e($o.OUT_OF_RANGE,i-1-l,n,t,p);continue}if(p>=55296&&p<=57343){i+=e($o.UTF16_SURROGATE,i-1-l,n,t,p);continue}if(p<=u){i+=e($o.OVERLONG,i-1-l,n,t,p);continue}t.push(p)}}return t}function qc(n,e=D0.current){e!=D0.current&&(LL.checkNormalize(),n=n.normalize(e));let t=[];for(let i=0;i<n.length;i++){const o=n.charCodeAt(i);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192),t.push(63&o|128);else if(55296==(64512&o)){i++;const l=n.charCodeAt(i);if(i>=n.length||56320!=(64512&l))throw new Error("invalid utf-8 string");const u=65536+((1023&o)<<10)+(1023&l);t.push(u>>18|240),t.push(u>>12&63|128),t.push(u>>6&63|128),t.push(63&u|128)}else t.push(o>>12|224),t.push(o>>6&63|128),t.push(63&o|128)}return ln(t)}function wb(n,e){return function k7(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}($D(n,e))}function R0(n){return fs(qc(n))}class L7 extends xh{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Gi(t)}catch(i){this._throwError(i.message,t)}return e.writeValue(t)}decode(e){return Gi(Ni(e.readValue().toHexString(),20))}}class O7 extends xh{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const I0=new Fe(bb);function FL(n,e,t){let i=null;if(Array.isArray(t))i=t;else if(t&&"object"==typeof t){let v={};i=e.map(_=>{const M=_.localName;return M||I0.throwError("cannot encode object for signature with missing names",Fe.errors.INVALID_ARGUMENT,{argument:"values",coder:_,value:t}),v[M]&&I0.throwError("cannot encode object for signature with duplicate names",Fe.errors.INVALID_ARGUMENT,{argument:"values",coder:_,value:t}),v[M]=!0,t[M]})}else I0.throwArgumentError("invalid tuple value","tuple",t);e.length!==i.length&&I0.throwArgumentError("types/value length mismatch","tuple",t);let o=new GD(n.wordSize),l=new GD(n.wordSize),u=[];e.forEach((v,_)=>{let M=i[_];if(v.dynamic){let C=l.length;v.encode(l,M);let N=o.writeUpdatableValue();u.push(H=>{N(H+C)})}else v.encode(o,M)}),u.forEach(v=>{v(o.length)});let p=n.appendWriter(o);return p+=n.appendWriter(l),p}function BL(n,e){let t=[],i=n.subReader(0);e.forEach(l=>{let u=null;if(l.dynamic){let p=n.readValue(),v=i.subReader(p.toNumber());try{u=l.decode(v)}catch(_){if(_.code===Fe.errors.BUFFER_OVERRUN)throw _;u=_,u.baseType=l.name,u.name=l.localName,u.type=l.type}}else try{u=l.decode(n)}catch(p){if(p.code===Fe.errors.BUFFER_OVERRUN)throw p;u=p,u.baseType=l.name,u.name=l.localName,u.type=l.type}null!=u&&t.push(u)});const o=e.reduce((l,u)=>{const p=u.localName;return p&&(l[p]||(l[p]=0),l[p]++),l},{});e.forEach((l,u)=>{let p=l.localName;if(!p||1!==o[p]||("length"===p&&(p="_length"),null!=t[p]))return;const v=t[u];v instanceof Error?Object.defineProperty(t,p,{enumerable:!0,get:()=>{throw v}}):t[p]=v});for(let l=0;l<t.length;l++){const u=t[l];u instanceof Error&&Object.defineProperty(t,l,{enumerable:!0,get:()=>{throw u}})}return Object.freeze(t)}class F7 extends xh{constructor(e,t,i){super("array",e.type+"["+(t>=0?t:"")+"]",i,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let i=0;i<this.length;i++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let i=this.length;-1===i&&(i=t.length,e.writeValue(t.length)),I0.checkArgumentCount(t.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let l=0;l<t.length;l++)o.push(this.coder);return FL(e,o,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&I0.throwError("insufficient data length",Fe.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let i=[];for(let o=0;o<t;o++)i.push(new O7(this.coder));return e.coerce(this.name,BL(e,i))}}class B7 extends xh{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class VL extends xh{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ln(t);let i=e.writeValue(t.length);return i+=e.writeBytes(t),i}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class V7 extends VL{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Xt(super.decode(e)))}}class U7 extends xh{constructor(e,t){let i="bytes"+String(e);super(i,i,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let i=ln(t);return i.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(i)}decode(e){return e.coerce(this.name,Xt(e.readBytes(this.size)))}}class H7 extends xh{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const z7=It.from(-1),UL=It.from(0),j7=It.from(1),G7=It.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class W7 extends xh{constructor(e,t,i){const o=(t?"int":"uint")+8*e;super(o,o,i,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let i=It.from(t),o=G7.mask(8*e.wordSize);if(this.signed){let l=o.mask(8*this.size-1);(i.gt(l)||i.lt(l.add(j7).mul(z7)))&&this._throwError("value out-of-bounds",t)}else(i.lt(UL)||i.gt(o.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return i=i.toTwos(8*this.size).mask(8*this.size),this.signed&&(i=i.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(i)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class q7 extends VL{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,qc(t))}decode(e){return wb(super.decode(e))}}class DE extends xh{constructor(e,t){let i=!1;const o=[];e.forEach(u=>{u.dynamic&&(i=!0),o.push(u.type)}),super("tuple","tuple("+o.join(",")+")",t,i),this.coders=e}defaultValue(){const e=[];this.coders.forEach(i=>{e.push(i.defaultValue())});const t=this.coders.reduce((i,o)=>{const l=o.localName;return l&&(i[l]||(i[l]=0),i[l]++),i},{});return this.coders.forEach((i,o)=>{let l=i.localName;!l||1!==t[l]||("length"===l&&(l="_length"),null==e[l]&&(e[l]=e[o]))}),Object.freeze(e)}encode(e,t){return FL(e,this.coders,t)}decode(e){return e.coerce(this.name,BL(e,this.coders))}}const mr=new Fe(bb),sm={};let HL={calldata:!0,memory:!0,storage:!0},$7={calldata:!0,memory:!0};function RE(n,e){if("bytes"===n||"string"===n){if(HL[e])return!0}else if("address"===n){if("payable"===e)return!0}else if((n.indexOf("[")>=0||"tuple"===n)&&$7[e])return!0;return(HL[e]||"payable"===e)&&mr.throwArgumentError("invalid modifier","name",e),!1}function IE(n,e){for(let t in e)gt(n,t,e[t])}const Tr=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),K7=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ss{constructor(e,t){e!==sm&&mr.throwError("use fromString",Fe.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),IE(this,t);let i=this.type.match(K7);IE(this,i?{arrayLength:parseInt(i[2]||"-1"),arrayChildren:Ss.fromObject({type:i[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Tr.sighash),Tr[e]||mr.throwArgumentError("invalid format type","format",e),e===Tr.json){let i={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(i.indexed=this.indexed),this.components&&(i.components=this.components.map(o=>JSON.parse(o.format(e)))),JSON.stringify(i)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Tr.sighash&&(t+=this.type),t+="("+this.components.map(i=>i.format(e)).join(e===Tr.full?", ":",")+")"):t+=this.type,e!==Tr.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Tr.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Ss.fromString(e,t):Ss.fromObject(e)}static fromObject(e){return Ss.isParamType(e)?e:new Ss(sm,{name:e.name||null,type:P0(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Ss.fromObject):null})}static fromString(e,t){return function i(o){return Ss.fromObject({name:o.name,type:o.type,indexed:o.indexed,components:o.components})}(function X7(n,e){let t=n;function i(p){mr.throwArgumentError(`unexpected character at position ${p}`,"param",n)}function o(p){let v={type:"",name:"",parent:p,state:{allowType:!0}};return e&&(v.indexed=!1),v}n=n.replace(/\s/g," ");let l={type:"",name:"",state:{allowType:!0}},u=l;for(let p=0;p<n.length;p++){let v=n[p];switch(v){case"(":u.state.allowType&&""===u.type?u.type="tuple":u.state.allowParams||i(p),u.state.allowType=!1,u.type=P0(u.type),u.components=[o(u)],u=u.components[0];break;case")":delete u.state,"indexed"===u.name&&(e||i(p),u.indexed=!0,u.name=""),RE(u.type,u.name)&&(u.name=""),u.type=P0(u.type);let _=u;u=u.parent,u||i(p),delete _.parent,u.state.allowParams=!1,u.state.allowName=!0,u.state.allowArray=!0;break;case",":delete u.state,"indexed"===u.name&&(e||i(p),u.indexed=!0,u.name=""),RE(u.type,u.name)&&(u.name=""),u.type=P0(u.type);let M=o(u.parent);u.parent.components.push(M),delete u.parent,u=M;break;case" ":u.state.allowType&&""!==u.type&&(u.type=P0(u.type),delete u.state.allowType,u.state.allowName=!0,u.state.allowParams=!0),u.state.allowName&&""!==u.name&&("indexed"===u.name?(e||i(p),u.indexed&&i(p),u.indexed=!0,u.name=""):RE(u.type,u.name)?u.name="":u.state.allowName=!1);break;case"[":u.state.allowArray||i(p),u.type+=v,u.state.allowArray=!1,u.state.allowName=!1,u.state.readArray=!0;break;case"]":u.state.readArray||i(p),u.type+=v,u.state.readArray=!1,u.state.allowArray=!0,u.state.allowName=!0;break;default:u.state.allowType?(u.type+=v,u.state.allowParams=!0,u.state.allowArray=!0):u.state.allowName?(u.name+=v,delete u.state.allowArray):u.state.readArray?u.type+=v:i(p)}}return u.parent&&mr.throwArgumentError("unexpected eof","param",n),delete l.state,"indexed"===u.name?(e||i(t.length-7),u.indexed&&i(t.length-7),u.indexed=!0,u.name=""):RE(u.type,u.name)&&(u.name=""),l.type=P0(l.type),l}(e,!!t))}static isParamType(e){return!(null==e||!e._isParamType)}}function xb(n,e){return function Z7(n){n=n.trim();let e=[],t="",i=0;for(let o=0;o<n.length;o++){let l=n[o];","===l&&0===i?(e.push(t),t=""):(t+=l,"("===l?i++:")"===l&&(i--,-1===i&&mr.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}(n).map(t=>Ss.fromString(t,e))}class Mh{constructor(e,t){e!==sm&&mr.throwError("use a static from method",Fe.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),IE(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Mh.isFragment(e)?e:"string"==typeof e?Mh.fromString(e):Mh.fromObject(e)}static fromObject(e){if(Mh.isFragment(e))return e;switch(e.type){case"function":return Xc.fromObject(e);case"event":return Eh.fromObject(e);case"constructor":return $c.fromObject(e);case"error":return Kd.fromObject(e);case"fallback":case"receive":return null}return mr.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Eh.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?Xc.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?$c.fromString(e.trim()):"error"===e.split(" ")[0]?Kd.fromString(e.substring(5).trim()):mr.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class Eh extends Mh{format(e){if(e||(e=Tr.sighash),Tr[e]||mr.throwArgumentError("invalid format type","format",e),e===Tr.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});let t="";return e!==Tr.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(i=>i.format(e)).join(e===Tr.full?", ":",")+") ",e!==Tr.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?Eh.fromString(e):Eh.fromObject(e)}static fromObject(e){if(Eh.isEventFragment(e))return e;"event"!==e.type&&mr.throwArgumentError("invalid event object","value",e);const t={name:Mb(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Ss.fromObject):[],type:"event"};return new Eh(sm,t)}static fromString(e){let t=e.match(Eb);t||mr.throwArgumentError("invalid event string","value",e);let i=!1;return t[3].split(" ").forEach(o=>{switch(o.trim()){case"anonymous":i=!0;break;case"":break;default:mr.warn("unknown modifier: "+o)}}),Eh.fromObject({name:t[1].trim(),anonymous:i,inputs:xb(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function zL(n,e){e.gas=null;let t=n.split("@");return 1!==t.length?(t.length>2&&mr.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||mr.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=It.from(t[1]),t[0]):n}function jL(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function GL(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=n.stateMutability?(e.stateMutability=n.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=n.constant&&!!n.constant!==e.constant&&mr.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable="payable"===e.stateMutability,null!=n.payable&&!!n.payable!==e.payable&&mr.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):null!=n.payable?(e.payable=!!n.payable,null==n.constant&&!e.payable&&"constructor"!==n.type&&mr.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.stateMutability=e.constant?"view":e.payable?"payable":"nonpayable",e.payable&&e.constant&&mr.throwArgumentError("cannot have constant payable function","value",n)):null!=n.constant?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==n.type&&mr.throwArgumentError("unable to determine stateMutability","value",n),e}class $c extends Mh{format(e){if(e||(e=Tr.sighash),Tr[e]||mr.throwArgumentError("invalid format type","format",e),e===Tr.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});e===Tr.sighash&&mr.throwError("cannot format a constructor for sighash",Fe.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(i=>i.format(e)).join(e===Tr.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?$c.fromString(e):$c.fromObject(e)}static fromObject(e){if($c.isConstructorFragment(e))return e;"constructor"!==e.type&&mr.throwArgumentError("invalid constructor object","value",e);let t=GL(e);t.constant&&mr.throwArgumentError("constructor cannot be constant","value",e);const i={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Ss.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?It.from(e.gas):null};return new $c(sm,i)}static fromString(e){let t={type:"constructor"},i=(e=zL(e,t)).match(Eb);return(!i||"constructor"!==i[1].trim())&&mr.throwArgumentError("invalid constructor string","value",e),t.inputs=xb(i[2].trim(),!1),jL(i[3].trim(),t),$c.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class Xc extends $c{format(e){if(e||(e=Tr.sighash),Tr[e]||mr.throwArgumentError("invalid format type","format",e),e===Tr.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(e))),outputs:this.outputs.map(i=>JSON.parse(i.format(e)))});let t="";return e!==Tr.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(i=>i.format(e)).join(e===Tr.full?", ":",")+") ",e!==Tr.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(i=>i.format(e)).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?Xc.fromString(e):Xc.fromObject(e)}static fromObject(e){if(Xc.isFunctionFragment(e))return e;"function"!==e.type&&mr.throwArgumentError("invalid function object","value",e);let t=GL(e);const i={type:e.type,name:Mb(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Ss.fromObject):[],outputs:e.outputs?e.outputs.map(Ss.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?It.from(e.gas):null};return new Xc(sm,i)}static fromString(e){let t={type:"function"},i=(e=zL(e,t)).split(" returns ");i.length>2&&mr.throwArgumentError("invalid function string","value",e);let o=i[0].match(Eb);if(o||mr.throwArgumentError("invalid function signature","value",e),t.name=o[1].trim(),t.name&&Mb(t.name),t.inputs=xb(o[2],!1),jL(o[3].trim(),t),i.length>1){let l=i[1].match(Eb);(""!=l[1].trim()||""!=l[3].trim())&&mr.throwArgumentError("unexpected tokens","value",e),t.outputs=xb(l[2],!1)}else t.outputs=[];return Xc.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function WL(n){const e=n.format();return("Error(string)"===e||"Panic(uint256)"===e)&&mr.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class Kd extends Mh{format(e){if(e||(e=Tr.sighash),Tr[e]||mr.throwArgumentError("invalid format type","format",e),e===Tr.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});let t="";return e!==Tr.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(i=>i.format(e)).join(e===Tr.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?Kd.fromString(e):Kd.fromObject(e)}static fromObject(e){if(Kd.isErrorFragment(e))return e;"error"!==e.type&&mr.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Mb(e.name),inputs:e.inputs?e.inputs.map(Ss.fromObject):[]};return WL(new Kd(sm,t))}static fromString(e){let t={type:"error"},i=e.match(Eb);return i||mr.throwArgumentError("invalid error signature","value",e),t.name=i[1].trim(),t.name&&Mb(t.name),t.inputs=xb(i[2],!1),WL(Kd.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function P0(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const Y7=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Mb(n){return(!n||!n.match(Y7))&&mr.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const Eb=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),PE=new Fe(bb),J7=new RegExp(/^bytes([0-9]*)$/),Q7=new RegExp(/^(u?int)([0-9]*)$/),tG=new class eG{constructor(e){gt(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new L7(e.name);case"bool":return new B7(e.name);case"string":return new q7(e.name);case"bytes":return new V7(e.name);case"array":return new F7(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new DE((e.components||[]).map(i=>this._getCoder(i)),e.name);case"":return new H7(e.name)}let t=e.type.match(Q7);if(t){let i=parseInt(t[2]||"256");return(0===i||i>256||i%8!=0)&&PE.throwArgumentError("invalid "+t[1]+" bit length","param",e),new W7(i/8,"int"===t[1],e.name)}if(t=e.type.match(J7),t){let i=parseInt(t[1]);return(0===i||i>32)&&PE.throwArgumentError("invalid bytes length","param",e),new U7(i,e.name)}return PE.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new AE(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new GD(this._getWordSize())}getDefaultValue(e){const t=e.map(o=>this._getCoder(Ss.from(o)));return new DE(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&PE.throwError("types/values length mismatch",Fe.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const i=e.map(u=>this._getCoder(Ss.from(u))),o=new DE(i,"_"),l=this._getWriter();return o.encode(l,t),l.data}decode(e,t,i){const o=e.map(u=>this._getCoder(Ss.from(u)));return new DE(o,"_").decode(this._getReader(ln(t),i))}},xi=new Fe(bb);class nG extends _b{}class rG extends _b{}class iG extends _b{}class KD extends _b{static isIndexed(e){return!(!e||!e._isIndexed)}}const sG={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function qL(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class $L{constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,gt(this,"fragments",t.map(i=>Mh.from(i)).filter(i=>null!=i)),gt(this,"_abiCoder",Gc(new.target,"getAbiCoder")()),gt(this,"functions",{}),gt(this,"errors",{}),gt(this,"events",{}),gt(this,"structs",{}),this.fragments.forEach(i=>{let o=null;switch(i.type){case"constructor":return this.deploy?void xi.warn("duplicate definition - constructor"):void gt(this,"deploy",i);case"function":o=this.functions;break;case"event":o=this.events;break;case"error":o=this.errors;break;default:return}let l=i.format();o[l]?xi.warn("duplicate definition - "+l):o[l]=i}),this.deploy||gt(this,"deploy",$c.from({payable:!1,type:"constructor"})),gt(this,"_isInterface",!0)}format(e){e||(e=Tr.full),e===Tr.sighash&&xi.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(i=>i.format(e));return e===Tr.json?JSON.stringify(t.map(i=>JSON.parse(i))):t}static getAbiCoder(){return tG}static getAddress(e){return Gi(e)}static getSighash(e){return lo(R0(e.format()),0,4)}static getEventTopic(e){return R0(e.format())}getFunction(e){if(Lr(e)){for(const i in this.functions)if(e===this.getSighash(i))return this.functions[i];xi.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const i=e.trim(),o=Object.keys(this.functions).filter(l=>l.split("(")[0]===i);return 0===o.length?xi.throwArgumentError("no matching function","name",i):o.length>1&&xi.throwArgumentError("multiple matching functions","name",i),this.functions[o[0]]}const t=this.functions[Xc.fromString(e).format()];return t||xi.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Lr(e)){const i=e.toLowerCase();for(const o in this.events)if(i===this.getEventTopic(o))return this.events[o];xi.throwArgumentError("no matching event","topichash",i)}if(-1===e.indexOf("(")){const i=e.trim(),o=Object.keys(this.events).filter(l=>l.split("(")[0]===i);return 0===o.length?xi.throwArgumentError("no matching event","name",i):o.length>1&&xi.throwArgumentError("multiple matching events","name",i),this.events[o[0]]}const t=this.events[Eh.fromString(e).format()];return t||xi.throwArgumentError("no matching event","signature",e),t}getError(e){if(Lr(e)){const i=Gc(this.constructor,"getSighash");for(const o in this.errors)if(e===i(this.errors[o]))return this.errors[o];xi.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const i=e.trim(),o=Object.keys(this.errors).filter(l=>l.split("(")[0]===i);return 0===o.length?xi.throwArgumentError("no matching error","name",i):o.length>1&&xi.throwArgumentError("multiple matching errors","name",i),this.errors[o[0]]}const t=this.errors[Xc.fromString(e).format()];return t||xi.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return Gc(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),Gc(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const i=ln(t);return Xt(i.slice(0,4))!==this.getSighash(e)&&xi.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Xt(i)),this._decodeParams(e.inputs,i.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),Xt(Go([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const i=ln(t);return Xt(i.slice(0,4))!==this.getSighash(e)&&xi.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Xt(i)),this._decodeParams(e.inputs,i.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),Xt(Go([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let i=ln(t),o=null,l="",u=null,p=null,v=null;switch(i.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,i)}catch{}break;case 4:{const _=Xt(i.slice(0,4)),M=sG[_];if(M)u=this._abiCoder.decode(M.inputs,i.slice(4)),p=M.name,v=M.signature,M.reason&&(o=u[0]),"Error"===p?l=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(u[0])}`:"Panic"===p&&(l=`; VM Exception while processing transaction: reverted with panic code ${u[0]}`);else try{const C=this.getError(_);u=this._abiCoder.decode(C.inputs,i.slice(4)),p=C.name,v=C.format()}catch{}break}}return xi.throwError("call revert exception"+l,Fe.errors.CALL_EXCEPTION,{method:e.format(),data:Xt(t),errorArgs:u,errorName:p,errorSignature:v,reason:o})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),Xt(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&xi.throwError("too many arguments for "+e.format(),Fe.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let i=[];e.anonymous||i.push(this.getEventTopic(e));const o=(l,u)=>"string"===l.type?R0(u):"bytes"===l.type?fs(Xt(u)):("bool"===l.type&&"boolean"==typeof u&&(u=u?"0x01":"0x00"),l.type.match(/^u?int/)&&(u=It.from(u).toHexString()),"address"===l.type&&this._abiCoder.encode(["address"],[u]),Ni(Xt(u),32));for(t.forEach((l,u)=>{let p=e.inputs[u];p.indexed?null==l?i.push(null):"array"===p.baseType||"tuple"===p.baseType?xi.throwArgumentError("filtering with tuples or arrays not supported","contract."+p.name,l):Array.isArray(l)?i.push(l.map(v=>o(p,v))):i.push(o(p,l)):null!=l&&xi.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+p.name,l)});i.length&&null===i[i.length-1];)i.pop();return i}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const i=[],o=[],l=[];return e.anonymous||i.push(this.getEventTopic(e)),t.length!==e.inputs.length&&xi.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((u,p)=>{const v=t[p];if(u.indexed)if("string"===u.type)i.push(R0(v));else if("bytes"===u.type)i.push(fs(v));else{if("tuple"===u.baseType||"array"===u.baseType)throw new Error("not implemented");i.push(this._abiCoder.encode([u.type],[v]))}else o.push(u),l.push(v)}),{data:this._abiCoder.encode(o,l),topics:i}}decodeEventLog(e,t,i){if("string"==typeof e&&(e=this.getEvent(e)),null!=i&&!e.anonymous){let N=this.getEventTopic(e);(!Lr(i[0],32)||i[0].toLowerCase()!==N)&&xi.throwError("fragment/topic mismatch",Fe.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:N,value:i[0]}),i=i.slice(1)}let o=[],l=[],u=[];e.inputs.forEach((N,H)=>{N.indexed?"string"===N.type||"bytes"===N.type||"tuple"===N.baseType||"array"===N.baseType?(o.push(Ss.fromObject({type:"bytes32",name:N.name})),u.push(!0)):(o.push(N),u.push(!1)):(l.push(N),u.push(!1))});let p=null!=i?this._abiCoder.decode(o,Go(i)):null,v=this._abiCoder.decode(l,t,!0),_=[],M=0,C=0;e.inputs.forEach((N,H)=>{if(N.indexed)if(null==p)_[H]=new KD({_isIndexed:!0,hash:null});else if(u[H])_[H]=new KD({_isIndexed:!0,hash:p[C++]});else try{_[H]=p[C++]}catch(X){_[H]=X}else try{_[H]=v[M++]}catch(X){_[H]=X}if(N.name&&null==_[N.name]){const X=_[H];X instanceof Error?Object.defineProperty(_,N.name,{enumerable:!0,get:()=>{throw qL(`property ${JSON.stringify(N.name)}`,X)}}):_[N.name]=X}});for(let N=0;N<_.length;N++){const H=_[N];H instanceof Error&&Object.defineProperty(_,N,{enumerable:!0,get:()=>{throw qL(`index ${N}`,H)}})}return Object.freeze(_)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new rG({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:It.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new nG({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=Xt(e);let i=this.getError(t.substring(0,10).toLowerCase());return i?new iG({args:this._abiCoder.decode(i.inputs,"0x"+t.substring(10)),errorFragment:i,name:i.name,signature:i.format(),sighash:this.getSighash(i)}):null}static isInterface(e){return!(!e||!e._isInterface)}}const Sb=new Fe("abstract-provider/5.7.0");class lG extends _b{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class kE{constructor(){Sb.checkAbstract(new.target,kE),gt(this,"_isProvider",!0)}getFeeData(){return n=this,e=void 0,i=function*(){const{block:e,gasPrice:t}=yield ns({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(u=>null)});let i=null,o=null,l=null;return e&&e.baseFeePerGas&&(i=e.baseFeePerGas,l=It.from("1500000000"),o=e.baseFeePerGas.mul(2).add(l)),{lastBaseFeePerGas:i,maxFeePerGas:o,maxPriorityFeePerGas:l,gasPrice:t}},new((t=void 0)||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())});var n,e,t,i}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var nc=function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})};const ul=new Fe("abstract-signer/5.7.0"),uG=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],hG=[Fe.errors.INSUFFICIENT_FUNDS,Fe.errors.NONCE_EXPIRED,Fe.errors.REPLACEMENT_UNDERPRICED];class Cb{constructor(){ul.checkAbstract(new.target,Cb),gt(this,"_isSigner",!0)}getBalance(e){return nc(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return nc(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return nc(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield ns(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return nc(this,void 0,void 0,function*(){this._checkProvider("call");const i=yield ns(this.checkTransaction(e));return yield this.provider.call(i,t)})}sendTransaction(e){return nc(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),i=yield this.signTransaction(t);return yield this.provider.sendTransaction(i)})}getChainId(){return nc(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return nc(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return nc(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return nc(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const i in e)-1===uG.indexOf(i)&&ul.throwArgumentError("invalid transaction key: "+i,"transaction",e);const t=ds(e);return t.from=null==t.from?this.getAddress():Promise.all([Promise.resolve(t.from),this.getAddress()]).then(i=>(i[0].toLowerCase()!==i[1].toLowerCase()&&ul.throwArgumentError("from address mismatch","transaction",e),i[0])),t}populateTransaction(e){return nc(this,void 0,void 0,function*(){const t=yield ns(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(o=>nc(this,void 0,void 0,function*(){if(null==o)return null;const l=yield this.resolveName(o);return null==l&&ul.throwArgumentError("provided ENS name resolves to null","tx.to",o),l})),t.to.catch(o=>{}));const i=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!i?(0===t.type||1===t.type)&&i&&ul.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):ul.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const o=yield this.getFeeData();if(null==t.type)if(null!=o.maxFeePerGas&&null!=o.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const l=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=l,t.maxPriorityFeePerGas=l}else null==t.maxFeePerGas&&(t.maxFeePerGas=o.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else null!=o.gasPrice?(i&&ul.throwError("network does not support EIP-1559",Fe.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=o.gasPrice),t.type=0):ul.throwError("failed to get consistent fee data",Fe.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=o.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(o=>{if(hG.indexOf(o.code)>=0)throw o;return ul.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:o,tx:t})})),t.chainId=null==t.chainId?this.getChainId():Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(o=>(0!==o[1]&&o[0]!==o[1]&&ul.throwArgumentError("chainId address mismatch","transaction",e),o[0])),yield ns(t)})}_checkProvider(e){this.provider||ul.throwError("missing provider",Fe.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class YD extends Cb{constructor(e,t){super(),gt(this,"address",e),gt(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{ul.throwError(e,Fe.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,i){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new YD(this.address,e)}}var dG=pe(7084),Kc=pe.n(dG);function k0(n,e,t){return n(t={path:e,exports:{},require:function(i,o){return function fG(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;var ZD=XL;function XL(n,e){if(!n)throw new Error(e||"Assertion failed")}XL.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var rc=k0(function(n,e){var t=e;function o(u){return 1===u.length?"0"+u:u}function l(u){for(var p="",v=0;v<u.length;v++)p+=o(u[v].toString(16));return p}t.toArray=function i(u,p){if(Array.isArray(u))return u.slice();if(!u)return[];var v=[];if("string"!=typeof u){for(var _=0;_<u.length;_++)v[_]=0|u[_];return v}if("hex"===p)for((u=u.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(u="0"+u),_=0;_<u.length;_+=2)v.push(parseInt(u[_]+u[_+1],16));else for(_=0;_<u.length;_++){var M=u.charCodeAt(_),C=M>>8,N=255&M;C?v.push(C,N):v.push(N)}return v},t.zero2=o,t.toHex=l,t.encode=function(p,v){return"hex"===v?l(p):p}}),wa=k0(function(n,e){var t=e;t.assert=ZD,t.toArray=rc.toArray,t.zero2=rc.zero2,t.toHex=rc.toHex,t.encode=rc.encode,t.getNAF=function i(v,_,M){var C=new Array(Math.max(v.bitLength(),M)+1);C.fill(0);for(var N=1<<_+1,H=v.clone(),X=0;X<C.length;X++){var ee,ge=H.andln(N-1);H.isOdd()?H.isubn(ee=ge>(N>>1)-1?(N>>1)-ge:ge):ee=0,C[X]=ee,H.iushrn(1)}return C},t.getJSF=function o(v,_){var M=[[],[]];v=v.clone(),_=_.clone();for(var H,C=0,N=0;v.cmpn(-C)>0||_.cmpn(-N)>0;){var ge,fe,X=v.andln(3)+C&3,ee=_.andln(3)+N&3;3===X&&(X=-1),3===ee&&(ee=-1),ge=0==(1&X)?0:3!=(H=v.andln(7)+C&7)&&5!==H||2!==ee?X:-X,M[0].push(ge),fe=0==(1&ee)?0:3!=(H=_.andln(7)+N&7)&&5!==H||2!==X?ee:-ee,M[1].push(fe),2*C===ge+1&&(C=1-C),2*N===fe+1&&(N=1-N),v.iushrn(1),_.iushrn(1)}return M},t.cachedProperty=function l(v,_,M){var C="_"+_;v.prototype[_]=function(){return void 0!==this[C]?this[C]:this[C]=M.call(this)}},t.parseBytes=function u(v){return"string"==typeof v?t.toArray(v,"hex"):v},t.intFromLE=function p(v){return new(Nn())(v,"hex","le")}}),NE=wa.getNAF,pG=wa.getJSF,LE=wa.assert;function Yd(n,e){this.type=n,this.p=new(Nn())(e.p,16),this.red=e.prime?Nn().red(e.prime):Nn().mont(this.p),this.zero=new(Nn())(0).toRed(this.red),this.one=new(Nn())(1).toRed(this.red),this.two=new(Nn())(2).toRed(this.red),this.n=e.n&&new(Nn())(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var om=Yd;function hl(n,e){this.curve=n,this.type=e,this.precomputed=null}Yd.prototype.point=function(){throw new Error("Not implemented")},Yd.prototype.validate=function(){throw new Error("Not implemented")},Yd.prototype._fixedNafMul=function(e,t){LE(e.precomputed);var i=e._getDoubles(),o=NE(t,1,this._bitLength),l=(1<<i.step+1)-(i.step%2==0?2:1);l/=3;var p,v,u=[];for(p=0;p<o.length;p+=i.step){v=0;for(var _=p+i.step-1;_>=p;_--)v=(v<<1)+o[_];u.push(v)}for(var M=this.jpoint(null,null,null),C=this.jpoint(null,null,null),N=l;N>0;N--){for(p=0;p<u.length;p++)(v=u[p])===N?C=C.mixedAdd(i.points[p]):v===-N&&(C=C.mixedAdd(i.points[p].neg()));M=M.add(C)}return M.toP()},Yd.prototype._wnafMul=function(e,t){for(var i=4,o=e._getNAFPoints(i),l=o.points,u=NE(t,i=o.wnd,this._bitLength),p=this.jpoint(null,null,null),v=u.length-1;v>=0;v--){for(var _=0;v>=0&&0===u[v];v--)_++;if(v>=0&&_++,p=p.dblp(_),v<0)break;var M=u[v];LE(0!==M),p="affine"===e.type?p.mixedAdd(M>0?l[M-1>>1]:l[-M-1>>1].neg()):p.add(M>0?l[M-1>>1]:l[-M-1>>1].neg())}return"affine"===e.type?p.toP():p},Yd.prototype._wnafMulAdd=function(e,t,i,o,l){var M,C,N,u=this._wnafT1,p=this._wnafT2,v=this._wnafT3,_=0;for(M=0;M<o;M++){var H=(N=t[M])._getNAFPoints(e);u[M]=H.wnd,p[M]=H.points}for(M=o-1;M>=1;M-=2){var X=M-1,ee=M;if(1===u[X]&&1===u[ee]){var ge=[t[X],null,null,t[ee]];0===t[X].y.cmp(t[ee].y)?(ge[1]=t[X].add(t[ee]),ge[2]=t[X].toJ().mixedAdd(t[ee].neg())):0===t[X].y.cmp(t[ee].y.redNeg())?(ge[1]=t[X].toJ().mixedAdd(t[ee]),ge[2]=t[X].add(t[ee].neg())):(ge[1]=t[X].toJ().mixedAdd(t[ee]),ge[2]=t[X].toJ().mixedAdd(t[ee].neg()));var fe=[-3,-1,-5,-7,0,7,5,1,3],Ie=pG(i[X],i[ee]);for(_=Math.max(Ie[0].length,_),v[X]=new Array(_),v[ee]=new Array(_),C=0;C<_;C++)v[X][C]=fe[3*(1+(0|Ie[0][C]))+(1+(0|Ie[1][C]))],v[ee][C]=0,p[X]=ge}else v[X]=NE(i[X],u[X],this._bitLength),v[ee]=NE(i[ee],u[ee],this._bitLength),_=Math.max(v[X].length,_),_=Math.max(v[ee].length,_)}var wt=this.jpoint(null,null,null),Yt=this._wnafT4;for(M=_;M>=0;M--){for(var Or=0;M>=0;){var mi=!0;for(C=0;C<o;C++)Yt[C]=0|v[C][M],0!==Yt[C]&&(mi=!1);if(!mi)break;Or++,M--}if(M>=0&&Or++,wt=wt.dblp(Or),M<0)break;for(C=0;C<o;C++){var li=Yt[C];0!==li&&(li>0?N=p[C][li-1>>1]:li<0&&(N=p[C][-li-1>>1].neg()),wt="affine"===N.type?wt.mixedAdd(N):wt.add(N))}}for(M=0;M<o;M++)p[M]=null;return l?wt:wt.toP()},Yd.BasePoint=hl,hl.prototype.eq=function(){throw new Error("Not implemented")},hl.prototype.validate=function(){return this.curve.validate(this)},Yd.prototype.decodePoint=function(e,t){e=wa.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?LE(e[e.length-1]%2==0):7===e[0]&&LE(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},hl.prototype.encodeCompressed=function(e){return this.encode(e,!0)},hl.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},hl.prototype.encode=function(e,t){return wa.encode(this._encode(t),e)},hl.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},hl.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},hl.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],o=this,l=0;l<t;l+=e){for(var u=0;u<e;u++)o=o.dbl();i.push(o)}return{step:e,points:i}},hl.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,o=1===i?null:this.dbl(),l=1;l<i;l++)t[l]=t[l-1].add(o);return{wnd:e,points:t}},hl.prototype._getBeta=function(){return null},hl.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var JD=k0(function(n){n.exports="function"==typeof Object.create?function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,i){if(i){t.super_=i;var o=function(){};o.prototype=i.prototype,t.prototype=new o,t.prototype.constructor=t}}}),mG=wa.assert;function dl(n){om.call(this,"short",n),this.a=new(Nn())(n.a,16).toRed(this.red),this.b=new(Nn())(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}JD(dl,om);var gG=dl;function Cs(n,e,t,i){om.BasePoint.call(this,n,"affine"),null===e&&null===t?(this.x=null,this.y=null,this.inf=!0):(this.x=new(Nn())(e,16),this.y=new(Nn())(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function qs(n,e,t,i){om.BasePoint.call(this,n,"jacobian"),null===e&&null===t&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(Nn())(0)):(this.x=new(Nn())(e,16),this.y=new(Nn())(t,16),this.z=new(Nn())(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}dl.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new(Nn())(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);t=(t=o[0].cmp(o[1])<0?o[0]:o[1]).toRed(this.red)}if(e.lambda)i=new(Nn())(e.lambda,16);else{var l=this._getEndoRoots(this.n);0===this.g.mul(l[0]).x.cmp(this.g.x.redMul(t))?i=l[0]:mG(0===this.g.mul(i=l[1]).x.cmp(this.g.x.redMul(t)))}return{beta:t,lambda:i,basis:e.basis?e.basis.map(function(p){return{a:new(Nn())(p.a,16),b:new(Nn())(p.b,16)}}):this._getEndoBasis(i)}}},dl.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Nn().mont(e),i=new(Nn())(2).toRed(t).redInvm(),o=i.redNeg(),l=new(Nn())(3).toRed(t).redNeg().redSqrt().redMul(i);return[o.redAdd(l).fromRed(),o.redSub(l).fromRed()]},dl.prototype._getEndoBasis=function(e){for(var _,M,C,N,H,X,ee,fe,Ie,t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,o=this.n.clone(),l=new(Nn())(1),u=new(Nn())(0),p=new(Nn())(0),v=new(Nn())(1),ge=0;0!==i.cmpn(0);){var Ee=o.div(i);fe=o.sub(Ee.mul(i)),Ie=p.sub(Ee.mul(l));var st=v.sub(Ee.mul(u));if(!C&&fe.cmp(t)<0)_=ee.neg(),M=l,C=fe.neg(),N=Ie;else if(C&&2==++ge)break;ee=fe,o=i,i=fe,p=l,l=Ie,v=u,u=st}H=fe.neg(),X=Ie;var wt=C.sqr().add(N.sqr());return H.sqr().add(X.sqr()).cmp(wt)>=0&&(H=_,X=M),C.negative&&(C=C.neg(),N=N.neg()),H.negative&&(H=H.neg(),X=X.neg()),[{a:C,b:N},{a:H,b:X}]},dl.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],o=t[1],l=o.b.mul(e).divRound(this.n),u=i.b.neg().mul(e).divRound(this.n),p=l.mul(i.a),v=u.mul(o.a),_=l.mul(i.b),M=u.mul(o.b);return{k1:e.sub(p).sub(v),k2:_.add(M).neg()}},dl.prototype.pointFromX=function(e,t){(e=new(Nn())(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=i.redSqrt();if(0!==o.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var l=o.fromRed().isOdd();return(t&&!l||!t&&l)&&(o=o.redNeg()),this.point(e,o)},dl.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,o=this.a.redMul(t),l=t.redSqr().redMul(t).redIAdd(o).redIAdd(this.b);return 0===i.redSqr().redISub(l).cmpn(0)},dl.prototype._endoWnafMulAdd=function(e,t,i){for(var o=this._endoWnafT1,l=this._endoWnafT2,u=0;u<e.length;u++){var p=this._endoSplit(t[u]),v=e[u],_=v._getBeta();p.k1.negative&&(p.k1.ineg(),v=v.neg(!0)),p.k2.negative&&(p.k2.ineg(),_=_.neg(!0)),o[2*u]=v,o[2*u+1]=_,l[2*u]=p.k1,l[2*u+1]=p.k2}for(var M=this._wnafMulAdd(1,o,l,2*u,i),C=0;C<2*u;C++)o[C]=null,l[C]=null;return M},JD(Cs,om.BasePoint),dl.prototype.point=function(e,t,i){return new Cs(this,e,t,i)},dl.prototype.pointFromJSON=function(e,t){return Cs.fromJSON(this,e,t)},Cs.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,o=function(l){return i.point(l.x.redMul(i.endo.beta),l.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return t}},Cs.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Cs.fromJSON=function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var o=e.point(t[0],t[1],i);if(!t[2])return o;function l(p){return e.point(p[0],p[1],i)}var u=t[2];return o.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[o].concat(u.doubles.points.map(l))},naf:u.naf&&{wnd:u.naf.wnd,points:[o].concat(u.naf.points.map(l))}},o},Cs.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Cs.prototype.isInfinity=function(){return this.inf},Cs.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),o=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)},Cs.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),o=e.redInvm(),l=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(o),u=l.redSqr().redISub(this.x.redAdd(this.x)),p=l.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,p)},Cs.prototype.getX=function(){return this.x.fromRed()},Cs.prototype.getY=function(){return this.y.fromRed()},Cs.prototype.mul=function(e){return e=new(Nn())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Cs.prototype.mulAdd=function(e,t,i){var o=[this,t],l=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,l):this.curve._wnafMulAdd(1,o,l,2)},Cs.prototype.jmulAdd=function(e,t,i){var o=[this,t],l=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,l,!0):this.curve._wnafMulAdd(1,o,l,2,!0)},Cs.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Cs.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,o=function(l){return l.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(o)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(o)}}}return t},Cs.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},JD(qs,om.BasePoint),dl.prototype.jpoint=function(e,t,i){return new qs(this,e,t,i)},qs.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),o=this.y.redMul(t).redMul(e);return this.curve.point(i,o)},qs.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},qs.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),o=this.x.redMul(t),l=e.x.redMul(i),u=this.y.redMul(t.redMul(e.z)),p=e.y.redMul(i.redMul(this.z)),v=o.redSub(l),_=u.redSub(p);if(0===v.cmpn(0))return 0!==_.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var M=v.redSqr(),C=M.redMul(v),N=o.redMul(M),H=_.redSqr().redIAdd(C).redISub(N).redISub(N),X=_.redMul(N.redISub(H)).redISub(u.redMul(C)),ee=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(H,X,ee)},qs.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,o=e.x.redMul(t),l=this.y,u=e.y.redMul(t).redMul(this.z),p=i.redSub(o),v=l.redSub(u);if(0===p.cmpn(0))return 0!==v.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var _=p.redSqr(),M=_.redMul(p),C=i.redMul(_),N=v.redSqr().redIAdd(M).redISub(C).redISub(C),H=v.redMul(C.redISub(N)).redISub(l.redMul(M)),X=this.z.redMul(p);return this.curve.jpoint(N,H,X)},qs.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var o=this.curve.a,l=this.curve.tinv,u=this.x,p=this.y,v=this.z,_=v.redSqr().redSqr(),M=p.redAdd(p);for(t=0;t<e;t++){var C=u.redSqr(),N=M.redSqr(),H=N.redSqr(),X=C.redAdd(C).redIAdd(C).redIAdd(o.redMul(_)),ee=u.redMul(N),ge=X.redSqr().redISub(ee.redAdd(ee)),fe=ee.redISub(ge),Ie=X.redMul(fe);Ie=Ie.redIAdd(Ie).redISub(H);var Ee=M.redMul(v);t+1<e&&(_=_.redMul(H)),u=ge,v=Ee,M=Ie}return this.curve.jpoint(u,M.redMul(l),v)},qs.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},qs.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var o=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),p=this.x.redAdd(l).redSqr().redISub(o).redISub(u);p=p.redIAdd(p);var v=o.redAdd(o).redIAdd(o),_=v.redSqr().redISub(p).redISub(p),M=u.redIAdd(u);M=(M=M.redIAdd(M)).redIAdd(M),e=_,t=v.redMul(p.redISub(_)).redISub(M),i=this.y.redAdd(this.y)}else{var C=this.x.redSqr(),N=this.y.redSqr(),H=N.redSqr(),X=this.x.redAdd(N).redSqr().redISub(C).redISub(H);X=X.redIAdd(X);var ee=C.redAdd(C).redIAdd(C),ge=ee.redSqr(),fe=H.redIAdd(H);fe=(fe=fe.redIAdd(fe)).redIAdd(fe),e=ge.redISub(X).redISub(X),t=ee.redMul(X.redISub(e)).redISub(fe),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},qs.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var o=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),p=this.x.redAdd(l).redSqr().redISub(o).redISub(u);p=p.redIAdd(p);var v=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),_=v.redSqr().redISub(p).redISub(p);e=_;var M=u.redIAdd(u);M=(M=M.redIAdd(M)).redIAdd(M),t=v.redMul(p.redISub(_)).redISub(M),i=this.y.redAdd(this.y)}else{var C=this.z.redSqr(),N=this.y.redSqr(),H=this.x.redMul(N),X=this.x.redSub(C).redMul(this.x.redAdd(C));X=X.redAdd(X).redIAdd(X);var ee=H.redIAdd(H),ge=(ee=ee.redIAdd(ee)).redAdd(ee);e=X.redSqr().redISub(ge),i=this.y.redAdd(this.z).redSqr().redISub(N).redISub(C);var fe=N.redSqr();fe=(fe=(fe=fe.redIAdd(fe)).redIAdd(fe)).redIAdd(fe),t=X.redMul(ee.redISub(e)).redISub(fe)}return this.curve.jpoint(e,t,i)},qs.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,o=this.z,l=o.redSqr().redSqr(),u=t.redSqr(),p=i.redSqr(),v=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(l)),_=t.redAdd(t),M=(_=_.redIAdd(_)).redMul(p),C=v.redSqr().redISub(M.redAdd(M)),N=M.redISub(C),H=p.redSqr();H=(H=(H=H.redIAdd(H)).redIAdd(H)).redIAdd(H);var X=v.redMul(N).redISub(H),ee=i.redAdd(i).redMul(o);return this.curve.jpoint(C,X,ee)},qs.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),o=t.redSqr(),l=e.redAdd(e).redIAdd(e),u=l.redSqr(),p=this.x.redAdd(t).redSqr().redISub(e).redISub(o),v=(p=(p=(p=p.redIAdd(p)).redAdd(p).redIAdd(p)).redISub(u)).redSqr(),_=o.redIAdd(o);_=(_=(_=_.redIAdd(_)).redIAdd(_)).redIAdd(_);var M=l.redIAdd(p).redSqr().redISub(u).redISub(v).redISub(_),C=t.redMul(M);C=(C=C.redIAdd(C)).redIAdd(C);var N=this.x.redMul(v).redISub(C);N=(N=N.redIAdd(N)).redIAdd(N);var H=this.y.redMul(M.redMul(_.redISub(M)).redISub(p.redMul(v)));H=(H=(H=H.redIAdd(H)).redIAdd(H)).redIAdd(H);var X=this.z.redAdd(p).redSqr().redISub(i).redISub(v);return this.curve.jpoint(N,H,X)},qs.prototype.mul=function(e,t){return e=new(Nn())(e,t),this.curve._wnafMul(this,e)},qs.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var o=t.redMul(this.z),l=i.redMul(e.z);return 0===this.y.redMul(l).redISub(e.y.redMul(o)).cmpn(0)},qs.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var o=e.clone(),l=this.curve.redN.redMul(t);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(l),0===this.x.cmp(i))return!0}},qs.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},qs.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var OE=k0(function(n,e){var t=e;t.base=om,t.short=gG,t.mont=null,t.edwards=null}),FE=k0(function(n,e){var u,t=e,i=wa.assert;function o(p){this.curve="short"===p.type?new OE.short(p):"edwards"===p.type?new OE.edwards(p):new OE.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(p,v){Object.defineProperty(t,p,{configurable:!0,enumerable:!0,get:function(){var _=new o(v);return Object.defineProperty(t,p,{configurable:!0,enumerable:!0,value:_}),_}})}t.PresetCurve=o,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Kc().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Kc().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Kc().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Kc().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Kc().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Kc().sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Kc().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{u=null.crash()}catch{u=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Kc().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})});function Zd(n){if(!(this instanceof Zd))return new Zd(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=rc.toArray(n.entropy,n.entropyEnc||"hex"),t=rc.toArray(n.nonce,n.nonceEnc||"hex"),i=rc.toArray(n.pers,n.persEnc||"hex");ZD(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var KL=Zd;Zd.prototype._init=function(e,t,i){var o=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656},Zd.prototype._hmac=function(){return new(Kc().hmac)(this.hash,this.K)},Zd.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Zd.prototype.reseed=function(e,t,i,o){"string"!=typeof t&&(o=i,i=t,t=null),e=rc.toArray(e,t),i=rc.toArray(i,o),ZD(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},Zd.prototype.generate=function(e,t,i,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(o=i,i=t,t=null),i&&(i=rc.toArray(i,o||"hex"),this._update(i));for(var l=[];l.length<e;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var u=l.slice(0,e);return this._update(i),this._reseed++,rc.encode(u,t)};var QD=wa.assert;function co(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var eR=co;co.fromPublic=function(e,t,i){return t instanceof co?t:new co(e,{pub:t,pubEnc:i})},co.fromPrivate=function(e,t,i){return t instanceof co?t:new co(e,{priv:t,privEnc:i})},co.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},co.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},co.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},co.prototype._importPrivate=function(e,t){this.priv=new(Nn())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},co.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?QD(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&QD(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},co.prototype.derive=function(e){return e.validate()||QD(e.validate(),"public point not validated"),e.mul(this.priv).getX()},co.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},co.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},co.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var vG=wa.assert;function BE(n,e){if(n instanceof BE)return n;this._importDER(n,e)||(vG(n.r&&n.s,"Signature without r or s"),this.r=new(Nn())(n.r,16),this.s=new(Nn())(n.s,16),this.recoveryParam=void 0===n.recoveryParam?null:n.recoveryParam)}var VE=BE;function yG(){this.place=0}function tR(n,e){var t=n[e.place++];if(!(128&t))return t;var i=15&t;if(0===i||i>4)return!1;for(var o=0,l=0,u=e.place;l<i;l++,u++)o<<=8,o|=n[u],o>>>=0;return!(o<=127)&&(e.place=u,o)}function YL(n){for(var e=0,t=n.length-1;!n[e]&&!(128&n[e+1])&&e<t;)e++;return 0===e?n:n.slice(e)}function nR(n,e){if(e<128)n.push(e);else{var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(128|t);--t;)n.push(e>>>(t<<3)&255);n.push(e)}}BE.prototype._importDER=function(e,t){e=wa.toArray(e,t);var i=new yG;if(48!==e[i.place++])return!1;var o=tR(e,i);if(!1===o||o+i.place!==e.length||2!==e[i.place++])return!1;var l=tR(e,i);if(!1===l)return!1;var u=e.slice(i.place,l+i.place);if(i.place+=l,2!==e[i.place++])return!1;var p=tR(e,i);if(!1===p||e.length!==p+i.place)return!1;var v=e.slice(i.place,p+i.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===v[0]){if(!(128&v[1]))return!1;v=v.slice(1)}return this.r=new(Nn())(u),this.s=new(Nn())(v),this.recoveryParam=null,!0},BE.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&i[0]&&(i=[0].concat(i)),t=YL(t),i=YL(i);!(i[0]||128&i[1]);)i=i.slice(1);var o=[2];nR(o,t.length),(o=o.concat(t)).push(2),nR(o,i.length);var l=o.concat(i),u=[48];return nR(u,l.length),u=u.concat(l),wa.encode(u,e)};var _G=function(){throw new Error("unsupported")},ZL=wa.assert;function fl(n){if(!(this instanceof fl))return new fl(n);"string"==typeof n&&(ZL(Object.prototype.hasOwnProperty.call(FE,n),"Unknown curve "+n),n=FE[n]),n instanceof FE.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var bG=fl;fl.prototype.keyPair=function(e){return new eR(this,e)},fl.prototype.keyFromPrivate=function(e,t){return eR.fromPrivate(this,e,t)},fl.prototype.keyFromPublic=function(e,t){return eR.fromPublic(this,e,t)},fl.prototype.genKeyPair=function(e){e||(e={});for(var t=new KL({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||_G(),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new(Nn())(2));;){var l=new(Nn())(t.generate(i));if(!(l.cmp(o)>0))return l.iaddn(1),this.keyFromPrivate(l)}},fl.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},fl.prototype.sign=function(e,t,i,o){"object"==typeof i&&(o=i,i=null),o||(o={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new(Nn())(e,16));for(var l=this.n.byteLength(),u=t.getPrivate().toArray("be",l),p=e.toArray("be",l),v=new KL({hash:this.hash,entropy:u,nonce:p,pers:o.pers,persEnc:o.persEnc||"utf8"}),_=this.n.sub(new(Nn())(1)),M=0;;M++){var C=o.k?o.k(M):new(Nn())(v.generate(this.n.byteLength()));if(!((C=this._truncateToN(C,!0)).cmpn(1)<=0||C.cmp(_)>=0)){var N=this.g.mul(C);if(!N.isInfinity()){var H=N.getX(),X=H.umod(this.n);if(0!==X.cmpn(0)){var ee=C.invm(this.n).mul(X.mul(t.getPrivate()).iadd(e));if(0!==(ee=ee.umod(this.n)).cmpn(0)){var ge=(N.getY().isOdd()?1:0)|(0!==H.cmp(X)?2:0);return o.canonical&&ee.cmp(this.nh)>0&&(ee=this.n.sub(ee),ge^=1),new VE({r:X,s:ee,recoveryParam:ge})}}}}}},fl.prototype.verify=function(e,t,i,o){e=this._truncateToN(new(Nn())(e,16)),i=this.keyFromPublic(i,o);var l=(t=new VE(t,"hex")).r,u=t.s;if(l.cmpn(1)<0||l.cmp(this.n)>=0||u.cmpn(1)<0||u.cmp(this.n)>=0)return!1;var M,p=u.invm(this.n),v=p.mul(e).umod(this.n),_=p.mul(l).umod(this.n);return this.curve._maxwellTrick?!(M=this.g.jmulAdd(v,i.getPublic(),_)).isInfinity()&&M.eqXToP(l):!(M=this.g.mulAdd(v,i.getPublic(),_)).isInfinity()&&0===M.getX().umod(this.n).cmp(l)},fl.prototype.recoverPubKey=function(n,e,t,i){ZL((3&t)===t,"The recovery param is more than two bits"),e=new VE(e,i);var o=this.n,l=new(Nn())(n),u=e.r,p=e.s,v=1&t,_=t>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&_)throw new Error("Unable to find sencond key candinate");u=this.curve.pointFromX(_?u.add(this.curve.n):u,v);var M=e.r.invm(o),C=o.sub(l).mul(M).umod(o),N=p.mul(M).umod(o);return this.g.mulAdd(C,u,N)},fl.prototype.getKeyRecoveryParam=function(n,e,t,i){if(null!==(e=new VE(e,i)).recoveryParam)return e.recoveryParam;for(var o=0;o<4;o++){var l;try{l=this.recoverPubKey(n,e,o)}catch{continue}if(l.eq(t))return o}throw new Error("Unable to find valid recovery factor")};var xG=k0(function(n,e){var t=e;t.version="6.5.4",t.utils=wa,t.rand=function(){throw new Error("unsupported")},t.curve=OE,t.curves=FE,t.ec=bG,t.eddsa=null}).ec;const rR=new Fe("signing-key/5.7.0");let iR=null;function Yc(){return iR||(iR=new xG("secp256k1")),iR}class EG{constructor(e){gt(this,"curve","secp256k1"),gt(this,"privateKey",Xt(e)),32!==im(this.privateKey)&&rR.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Yc().keyFromPrivate(ln(this.privateKey));gt(this,"publicKey","0x"+t.getPublic(!1,"hex")),gt(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),gt(this,"_isSigningKey",!0)}_addPoint(e){const t=Yc().keyFromPublic(ln(this.publicKey)),i=Yc().keyFromPublic(ln(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const t=Yc().keyFromPrivate(ln(this.privateKey)),i=ln(e);32!==i.length&&rR.throwArgumentError("bad digest length","digest",e);const o=t.sign(i,{canonical:!0});return gb({recoveryParam:o.recoveryParam,r:Ni("0x"+o.r.toString(16),32),s:Ni("0x"+o.s.toString(16),32)})}computeSharedSecret(e){const t=Yc().keyFromPrivate(ln(this.privateKey)),i=Yc().keyFromPublic(ln(JL(e)));return Ni("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function JL(n,e){const t=ln(n);if(32===t.length){const i=new EG(t);return e?"0x"+Yc().keyFromPrivate(t).getPublic(!0,"hex"):i.publicKey}return 33===t.length?e?Xt(t):"0x"+Yc().keyFromPublic(t).getPublic(!1,"hex"):65===t.length?e?"0x"+Yc().keyFromPublic(t).getPublic(!0,"hex"):Xt(t):rR.throwArgumentError("invalid public or private key","key","[REDACTED]")}const uo=new Fe("transactions/5.7.0");function sR(n){return"0x"===n?null:Gi(n)}function ho(n){return"0x"===n?UL:It.from(n)}function QL(n,e){return function DG(n){return Gi(lo(fs(lo(JL(n),1)),12))}(function SG(n,e){const t=gb(e),i={r:ln(t.r),s:ln(t.s)};return"0x"+Yc().recoverPubKey(ln(n),i,t.recoveryParam).encode("hex",!1)}(ln(n),e))}function xa(n,e){const t=T0(It.from(n).toHexString());return t.length>32&&uo.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function oR(n,e){return{address:Gi(n),storageKeys:(e||[]).map((t,i)=>(32!==im(t)&&uo.throwArgumentError("invalid access list storageKey",`accessList[${n}:${i}]`,t),t.toLowerCase()))}}function N0(n){if(Array.isArray(n))return n.map((t,i)=>Array.isArray(t)?(t.length>2&&uo.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${i}]`,t),oR(t[0],t[1])):oR(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const i=n[t].reduce((o,l)=>(o[l]=!0,o),{});return oR(t,Object.keys(i).sort())});return e.sort((t,i)=>t.address.localeCompare(i.address)),e}function eO(n){return N0(n).map(e=>[e.address,e.storageKeys])}function tO(n,e){if(null!=n.gasPrice){const i=It.from(n.gasPrice),o=It.from(n.maxFeePerGas||0);i.eq(o)||uo.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:i,maxFeePerGas:o})}const t=[xa(n.chainId||0,"chainId"),xa(n.nonce||0,"nonce"),xa(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xa(n.maxFeePerGas||0,"maxFeePerGas"),xa(n.gasLimit||0,"gasLimit"),null!=n.to?Gi(n.to):"0x",xa(n.value||0,"value"),n.data||"0x",eO(n.accessList||[])];if(e){const i=gb(e);t.push(xa(i.recoveryParam,"recoveryParam")),t.push(T0(i.r)),t.push(T0(i.s))}return Wo(["0x02",TE(t)])}function nO(n,e){const t=[xa(n.chainId||0,"chainId"),xa(n.nonce||0,"nonce"),xa(n.gasPrice||0,"gasPrice"),xa(n.gasLimit||0,"gasLimit"),null!=n.to?Gi(n.to):"0x",xa(n.value||0,"value"),n.data||"0x",eO(n.accessList||[])];if(e){const i=gb(e);t.push(xa(i.recoveryParam,"recoveryParam")),t.push(T0(i.r)),t.push(T0(i.s))}return Wo(["0x01",TE(t)])}function rO(n,e,t){try{const i=ho(e[0]).toNumber();if(0!==i&&1!==i)throw new Error("bad recid");n.v=i}catch{uo.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Ni(e[1],32),n.s=Ni(e[2],32);try{const i=fs(t(n));n.from=QL(i,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}var Jd=function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})};const ri=new Fe("contracts/5.7.0");function UE(n,e){return Jd(this,void 0,void 0,function*(){const t=yield e;"string"!=typeof t&&ri.throwArgumentError("invalid address or ENS name","name",t);try{return Gi(t)}catch{}n||ri.throwError("a provider or signer is needed to resolve ENS names",Fe.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const i=yield n.resolveName(t);return null==i&&ri.throwArgumentError("resolver or addr is not configured for ENS name","name",t),i})}function Ab(n,e,t){return Jd(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((i,o)=>Ab(n,Array.isArray(e)?e[o]:e[i.name],i))):"address"===t.type?yield UE(n,e):"tuple"===t.type?yield Ab(n,e,t.components):"array"===t.baseType?Array.isArray(e)?yield Promise.all(e.map(i=>Ab(n,i,t.arrayChildren))):Promise.reject(ri.makeError("invalid value for array",Fe.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function HE(n,e,t){return Jd(this,void 0,void 0,function*(){let i={};t.length===e.inputs.length+1&&"object"==typeof t[t.length-1]&&(i=ds(t.pop())),ri.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?i.from=i.from?ns({override:UE(n.signer,i.from),signer:n.signer.getAddress()}).then(_=>Jd(this,void 0,void 0,function*(){return Gi(_.signer)!==_.override&&ri.throwError("Contract with a Signer cannot override from",Fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),_.override})):n.signer.getAddress():i.from&&(i.from=UE(n.provider,i.from));const o=yield ns({args:Ab(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:ns(i)||{}}),l=n.interface.encodeFunctionData(e,o.args),u={data:l,to:o.address},p=o.overrides;if(null!=p.nonce&&(u.nonce=It.from(p.nonce).toNumber()),null!=p.gasLimit&&(u.gasLimit=It.from(p.gasLimit)),null!=p.gasPrice&&(u.gasPrice=It.from(p.gasPrice)),null!=p.maxFeePerGas&&(u.maxFeePerGas=It.from(p.maxFeePerGas)),null!=p.maxPriorityFeePerGas&&(u.maxPriorityFeePerGas=It.from(p.maxPriorityFeePerGas)),null!=p.from&&(u.from=p.from),null!=p.type&&(u.type=p.type),null!=p.accessList&&(u.accessList=N0(p.accessList)),null==u.gasLimit&&null!=e.gas){let _=21e3;const M=ln(l);for(let C=0;C<M.length;C++)_+=4,M[C]&&(_+=64);u.gasLimit=It.from(e.gas).add(_)}if(p.value){const _=It.from(p.value);!_.isZero()&&!e.payable&&ri.throwError("non-payable method cannot override value",Fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:i.value}),u.value=_}p.customData&&(u.customData=ds(p.customData)),p.ccipReadEnabled&&(u.ccipReadEnabled=!!p.ccipReadEnabled),delete i.nonce,delete i.gasLimit,delete i.gasPrice,delete i.from,delete i.value,delete i.type,delete i.accessList,delete i.maxFeePerGas,delete i.maxPriorityFeePerGas,delete i.customData,delete i.ccipReadEnabled;const v=Object.keys(i).filter(_=>null!=i[_]);return v.length&&ri.throwError(`cannot override ${v.map(_=>JSON.stringify(_)).join(",")}`,Fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:v}),u})}function sO(n,e,t){const i=n.signer||n.provider;return function(...o){return Jd(this,void 0,void 0,function*(){let l;if(o.length===e.inputs.length+1&&"object"==typeof o[o.length-1]){const v=ds(o.pop());null!=v.blockTag&&(l=yield v.blockTag),delete v.blockTag,o.push(v)}null!=n.deployTransaction&&(yield n._deployed(l));const u=yield HE(n,e,o),p=yield i.call(u,l);try{let v=n.interface.decodeFunctionResult(e,p);return t&&1===e.outputs.length&&(v=v[0]),v}catch(v){throw v.code===Fe.errors.CALL_EXCEPTION&&(v.address=n.address,v.args=o,v.transaction=u),v}})}}function oO(n,e,t){return e.constant?sO(n,e,t):function VG(n,e){return function(...t){return Jd(this,void 0,void 0,function*(){n.signer||ri.throwError("sending a transaction requires a signer",Fe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=n.deployTransaction&&(yield n._deployed());const i=yield HE(n,e,t),o=yield n.signer.sendTransaction(i);return function iO(n,e){const t=e.wait.bind(e);e.wait=i=>t(i).then(o=>(o.events=o.logs.map(l=>{let u=wh(l),p=null;try{p=n.interface.parseLog(l)}catch{}return p&&(u.args=p.args,u.decode=(v,_)=>n.interface.decodeEventLog(p.eventFragment,v,_),u.event=p.name,u.eventSignature=p.signature),u.removeListener=()=>n.provider,u.getBlock=()=>n.provider.getBlock(o.blockHash),u.getTransaction=()=>n.provider.getTransaction(o.transactionHash),u.getTransactionReceipt=()=>Promise.resolve(o),u}),o))}(n,o),o})}}(n,e)}function aO(n){return!n.address||null!=n.topics&&0!==n.topics.length?(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):""):"*"}class Tb{constructor(e,t){gt(this,"tag",e),gt(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(i=>!(!t&&i.listener===e&&(t=!0,1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(i=>{const o=e.slice();return setTimeout(()=>{i.listener.apply(this,o)},0),!i.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class UG extends Tb{constructor(){super("error",null)}}class lO extends Tb{constructor(e,t,i,o){const l={address:e};let u=t.getEventTopic(i);o?(u!==o[0]&&ri.throwArgumentError("topic mismatch","topics",o),l.topics=o.slice()):l.topics=[u],super(aO(l),l),gt(this,"address",e),gt(this,"interface",t),gt(this,"fragment",i)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,i)=>this.interface.decodeEventLog(this.fragment,t,i);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=function x7(n){const e=[],t=function(i,o){if(Array.isArray(o))for(let l in o){const u=i.slice();u.push(l);try{t(u,o[l])}catch(p){e.push({path:u,error:p})}}};return t([],n),e}(e.args);if(t.length)throw t[0].error;const i=(e.args||[]).slice();return i.push(e),i}}class cO extends Tb{constructor(e,t){super("*",{address:e}),gt(this,"address",e),gt(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(i,o)=>this.interface.decodeEventLog(t.eventFragment,i,o),e.args=t.args}catch{}}}class aR extends class HG{constructor(e,t,i){gt(this,"interface",Gc(new.target,"getInterface")(t)),null==i?(gt(this,"provider",null),gt(this,"signer",null)):Cb.isSigner(i)?(gt(this,"provider",i.provider||null),gt(this,"signer",i)):kE.isProvider(i)?(gt(this,"provider",i),gt(this,"signer",null)):ri.throwArgumentError("invalid signer or provider","signerOrProvider",i),gt(this,"callStatic",{}),gt(this,"estimateGas",{}),gt(this,"functions",{}),gt(this,"populateTransaction",{}),gt(this,"filters",{});{const u={};Object.keys(this.interface.events).forEach(p=>{const v=this.interface.events[p];gt(this.filters,p,(..._)=>({address:this.address,topics:this.interface.encodeFilterTopics(v,_)})),u[v.name]||(u[v.name]=[]),u[v.name].push(p)}),Object.keys(u).forEach(p=>{const v=u[p];1===v.length?gt(this.filters,p,this.filters[v[0]]):ri.warn(`Duplicate definition of ${p} (${v.join(", ")})`)})}if(gt(this,"_runningEvents",{}),gt(this,"_wrappedEmits",{}),null==e&&ri.throwArgumentError("invalid contract address or ENS name","addressOrName",e),gt(this,"address",e),this.provider)gt(this,"resolvedAddress",UE(this.provider,e));else try{gt(this,"resolvedAddress",Promise.resolve(Gi(e)))}catch{ri.throwError("provider is required to use ENS name as contract address",Fe.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(u=>{});const o={},l={};Object.keys(this.interface.functions).forEach(u=>{const p=this.interface.functions[u];if(l[u])ri.warn(`Duplicate ABI entry for ${JSON.stringify(u)}`);else{l[u]=!0;{const v=p.name;o[`%${v}`]||(o[`%${v}`]=[]),o[`%${v}`].push(u)}null==this[u]&&gt(this,u,oO(this,p,!0)),null==this.functions[u]&&gt(this.functions,u,oO(this,p,!1)),null==this.callStatic[u]&&gt(this.callStatic,u,sO(this,p,!0)),null==this.populateTransaction[u]&&gt(this.populateTransaction,u,function FG(n,e){return function(...t){return HE(n,e,t)}}(this,p)),null==this.estimateGas[u]&&gt(this.estimateGas,u,function BG(n,e){const t=n.signer||n.provider;return function(...i){return Jd(this,void 0,void 0,function*(){t||ri.throwError("estimate require a provider or signer",Fe.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const o=yield HE(n,e,i);return yield t.estimateGas(o)})}}(this,p))}}),Object.keys(o).forEach(u=>{const p=o[u];if(p.length>1)return;u=u.substring(1);const v=p[0];try{null==this[u]&&gt(this,u,this[v])}catch{}null==this.functions[u]&&gt(this.functions,u,this.functions[v]),null==this.callStatic[u]&&gt(this.callStatic,u,this.callStatic[v]),null==this.populateTransaction[u]&&gt(this.populateTransaction,u,this.populateTransaction[v]),null==this.estimateGas[u]&&gt(this.estimateGas,u,this.estimateGas[v])})}static getContractAddress(e){return NL(e)}static getInterface(e){return $L.isInterface(e)?e:new $L(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this._deployedPromise=this.deployTransaction?this.deployTransaction.wait().then(()=>this):this.provider.getCode(this.address,e).then(t=>("0x"===t&&ri.throwError("contract not deployed",Fe.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||ri.throwError("sending a transactions require a signer",Fe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=ds(e||{});return["from","to"].forEach(function(i){null!=t[i]&&ri.throwError("cannot override "+i,Fe.errors.UNSUPPORTED_OPERATION,{operation:i})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){"string"==typeof e&&(e=new YD(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&gt(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return KD.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new UG);if("event"===e)return this._normalizeRunningEvent(new Tb("event",null));if("*"===e)return this._normalizeRunningEvent(new cO(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new lO(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const i=e.topics[0];if("string"!=typeof i)throw new Error("invalid topic");const o=this.interface.getEvent(i);return this._normalizeRunningEvent(new lO(this.address,this.interface,o,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Tb(aO(t),t))}return this._normalizeRunningEvent(new cO(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,i){const o=wh(t);return o.removeListener=()=>{!i||(e.removeListener(i),this._checkRunningEvents(e))},o.getBlock=()=>this.provider.getBlock(t.blockHash),o.getTransaction=()=>this.provider.getTransaction(t.transactionHash),o.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(o),o}_addEventListener(e,t,i){if(this.provider||ri.throwError("events require a provider or a signer with a provider",Fe.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,i),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const o=l=>{let u=this._wrapEvent(e,l,t);if(null==u.decodeError)try{const p=e.getEmit(u);this.emit(e.filter,...p)}catch(p){u.decodeError=p.error}null!=e.filter&&this.emit("event",u),null!=u.decodeError&&this.emit("error",u.decodeError,u)};this._wrappedEmits[e.tag]=o,null!=e.filter&&this.provider.on(e.filter,o)}}queryFilter(e,t,i){const o=this._getRunningEvent(e),l=ds(o.filter);return"string"==typeof t&&Lr(t,32)?(null!=i&&ri.throwArgumentError("cannot specify toBlock with blockhash","toBlock",i),l.blockHash=t):(l.fromBlock=t??0,l.toBlock=i??"latest"),this.provider.getLogs(l).then(u=>u.map(p=>this._wrapEvent(o,p,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const i=this._getRunningEvent(e),o=i.run(t)>0;return this._checkRunningEvents(i),o}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce((t,i)=>t+this._runningEvents[i].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const t=[];for(let i in this._runningEvents)this._runningEvents[i].listeners().forEach(o=>{t.push(o)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const i in this._runningEvents){const o=this._runningEvents[i];o.removeAllListeners(),this._checkRunningEvents(o)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const i=this._getRunningEvent(e);return i.removeListener(t),this._checkRunningEvents(i),this}removeListener(e,t){return this.off(e,t)}}{}const zE="providers/5.7.2",uO="hash/5.7.0";const Mi=new Fe(uO),hO=new Uint8Array(32);hO.fill(0);const jG=It.from(-1),dO=It.from(0),fO=It.from(1),GG=It.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),qG=Ni(fO.toHexString(),32),$G=Ni(dO.toHexString(),32),pO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},lR=["name","version","chainId","verifyingContract","salt"];function mO(n){return function(e){return"string"!=typeof e&&Mi.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const XG={name:mO("name"),version:mO("version"),chainId:function(n){try{return It.from(n).toString()}catch{}return Mi.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return Gi(n).toLowerCase()}catch{}return Mi.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=ln(n);if(32!==e.length)throw new Error("bad length");return Xt(e)}catch{}return Mi.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function cR(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=""===e[1],i=parseInt(e[2]||"256");(i%8!=0||i>256||e[2]&&e[2]!==String(i))&&Mi.throwArgumentError("invalid numeric width","type",n);const o=GG.mask(t?i-1:i),l=t?o.add(fO).mul(jG):dO;return function(u){const p=It.from(u);return(p.lt(l)||p.gt(o))&&Mi.throwArgumentError(`value out-of-bounds for ${n}`,"value",u),Ni(p.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(0===t||t>32||e[1]!==String(t))&&Mi.throwArgumentError("invalid bytes width","type",n),function(i){return ln(i).length!==t&&Mi.throwArgumentError(`invalid length for ${n}`,"value",i),function WG(n){const e=ln(n),t=e.length%32;return t?Wo([e,hO.slice(t)]):Xt(e)}(i)}}}switch(n){case"address":return function(e){return Ni(Gi(e),32)};case"bool":return function(e){return e?qG:$G};case"bytes":return function(e){return fs(e)};case"string":return function(e){return R0(e)}}return null}function gO(n,e){return`${n}(${e.map(({name:t,type:i})=>i+" "+t).join(",")})`}class Ma{constructor(e){gt(this,"types",Object.freeze(wh(e))),gt(this,"_encoderCache",{}),gt(this,"_types",{});const t={},i={},o={};Object.keys(e).forEach(p=>{t[p]={},i[p]=[],o[p]={}});for(const p in e){const v={};e[p].forEach(_=>{v[_.name]&&Mi.throwArgumentError(`duplicate variable name ${JSON.stringify(_.name)} in ${JSON.stringify(p)}`,"types",e),v[_.name]=!0;const M=_.type.match(/^([^\x5b]*)(\x5b|$)/)[1];M===p&&Mi.throwArgumentError(`circular type reference to ${JSON.stringify(M)}`,"types",e),!cR(M)&&(i[M]||Mi.throwArgumentError(`unknown type ${JSON.stringify(M)}`,"types",e),i[M].push(p),t[p][M]=!0)})}const l=Object.keys(i).filter(p=>0===i[p].length);0===l.length?Mi.throwArgumentError("missing primary type","types",e):l.length>1&&Mi.throwArgumentError(`ambiguous primary types or unused types: ${l.map(p=>JSON.stringify(p)).join(", ")}`,"types",e),gt(this,"primaryType",l[0]),function u(p,v){v[p]&&Mi.throwArgumentError(`circular type reference to ${JSON.stringify(p)}`,"types",e),v[p]=!0,Object.keys(t[p]).forEach(_=>{!i[_]||(u(_,v),Object.keys(v).forEach(M=>{o[M][_]=!0}))}),delete v[p]}(this.primaryType,{});for(const p in o){const v=Object.keys(o[p]);v.sort(),this._types[p]=gO(p,e[p])+v.map(_=>gO(_,e[_])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const o=cR(e);if(o)return o}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const o=t[1],l=this.getEncoder(o),u=parseInt(t[3]);return p=>{u>=0&&p.length!==u&&Mi.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",p);let v=p.map(l);return this._types[o]&&(v=v.map(fs)),fs(Wo(v))}}const i=this.types[e];if(i){const o=R0(this._types[e]);return l=>{const u=i.map(({name:p,type:v})=>{const _=this.getEncoder(v)(l[p]);return this._types[v]?fs(_):_});return u.unshift(o),Wo(u)}}return Mi.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Mi.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return fs(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,i){if(cR(e))return i(e,t);const o=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(o){const u=o[1],p=parseInt(o[3]);return p>=0&&t.length!==p&&Mi.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(v=>this._visit(u,v,i))}const l=this.types[e];return l?l.reduce((u,{name:p,type:v})=>(u[p]=this._visit(v,t[p],i),u),{}):Mi.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ma(e)}static getPrimaryType(e){return Ma.from(e).primaryType}static hashStruct(e,t,i){return Ma.from(t).hashStruct(e,i)}static hashDomain(e){const t=[];for(const i in e){const o=pO[i];o||Mi.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(i)}`,"domain",e),t.push({name:i,type:o})}return t.sort((i,o)=>lR.indexOf(i.name)-lR.indexOf(o.name)),Ma.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,i){return Wo(["0x1901",Ma.hashDomain(e),Ma.from(t).hash(i)])}static hash(e,t,i){return fs(Ma.encode(e,t,i))}static resolveNames(e,t,i,o){return function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){e=ds(e);const l={};e.verifyingContract&&!Lr(e.verifyingContract,20)&&(l[e.verifyingContract]="0x");const u=Ma.from(t);u.visit(i,(p,v)=>("address"===p&&!Lr(v,20)&&(l[v]="0x"),v));for(const p in l)l[p]=yield o(p);return e.verifyingContract&&l[e.verifyingContract]&&(e.verifyingContract=l[e.verifyingContract]),i=u.visit(i,(p,v)=>"address"===p&&l[v]?l[v]:v),{domain:e,value:i}})}static getPayload(e,t,i){Ma.hashDomain(e);const o={},l=[];lR.forEach(v=>{const _=e[v];null!=_&&(o[v]=XG[v](_),l.push({name:v,type:pO[v]}))});const u=Ma.from(t),p=ds(t);return p.EIP712Domain?Mi.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):p.EIP712Domain=l,u.encode(i),{types:p,domain:o,primaryType:u.primaryType,message:u.visit(i,(v,_)=>{if(v.match(/^bytes(\d*)/))return Xt(ln(_));if(v.match(/^u?int/))return It.from(_).toString();switch(v){case"address":return _.toLowerCase();case"bool":return!!_;case"string":return"string"!=typeof _&&Mi.throwArgumentError("invalid string","value",_),_}return Mi.throwArgumentError("unsupported type","type",v)})}}}function vO(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return ln(e)}function yO(n){n=ln(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}function ZG(n,e){return function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){null==e&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(!0!==e.skipFetchSetup&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),null!=e.fetchOptions){const u=e.fetchOptions;u.mode&&(t.mode=u.mode),u.cache&&(t.cache=u.cache),u.credentials&&(t.credentials=u.credentials),u.redirect&&(t.redirect=u.redirect),u.referrer&&(t.referrer=u.referrer)}const i=yield fetch(n,t),o=yield i.arrayBuffer(),l={};return i.headers.forEach?i.headers.forEach((u,p)=>{l[p.toLowerCase()]=u}):i.headers.keys().forEach(u=>{l[u.toLowerCase()]=i.headers.get(u)}),{headers:l,statusCode:i.status,statusMessage:i.statusText,body:ln(new Uint8Array(o))}})}const ic=new Fe("web/5.7.1");function _O(n){return new Promise(e=>{setTimeout(e,n)})}function Qd(n,e){if(null==n)return null;if("string"==typeof n)return n;if(VD(n)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return wb(n)}catch{}return Xt(n)}return n}function QG(n){return qc(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function uR(n,e,t){let o=null;if(null!=e){o=qc(e);const l="string"==typeof n?{url:n}:ds(n);l.headers?0!==Object.keys(l.headers).filter(p=>"content-type"===p.toLowerCase()).length||(l.headers=ds(l.headers),l.headers["content-type"]="application/json"):l.headers={"content-type":"application/json"},n=l}return function e9(n,e,t){const i="object"==typeof n&&null!=n.throttleLimit?n.throttleLimit:12;ic.assertArgument(i>0&&i%1==0,"invalid connection throttle limit","connection.throttleLimit",i);const o="object"==typeof n?n.throttleCallback:null,l="object"==typeof n&&"number"==typeof n.throttleSlotInterval?n.throttleSlotInterval:100;ic.assertArgument(l>0&&l%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",l);const u="object"==typeof n&&!!n.errorPassThrough,p={};let v=null;const _={method:"GET"};let M=!1,C=12e4;if("string"==typeof n)v=n;else if("object"==typeof n){if((null==n||null==n.url)&&ic.throwArgumentError("missing URL","connection.url",n),v=n.url,"number"==typeof n.timeout&&n.timeout>0&&(C=n.timeout),n.headers)for(const fe in n.headers)p[fe.toLowerCase()]={key:fe,value:String(n.headers[fe])},["if-none-match","if-modified-since"].indexOf(fe.toLowerCase())>=0&&(M=!0);_.allowGzip=!!n.allowGzip,null!=n.user&&null!=n.password&&("https:"!==v.substring(0,6)&&!0!==n.allowInsecureAuthentication&&ic.throwError("basic authentication requires a secure https url",Fe.errors.INVALID_ARGUMENT,{argument:"url",url:v,user:n.user,password:"[REDACTED]"}),p.authorization={key:"Authorization",value:"Basic "+yO(qc(n.user+":"+n.password))}),null!=n.skipFetchSetup&&(_.skipFetchSetup=!!n.skipFetchSetup),null!=n.fetchOptions&&(_.fetchOptions=ds(n.fetchOptions))}const N=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),H=v?v.match(N):null;if(H)try{const fe={statusCode:200,statusMessage:"OK",headers:{"content-type":H[1]||"text/plain"},body:H[2]?vO(H[3]):QG(H[3])};let Ie=fe.body;return t&&(Ie=t(fe.body,fe)),Promise.resolve(Ie)}catch(fe){ic.throwError("processing response error",Fe.errors.SERVER_ERROR,{body:Qd(H[1],H[2]),error:fe,requestBody:null,requestMethod:"GET",url:v})}e&&(_.method="POST",_.body=e,null==p["content-type"]&&(p["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==p["content-length"]&&(p["content-length"]={key:"Content-Length",value:String(e.length)}));const X={};Object.keys(p).forEach(fe=>{const Ie=p[fe];X[Ie.key]=Ie.value}),_.headers=X;const ee=function(){let fe=null;return{promise:new Promise(function(st,wt){C&&(fe=setTimeout(()=>{null!=fe&&(fe=null,wt(ic.makeError("timeout",Fe.errors.TIMEOUT,{requestBody:Qd(_.body,X["content-type"]),requestMethod:_.method,timeout:C,url:v})))},C))}),cancel:function(){null!=fe&&(clearTimeout(fe),fe=null)}}}(),ge=function(){return function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){for(let fe=0;fe<i;fe++){let Ie=null;try{if(Ie=yield ZG(v,_),fe<i)if(301===Ie.statusCode||302===Ie.statusCode){const st=Ie.headers.location||"";if("GET"===_.method&&st.match(/^https:/)){v=Ie.headers.location;continue}}else if(429===Ie.statusCode){let st=!0;if(o&&(st=yield o(fe,v)),st){let wt=0;const Yt=Ie.headers["retry-after"];wt="string"==typeof Yt&&Yt.match(/^[1-9][0-9]*$/)?1e3*parseInt(Yt):l*parseInt(String(Math.random()*Math.pow(2,fe))),yield _O(wt);continue}}}catch(st){Ie=st.response,null==Ie&&(ee.cancel(),ic.throwError("missing response",Fe.errors.SERVER_ERROR,{requestBody:Qd(_.body,X["content-type"]),requestMethod:_.method,serverError:st,url:v}))}let Ee=Ie.body;if(M&&304===Ie.statusCode?Ee=null:!u&&(Ie.statusCode<200||Ie.statusCode>=300)&&(ee.cancel(),ic.throwError("bad response",Fe.errors.SERVER_ERROR,{status:Ie.statusCode,headers:Ie.headers,body:Qd(Ee,Ie.headers?Ie.headers["content-type"]:null),requestBody:Qd(_.body,X["content-type"]),requestMethod:_.method,url:v})),t)try{const st=yield t(Ee,Ie);return ee.cancel(),st}catch(st){if(st.throttleRetry&&fe<i){let wt=!0;if(o&&(wt=yield o(fe,v)),wt){const Yt=l*parseInt(String(Math.random()*Math.pow(2,fe)));yield _O(Yt);continue}}ee.cancel(),ic.throwError("processing response error",Fe.errors.SERVER_ERROR,{body:Qd(Ee,Ie.headers?Ie.headers["content-type"]:null),error:st,requestBody:Qd(_.body,X["content-type"]),requestMethod:_.method,url:v})}return ee.cancel(),Ee}return ic.throwError("failed response",Fe.errors.SERVER_ERROR,{requestBody:Qd(_.body,X["content-type"]),requestMethod:_.method,url:v})})}();return Promise.race([ee.promise,ge])}(n,o,(l,u)=>{let p=null;if(null!=l)try{p=JSON.parse(wb(l))}catch(v){ic.throwError("invalid JSON",Fe.errors.SERVER_ERROR,{body:l,error:v})}return t&&(p=t(p,u)),p})}function Db(n,e){return e||(e={}),null==(e=ds(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise(function(t,i){let o=null,l=!1;const u=()=>!l&&(l=!0,o&&clearTimeout(o),!0);e.timeout&&(o=setTimeout(()=>{u()&&i(new Error("timeout"))},e.timeout));const p=e.retryLimit;let v=0;!function _(){return n().then(function(M){if(void 0!==M)u()&&t(M);else if(e.oncePoll)e.oncePoll.once("poll",_);else if(e.onceBlock)e.onceBlock.once("block",_);else if(!l){if(v++,v>p)return void(u()&&i(new Error("retry limit reached")));let C=e.interval*parseInt(String(Math.random()*Math.pow(2,v)));C<e.floor&&(C=e.floor),C>e.ceiling&&(C=e.ceiling),setTimeout(_,C)}return null},function(M){u()&&i(M)})}()})}class bO{constructor(e){gt(this,"alphabet",e),gt(this,"base",e.length),gt(this,"_alphabetMap",{}),gt(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=ln(e);if(0===t.length)return"";let i=[0];for(let l=0;l<t.length;++l){let u=t[l];for(let p=0;p<i.length;++p)u+=i[p]<<8,i[p]=u%this.base,u=u/this.base|0;for(;u>0;)i.push(u%this.base),u=u/this.base|0}let o="";for(let l=0;0===t[l]&&l<t.length-1;++l)o+=this._leader;for(let l=i.length-1;l>=0;--l)o+=this.alphabet[i[l]];return o}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let i=0;i<e.length;i++){let o=this._alphabetMap[e[i]];if(void 0===o)throw new Error("Non-base"+this.base+" character");let l=o;for(let u=0;u<t.length;++u)l+=t[u]*this.base,t[u]=255&l,l>>=8;for(;l>0;)t.push(255&l),l>>=8}for(let i=0;e[i]===this._leader&&i<e.length-1;++i)t.push(0);return ln(new Uint8Array(t.reverse()))}}new bO("abcdefghijklmnopqrstuvwxyz234567");const hR=new bO("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function wO(n,e){null==e&&(e=1);const t=[],i=t.forEach,o=function(l,u){i.call(l,function(p){u>0&&Array.isArray(p)?o(p,u-1):t.push(p)})};return o(n,e),t}function o9(n){return 1&n?~n>>1:n>>1}function xO(n,e){let t=Array(n);for(let i=0,o=-1;i<n;i++)t[i]=o+=1+e();return t}function l9(n,e){let t=Array(n);for(let i=0,o=0;i<n;i++)t[i]=o+=o9(e());return t}function jE(n,e){let t=xO(n(),n),i=n(),o=xO(i,n),l=function a9(n,e){let t=Array(n);for(let i=0;i<n;i++)t[i]=1+e();return t}(i,n);for(let u=0;u<i;u++)for(let p=0;p<l[u];p++)t.push(o[u]+p);return e?t.map(u=>e[u]):t}function MO(n,e,t){let i=Array(n).fill(void 0).map(()=>[]);for(let o=0;o<e;o++)l9(n,t).forEach((l,u)=>i[u].push(l));return i}function h9(n,e){let t=1+e(),i=e(),o=function u9(n){let e=[];for(;;){let t=n();if(0==t)break;e.push(t)}return e}(e);return wO(MO(o.length,1+n,e).map((u,p)=>{const v=u[0],_=u.slice(1);return Array(o[p]).fill(void 0).map((M,C)=>{let N=C*i;return[v+C*t,_.map(H=>H+N)]})}))}function d9(n,e){return MO(1+e(),1+n,e).map(o=>[o[0],o.slice(1)])}const GE=function p9(){return function s9(n){return function i9(n){let e=0;return()=>n[e++]}(function r9(n){let e=0;function t(){return n[e++]<<8|n[e++]}let i=t(),o=1,l=[0,1];for(let wt=1;wt<i;wt++)l.push(o+=t());let u=t(),p=e;e+=u;let v=0,_=0;function M(){return 0==v&&(_=_<<8|n[e++],v=8),_>>--v&1}const N=Math.pow(2,31),H=N>>>1,X=H>>1,ee=N-1;let ge=0;for(let wt=0;wt<31;wt++)ge=ge<<1|M();let fe=[],Ie=0,Ee=N;for(;;){let wt=Math.floor(((ge-Ie+1)*o-1)/Ee),Yt=0,Or=i;for(;Or-Yt>1;){let $s=Yt+Or>>>1;wt<l[$s]?Or=$s:Yt=$s}if(0==Yt)break;fe.push(Yt);let mi=Ie+Math.floor(Ee*l[Yt]/o),li=Ie+Math.floor(Ee*l[Yt+1]/o)-1;for(;0==((mi^li)&H);)ge=ge<<1&ee|M(),mi=mi<<1&ee,li=li<<1&ee|1;for(;mi&~li&X;)ge=ge&H|ge<<1&ee>>>1|M(),mi=mi<<1^H,li=(li^H)<<1|H|1;Ie=mi,Ee=1+li-mi}let st=i-4;return fe.map(wt=>{switch(wt-st){case 3:return st+65792+(n[p++]<<16|n[p++]<<8|n[p++]);case 2:return st+256+(n[p++]<<8|n[p++]);case 1:return st+n[p++];default:return wt-1}})}(n))}(vO("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}(),m9=new Set(jE(GE)),g9=new Set(jE(GE)),v9=function c9(n){let e=[];for(;;){let t=n();if(0==t)break;e.push(h9(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(d9(t,n))}return function n9(n){const e={};for(let t=0;t<n.length;t++){const i=n[t];e[i[0]]=i[1]}return e}(wO(e))}(GE),y9=function f9(n){let e=jE(n).sort((i,o)=>i-o);return function t(){let i=[];for(;;){let _=jE(n,e);if(0==_.length)break;i.push({set:new Set(_),node:t()})}i.sort((_,M)=>M.set.size-_.set.size);let o=n(),l=o%3;o=o/3|0;let u=!!(1&o);return o>>=1,{branches:i,valid:l,fe0f:u,save:1==o,check:2==o}}()}(GE);function CO(n){return function N7(n,e=D0.current){return $D(qc(n,e))}(n)}function _9(n){return n.filter(e=>65039!=e)}function AO(n){for(let e of n.split(".")){let t=CO(e);try{for(let i=t.lastIndexOf(95)-1;i>=0;i--)if(95!==t[i])throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(i=>i<128)&&45===t[2]&&45===t[3])throw new Error("invalid label extension")}catch(i){throw new Error(`Invalid label "${e}": ${i.message}`)}}return n}function M9(n,e){var t;let o,l,i=y9,u=[],p=n.length;for(e&&(e.length=0);p;){let v=n[--p];if(i=null===(t=i.branches.find(_=>_.set.has(v)))||void 0===t?void 0:t.node,!i)break;if(i.save)l=v;else if(i.check&&v===l)break;u.push(v),i.fe0f&&(u.push(65039),p>0&&65039==n[p-1]&&p--),i.valid&&(o=u.slice(),2==i.valid&&o.splice(1,1),e&&e.push(...n.slice(p).reverse()),n.length=p)}return o}const E9=new Fe(uO),TO=new Uint8Array(32);function DO(n){if(0===n.length)throw new Error("invalid ENS name; empty component");return n}function WE(n){const e=qc(function b9(n){return AO(function w9(n,e){let t=CO(n).reverse(),i=[];for(;t.length;){let o=M9(t);if(o){i.push(...e(o));continue}let l=t.pop();if(m9.has(l)){i.push(l);continue}if(g9.has(l))continue;let u=v9[l];if(!u)throw new Error(`Disallowed codepoint: 0x${l.toString(16).toUpperCase()}`);i.push(...u)}return AO(function x9(n){return n.normalize("NFC")}(String.fromCodePoint(...i)))}(n,_9))}(n)),t=[];if(0===n.length)return t;let i=0;for(let o=0;o<e.length;o++)46===e[o]&&(t.push(DO(e.slice(i,o))),i=o+1);if(i>=e.length)throw new Error("invalid ENS name; empty component");return t.push(DO(e.slice(i))),t}function qE(n){"string"!=typeof n&&E9.throwArgumentError("invalid ENS name; not a string","name",n);let e=TO;const t=WE(n);for(;t.length;)e=fs(Go([e,fs(t.pop())]));return Xt(e)}TO.fill(0);const RO=new Fe("networks/5.7.1");function Sh(n){const e=function(t,i){null==i&&(i={});const o=[];if(t.InfuraProvider&&"-"!==i.infura)try{o.push(new t.InfuraProvider(n,i.infura))}catch{}if(t.EtherscanProvider&&"-"!==i.etherscan)try{o.push(new t.EtherscanProvider(n,i.etherscan))}catch{}if(t.AlchemyProvider&&"-"!==i.alchemy)try{o.push(new t.AlchemyProvider(n,i.alchemy))}catch{}if(t.PocketProvider&&"-"!==i.pocket){const l=["goerli","ropsten","rinkeby","sepolia"];try{const u=new t.PocketProvider(n,i.pocket);u.network&&-1===l.indexOf(u.network.name)&&o.push(u)}catch{}}if(t.CloudflareProvider&&"-"!==i.cloudflare)try{o.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&"-"!==i.ankr)try{const l=["ropsten"],u=new t.AnkrProvider(n,i.ankr);u.network&&-1===l.indexOf(u.network.name)&&o.push(u)}catch{}if(0===o.length)return null;if(t.FallbackProvider){let l=1;return null!=i.quorum?l=i.quorum:"homestead"===n&&(l=2),new t.FallbackProvider(o,l)}return o[0]};return e.renetwork=function(t){return Sh(t)},e}function $E(n,e){const t=function(i,o){return i.JsonRpcProvider?new i.JsonRpcProvider(n,e):null};return t.renetwork=function(i){return $E(n,i)},t}const IO={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Sh("homestead")},PO={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Sh("ropsten")},kO={chainId:63,name:"classicMordor",_defaultProvider:$E("https://www.ethercluster.com/mordor","classicMordor")},XE={unspecified:{chainId:0,name:"unspecified"},homestead:IO,mainnet:IO,morden:{chainId:2,name:"morden"},ropsten:PO,testnet:PO,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Sh("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Sh("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Sh("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Sh("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:$E("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:kO,classicTestnet:kO,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:$E("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Sh("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Sh("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function NO(n){return"0x"+Kc().sha256().update(ln(n)).digest("hex")}new Fe("sha2/5.7.0");var I9=pe(988),LO=pe.n(I9);const Rb=new Fe(zE);class Ut{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),i=this.bigNumber.bind(this),o=this.blockTag.bind(this),l=this.data.bind(this),u=this.hash.bind(this),p=this.hex.bind(this),v=this.number.bind(this),_=this.type.bind(this);return e.transaction={hash:u,type:_,accessList:Ut.allowNull(this.accessList.bind(this),null),blockHash:Ut.allowNull(u,null),blockNumber:Ut.allowNull(v,null),transactionIndex:Ut.allowNull(v,null),confirmations:Ut.allowNull(v,null),from:t,gasPrice:Ut.allowNull(i),maxPriorityFeePerGas:Ut.allowNull(i),maxFeePerGas:Ut.allowNull(i),gasLimit:i,to:Ut.allowNull(t,null),value:i,nonce:v,data:l,r:Ut.allowNull(this.uint256),s:Ut.allowNull(this.uint256),v:Ut.allowNull(v),creates:Ut.allowNull(t,null),raw:Ut.allowNull(l)},e.transactionRequest={from:Ut.allowNull(t),nonce:Ut.allowNull(v),gasLimit:Ut.allowNull(i),gasPrice:Ut.allowNull(i),maxPriorityFeePerGas:Ut.allowNull(i),maxFeePerGas:Ut.allowNull(i),to:Ut.allowNull(t),value:Ut.allowNull(i),data:Ut.allowNull(C=>this.data(C,!0)),type:Ut.allowNull(v),accessList:Ut.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:v,blockNumber:v,transactionHash:u,address:t,topics:Ut.arrayOf(u),data:l,logIndex:v,blockHash:u},e.receipt={to:Ut.allowNull(this.address,null),from:Ut.allowNull(this.address,null),contractAddress:Ut.allowNull(t,null),transactionIndex:v,root:Ut.allowNull(p),gasUsed:i,logsBloom:Ut.allowNull(l),blockHash:u,transactionHash:u,logs:Ut.arrayOf(this.receiptLog.bind(this)),blockNumber:v,confirmations:Ut.allowNull(v,null),cumulativeGasUsed:i,effectiveGasPrice:Ut.allowNull(i),status:Ut.allowNull(v),type:_},e.block={hash:Ut.allowNull(u),parentHash:u,number:v,timestamp:v,nonce:Ut.allowNull(p),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:Ut.allowNull(t),extraData:l,transactions:Ut.allowNull(Ut.arrayOf(u)),baseFeePerGas:Ut.allowNull(i)},e.blockWithTransactions=ds(e.block),e.blockWithTransactions.transactions=Ut.allowNull(Ut.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Ut.allowNull(o,void 0),toBlock:Ut.allowNull(o,void 0),blockHash:Ut.allowNull(u,void 0),address:Ut.allowNull(t,void 0),topics:Ut.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Ut.allowNull(v),blockHash:Ut.allowNull(u),transactionIndex:v,removed:Ut.allowNull(this.boolean.bind(this)),address:t,data:Ut.allowFalsish(l,"0x"),topics:Ut.arrayOf(u),transactionHash:u,logIndex:v},e}accessList(e){return N0(e||[])}number(e){return"0x"===e?0:It.from(e).toNumber()}type(e){return"0x"===e||null==e?0:It.from(e).toNumber()}bigNumber(e){return It.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(!t&&"0x"!==e.substring(0,2)&&(e="0x"+e),Lr(e))?e.toLowerCase():Rb.throwArgumentError("invalid hash","value",e)}data(e,t){const i=this.hex(e,t);if(i.length%2!=0)throw new Error("invalid data; odd-length - "+e);return i}address(e){return Gi(e)}callAddress(e){if(!Lr(e,32))return null;const t=Gi(lo(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return NL(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||Lr(e))return HD(e);throw new Error("invalid blockTag")}hash(e,t){const i=this.hex(e,t);return 32!==im(i)?Rb.throwArgumentError("invalid hash","value",e):i}difficulty(e){if(null==e)return null;const t=It.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Lr(e))throw new Error("invalid uint256");return Ni(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const i=null!=e._difficulty?e._difficulty:e.difficulty,o=Ut.check(t,e);return o._difficulty=null==i?null:It.from(i),o}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Ut.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&It.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),(1===e.type||2===e.type)&&null==e.accessList&&(e.accessList=[]);const t=Ut.check(this.formats.transaction,e);if(null!=e.chainId){let i=e.chainId;Lr(i)&&(i=It.from(i).toNumber()),t.chainId=i}else{let i=e.networkId;null==i&&null==t.v&&(i=e.chainId),Lr(i)&&(i=It.from(i).toNumber()),"number"!=typeof i&&null!=t.v&&(i=(t.v-35)/2,i<0&&(i=0),i=parseInt(i)),"number"!=typeof i&&(i=0),t.chainId=i}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return function NG(n){const e=ln(n);if(e[0]>127)return function kG(n){const e=WD(n);9!==e.length&&6!==e.length&&uo.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:ho(e[0]).toNumber(),gasPrice:ho(e[1]),gasLimit:ho(e[2]),to:sR(e[3]),value:ho(e[4]),data:e[5],chainId:0};if(6===e.length)return t;try{t.v=It.from(e[6]).toNumber()}catch{return t}if(t.r=Ni(e[7],32),t.s=Ni(e[8],32),It.from(t.r).isZero()&&It.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let i=t.v-27;const o=e.slice(0,6);0!==t.chainId&&(o.push(Xt(t.chainId)),o.push("0x"),o.push("0x"),i-=2*t.chainId+8);const l=fs(TE(o));try{t.from=QL(l,{r:Xt(t.r),s:Xt(t.s),recoveryParam:i})}catch{}t.hash=fs(n)}return t.type=null,t}(e);switch(e[0]){case 1:return function PG(n){const e=WD(n.slice(1));8!==e.length&&11!==e.length&&uo.throwArgumentError("invalid component count for transaction type: 1","payload",Xt(n));const t={type:1,chainId:ho(e[0]).toNumber(),nonce:ho(e[1]).toNumber(),gasPrice:ho(e[2]),gasLimit:ho(e[3]),to:sR(e[4]),value:ho(e[5]),data:e[6],accessList:N0(e[7])};return 8===e.length||(t.hash=fs(n),rO(t,e.slice(8),nO)),t}(e);case 2:return function IG(n){const e=WD(n.slice(1));9!==e.length&&12!==e.length&&uo.throwArgumentError("invalid component count for transaction type: 2","payload",Xt(n));const t=ho(e[2]),i=ho(e[3]),o={type:2,chainId:ho(e[0]).toNumber(),nonce:ho(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:i,gasPrice:null,gasLimit:ho(e[4]),to:sR(e[5]),value:ho(e[6]),data:e[7],accessList:N0(e[8])};return 9===e.length||(o.hash=fs(n),rO(o,e.slice(9),tO)),o}(e)}return uo.throwError(`unsupported transaction type: ${e[0]}`,Fe.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}(e)}receiptLog(e){return Ut.check(this.formats.receiptLog,e)}receipt(e){const t=Ut.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const i=It.from(t.root).toNumber();0===i||1===i?(null!=t.status&&t.status!==i&&Rb.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=i,delete t.root):Rb.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Rb.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):null!=e?this.hash(e,!0):null}filter(e){return Ut.check(this.formats.filter,e)}filterLog(e){return Ut.check(this.formats.filterLog,e)}static check(e,t){const i={};for(const o in e)try{const l=e[o](t[o]);void 0!==l&&(i[o]=l)}catch(l){throw l.checkKey=o,l.checkValue=t[o],l}return i}static allowNull(e,t){return function(i){return null==i?t:e(i)}}static allowFalsish(e,t){return function(i){return i?e(i):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const i=[];return t.forEach(function(o){i.push(e(o))}),i}}}var Tn=function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})};const Yn=new Fe(zE);function FO(n){return null==n?"null":(32!==im(n)&&Yn.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function BO(n){for(n=n.slice();n.length>0&&null==n[n.length-1];)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(o=>{t[FO(o)]=!0});const i=Object.keys(t);return i.sort(),i.join("|")}return FO(e)}).join("&")}function L0(n){if("string"==typeof n){if(32===im(n=n.toLowerCase()))return"tx:"+n;if(-1===n.indexOf(":"))return n}else{if(Array.isArray(n))return"filter:*:"+BO(n);if(lG.isForkEvent(n))throw Yn.warn("not implemented"),new Error("not implemented");if(n&&"object"==typeof n)return"filter:"+(n.address||"*")+":"+BO(n.topics||[])}throw new Error("invalid event - "+n)}function Ib(){return(new Date).getTime()}function VO(n){return new Promise(e=>{setTimeout(e,n)})}const O9=["block","network","pending","poll"];class F9{constructor(e,t,i){gt(this,"tag",e),gt(this,"listener",t),gt(this,"once",i),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],i=function L9(n){return""===n?[]:n.split(/&/g).map(e=>{if(""===e)return[];const t=e.split("|").map(i=>"null"===i?null:i);return 1===t.length?t[0]:t})}(e[2]),o={};return i.length>0&&(o.topics=i),t&&"*"!==t&&(o.address=t),o}pollable(){return this.tag.indexOf(":")>=0||O9.indexOf(this.tag)>=0}}const B9={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function dR(n){return Ni(It.from(n).toHexString(),32)}function UO(n){return hR.encode(Go([n,lo(NO(NO(n)),0,4)]))}const HO=new RegExp("^(ipfs)://(.*)$","i"),zO=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),HO,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function KE(n,e){try{return wb(Pb(n,e))}catch{}return null}function Pb(n,e){if("0x"===n)return null;const t=It.from(lo(n,e,e+32)).toNumber(),i=It.from(lo(n,t,t+32)).toNumber();return lo(n,t+32,t+32+i)}function fR(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Yn.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function jO(n){const e=ln(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function V9(n){if(n.length%32==0)return n;const e=new Uint8Array(32*Math.ceil(n.length/32));return e.set(n),e}function GO(n){const e=[];let t=0;for(let i=0;i<n.length;i++)e.push(null),t+=32;for(let i=0;i<n.length;i++){const o=ln(n[i]);e[i]=jO(t),e.push(jO(o.length)),e.push(V9(o)),t+=32+32*Math.ceil(o.length/32)}return Wo(e)}class WO{constructor(e,t,i,o){gt(this,"provider",e),gt(this,"name",i),gt(this,"address",e.formatter.address(t)),gt(this,"_resolvedAddress",o)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>It.from(e).eq(1)).catch(e=>{if(e.code===Fe.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return Tn(this,void 0,void 0,function*(){const i={to:this.address,ccipReadEnabled:!0,data:Wo([e,qE(this.name),t||"0x"])};let o=!1;var n;(yield this.supportsWildcard())&&(o=!0,i.data=Wo(["0x9061b923",GO([(n=this.name,Xt(Go(WE(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"),i.data])]));try{let l=yield this.provider.call(i);return ln(l).length%32==4&&Yn.throwError("resolver threw error",Fe.errors.CALL_EXCEPTION,{transaction:i,data:l}),o&&(l=Pb(l,0)),l}catch(l){if(l.code===Fe.errors.CALL_EXCEPTION)return null;throw l}})}_fetchBytes(e,t){return Tn(this,void 0,void 0,function*(){const i=yield this._fetch(e,t);return null!=i?Pb(i,0):null})}_getAddress(e,t){const i=B9[String(e)];if(null==i&&Yn.throwError(`unsupported coin type: ${e}`,Fe.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===i.ilk)return this.provider.formatter.address(t);const o=ln(t);if(null!=i.p2pkh){const l=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(l){const u=parseInt(l[1],16);if(l[2].length===2*u&&u>=1&&u<=75)return UO(Go([[i.p2pkh],"0x"+l[2]]))}}if(null!=i.p2sh){const l=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(l){const u=parseInt(l[1],16);if(l[2].length===2*u&&u>=1&&u<=75)return UO(Go([[i.p2sh],"0x"+l[2]]))}}if(null!=i.prefix){const l=o[1];let u=o[0];if(0===u?20!==l&&32!==l&&(u=-1):u=-1,u>=0&&o.length===2+l&&l>=1&&l<=75){const p=LO().toWords(o.slice(2));return p.unshift(u),LO().encode(i.prefix,p)}}return null}getAddress(e){return Tn(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{const o=yield this._fetch("0x3b3b57de");return"0x"===o||"0x0000000000000000000000000000000000000000000000000000000000000000"===o?null:this.provider.formatter.callAddress(o)}catch(o){if(o.code===Fe.errors.CALL_EXCEPTION)return null;throw o}const t=yield this._fetchBytes("0xf1cb7e06",dR(e));if(null==t||"0x"===t)return null;const i=this._getAddress(e,t);return null==i&&Yn.throwError("invalid or unsupported coin data",Fe.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),i})}getAvatar(){return Tn(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let i=0;i<zO.length;i++){const o=t.match(zO[i]);if(null==o)continue;const l=o[1].toLowerCase();switch(l){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:fR(t)};case"erc721":case"erc1155":{const u="erc721"===l?"0xc87b56dd":"0x0e89341c";e.push({type:l,content:t});const p=this._resolvedAddress||(yield this.getAddress()),v=(o[2]||"").split("/");if(2!==v.length)return null;const _=yield this.provider.formatter.address(v[0]),M=Ni(It.from(v[1]).toHexString(),32);if("erc721"===l){const ee=this.provider.formatter.callAddress(yield this.provider.call({to:_,data:Wo(["0x6352211e",M])}));if(p!==ee)return null;e.push({type:"owner",content:ee})}else if("erc1155"===l){const ee=It.from(yield this.provider.call({to:_,data:Wo(["0x00fdd58e",Ni(p,32),M])}));if(ee.isZero())return null;e.push({type:"balance",content:ee.toString()})}const C={to:this.provider.formatter.address(v[0]),data:Wo([u,M])};let N=KE(yield this.provider.call(C),0);if(null==N)return null;e.push({type:"metadata-url-base",content:N}),"erc1155"===l&&(N=N.replace("{id}",M.substring(2)),e.push({type:"metadata-url-expanded",content:N})),N.match(/^ipfs:/i)&&(N=fR(N)),e.push({type:"metadata-url",content:N});const H=yield uR(N);if(!H)return null;e.push({type:"metadata",content:JSON.stringify(H)});let X=H.image;if("string"!=typeof X)return null;if(!X.match(/^(https:\/\/|data:)/i)){if(null==X.match(HO))return null;e.push({type:"url-ipfs",content:X}),X=fR(X)}return e.push({type:"url",content:X}),{linkage:e,url:X}}}}}catch{}return null})}getContentHash(){return Tn(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const u=parseInt(t[3],16);if(t[4].length===2*u)return"ipfs://"+hR.encode("0x"+t[1])}const i=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(i){const u=parseInt(i[3],16);if(i[4].length===2*u)return"ipns://"+hR.encode("0x"+i[1])}const o=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(o&&64===o[1].length)return"bzz://"+o[1];const l=e.match(/^0x90b2c605([0-9a-f]*)$/);if(l&&68===l[1].length){const u={"=":"","+":"-","/":"_"};return"sia://"+yO("0x"+l[1]).replace(/[=+\/]/g,v=>u[v])}return Yn.throwError("invalid or unsupported content hash data",Fe.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Tn(this,void 0,void 0,function*(){let t=qc(e);t=Go([dR(64),dR(t.length),t]),t.length%32!=0&&(t=Go([t,Ni("0x",32-e.length%32)]));const i=yield this._fetchBytes("0x59d1d43c",Xt(t));return null==i||"0x"===i?null:wb(i)})}}let pR=null,U9=1;class H9 extends kE{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),gt(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=Gc(new.target,"getNetwork")(e);t?(gt(this,"_network",t),this.emit("network",t,null)):Yn.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Tn(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}null==e&&(e=yield this.detectNetwork()),e||Yn.throwError("no network detected",Fe.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:gt(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Db(()=>this._ready().then(e=>e,e=>{if(e.code!==Fe.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==pR&&(pR=new Ut),pR}static getNetwork(e){return function T9(n){if(null==n)return null;if("number"==typeof n){for(const i in XE){const o=XE[i];if(o.chainId===n)return{name:o.name,chainId:o.chainId,ensAddress:o.ensAddress||null,_defaultProvider:o._defaultProvider||null}}return{chainId:n,name:"unknown"}}if("string"==typeof n){const i=XE[n];return null==i?null:{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress,_defaultProvider:i._defaultProvider||null}}const e=XE[n.name];if(!e)return"number"!=typeof n.chainId&&RO.throwArgumentError("invalid network chainId","network",n),n;0!==n.chainId&&n.chainId!==e.chainId&&RO.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return null==t&&e._defaultProvider&&(t=function A9(n){return n&&"function"==typeof n.renetwork}(e._defaultProvider)?e._defaultProvider.renetwork(n):e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}(e??"homestead")}ccipReadFetch(e,t,i){return Tn(this,void 0,void 0,function*(){if(this.disableCcipRead||0===i.length)return null;const o=e.to.toLowerCase(),l=t.toLowerCase(),u=[];for(let p=0;p<i.length;p++){const v=i[p],_=v.replace("{sender}",o).replace("{data}",l),M=v.indexOf("{data}")>=0?null:JSON.stringify({data:l,sender:o}),C=yield uR({url:_,errorPassThrough:!0},M,(H,X)=>(H.status=X.statusCode,H));if(C.data)return C.data;const N=C.message||"unknown error";if(C.status>=400&&C.status<500)return Yn.throwError(`response not found during CCIP fetch: ${N}`,Fe.errors.SERVER_ERROR,{url:v,errorMessage:N});u.push(N)}return Yn.throwError(`error encountered during CCIP fetch: ${u.map(p=>JSON.stringify(p)).join(", ")}`,Fe.errors.SERVER_ERROR,{urls:i,errorMessages:u})})}_getInternalBlockNumber(e){return Tn(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const o=this._internalBlockNumber;try{const l=yield o;if(Ib()-l.respTime<=e)return l.blockNumber;break}catch{if(this._internalBlockNumber===o)break}}const t=Ib(),i=ns({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(o=>null,o=>o)}).then(({blockNumber:o,networkError:l})=>{if(l)throw this._internalBlockNumber===i&&(this._internalBlockNumber=null),l;const u=Ib();return(o=It.from(o).toNumber())<this._maxInternalBlockNumber&&(o=this._maxInternalBlockNumber),this._maxInternalBlockNumber=o,this._setFastBlockNumber(o),{blockNumber:o,reqTime:t,respTime:u}});return this._internalBlockNumber=i,i.catch(o=>{this._internalBlockNumber===i&&(this._internalBlockNumber=null)}),(yield i).blockNumber})}poll(){return Tn(this,void 0,void 0,function*(){const e=U9++,t=[];let i=null;try{i=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(o){return void this.emit("error",o)}if(this._setFastBlockNumber(i),this.emit("poll",e,i),i!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=i-1),Math.abs(this._emitted.block-i)>1e3)Yn.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${i})`),this.emit("error",Yn.makeError("network block skew detected",Fe.errors.NETWORK_ERROR,{blockNumber:i,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",i);else for(let o=this._emitted.block+1;o<=i;o++)this.emit("block",o);this._emitted.block!==i&&(this._emitted.block=i,Object.keys(this._emitted).forEach(o=>{if("block"===o)return;const l=this._emitted[o];"pending"!==l&&i-l>12&&delete this._emitted[o]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=i-1),this._events.forEach(o=>{switch(o.type){case"tx":{const l=o.hash;let u=this.getTransactionReceipt(l).then(p=>(!p||null==p.blockNumber||(this._emitted["t:"+l]=p.blockNumber,this.emit(l,p)),null)).catch(p=>{this.emit("error",p)});t.push(u);break}case"filter":if(!o._inflight){o._inflight=!0,-2===o._lastBlockNumber&&(o._lastBlockNumber=i-1);const l=o.filter;l.fromBlock=o._lastBlockNumber+1,l.toBlock=i;const u=l.toBlock-this._maxFilterBlockRange;u>l.fromBlock&&(l.fromBlock=u),l.fromBlock<0&&(l.fromBlock=0);const p=this.getLogs(l).then(v=>{o._inflight=!1,0!==v.length&&v.forEach(_=>{_.blockNumber>o._lastBlockNumber&&(o._lastBlockNumber=_.blockNumber),this._emitted["b:"+_.blockHash]=_.blockNumber,this._emitted["t:"+_.transactionHash]=_.blockNumber,this.emit(l,_)})}).catch(v=>{this.emit("error",v),o._inflight=!1});t.push(p)}}}),this._lastBlockNumber=i,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(o=>{this.emit("error",o)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Tn(this,void 0,void 0,function*(){return Yn.throwError("provider does not support network detection",Fe.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Tn(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield VO(0),this._network;const i=Yn.makeError("underlying network changed",Fe.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",i),i}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Ib();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=Ib(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,i){return Tn(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,i||0,null)})}_waitForTransaction(e,t,i,o){return Tn(this,void 0,void 0,function*(){const l=yield this.getTransactionReceipt(e);return(l?l.confirmations:0)>=t?l:new Promise((u,p)=>{const v=[];let _=!1;const M=function(){return!!_||(_=!0,v.forEach(N=>{N()}),!1)},C=N=>{N.confirmations<t||M()||u(N)};if(this.on(e,C),v.push(()=>{this.removeListener(e,C)}),o){let N=o.startBlock,H=null;const X=ee=>Tn(this,void 0,void 0,function*(){_||(yield VO(1e3),this.getTransactionCount(o.from).then(ge=>Tn(this,void 0,void 0,function*(){if(!_){if(ge<=o.nonce)N=ee;else{{const fe=yield this.getTransaction(e);if(fe&&null!=fe.blockNumber)return}for(null==H&&(H=N-3,H<o.startBlock&&(H=o.startBlock));H<=ee;){if(_)return;const fe=yield this.getBlockWithTransactions(H);for(let Ie=0;Ie<fe.transactions.length;Ie++){const Ee=fe.transactions[Ie];if(Ee.hash===e)return;if(Ee.from===o.from&&Ee.nonce===o.nonce){if(_)return;const st=yield this.waitForTransaction(Ee.hash,t);if(M())return;let wt="replaced";return Ee.data===o.data&&Ee.to===o.to&&Ee.value.eq(o.value)?wt="repriced":"0x"===Ee.data&&Ee.from===Ee.to&&Ee.value.isZero()&&(wt="cancelled"),void p(Yn.makeError("transaction was replaced",Fe.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===wt||"cancelled"===wt,reason:wt,replacement:this._wrapTransaction(Ee),hash:e,receipt:st}))}}H++}}_||this.once("block",X)}}),ge=>{_||this.once("block",X)}))});if(_)return;this.once("block",X),v.push(()=>{this.removeListener("block",X)})}if("number"==typeof i&&i>0){const N=setTimeout(()=>{M()||p(Yn.makeError("timeout exceeded",Fe.errors.TIMEOUT,{timeout:i}))},i);N.unref&&N.unref(),v.push(()=>{clearTimeout(N)})}})})}getBlockNumber(){return Tn(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return It.from(e)}catch(t){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield ns({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),o=yield this.perform("getBalance",i);try{return It.from(o)}catch(l){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"getBalance",params:i,result:o,error:l})}})}getTransactionCount(e,t){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield ns({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),o=yield this.perform("getTransactionCount",i);try{return It.from(o).toNumber()}catch(l){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"getTransactionCount",params:i,result:o,error:l})}})}getCode(e,t){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield ns({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),o=yield this.perform("getCode",i);try{return Xt(o)}catch(l){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"getCode",params:i,result:o,error:l})}})}getStorageAt(e,t,i){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield ns({address:this._getAddress(e),blockTag:this._getBlockTag(i),position:Promise.resolve(t).then(u=>HD(u))}),l=yield this.perform("getStorageAt",o);try{return Xt(l)}catch(u){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"getStorageAt",params:o,result:l,error:u})}})}_wrapTransaction(e,t,i){if(null!=t&&32!==im(t))throw new Error("invalid response - sendTransaction");const o=e;return null!=t&&e.hash!==t&&Yn.throwError("Transaction hash mismatch from Provider.sendTransaction.",Fe.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),o.wait=(l,u)=>Tn(this,void 0,void 0,function*(){let p;null==l&&(l=1),null==u&&(u=0),0!==l&&null!=i&&(p={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:i});const v=yield this._waitForTransaction(e.hash,l,u,p);return null==v&&0===l?null:(this._emitted["t:"+e.hash]=v.blockNumber,0===v.status&&Yn.throwError("transaction failed",Fe.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:v}),v)}),o}sendTransaction(e){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(l=>Xt(l)),i=this.formatter.transaction(e);null==i.confirmations&&(i.confirmations=0);const o=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const l=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(i,l,o)}catch(l){throw l.transaction=i,l.transactionHash=i.hash,l}})}_getTransactionRequest(e){return Tn(this,void 0,void 0,function*(){const t=yield e,i={};return["from","to"].forEach(o=>{null!=t[o]&&(i[o]=Promise.resolve(t[o]).then(l=>l?this._getAddress(l):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(o=>{null!=t[o]&&(i[o]=Promise.resolve(t[o]).then(l=>l?It.from(l):null))}),["type"].forEach(o=>{null!=t[o]&&(i[o]=Promise.resolve(t[o]).then(l=>l??null))}),t.accessList&&(i.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(o=>{null!=t[o]&&(i[o]=Promise.resolve(t[o]).then(l=>l?Xt(l):null))}),this.formatter.transactionRequest(yield ns(i))})}_getFilter(e){return Tn(this,void 0,void 0,function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(i=>{null!=e[i]&&(t[i]=e[i])}),["fromBlock","toBlock"].forEach(i=>{null!=e[i]&&(t[i]=this._getBlockTag(e[i]))}),this.formatter.filter(yield ns(t))})}_call(e,t,i){return Tn(this,void 0,void 0,function*(){i>=10&&Yn.throwError("CCIP read exceeded maximum redirections",Fe.errors.SERVER_ERROR,{redirects:i,transaction:e});const o=e.to,l=yield this.perform("call",{transaction:e,blockTag:t});if(i>=0&&"latest"===t&&null!=o&&"0x556f1830"===l.substring(0,10)&&im(l)%32==4)try{const u=lo(l,4),p=lo(u,0,32);It.from(p).eq(o)||Yn.throwError("CCIP Read sender did not match",Fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l});const v=[],_=It.from(lo(u,32,64)).toNumber(),M=It.from(lo(u,_,_+32)).toNumber(),C=lo(u,_+32);for(let fe=0;fe<M;fe++){const Ie=KE(C,32*fe);null==Ie&&Yn.throwError("CCIP Read contained corrupt URL string",Fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l}),v.push(Ie)}const N=Pb(u,64);It.from(lo(u,100,128)).isZero()||Yn.throwError("CCIP Read callback selector included junk",Fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l});const H=lo(u,96,100),X=Pb(u,128),ee=yield this.ccipReadFetch(e,N,v);null==ee&&Yn.throwError("CCIP Read disabled or provided no URLs",Fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l});const ge={to:o,data:Wo([H,GO([ee,X])])};return this._call(ge,t,i+1)}catch(u){if(u.code===Fe.errors.SERVER_ERROR)throw u}try{return Xt(l)}catch(u){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:l,error:u})}})}call(e,t){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield ns({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(i.transaction,i.blockTag,i.ccipReadEnabled?0:-1)})}estimateGas(e){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield ns({transaction:this._getTransactionRequest(e)}),i=yield this.perform("estimateGas",t);try{return It.from(i)}catch(o){return Yn.throwError("bad result from backend",Fe.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:i,error:o})}})}_getAddress(e){return Tn(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&Yn.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&Yn.throwError("ENS name not configured",Fe.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return Tn(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let i=-128;const o={includeTransactions:!!t};if(Lr(e,32))o.blockHash=e;else try{o.blockTag=yield this._getBlockTag(e),Lr(o.blockTag)&&(i=parseInt(o.blockTag.substring(2),16))}catch{Yn.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Db(()=>Tn(this,void 0,void 0,function*(){const l=yield this.perform("getBlock",o);if(null==l)return null!=o.blockHash&&null==this._emitted["b:"+o.blockHash]||null!=o.blockTag&&i>this._emitted.block?null:void 0;if(t){let u=null;for(let v=0;v<l.transactions.length;v++){const _=l.transactions[v];if(null==_.blockNumber)_.confirmations=0;else if(null==_.confirmations){null==u&&(u=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let M=u-_.blockNumber+1;M<=0&&(M=1),_.confirmations=M}}const p=this.formatter.blockWithTransactions(l);return p.transactions=p.transactions.map(v=>this._wrapTransaction(v)),p}return this.formatter.block(l)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Tn(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Db(()=>Tn(this,void 0,void 0,function*(){const i=yield this.perform("getTransaction",t);if(null==i)return null==this._emitted["t:"+e]?null:void 0;const o=this.formatter.transactionResponse(i);if(null==o.blockNumber)o.confirmations=0;else if(null==o.confirmations){let u=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-o.blockNumber+1;u<=0&&(u=1),o.confirmations=u}return this._wrapTransaction(o)}),{oncePoll:this})})}getTransactionReceipt(e){return Tn(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Db(()=>Tn(this,void 0,void 0,function*(){const i=yield this.perform("getTransactionReceipt",t);if(null==i)return null==this._emitted["t:"+e]?null:void 0;if(null==i.blockHash)return;const o=this.formatter.receipt(i);if(null==o.blockNumber)o.confirmations=0;else if(null==o.confirmations){let u=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-o.blockNumber+1;u<=0&&(u=1),o.confirmations=u}return o}),{oncePoll:this})})}getLogs(e){return Tn(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield ns({filter:this._getFilter(e)}),i=yield this.perform("getLogs",t);return i.forEach(o=>{null==o.removed&&(o.removed=!1)}),Ut.arrayOf(this.formatter.filterLog.bind(this.formatter))(i)})}getEtherPrice(){return Tn(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Tn(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&Yn.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return Tn(this,void 0,void 0,function*(){let t=e;for(;;){if(""===t||"."===t||"eth"!==e&&"eth"===t)return null;const i=yield this._getResolver(t,"getResolver");if(null!=i){const o=new WO(this,i,e);return t===e||(yield o.supportsWildcard())?o:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return Tn(this,void 0,void 0,function*(){null==t&&(t="ENS");const i=yield this.getNetwork();i.ensAddress||Yn.throwError("network does not support ENS",Fe.errors.UNSUPPORTED_OPERATION,{operation:t,network:i.name});try{const o=yield this.call({to:i.ensAddress,data:"0x0178b8bf"+qE(e).substring(2)});return this.formatter.callAddress(o)}catch{}return null})}resolveName(e){return Tn(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(i){if(Lr(e))throw i}"string"!=typeof e&&Yn.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return Tn(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(t,"lookupAddress");if(null==i)return null;const o=KE(yield this.call({to:i,data:"0x691f3431"+qE(t).substring(2)}),0);return(yield this.resolveName(o))!=e?null:o})}getAvatar(e){return Tn(this,void 0,void 0,function*(){let t=null;if(Lr(e)){const l=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",u=yield this._getResolver(l,"getAvatar");if(!u)return null;t=new WO(this,u,l);try{const p=yield t.getAvatar();if(p)return p.url}catch(p){if(p.code!==Fe.errors.CALL_EXCEPTION)throw p}try{const p=KE(yield this.call({to:u,data:"0x691f3431"+qE(l).substring(2)}),0);t=yield this.getResolver(p)}catch(p){if(p.code!==Fe.errors.CALL_EXCEPTION)throw p;return null}}else if(t=yield this.getResolver(e),!t)return null;const i=yield t.getAvatar();return null==i?null:i.url})}perform(e,t){return Yn.throwError(e+" not implemented",Fe.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,i){const o=new F9(L0(e),t,i);return this._events.push(o),this._startEvent(o),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let i=!1,o=[],l=L0(e);return this._events=this._events.filter(u=>u.tag!==l||(setTimeout(()=>{u.listener.apply(this,t)},0),i=!0,!u.once||(o.push(u),!1))),o.forEach(u=>{this._stopEvent(u)}),i}listenerCount(e){if(!e)return this._events.length;let t=L0(e);return this._events.filter(i=>i.tag===t).length}listeners(e){if(null==e)return this._events.map(i=>i.listener);let t=L0(e);return this._events.filter(i=>i.tag===t).map(i=>i.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);const i=[];let o=!1,l=L0(e);return this._events=this._events.filter(u=>!(u.tag===l&&u.listener==t&&!o&&(o=!0,i.push(u),1))),i.forEach(u=>{this._stopEvent(u)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const i=L0(e);this._events=this._events.filter(o=>o.tag!==i||(t.push(o),!1))}return t.forEach(i=>{this._stopEvent(i)}),this}}var Ch=function(n,e,t,i){return new(t||(t=Promise))(function(l,u){function p(M){try{_(i.next(M))}catch(C){u(C)}}function v(M){try{_(i.throw(M))}catch(C){u(C)}}function _(M){M.done?l(M.value):function o(l){return l instanceof t?l:new t(function(u){u(l)})}(M.value).then(p,v)}_((i=i.apply(n,e||[])).next())})};const rs=new Fe(zE),z9=["call","estimateGas"];function kb(n,e){if(null==n)return null;if("string"==typeof n.message&&n.message.match("reverted")){const t=Lr(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if("object"==typeof n){for(const t in n){const i=kb(n[t],e);if(i)return i}return null}if("string"==typeof n)try{return kb(JSON.parse(n),e)}catch{}return null}function qO(n,e,t){const i=t.transaction||t.signedTransaction;if("call"===n){const l=kb(e,!0);if(l)return l.data;rs.throwError("missing revert data in call exception; Transaction reverted without a reason string",Fe.errors.CALL_EXCEPTION,{data:"0x",transaction:i,error:e})}if("estimateGas"===n){let l=kb(e.body,!1);null==l&&(l=kb(e,!1)),l&&rs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Fe.errors.UNPREDICTABLE_GAS_LIMIT,{reason:l.message,method:n,transaction:i,error:e})}let o=e.message;throw e.code===Fe.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?o=e.error.message:"string"==typeof e.body?o=e.body:"string"==typeof e.responseText&&(o=e.responseText),o=(o||"").toLowerCase(),o.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&rs.throwError("insufficient funds for intrinsic transaction cost",Fe.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:i}),o.match(/nonce (is )?too low/i)&&rs.throwError("nonce has already been used",Fe.errors.NONCE_EXPIRED,{error:e,method:n,transaction:i}),o.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&rs.throwError("replacement fee too low",Fe.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:i}),o.match(/only replay-protected/i)&&rs.throwError("legacy pre-eip-155 transactions not supported",Fe.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:i}),z9.indexOf(n)>=0&&o.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&rs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:i}),e}function $O(n){return new Promise(function(e){setTimeout(e,n)})}function j9(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function Nb(n){return n&&n.toLowerCase()}const mR={};class XO extends Cb{constructor(e,t,i){if(super(),e!==mR)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");gt(this,"provider",t),null==i&&(i=0),"string"==typeof i?(gt(this,"_address",this.provider.formatter.address(i)),gt(this,"_index",null)):"number"==typeof i?(gt(this,"_index",i),gt(this,"_address",null)):rs.throwArgumentError("invalid address or index","addressOrIndex",i)}connect(e){return rs.throwError("cannot alter JSON-RPC Signer connection",Fe.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new G9(mR,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&rs.throwError("unknown account #"+this._index,Fe.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=ds(e);const t=this.getAddress().then(i=>(i&&(i=i.toLowerCase()),i));if(null==e.gasLimit){const i=ds(e);i.from=t,e.gasLimit=this.provider.estimateGas(i)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(i=>Ch(this,void 0,void 0,function*(){if(null==i)return null;const o=yield this.provider.resolveName(i);return null==o&&rs.throwArgumentError("provided ENS name resolves to null","tx.to",i),o}))),ns({tx:ns(e),sender:t}).then(({tx:i,sender:o})=>{null!=i.from?i.from.toLowerCase()!==o&&rs.throwArgumentError("from address mismatch","transaction",e):i.from=o;const l=this.provider.constructor.hexlifyTransaction(i,{from:!0});return this.provider.send("eth_sendTransaction",[l]).then(u=>u,u=>("string"==typeof u.message&&u.message.match(/user denied/i)&&rs.throwError("user rejected transaction",Fe.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:i}),qO("sendTransaction",u,l)))})}signTransaction(e){return rs.throwError("signing transactions is unsupported",Fe.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Ch(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),i=yield this.sendUncheckedTransaction(e);try{return yield Db(()=>Ch(this,void 0,void 0,function*(){const o=yield this.provider.getTransaction(i);if(null!==o)return this.provider._wrapTransaction(o,i,t)}),{oncePoll:this.provider})}catch(o){throw o.transactionHash=i,o}})}signMessage(e){return Ch(this,void 0,void 0,function*(){const t="string"==typeof e?qc(e):e,i=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Xt(t),i.toLowerCase()])}catch(o){throw"string"==typeof o.message&&o.message.match(/user denied/i)&&rs.throwError("user rejected signing",Fe.errors.ACTION_REJECTED,{action:"signMessage",from:i,messageData:e}),o}})}_legacySignMessage(e){return Ch(this,void 0,void 0,function*(){const t="string"==typeof e?qc(e):e,i=yield this.getAddress();try{return yield this.provider.send("eth_sign",[i.toLowerCase(),Xt(t)])}catch(o){throw"string"==typeof o.message&&o.message.match(/user denied/i)&&rs.throwError("user rejected signing",Fe.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:i,messageData:e}),o}})}_signTypedData(e,t,i){return Ch(this,void 0,void 0,function*(){const o=yield Ma.resolveNames(e,t,i,u=>this.provider.resolveName(u)),l=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[l.toLowerCase(),JSON.stringify(Ma.getPayload(o.domain,t,o.value))])}catch(u){throw"string"==typeof u.message&&u.message.match(/user denied/i)&&rs.throwError("user rejected signing",Fe.errors.ACTION_REJECTED,{action:"_signTypedData",from:l,messageData:{domain:o.domain,types:t,value:o.value}}),u}})}unlock(e){return Ch(this,void 0,void 0,function*(){const t=this.provider,i=yield this.getAddress();return t.send("personal_unlockAccount",[i.toLowerCase(),e,null])})}}class G9 extends XO{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:i=>this.provider.waitForTransaction(t,i)}))}}const W9={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class q9 extends H9{constructor(e,t){let i=t;null==i&&(i=new Promise((o,l)=>{setTimeout(()=>{this.detectNetwork().then(u=>{o(u)},u=>{l(u)})},0)})),super(i),e||(e=Gc(this.constructor,"defaultUrl")()),gt(this,"connection",Object.freeze("string"==typeof e?{url:e}:ds(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Ch(this,void 0,void 0,function*(){yield $O(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(null!=e){const t=Gc(this.constructor,"getNetwork");try{return t(It.from(e).toNumber())}catch(i){return rs.throwError("could not detect network",Fe.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:i})}}return rs.throwError("could not detect network",Fe.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new XO(mR,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const i={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:wh(i),provider:this});const o=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(o&&this._cache[e])return this._cache[e];const l=uR(this.connection,JSON.stringify(i),j9).then(u=>(this.emit("debug",{action:"response",request:i,response:u,provider:this}),u),u=>{throw this.emit("debug",{action:"response",error:u,request:i,provider:this}),u});return o&&(this._cache[e]=l,setTimeout(()=>{this._cache[e]=null},0)),l}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Nb(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Nb(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Nb(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Nb(t.address),Ni(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Gc(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Gc(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=Nb(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Ch(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){const o=t.transaction;if(o&&null!=o.type&&It.from(o.type).isZero()&&null==o.maxFeePerGas&&null==o.maxPriorityFeePerGas){const l=yield this.getFeeData();null==l.maxFeePerGas&&null==l.maxPriorityFeePerGas&&((t=ds(t)).transaction=ds(o),delete t.transaction.type)}}const i=this.prepareRequest(e,t);null==i&&rs.throwError(e+" not implemented",Fe.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(i[0],i[1])}catch(o){return qO(e,o,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(i){return function o(){e.send("eth_getFilterChanges",[i]).then(function(l){if(e._pendingFilter!=t)return null;let u=Promise.resolve();return l.forEach(function(p){e._emitted["t:"+p.toLowerCase()]="pending",u=u.then(function(){return e.getTransaction(p).then(function(v){return e.emit("pending",v),null})})}),u.then(function(){return $O(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){o()},0),null;e.send("eth_uninstallFilter",[i])}).catch(l=>{})}(),i}).catch(i=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const i=ds(W9);if(t)for(const l in t)t[l]&&(i[l]=!0);!function _7(n,e){(!n||"object"!=typeof n)&&CE.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||CE.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}(e,i);const o={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(l){if(null==e[l])return;const u=HD(It.from(e[l]));"gasLimit"===l&&(l="gas"),o[l]=u}),["from","to","data"].forEach(function(l){null!=e[l]&&(o[l]=Xt(e[l]))}),e.accessList&&(o.accessList=N0(e.accessList)),o}}const KO=new Fe(zE);let $9=1;function YO(n,e){const t="Web3LegacyFetcher";return function(i,o){const l={method:i,params:o,id:$9++,jsonrpc:"2.0"};return new Promise((u,p)=>{this.emit("debug",{action:"request",fetcher:t,request:wh(l),provider:this}),e(l,(v,_)=>{if(v)return this.emit("debug",{action:"response",fetcher:t,error:v,request:l,provider:this}),p(v);if(this.emit("debug",{action:"response",fetcher:t,request:l,response:_,provider:this}),_.error){const M=new Error(_.error.message);return M.code=_.error.code,M.data=_.error.data,p(M)}u(_.result)})})}}class K9 extends q9{constructor(e,t){null==e&&KO.throwArgumentError("missing provider","provider",e);let i=null,o=null,l=null;"function"==typeof e?(i="unknown:",o=e):(i=e.host||e.path||"",!i&&e.isMetaMask&&(i="metamask"),l=e,e.request?(""===i&&(i="eip-1193:"),o=function X9(n){return function(e,t){null==t&&(t=[]);const i={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:wh(i),provider:this}),n.request(i).then(o=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:o,provider:this}),o})}}(e)):e.sendAsync?o=YO(0,e.sendAsync.bind(e)):e.send?o=YO(0,e.send.bind(e)):KO.throwArgumentError("unsupported provider","provider",e),i||(i="unknown:")),super(i,t),gt(this,"jsonRpcFetchFunc",o),gt(this,"provider",l)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}pe(1504);const Y9=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"string","name":"uri","type":"string"}],"name":"safeMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),Z9=JSON.parse('{"L":"0xD6f7f4D1D1B987811785ad53C53e00ad62789E7a"}');function J9(n,e){if(1&n&&(Ac(0),hn(1,"pre",3),ni(2,"      "),hn(3,"strong"),ni(4,"Address: "),dn(),ni(5,"\n      "),hn(6,"a",4),ni(7),dn(),ni(8,"\n      "),dn(),Ja()),2&n){const t=Pi();ar(6),Dc("href","https://sepolia.etherscan.io/address/",t.wallet,"",rd),ar(1),Qa(t.wallet)}}function Q9(n,e){1&n&&(hn(0,"pre"),ni(1,"User not specified, please log in."),dn())}let eW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=go({type:n,selectors:[["app-wallet"]],inputs:{wallet:"wallet"},decls:4,vars:2,consts:[[2,"display","flex","flex-direction","column","align-items","center","width","50vw","margin","10px auto","color","white"],[4,"ngIf","ngIfElse"],["userNotDefined",""],[2,"display","flex"],["target","_blank",2,"color","#69f0ae",3,"href"]],template:function(t,i){if(1&t&&(hn(0,"div",0),vi(1,J9,9,2,"ng-container",1),vi(2,Q9,2,0,"ng-template",null,2,nM),dn()),2&t){const o=Id(3);ar(1),Nr("ngIf",i.wallet)("ngIfElse",o)}},dependencies:[j_],encapsulation:2}),n})();var tW=pe(3014),nW=pe.n(tW);let rW=(()=>{class n{constructor(){this.weapon=this.getRandomWeapon(),this.glbPath="assets/models_glb/"+this.weapon.fileName+".glb",this.posterPath="assets/posters/"+this.weapon.fileName+".png",this.description=this.weapon.description,this.weaponName=this.weapon.name}ngOnInit(){}getRandomWeapon(){const t=pe(5470);this.maxIndex=Object.keys(t).length-1;const i=Math.floor(Math.random()*this.maxIndex);return this.index=i,t[Object.keys(t)[i]]}getWeapon(t){let o,i=this.index;o=t?i===this.maxIndex?0:i+1:0===i?this.maxIndex:i-1,this.index=o;const l=pe(5470),u=l[Object.keys(l)[o]];console.log(u),this.weapon=u,this.weaponName=u.name,this.description=u.description,this.glbPath="assets/models_glb/"+this.weapon.fileName+".glb",this.posterPath="assets/posters/"+this.weapon.fileName+".png"}getMetadata(t){var i=this;return(0,_h.Z)(function*(){const o="https://ipfs.io/ipfs/",l=o+"bafybeiftwmde7cqptm5lgzmonjkwxripziww45gis6fl6u5jt6zqqeufi4/"+t;try{const u=yield nW().get(l).catch(function(p){console.log(p)});console.log(u),i.poster=o+u.data.image.substring(7,u.data.image.length),i.model=o+u.data.animation_url.substring(7,u.data.animation_url.length),i.weaponName=u.data.name,i.description=u.data.description}catch(u){console.log(u)}})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=go({type:n,selectors:[["app-model-viewer"]],decls:11,vars:4,consts:[[2,"position","relative","display","flex","justify-content","center","flex-direction","column","align-items","center","width","100%","height","100%"],[2,"border","1px solid white","background","rgba(0, 0, 0, 0)","width","100%"],["bounds","tight","enable-pan","","ar","","ar-modes","webxr scene-viewer quick-look","camera-controls","","environment-image","neutral","shadow-intensity","1","auto-rotate","",2,"width","100%","height","40vh","position","relative",3,"src","poster"],["mat-button","",2,"position","absolute","left","0","top","0","color","white","height","40vh",3,"click"],["aria-hidden","false","aria-label","Back Arrow","fontIcon","arrow_back_ios"],["mat-button","",2,"position","absolute","right","0","top","0","color","white","height","40vh",3,"click"],["aria-hidden","false","aria-label","Front Arrow","fontIcon","arrow_forward_ios"],[2,"text-align","justify","text-justify","inter-word"]],template:function(t,i){1&t&&(hn(0,"div",0)(1,"div",1),Bs(2,"model-viewer",2),hn(3,"button",3),ti("click",function(){return i.getWeapon(!1)}),Bs(4,"mat-icon",4),dn(),hn(5,"button",5),ti("click",function(){return i.getWeapon(!0)}),Bs(6,"mat-icon",6),dn()(),hn(7,"h2"),ni(8),dn(),hn(9,"p",7),ni(10),dn()()),2&t&&(ar(2),Rp("src",i.glbPath),Rp("poster",i.posterPath),ar(6),Qa(i.weaponName),ar(2),el(" ",i.description," "))},dependencies:[PT,e6],encapsulation:2}),n})();function iW(n,e){if(1&n){const t=Tc();Ac(0),hn(1,"button",9),ti("click",function(){return ka(t),Na(Pi().logOut())}),ni(2,"Logout"),dn(),Ja()}}function sW(n,e){if(1&n){const t=Tc();Ac(0),hn(1,"button",10),ti("click",function(){return ka(t),Na(Pi().mintRandom())}),ni(2,"Mint random weapon"),dn(),hn(3,"p",11),ni(4,"or"),dn(),hn(5,"div",12)(6,"mat-form-field",13)(7,"mat-label"),ni(8,"To address"),dn(),hn(9,"input",14),ti("ngModelChange",function(o){return ka(t),Na(Pi().custom_address=o)}),dn()(),hn(10,"mat-form-field",13)(11,"mat-label"),ni(12,"Custom URI"),dn(),hn(13,"input",15),ti("ngModelChange",function(o){return ka(t),Na(Pi().custom_uri=o)}),dn()()(),hn(14,"button",10),ti("click",function(){return ka(t),Na(Pi().mintCustom())}),ni(15,"Mint custom weapon"),dn(),Ja()}if(2&n){const t=Pi();ar(9),Nr("ngModel",t.custom_address),ar(4),Nr("ngModel",t.custom_uri)}}function oW(n,e){if(1&n){const t=Tc();hn(0,"button",16),ti("click",function(){return ka(t),Na(Pi().login())}),ni(1,"Login with Metamask"),dn()}}function aW(n,e){1&n&&(hn(0,"button",17),ni(1,"Mint random weapon"),dn(),hn(2,"button",18),ni(3,"Mint custom weapon"),dn())}let lW=(()=>{class n{constructor(t){this.snackBar=t,this.title="Halo Weapons NFT",this.provider=new K9(window.ethereum);const i=this.provider.getSigner();this.contract=new aR(Z9.L,Y9.Mt,i)}ngOnInit(){var t=this;return(0,_h.Z)(function*(){const i=yield t.provider?.getNetwork();t.chainId=i?.chainId})()}login(){var t=this;return(0,_h.Z)(function*(){try{yield t.getCurrentChainId(),43113!=t.chainId&&(yield t.switchChain());const o=(yield window.ethereum.request({method:"eth_requestAccounts"}))[0],l="0x"+Buffer.from("Log into this dapp").toString("hex");if(!(yield window.ethereum.request({method:"personal_sign",params:[l,o]})))throw Error("Metamask signature not found");t.wallet=o,console.log("User logged in with address "+t.wallet)}catch(i){console.error("Error:",i),t.snackBar.open("There was a problem logging in, please try again \u274c","",{duration:3e3})}})()}logOut(){var t=this;return(0,_h.Z)(function*(){t.wallet=void 0})()}mintRandom(){var t=this;return(0,_h.Z)(function*(){const i=pe(5470);let o=Object.keys(i).length-1,u="bafybeiftwmde7cqptm5lgzmonjkwxripziww45gis6fl6u5jt6zqqeufi4/"+Math.floor(Math.random()*o),p=t.wallet;yield t.mint(p,u)})()}mintCustom(){var t=this;return(0,_h.Z)(function*(){yield t.mint(t.custom_address,t.custom_uri)})()}mint(t,i){var o=this;return(0,_h.Z)(function*(){console.log("Minting NFT for user "+t+"from contract "+o.contract.address+" with URI "+i),yield(yield o.contract.safeMint(t,i)).wait(),o.snackBar.open("Transaction completed successfully \u2705","",{duration:3e3})})()}switchChain(){var t=this;return(0,_h.Z)(function*(){try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xA869"}]}),t.chainId=43113}catch(i){if(4902==i.code)try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0xA869",chainName:"Avalanche Fuji Testnet",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18},rpcUrls:["https://api.avax-test.network/ext/bc/C/rpc"],blockExplorerUrls:["https://testnet.snowtrace.io/"]}]})}catch(o){console.error(o)}if(t.chainId=43113,4902!=i.code)throw console.error(i),new Error("Code: "+i.code+". Message: "+i.message)}})()}getCurrentChainId(){var t=this;return(0,_h.Z)(function*(){const i=yield window.ethereum.request({method:"eth_chainId"}),o=parseInt(i,16);t.chainId=o})()}}return n.\u0275fac=function(t){return new(t||n)(Te(O8))},n.\u0275cmp=go({type:n,selectors:[["app-root"]],decls:17,vars:5,consts:[[1,"mat-custom-card",2,"display","flex","justify-content","center","height","10vh"],[3,"wallet"],[4,"ngIf","ngIfElse"],[1,"mat-custom-card"],[1,"mat-h1"],[2,"margin-top","5px"],[1,"mat-custom-card",2,"display","flex","justify-content","center"],["needLogin",""],["cantMint",""],["mat-stroked-button","","color","primary","className","customButton",3,"click"],["mat-raised-button","","color","accent",3,"click"],[2,"margin-top","10px"],[2,"display","flex","gap","40px"],["appearance","fill",1,"mat-custom-input"],["matInput","","placeholder","0x...",3,"ngModel","ngModelChange"],["matInput","","placeholder","ipfs://...",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","disabled",""],["mat-raised-button","","disabled","",2,"margin-top","20px"]],template:function(t,i){if(1&t&&(hn(0,"mat-card",0),Bs(1,"app-wallet",1),vi(2,iW,3,0,"ng-container",2),dn(),hn(3,"mat-card",3)(4,"span",4),ni(5,"Halo Weapons NFT"),dn(),hn(6,"p",5),ni(7," ERC-721 NFTs with embedded 3D models ready to cause mayhem on the Avalanche Fuji Testnet. There's 12 to collect!"),Bs(8,"br"),ni(9," You can mint a random NFT or a custom one providing metadata uploaded to IPFS. "),dn(),Bs(10,"app-model-viewer"),dn(),hn(11,"mat-card",6),vi(12,sW,16,2,"ng-container",2),dn(),vi(13,oW,2,0,"ng-template",null,7,nM),vi(15,aW,4,0,"ng-template",null,8,nM)),2&t){const o=Id(14),l=Id(16);ar(1),Nr("wallet",i.wallet),ar(1),Nr("ngIf",i.wallet)("ngIfElse",o),ar(10),Nr("ngIf",i.wallet)("ngIfElse",l)}},dependencies:[j_,PT,IU,VH,iD,GH,HM,zk,$T,eW,rW]}),n})();function ZO(n){return new Xe(3e3,!1)}function jW(){return typeof window<"u"&&typeof window.document<"u"}function gR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ef(n){switch(n.length){case 0:return new rb;case 1:return n[0];default:return new I3(n)}}function JO(n,e,t,i,o=new Map,l=new Map){const u=[],p=[];let v=-1,_=null;if(i.forEach(M=>{const C=M.get("offset"),N=C==v,H=N&&_||new Map;M.forEach((X,ee)=>{let ge=ee,fe=X;if("offset"!==ee)switch(ge=e.normalizePropertyName(ge,u),fe){case"!":fe=o.get(ee);break;case ph:fe=l.get(ee);break;default:fe=e.normalizeStyleValue(ee,ge,fe,u)}H.set(ge,fe)}),N||p.push(H),_=H,v=C}),u.length)throw function IW(n){return new Xe(3502,!1)}();return p}function vR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&yR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&yR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&yR(t,"destroy",n)))}}function yR(n,e,t){const l=_R(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(l._data=u),l}function _R(n,e,t,i,o="",l=0,u){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:o,totalTime:l,disabled:!!u}}function Ea(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function QO(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let bR=(n,e)=>!1,eF=(n,e,t)=>[],tF=null;function wR(n){const e=n.parentNode||n.host;return e===tF?null:e}(gR()||typeof Element<"u")&&(jW()?(tF=(()=>document.documentElement)(),bR=(n,e)=>{for(;e;){if(e===n)return!0;e=wR(e)}return!1}):bR=(n,e)=>n.contains(e),eF=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let am=null,nF=!1;const rF=bR,iF=eF;let sF=(()=>{class n{validateStyleProperty(t){return function WW(n){am||(am=function qW(){return typeof document<"u"?document.body:null}()||{},nF=!!am.style&&"WebkitAppearance"in am.style);let e=!0;return am.style&&!function GW(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in am.style,!e&&nF&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in am.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return rF(t,i)}getParentElement(t){return wR(t)}query(t,i,o){return iF(t,i,o)}computeStyle(t,i,o){return o||""}animate(t,i,o,l,u,p=[],v){return new rb(o,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})(),xR=(()=>{class n{}return n.NOOP=new sF,n})();const MR="ng-enter",YE="ng-leave",ZE="ng-trigger",JE=".ng-trigger",aF="ng-animating",ER=".ng-animating";function tf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:SR(parseFloat(e[1]),e[2])}function SR(n,e){return"s"===e?1e3*n:n}function QE(n,e,t){return n.hasOwnProperty("duration")?n:function KW(n,e,t){let o,l=0,u="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(ZO()),{duration:0,delay:0,easing:""};o=SR(parseFloat(p[1]),p[2]);const v=p[3];null!=v&&(l=SR(parseFloat(v),p[4]));const _=p[5];_&&(u=_)}else o=n;if(!t){let p=!1,v=e.length;o<0&&(e.push(function cW(){return new Xe(3100,!1)}()),p=!0),l<0&&(e.push(function uW(){return new Xe(3101,!1)}()),p=!0),p&&e.splice(v,0,ZO())}return{duration:o,delay:l,easing:u}}(n,e,t)}function Lb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function lF(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function nf(n,e=new Map,t){if(t)for(let[i,o]of t)e.set(i,o);for(let[i,o]of n)e.set(i,o);return e}function uF(n,e,t){return t?e+":"+t+";":""}function hF(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=uF(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=uF(0,QW(t),n.style[t]));n.setAttribute("style",e)}function Zc(n,e,t){n.style&&(e.forEach((i,o)=>{const l=AR(o);t&&!t.has(o)&&t.set(o,n.style[l]),n.style[l]=i}),gR()&&hF(n))}function lm(n,e){n.style&&(e.forEach((t,i)=>{const o=AR(i);n.style[o]=""}),gR()&&hF(n))}function Ob(n){return Array.isArray(n)?1==n.length?n[0]:D3(n):n}const CR=new RegExp("{{\\s*(.+?)\\s*}}","g");function dF(n){let e=[];if("string"==typeof n){let t;for(;t=CR.exec(n);)e.push(t[1]);CR.lastIndex=0}return e}function eS(n,e,t){const i=n.toString(),o=i.replace(CR,(l,u)=>{let p=e[u];return null==p&&(t.push(function dW(n){return new Xe(3003,!1)}()),p=""),p.toString()});return o==i?n:o}function tS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const JW=/-+([a-z0-9])/g;function AR(n){return n.replace(JW,(...e)=>e[1].toUpperCase())}function QW(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Sa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function fW(n){return new Xe(3004,!1)}()}}function fF(n,e){return window.getComputedStyle(n)[e]}function sq(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function oq(n,e,t){if(":"==n[0]){const v=function aq(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function AW(n){return new Xe(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function CW(n){return new Xe(3015,!1)}()),e;const o=i[1],l=i[2],u=i[3];e.push(pF(o,u));"<"==l[0]&&!("*"==o&&"*"==u)&&e.push(pF(u,o))}(i,t,e)):t.push(n),t}const sS=new Set(["true","1"]),oS=new Set(["false","0"]);function pF(n,e){const t=sS.has(n)||oS.has(n),i=sS.has(e)||oS.has(e);return(o,l)=>{let u="*"==n||n==o,p="*"==e||e==l;return!u&&t&&"boolean"==typeof o&&(u=o?sS.has(n):oS.has(n)),!p&&i&&"boolean"==typeof l&&(p=l?sS.has(e):oS.has(e)),u&&p}}const lq=new RegExp("s*:selfs*,?","g");function TR(n,e,t,i){return new cq(n).build(e,t,i)}class cq{constructor(e){this._driver=e}build(e,t,i){const o=new dq(t);return this._resetContextStyleTimingState(o),Sa(this,Ob(e),o)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,o=t.depCount=0;const l=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function mW(){return new Xe(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const v=p,_=v.name;_.toString().split(/\s*,\s*/).forEach(M=>{v.name=M,l.push(this.visitState(v,t))}),v.name=_}else if(1==p.type){const v=this.visitTransition(p,t);i+=v.queryCount,o+=v.depCount,u.push(v)}else t.errors.push(function gW(){return new Xe(3007,!1)}())}),{type:7,name:e.name,states:l,transitions:u,queryCount:i,depCount:o,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(i.containsDynamicStyles){const l=new Set,u=o||{};i.styles.forEach(p=>{p instanceof Map&&p.forEach(v=>{dF(v).forEach(_=>{u.hasOwnProperty(_)||l.add(_)})})}),l.size&&(tS(l.values()),t.errors.push(function vW(n,e){return new Xe(3008,!1)}()))}return{type:0,name:e.name,style:i,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Sa(this,Ob(e.animation),t);return{type:1,matchers:sq(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:cm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Sa(this,i,t)),options:cm(e.options)}}visitGroup(e,t){const i=t.currentTime;let o=0;const l=e.steps.map(u=>{t.currentTime=i;const p=Sa(this,u,t);return o=Math.max(o,t.currentTime),p});return t.currentTime=o,{type:3,steps:l,options:cm(e.options)}}visitAnimate(e,t){const i=function pq(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return DR(QE(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=DR(0,0,"");return l.dynamic=!0,l.strValue=t,l}const o=QE(t,e);return DR(o.duration,o.delay,o.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let o,l=e.styles?e.styles:Jp({});if(5==l.type)o=this.visitKeyframes(l,t);else{let u=e.styles,p=!1;if(!u){p=!0;const _={};i.easing&&(_.easing=i.easing),u=Jp(_)}t.currentTime+=i.duration+i.delay;const v=this.visitStyle(u,t);v.isEmptyStep=p,o=v}return t.currentAnimateTimings=null,{type:4,timings:i,style:o,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],o=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of o)"string"==typeof p?p===ph?i.push(p):t.errors.push(new Xe(3002,!1)):i.push(lF(p));let l=!1,u=null;return i.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(u=p.get("easing"),p.delete("easing")),!l))for(let v of p.values())if(v.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:i,easing:u,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let o=t.currentTime,l=t.currentTime;i&&l>0&&(l-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((p,v)=>{const _=t.collectedStyles.get(t.currentQuerySelector),M=_.get(v);let C=!0;M&&(l!=o&&l>=M.startTime&&o<=M.endTime&&(t.errors.push(function _W(n,e,t,i,o){return new Xe(3010,!1)}()),C=!1),l=M.startTime),C&&_.set(v,{startTime:l,endTime:o}),t.options&&function ZW(n,e,t){const i=e.params||{},o=dF(n);o.length&&o.forEach(l=>{i.hasOwnProperty(l)||t.push(function hW(n){return new Xe(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function bW(){return new Xe(3011,!1)}()),i;let l=0;const u=[];let p=!1,v=!1,_=0;const M=e.steps.map(fe=>{const Ie=this._makeStyleAst(fe,t);let Ee=null!=Ie.offset?Ie.offset:function fq(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ie.styles),st=0;return null!=Ee&&(l++,st=Ie.offset=Ee),v=v||st<0||st>1,p=p||st<_,_=st,u.push(st),Ie});v&&t.errors.push(function wW(){return new Xe(3012,!1)}()),p&&t.errors.push(function xW(){return new Xe(3200,!1)}());const C=e.steps.length;let N=0;l>0&&l<C?t.errors.push(function MW(){return new Xe(3202,!1)}()):0==l&&(N=1/(C-1));const H=C-1,X=t.currentTime,ee=t.currentAnimateTimings,ge=ee.duration;return M.forEach((fe,Ie)=>{const Ee=N>0?Ie==H?1:N*Ie:u[Ie],st=Ee*ge;t.currentTime=X+ee.delay+st,ee.duration=st,this._validateStyleAst(fe,t),fe.offset=Ee,i.styles.push(fe)}),i}visitReference(e,t){return{type:8,animation:Sa(this,Ob(e.animation),t),options:cm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:cm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:cm(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[l,u]=function uq(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(lq,"")),n=n.replace(/@\*/g,JE).replace(/@\w+/g,t=>JE+"-"+t.slice(1)).replace(/:animating/g,ER),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+l:l,Ea(t.collectedStyles,t.currentQuerySelector,new Map);const p=Sa(this,Ob(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:l,limit:o.limit||0,optional:!!o.optional,includeSelf:u,animation:p,originalSelector:e.selector,options:cm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function EW(){return new Xe(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:QE(e.timings,t.errors,!0);return{type:12,animation:Sa(this,Ob(e.animation),t),timings:i,options:null}}}class dq{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function cm(n){return n?(n=Lb(n)).params&&(n.params=function hq(n){return n?Lb(n):null}(n.params)):n={},n}function DR(n,e,t){return{duration:n,delay:e,easing:t}}function RR(n,e,t,i,o,l,u=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:o,delay:l,totalTime:o+l,easing:u,subTimeline:p}}class aS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vq=new RegExp(":enter","g"),_q=new RegExp(":leave","g");function IR(n,e,t,i,o,l=new Map,u=new Map,p,v,_=[]){return(new bq).buildKeyframes(n,e,t,i,o,l,u,p,v,_)}class bq{buildKeyframes(e,t,i,o,l,u,p,v,_,M=[]){_=_||new aS;const C=new PR(e,t,_,o,l,M,[]);C.options=v;const N=v.delay?tf(v.delay):0;C.currentTimeline.delayNextStep(N),C.currentTimeline.setStyles([u],null,C.errors,v),Sa(this,i,C);const H=C.timelines.filter(X=>X.containsAnimation());if(H.length&&p.size){let X;for(let ee=H.length-1;ee>=0;ee--){const ge=H[ee];if(ge.element===t){X=ge;break}}X&&!X.allowOnlyTimelineStyles()&&X.setStyles([p],null,C.errors,v)}return H.length?H.map(X=>X.buildKeyframes()):[RR(t,[],[],[],0,N,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const o=t.createSubContext(e.options),l=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,o,o.options);l!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let l=t.currentTimeline.currentTime;const u=null!=i.duration?tf(i.duration):null,p=null!=i.delay?tf(i.delay):null;return 0!==u&&e.forEach(v=>{const _=t.appendInstructionToTimeline(v,u,p);l=Math.max(l,_.duration+_.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),Sa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let o=t;const l=e.options;if(l&&(l.params||l.delay)&&(o=t.createSubContext(l),o.transformIntoNewTimeline(),null!=l.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=lS);const u=tf(l.delay);o.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Sa(this,u,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let o=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?tf(e.options.delay):0;e.steps.forEach(u=>{const p=t.createSubContext(e.options);l&&p.delayNextStep(l),Sa(this,u,p),o=Math.max(o,p.currentTimeline.currentTime),i.push(p.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return QE(t.params?eS(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),o.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(i.duration),this.visitStyle(l,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,o=t.currentAnimateTimings;!o&&i.hasCurrentStyleProperties()&&i.forwardFrame();const l=o&&o.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(l):i.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,o=t.currentTimeline.duration,l=i.duration,p=t.createSubContext().currentTimeline;p.easing=i.easing,e.styles.forEach(v=>{p.forwardTime((v.offset||0)*l),p.setStyles(v.styles,v.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(o+l),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,o=e.options||{},l=o.delay?tf(o.delay):0;l&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lS);let u=i;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=p.length;let v=null;p.forEach((_,M)=>{t.currentQueryIndex=M;const C=t.createSubContext(e.options,_);l&&C.delayNextStep(l),_===t.element&&(v=C.currentTimeline),Sa(this,e.animation,C),C.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,C.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,o=t.currentTimeline,l=e.timings,u=Math.abs(l.duration),p=u*(t.currentQueryTotal-1);let v=u*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":v=p-v;break;case"full":v=i.currentStaggerTime}const M=t.currentTimeline;v&&M.delayNextStep(v);const C=M.currentTime;Sa(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=o.currentTime-C+(o.startTime-i.currentTimeline.startTime)}}const lS={};class PR{constructor(e,t,i,o,l,u,p,v){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=l,this.errors=u,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new cS(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let o=this.options;null!=i.duration&&(o.duration=tf(i.duration)),null!=i.delay&&(o.delay=tf(i.delay));const l=i.params;if(l){let u=o.params;u||(u=this.options.params={}),Object.keys(l).forEach(p=>{(!t||!u.hasOwnProperty(p))&&(u[p]=eS(l[p],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(o=>{i[o]=t[o]})}}return e}createSubContext(e=null,t,i){const o=t||this.element,l=new PR(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=lS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const o={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},l=new wq(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(l),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,o,l,u){let p=[];if(o&&p.push(this.element),e.length>0){e=(e=e.replace(vq,"."+this._enterClassName)).replace(_q,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),p.push(..._)}return!l&&0==p.length&&u.push(function SW(n){return new Xe(3014,!1)}()),p}}class cS{constructor(e,t,i,o){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ph),this._currentKeyframe.set(t,ph);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,o){t&&this._previousKeyframe.set("easing",t);const l=o&&o.params||{},u=function xq(n,e){const t=new Map;let i;return n.forEach(o=>{if("*"===o){i=i||e.keys();for(let l of i)t.set(l,ph)}else nf(o,t)}),t}(e,this._globalTimelineStyles);for(let[p,v]of u){const _=eS(v,l,i);this._pendingStyles.set(p,_),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??ph),this._updateStyle(p,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const o=this._styleSummary.get(i);(!o||t.time>o.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((p,v)=>{const _=nf(p,new Map,this._backFill);_.forEach((M,C)=>{"!"===M?e.add(C):M===ph&&t.add(C)}),i||_.set("offset",v/this.duration),o.push(_)});const l=e.size?tS(e.values()):[],u=t.size?tS(t.values()):[];if(i){const p=o[0],v=new Map(p);p.set("offset",0),v.set("offset",1),o=[p,v]}return RR(this.element,o,l,u,this.duration,this.startTime,this.easing,!1)}}class wq extends cS{constructor(e,t,i,o,l,u,p=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=l,this._stretchStartingKeyframe=p,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],u=i+t,p=t/u,v=nf(e[0]);v.set("offset",0),l.push(v);const _=nf(e[0]);_.set("offset",vF(p)),l.push(_);const M=e.length-1;for(let C=1;C<=M;C++){let N=nf(e[C]);const H=N.get("offset");N.set("offset",vF((t+H*i)/u)),l.push(N)}i=u,t=0,o="",e=l}return RR(this.element,e,this.preStyleProps,this.postStyleProps,i,t,o,!0)}}function vF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class kR{}const Mq=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Eq extends kR{normalizePropertyName(e,t){return AR(e)}normalizeStyleValue(e,t,i,o){let l="";const u=i.toString().trim();if(Mq.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)l="px";else{const p=i.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&o.push(function pW(n,e){return new Xe(3005,!1)}())}return u+l}}function yF(n,e,t,i,o,l,u,p,v,_,M,C,N){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:l,toState:i,toStyles:u,timelines:p,queriedElements:v,preStyleProps:_,postStyleProps:M,totalTime:C,errors:N}}const NR={};class _F{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,o){return function Sq(n,e,t,i,o){return n.some(l=>l(e,t,i,o))}(this.ast.matchers,e,t,i,o)}buildStyles(e,t,i){let o=this._stateStyles.get("*");return void 0!==e&&(o=this._stateStyles.get(e?.toString())||o),o?o.buildStyles(t,i):new Map}build(e,t,i,o,l,u,p,v,_,M){const C=[],N=this.ast.options&&this.ast.options.params||NR,X=this.buildStyles(i,p&&p.params||NR,C),ee=v&&v.params||NR,ge=this.buildStyles(o,ee,C),fe=new Set,Ie=new Map,Ee=new Map,st="void"===o,wt={params:Cq(ee,N),delay:this.ast.options?.delay},Yt=M?[]:IR(e,t,this.ast.animation,l,u,X,ge,wt,_,C);let Or=0;if(Yt.forEach(li=>{Or=Math.max(li.duration+li.delay,Or)}),C.length)return yF(t,this._triggerName,i,o,st,X,ge,[],[],Ie,Ee,Or,C);Yt.forEach(li=>{const $s=li.element,F0=Ea(Ie,$s,new Set);li.preStyleProps.forEach(sc=>F0.add(sc));const Ah=Ea(Ee,$s,new Set);li.postStyleProps.forEach(sc=>Ah.add(sc)),$s!==t&&fe.add($s)});const mi=tS(fe.values());return yF(t,this._triggerName,i,o,st,X,ge,Yt,mi,Ie,Ee,Or)}}function Cq(n,e){const t=Lb(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Aq{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,o=Lb(this.defaultParams);return Object.keys(e).forEach(l=>{const u=e[l];null!==u&&(o[l]=u)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((u,p)=>{u&&(u=eS(u,o,t));const v=this.normalizer.normalizePropertyName(p,t);u=this.normalizer.normalizeStyleValue(p,v,u,t),i.set(v,u)})}),i}}class Dq{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(o=>{this.states.set(o.name,new Aq(o.style,o.options&&o.options.params||{},i))}),bF(this.states,"true","1"),bF(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new _F(e,o,this.states))}),this.fallbackTransition=function Rq(n,e,t){return new _F(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,o){return this.transitionFactories.find(u=>u.match(e,t,i,o))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function bF(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Iq=new aS;class Pq{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],l=TR(this._driver,t,i,[]);if(i.length)throw function PW(n){return new Xe(3503,!1)}();this._animations.set(e,l)}_buildPlayer(e,t,i){const o=e.element,l=JO(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(o,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const o=[],l=this._animations.get(e);let u;const p=new Map;if(l?(u=IR(this._driver,t,l,MR,YE,new Map,new Map,i,Iq,o),u.forEach(M=>{const C=Ea(p,M.element,new Map);M.postStyleProps.forEach(N=>C.set(N,null))})):(o.push(function kW(){return new Xe(3300,!1)}()),u=[]),o.length)throw function NW(n){return new Xe(3504,!1)}();p.forEach((M,C)=>{M.forEach((N,H)=>{M.set(H,this._driver.computeStyle(C,H,ph))})});const _=ef(u.map(M=>{const C=p.get(M.element);return this._buildPlayer(M,new Map,C)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function LW(n){return new Xe(3301,!1)}();return t}listen(e,t,i,o){const l=_R(t,"","","");return vR(this._getPlayer(e),i,l,o),()=>{}}command(e,t,i,o){if("register"==i)return void this.register(e,o[0]);if("create"==i)return void this.create(e,t,o[0]||{});const l=this._getPlayer(e);switch(i){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const wF="ng-animate-queued",LR="ng-animate-disabled",Fq=[],xF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Bq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},pl="__ng_removed";class OR{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function zq(n){return n??null}(i?e.value:e),i){const l=Lb(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(o=>{null==i[o]&&(i[o]=t[o])})}}}const Fb="void",FR=new OR(Fb);class Vq{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ml(t,this._hostClassName)}listen(e,t,i,o){if(!this._triggers.has(t))throw function OW(n,e){return new Xe(3302,!1)}();if(null==i||0==i.length)throw function FW(n){return new Xe(3303,!1)}();if(!function jq(n){return"start"==n||"done"==n}(i))throw function BW(n,e){return new Xe(3400,!1)}();const l=Ea(this._elementListeners,e,[]),u={name:t,phase:i,callback:o};l.push(u);const p=Ea(this._engine.statesByElement,e,new Map);return p.has(t)||(ml(e,ZE),ml(e,ZE+"-"+t),p.set(t,FR)),()=>{this._engine.afterFlush(()=>{const v=l.indexOf(u);v>=0&&l.splice(v,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function VW(n){return new Xe(3401,!1)}();return t}trigger(e,t,i,o=!0){const l=this._getTrigger(t),u=new BR(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(ml(e,ZE),ml(e,ZE+"-"+t),this._engine.statesByElement.set(e,p=new Map));let v=p.get(t);const _=new OR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&v&&_.absorbOptions(v.options),p.set(t,_),v||(v=FR),_.value!==Fb&&v.value===_.value){if(!function qq(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let o=0;o<t.length;o++){const l=t[o];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(v.params,_.params)){const ee=[],ge=l.matchStyles(v.value,v.params,ee),fe=l.matchStyles(_.value,_.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{lm(e,ge),Zc(e,fe)})}return}const N=Ea(this._engine.playersByElement,e,[]);N.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let H=l.matchTransition(v.value,_.value,e,_.params),X=!1;if(!H){if(!o)return;H=l.fallbackTransition,X=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:v,toState:_,player:u,isFallbackTransition:X}),X||(ml(e,wF),u.onStart(()=>{O0(e,wF)})),u.onDone(()=>{let ee=this.players.indexOf(u);ee>=0&&this.players.splice(ee,1);const ge=this._engine.playersByElement.get(e);if(ge){let fe=ge.indexOf(u);fe>=0&&ge.splice(fe,1)}}),this.players.push(u),N.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,JE,!0);i.forEach(o=>{if(o[pl])return;const l=this._engine.fetchNamespacesByElement(o);l.size?l.forEach(u=>u.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,i,o){const l=this._engine.statesByElement.get(e),u=new Map;if(l){const p=[];if(l.forEach((v,_)=>{if(u.set(_,v.value),this._triggers.has(_)){const M=this.trigger(e,_,Fb,o);M&&p.push(M)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),i&&ef(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const o=new Set;t.forEach(l=>{const u=l.name;if(o.has(u))return;o.add(u);const v=this._triggers.get(u).fallbackTransition,_=i.get(u)||FR,M=new OR(Fb),C=new BR(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:v,fromState:_,toState:M,player:C,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(i.totalAnimations){const l=i.players.length?i.playersByQueriedElement.get(e):[];if(l&&l.length)o=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)i.markElementAsRemoved(this.id,e,!1,t);else{const l=e[pl];(!l||l===xF)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ml(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const o=i.player;if(o.destroyed)return;const l=i.element,u=this._elementListeners.get(l);u&&u.forEach(p=>{if(p.name==i.triggerName){const v=_R(l,i.triggerName,i.fromState.value,i.toState.value);v._data=e,vR(i.player,p.phase,v,p.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(i)}),this._queue=[],t.sort((i,o)=>{const l=i.transition.ast.depCount,u=o.transition.ast.depCount;return 0==l||0==u?l-u:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Uq{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Vq(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,o=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,p=this.driver.getParentElement(t);for(;p;){const v=o.get(p);if(v){const _=i.indexOf(v);i.splice(_+1,0,e),u=!0;break}p=this.driver.getParentElement(p)}u||i.unshift(e)}else i.push(e);return o.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let o=this._namespaceLookup[e];o&&o.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let o of i.values())if(o.namespaceId){const l=this._fetchNamespace(o.namespaceId);l&&t.add(l)}return t}trigger(e,t,i,o){if(uS(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,i,o),!0}return!1}insertNode(e,t,i,o){if(!uS(t))return;const l=t[pl];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ml(e,LR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),O0(e,LR))}removeNode(e,t,i,o){if(uS(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),i){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,i,o,l){this.collectedLeaveElements.push(t),t[pl]={namespaceId:e,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,i,o,l){return uS(t)?this._fetchNamespace(e).listen(t,i,o,l):()=>{}}_buildInstruction(e,t,i,o,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,o,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,JE,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ER,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ef(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[pl];if(t&&t.setForRemoval){if(e[pl]=xF,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(LR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ml(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ef(t).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(e){throw function UW(n){return new Xe(3402,!1)}()}_flushAnimations(e,t){const i=new aS,o=[],l=new Map,u=[],p=new Map,v=new Map,_=new Map,M=new Set;this.disabledNodes.forEach(Vt=>{M.add(Vt);const en=this.driver.query(Vt,".ng-animate-queued",!0);for(let pn=0;pn<en.length;pn++)M.add(en[pn])});const C=this.bodyNode,N=Array.from(this.statesByElement.keys()),H=SF(N,this.collectedEnterElements),X=new Map;let ee=0;H.forEach((Vt,en)=>{const pn=MR+ee++;X.set(en,pn),Vt.forEach(wr=>ml(wr,pn))});const ge=[],fe=new Set,Ie=new Set;for(let Vt=0;Vt<this.collectedLeaveElements.length;Vt++){const en=this.collectedLeaveElements[Vt],pn=en[pl];pn&&pn.setForRemoval&&(ge.push(en),fe.add(en),pn.hasAnimation?this.driver.query(en,".ng-star-inserted",!0).forEach(wr=>fe.add(wr)):Ie.add(en))}const Ee=new Map,st=SF(N,Array.from(fe));st.forEach((Vt,en)=>{const pn=YE+ee++;Ee.set(en,pn),Vt.forEach(wr=>ml(wr,pn))}),e.push(()=>{H.forEach((Vt,en)=>{const pn=X.get(en);Vt.forEach(wr=>O0(wr,pn))}),st.forEach((Vt,en)=>{const pn=Ee.get(en);Vt.forEach(wr=>O0(wr,pn))}),ge.forEach(Vt=>{this.processLeaveNode(Vt)})});const wt=[],Yt=[];for(let Vt=this._namespaceList.length-1;Vt>=0;Vt--)this._namespaceList[Vt].drainQueuedTransitions(t).forEach(pn=>{const wr=pn.player,As=pn.element;if(wt.push(wr),this.collectedEnterElements.length){const fo=As[pl];if(fo&&fo.setForMove){if(fo.previousTriggersValues&&fo.previousTriggersValues.has(pn.triggerName)){const um=fo.previousTriggersValues.get(pn.triggerName),gl=this.statesByElement.get(pn.element);if(gl&&gl.has(pn.triggerName)){const fS=gl.get(pn.triggerName);fS.value=um,gl.set(pn.triggerName,fS)}}return void wr.destroy()}}const Jc=!C||!this.driver.containsElement(C,As),Ca=Ee.get(As),rf=X.get(As),Ei=this._buildInstruction(pn,i,rf,Ca,Jc);if(Ei.errors&&Ei.errors.length)return void Yt.push(Ei);if(Jc)return wr.onStart(()=>lm(As,Ei.fromStyles)),wr.onDestroy(()=>Zc(As,Ei.toStyles)),void o.push(wr);if(pn.isFallbackTransition)return wr.onStart(()=>lm(As,Ei.fromStyles)),wr.onDestroy(()=>Zc(As,Ei.toStyles)),void o.push(wr);const NF=[];Ei.timelines.forEach(fo=>{fo.stretchStartingKeyframe=!0,this.disabledNodes.has(fo.element)||NF.push(fo)}),Ei.timelines=NF,i.append(As,Ei.timelines),u.push({instruction:Ei,player:wr,element:As}),Ei.queriedElements.forEach(fo=>Ea(p,fo,[]).push(wr)),Ei.preStyleProps.forEach((fo,um)=>{if(fo.size){let gl=v.get(um);gl||v.set(um,gl=new Set),fo.forEach((fS,HR)=>gl.add(HR))}}),Ei.postStyleProps.forEach((fo,um)=>{let gl=_.get(um);gl||_.set(um,gl=new Set),fo.forEach((fS,HR)=>gl.add(HR))})});if(Yt.length){const Vt=[];Yt.forEach(en=>{Vt.push(function HW(n,e){return new Xe(3505,!1)}())}),wt.forEach(en=>en.destroy()),this.reportError(Vt)}const Or=new Map,mi=new Map;u.forEach(Vt=>{const en=Vt.element;i.has(en)&&(mi.set(en,en),this._beforeAnimationBuild(Vt.player.namespaceId,Vt.instruction,Or))}),o.forEach(Vt=>{const en=Vt.element;this._getPreviousPlayers(en,!1,Vt.namespaceId,Vt.triggerName,null).forEach(wr=>{Ea(Or,en,[]).push(wr),wr.destroy()})});const li=ge.filter(Vt=>AF(Vt,v,_)),$s=new Map;EF($s,this.driver,Ie,_,ph).forEach(Vt=>{AF(Vt,v,_)&&li.push(Vt)});const Ah=new Map;H.forEach((Vt,en)=>{EF(Ah,this.driver,new Set(Vt),v,"!")}),li.forEach(Vt=>{const en=$s.get(Vt),pn=Ah.get(Vt);$s.set(Vt,new Map([...Array.from(en?.entries()??[]),...Array.from(pn?.entries()??[])]))});const sc=[],B0=[],V0={};u.forEach(Vt=>{const{element:en,player:pn,instruction:wr}=Vt;if(i.has(en)){if(M.has(en))return pn.onDestroy(()=>Zc(en,wr.toStyles)),pn.disabled=!0,pn.overrideTotalTime(wr.totalTime),void o.push(pn);let As=V0;if(mi.size>1){let Ca=en;const rf=[];for(;Ca=Ca.parentNode;){const Ei=mi.get(Ca);if(Ei){As=Ei;break}rf.push(Ca)}rf.forEach(Ei=>mi.set(Ei,As))}const Jc=this._buildAnimation(pn.namespaceId,wr,Or,l,Ah,$s);if(pn.setRealPlayer(Jc),As===V0)sc.push(pn);else{const Ca=this.playersByElement.get(As);Ca&&Ca.length&&(pn.parentPlayer=ef(Ca)),o.push(pn)}}else lm(en,wr.fromStyles),pn.onDestroy(()=>Zc(en,wr.toStyles)),B0.push(pn),M.has(en)&&o.push(pn)}),B0.forEach(Vt=>{const en=l.get(Vt.element);if(en&&en.length){const pn=ef(en);Vt.setRealPlayer(pn)}}),o.forEach(Vt=>{Vt.parentPlayer?Vt.syncPlayerEvents(Vt.parentPlayer):Vt.destroy()});for(let Vt=0;Vt<ge.length;Vt++){const en=ge[Vt],pn=en[pl];if(O0(en,YE),pn&&pn.hasAnimation)continue;let wr=[];if(p.size){let Jc=p.get(en);Jc&&Jc.length&&wr.push(...Jc);let Ca=this.driver.query(en,ER,!0);for(let rf=0;rf<Ca.length;rf++){let Ei=p.get(Ca[rf]);Ei&&Ei.length&&wr.push(...Ei)}}const As=wr.filter(Jc=>!Jc.destroyed);As.length?Gq(this,en,As):this.processLeaveNode(en)}return ge.length=0,sc.forEach(Vt=>{this.players.push(Vt),Vt.onDone(()=>{Vt.destroy();const en=this.players.indexOf(Vt);this.players.splice(en,1)}),Vt.play()}),sc}elementContainsData(e,t){let i=!1;const o=t[pl];return o&&o.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,o,l){let u=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(u=p)}else{const p=this.playersByElement.get(e);if(p){const v=!l||l==Fb;p.forEach(_=>{_.queued||!v&&_.triggerName!=o||u.push(_)})}}return(i||o)&&(u=u.filter(p=>!(i&&i!=p.namespaceId||o&&o!=p.triggerName))),u}_beforeAnimationBuild(e,t,i){const l=t.element,u=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const _=v.element,M=_!==l,C=Ea(i,_,[]);this._getPreviousPlayers(_,M,u,p,t.toState).forEach(H=>{const X=H.getRealPlayer();X.beforeDestroy&&X.beforeDestroy(),H.destroy(),C.push(H)})}lm(l,t.fromStyles)}_buildAnimation(e,t,i,o,l,u){const p=t.triggerName,v=t.element,_=[],M=new Set,C=new Set,N=t.timelines.map(X=>{const ee=X.element;M.add(ee);const ge=ee[pl];if(ge&&ge.removedBeforeQueried)return new rb(X.duration,X.delay);const fe=ee!==v,Ie=function Wq(n){const e=[];return CF(n,e),e}((i.get(ee)||Fq).map(Or=>Or.getRealPlayer())).filter(Or=>!!Or.element&&Or.element===ee),Ee=l.get(ee),st=u.get(ee),wt=JO(0,this._normalizer,0,X.keyframes,Ee,st),Yt=this._buildPlayer(X,wt,Ie);if(X.subTimeline&&o&&C.add(ee),fe){const Or=new BR(e,p,ee);Or.setRealPlayer(Yt),_.push(Or)}return Yt});_.forEach(X=>{Ea(this.playersByQueriedElement,X.element,[]).push(X),X.onDone(()=>function Hq(n,e,t){let i=n.get(e);if(i){if(i.length){const o=i.indexOf(t);i.splice(o,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,X.element,X))}),M.forEach(X=>ml(X,aF));const H=ef(N);return H.onDestroy(()=>{M.forEach(X=>O0(X,aF)),Zc(v,t.toStyles)}),C.forEach(X=>{Ea(o,X,[]).push(H)}),H}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new rb(e.duration,e.delay)}}class BR{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new rb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(o=>vR(e,i,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ea(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function uS(n){return n&&1===n.nodeType}function MF(n,e){const t=n.style.display;return n.style.display=e??"none",t}function EF(n,e,t,i,o){const l=[];t.forEach(v=>l.push(MF(v)));const u=[];i.forEach((v,_)=>{const M=new Map;v.forEach(C=>{const N=e.computeStyle(_,C,o);M.set(C,N),(!N||0==N.length)&&(_[pl]=Bq,u.push(_))}),n.set(_,M)});let p=0;return t.forEach(v=>MF(v,l[p++])),u}function SF(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const o=new Set(e),l=new Map;function u(p){if(!p)return 1;let v=l.get(p);if(v)return v;const _=p.parentNode;return v=t.has(_)?_:o.has(_)?1:u(_),l.set(p,v),v}return e.forEach(p=>{const v=u(p);1!==v&&t.get(v).push(p)}),t}function ml(n,e){n.classList?.add(e)}function O0(n,e){n.classList?.remove(e)}function Gq(n,e,t){ef(t).onDone(()=>n.processLeaveNode(e))}function CF(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof I3?CF(i.players,e):e.push(i)}}function AF(n,e,t){const i=t.get(n);if(!i)return!1;let o=e.get(n);return o?i.forEach(l=>o.add(l)):e.set(n,i),t.delete(n),!0}class hS{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,l)=>{},this._transitionEngine=new Uq(e,t,i),this._timelineEngine=new Pq(e,t,i),this._transitionEngine.onRemovalComplete=(o,l)=>this.onRemovalComplete(o,l)}registerTrigger(e,t,i,o,l){const u=e+"-"+o;let p=this._triggerCache[u];if(!p){const v=[],M=TR(this._driver,l,v,[]);if(v.length)throw function RW(n,e){return new Xe(3404,!1)}();p=function Tq(n,e,t){return new Dq(n,e,t)}(o,M,this._normalizer),this._triggerCache[u]=p}this._transitionEngine.registerTrigger(t,o,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,o){this._transitionEngine.insertNode(e,t,i,o)}onRemove(e,t,i,o){this._transitionEngine.removeNode(e,t,o||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,o){if("@"==i.charAt(0)){const[l,u]=QO(i);this._timelineEngine.command(l,t,u,o)}else this._transitionEngine.trigger(e,t,i,o)}listen(e,t,i,o,l){if("@"==i.charAt(0)){const[u,p]=QO(i);return this._timelineEngine.listen(u,t,p,l)}return this._transitionEngine.listen(e,t,i,o,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Xq=(()=>{class n{constructor(t,i,o){this._element=t,this._startStyles=i,this._endStyles=o,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Zc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zc(this._element,this._initialStyles),this._endStyles&&(Zc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(lm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lm(this._element,this._endStyles),this._endStyles=null),Zc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function VR(n){let e=null;return n.forEach((t,i)=>{(function Kq(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class TF{constructor(e,t,i,o){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,o)=>{"offset"!==o&&e.set(o,this._finished?i:fF(this.element,o))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Yq{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return rF(e,t)}getParentElement(e){return wR(e)}query(e,t,i){return iF(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,o,l,u=[]){const v={duration:i,delay:o,fill:0==o?"both":"forwards"};l&&(v.easing=l);const _=new Map,M=u.filter(H=>H instanceof TF);(function eq(n,e){return 0===n||0===e})(i,o)&&M.forEach(H=>{H.currentSnapshot.forEach((X,ee)=>_.set(ee,X))});let C=function YW(n){return n.length?n[0]instanceof Map?n:n.map(e=>lF(e)):[]}(t).map(H=>nf(H));C=function tq(n,e,t){if(t.size&&e.length){let i=e[0],o=[];if(t.forEach((l,u)=>{i.has(u)||o.push(u),i.set(u,l)}),o.length)for(let l=1;l<e.length;l++){let u=e[l];o.forEach(p=>u.set(p,fF(n,p)))}}return e}(e,C,_);const N=function $q(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=VR(e[0]),e.length>1&&(i=VR(e[e.length-1]))):e instanceof Map&&(t=VR(e)),t||i?new Xq(n,t,i):null}(e,C);return new TF(e,C,v,N)}}let Zq=(()=>{class n extends A3{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Zo.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?D3(t):t;return DF(this._renderer,null,i,"register",[o]),new Jq(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Re(od),Re(rr))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();class Jq extends class fH{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Qq(this._id,e,t||{},this._renderer)}}class Qq{constructor(e,t,i,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return DF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function DF(n,e,t,i,o){return n.setProperty(e,`@@${t}:${i}`,o)}const RF="@.disabled";let e$=(()=>{class n{constructor(t,i,o){this.delegate=t,this.engine=i,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(l,u)=>{const p=u?.parentNode(l);p&&u.removeChild(p,l)}}createRenderer(t,i){const l=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let M=this._rendererCache.get(l);return M||(M=new IF("",l,this.engine),this._rendererCache.set(l,M)),M}const u=i.id,p=i.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const v=M=>{Array.isArray(M)?M.forEach(v):this.engine.registerTrigger(u,p,t,M.name,M)};return i.data.animation.forEach(v),new t$(this,p,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,o){t>=0&&t<this._microtaskId?this._zone.run(()=>i(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[u,p]=l;u(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Re(od),Re(hS),Re(Xn))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})();class IF{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,o=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,o){this.delegate.setAttribute(e,t,i,o)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,o){this.delegate.setStyle(e,t,i,o)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==RF?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class t$ extends IF{constructor(e,t,i,o){super(t,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==RF?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const o=function n$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.slice(1),u="";return"@"!=l.charAt(0)&&([l,u]=function r$(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(l)),this.engine.listen(this.namespaceId,o,l,u,p=>{this.factory.scheduleListenerCallback(p._data||-1,i,p)})}return this.delegate.listen(e,t,i)}}const PF=[{provide:A3,useClass:Zq},{provide:kR,useFactory:function s$(){return new Eq}},{provide:hS,useClass:(()=>{class n extends hS{constructor(t,i,o,l){super(t.body,i,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Re(rr),Re(xR),Re(kR),Re(f0))},n.\u0275prov=yt({token:n,factory:n.\u0275fac}),n})()},{provide:od,useFactory:function o$(n,e,t){return new e$(n,e,t)},deps:[DM,hS,Xn]}],UR=[{provide:xR,useFactory:()=>new Yq},{provide:jp,useValue:"BrowserAnimations"},...PF],kF=[{provide:xR,useClass:sF},{provide:jp,useValue:"NoopAnimations"},...PF];let a$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?kF:UR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n}),n.\u0275inj=An({providers:UR,imports:[EP]}),n})(),l$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pr({type:n,bootstrap:[lW]}),n.\u0275inj=An({imports:[EP,l7,a$,F8,nH]}),n})();(function zB(){D2=!1})(),aV().bootstrapModule(l$).catch(n=>console.error(n))},3014:(et,ot,pe)=>{et.exports=pe(7114)},7729:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=pe(858),ie=pe(5738),ve=pe(1625),U=pe(5215),Se=pe(2099),Ge=pe(6100),be=pe(5867),Ce=pe(133),Je=pe(1841),ye=pe(6700);et.exports=function(Be){return new Promise(function(ct,nt){var Ht,ft=Be.data,Me=Be.headers,vt=Be.responseType;function Lt(){Be.cancelToken&&Be.cancelToken.unsubscribe(Ht),Be.signal&&Be.signal.removeEventListener("abort",Ht)}Y.isFormData(ft)&&Y.isStandardBrowserEnv()&&delete Me["Content-Type"];var ht=new XMLHttpRequest;if(Be.auth){var Zt=Be.auth.username||"",Un=Be.auth.password?unescape(encodeURIComponent(Be.auth.password)):"";Me.Authorization="Basic "+btoa(Zt+":"+Un)}var yn=U(Be.baseURL,Be.url);function xr(){if(ht){var Ae="getAllResponseHeaders"in ht?Se(ht.getAllResponseHeaders()):null;He(function(P){ct(P),Lt()},function(P){nt(P),Lt()},{data:vt&&"text"!==vt&&"json"!==vt?ht.response:ht.responseText,status:ht.status,statusText:ht.statusText,headers:Ae,config:Be,request:ht}),ht=null}}if(ht.open(Be.method.toUpperCase(),ve(yn,Be.params,Be.paramsSerializer),!0),ht.timeout=Be.timeout,"onloadend"in ht?ht.onloadend=xr:ht.onreadystatechange=function(){!ht||4!==ht.readyState||0===ht.status&&(!ht.responseURL||0!==ht.responseURL.indexOf("file:"))||setTimeout(xr)},ht.onabort=function(){!ht||(nt(new Ce("Request aborted",Ce.ECONNABORTED,Be,ht)),ht=null)},ht.onerror=function(){nt(new Ce("Network Error",Ce.ERR_NETWORK,Be,ht,ht)),ht=null},ht.ontimeout=function(){var W=Be.timeout?"timeout of "+Be.timeout+"ms exceeded":"timeout exceeded";Be.timeoutErrorMessage&&(W=Be.timeoutErrorMessage),nt(new Ce(W,(Be.transitional||be).clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,Be,ht)),ht=null},Y.isStandardBrowserEnv()){var cn=(Be.withCredentials||Ge(yn))&&Be.xsrfCookieName?ie.read(Be.xsrfCookieName):void 0;cn&&(Me[Be.xsrfHeaderName]=cn)}"setRequestHeader"in ht&&Y.forEach(Me,function(W,S){typeof ft>"u"&&"content-type"===S.toLowerCase()?delete Me[S]:ht.setRequestHeader(S,W)}),Y.isUndefined(Be.withCredentials)||(ht.withCredentials=!!Be.withCredentials),vt&&"json"!==vt&&(ht.responseType=Be.responseType),"function"==typeof Be.onDownloadProgress&&ht.addEventListener("progress",Be.onDownloadProgress),"function"==typeof Be.onUploadProgress&&ht.upload&&ht.upload.addEventListener("progress",Be.onUploadProgress),(Be.cancelToken||Be.signal)&&(Ht=function(Ae){!ht||(nt(!Ae||Ae&&Ae.type?new Je:Ae),ht.abort(),ht=null)},Be.cancelToken&&Be.cancelToken.subscribe(Ht),Be.signal&&(Be.signal.aborted?Ht():Be.signal.addEventListener("abort",Ht))),ft||(ft=null);var Kt=ye(yn);Kt&&-1===["http","https","file"].indexOf(Kt)?nt(new Ce("Unsupported protocol "+Kt+":",Ce.ERR_BAD_REQUEST,Be)):ht.send(ft)})}},7114:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=pe(2414),ie=pe(6490),ve=pe(2971),Ge=function Se(be){var Ce=new ie(be),Je=He(ie.prototype.request,Ce);return Y.extend(Je,ie.prototype,Ce),Y.extend(Je,Ce),Je.create=function(De){return Se(ve(be,De))},Je}(pe(4498));Ge.Axios=ie,Ge.CanceledError=pe(1841),Ge.CancelToken=pe(3056),Ge.isCancel=pe(8827),Ge.VERSION=pe(1773).version,Ge.toFormData=pe(78),Ge.AxiosError=pe(133),Ge.Cancel=Ge.CanceledError,Ge.all=function(Ce){return Promise.all(Ce)},Ge.spread=pe(9211),Ge.isAxiosError=pe(4603),et.exports=Ge,et.exports.default=Ge},3056:(et,ot,pe)=>{"use strict";var Y=pe(1841);function He(ie){if("function"!=typeof ie)throw new TypeError("executor must be a function.");var ve;this.promise=new Promise(function(Ge){ve=Ge});var U=this;this.promise.then(function(Se){if(U._listeners){var Ge,be=U._listeners.length;for(Ge=0;Ge<be;Ge++)U._listeners[Ge](Se);U._listeners=null}}),this.promise.then=function(Se){var Ge,be=new Promise(function(Ce){U.subscribe(Ce),Ge=Ce}).then(Se);return be.cancel=function(){U.unsubscribe(Ge)},be},ie(function(Ge){U.reason||(U.reason=new Y(Ge),ve(U.reason))})}He.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},He.prototype.subscribe=function(ve){this.reason?ve(this.reason):this._listeners?this._listeners.push(ve):this._listeners=[ve]},He.prototype.unsubscribe=function(ve){if(this._listeners){var U=this._listeners.indexOf(ve);-1!==U&&this._listeners.splice(U,1)}},He.source=function(){var ve;return{token:new He(function(Ge){ve=Ge}),cancel:ve}},et.exports=He},1841:(et,ot,pe)=>{"use strict";var Y=pe(133);function ie(ve){Y.call(this,ve??"canceled",Y.ERR_CANCELED),this.name="CanceledError"}pe(4701).inherits(ie,Y,{__CANCEL__:!0}),et.exports=ie},8827:et=>{"use strict";et.exports=function(pe){return!(!pe||!pe.__CANCEL__)}},6490:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=pe(1625),ie=pe(607),ve=pe(957),U=pe(2971),Se=pe(5215),Ge=pe(4828),be=Ge.validators;function Ce(Je){this.defaults=Je,this.interceptors={request:new ie,response:new ie}}Ce.prototype.request=function(ye,De){"string"==typeof ye?(De=De||{}).url=ye:De=ye||{},(De=U(this.defaults,De)).method=De.method?De.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var Be=De.transitional;void 0!==Be&&Ge.assertOptions(Be,{silentJSONParsing:be.transitional(be.boolean),forcedJSONParsing:be.transitional(be.boolean),clarifyTimeoutError:be.transitional(be.boolean)},!1);var Ye=[],ct=!0;this.interceptors.request.forEach(function(Zt){"function"==typeof Zt.runWhen&&!1===Zt.runWhen(De)||(ct=ct&&Zt.synchronous,Ye.unshift(Zt.fulfilled,Zt.rejected))});var ft,nt=[];if(this.interceptors.response.forEach(function(Zt){nt.push(Zt.fulfilled,Zt.rejected)}),!ct){var Me=[ve,void 0];for(Array.prototype.unshift.apply(Me,Ye),Me=Me.concat(nt),ft=Promise.resolve(De);Me.length;)ft=ft.then(Me.shift(),Me.shift());return ft}for(var vt=De;Ye.length;){var Ht=Ye.shift(),Lt=Ye.shift();try{vt=Ht(vt)}catch(ht){Lt(ht);break}}try{ft=ve(vt)}catch(ht){return Promise.reject(ht)}for(;nt.length;)ft=ft.then(nt.shift(),nt.shift());return ft},Ce.prototype.getUri=function(ye){ye=U(this.defaults,ye);var De=Se(ye.baseURL,ye.url);return He(De,ye.params,ye.paramsSerializer)},Y.forEach(["delete","get","head","options"],function(ye){Ce.prototype[ye]=function(De,Be){return this.request(U(Be||{},{method:ye,url:De,data:(Be||{}).data}))}}),Y.forEach(["post","put","patch"],function(ye){function De(Be){return function(ct,nt,ft){return this.request(U(ft||{},{method:ye,headers:Be?{"Content-Type":"multipart/form-data"}:{},url:ct,data:nt}))}}Ce.prototype[ye]=De(),Ce.prototype[ye+"Form"]=De(!0)}),et.exports=Ce},133:(et,ot,pe)=>{"use strict";var Y=pe(4701);function He(U,Se,Ge,be,Ce){Error.call(this),this.message=U,this.name="AxiosError",Se&&(this.code=Se),Ge&&(this.config=Ge),be&&(this.request=be),Ce&&(this.response=Ce)}Y.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ie=He.prototype,ve={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(U){ve[U]={value:U}}),Object.defineProperties(He,ve),Object.defineProperty(ie,"isAxiosError",{value:!0}),He.from=function(U,Se,Ge,be,Ce,Je){var ye=Object.create(ie);return Y.toFlatObject(U,ye,function(Be){return Be!==Error.prototype}),He.call(ye,U.message,Se,Ge,be,Ce),ye.name=U.name,Je&&Object.assign(ye,Je),ye},et.exports=He},607:(et,ot,pe)=>{"use strict";var Y=pe(4701);function He(){this.handlers=[]}He.prototype.use=function(ve,U,Se){return this.handlers.push({fulfilled:ve,rejected:U,synchronous:!!Se&&Se.synchronous,runWhen:Se?Se.runWhen:null}),this.handlers.length-1},He.prototype.eject=function(ve){this.handlers[ve]&&(this.handlers[ve]=null)},He.prototype.forEach=function(ve){Y.forEach(this.handlers,function(Se){null!==Se&&ve(Se)})},et.exports=He},5215:(et,ot,pe)=>{"use strict";var Y=pe(8692),He=pe(4554);et.exports=function(ve,U){return ve&&!Y(U)?He(ve,U):U}},957:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=pe(5134),ie=pe(8827),ve=pe(4498),U=pe(1841);function Se(Ge){if(Ge.cancelToken&&Ge.cancelToken.throwIfRequested(),Ge.signal&&Ge.signal.aborted)throw new U}et.exports=function(be){return Se(be),be.headers=be.headers||{},be.data=He.call(be,be.data,be.headers,be.transformRequest),be.headers=Y.merge(be.headers.common||{},be.headers[be.method]||{},be.headers),Y.forEach(["delete","get","head","post","put","patch","common"],function(ye){delete be.headers[ye]}),(be.adapter||ve.adapter)(be).then(function(ye){return Se(be),ye.data=He.call(be,ye.data,ye.headers,be.transformResponse),ye},function(ye){return ie(ye)||(Se(be),ye&&ye.response&&(ye.response.data=He.call(be,ye.response.data,ye.response.headers,be.transformResponse))),Promise.reject(ye)})}},2971:(et,ot,pe)=>{"use strict";var Y=pe(4701);et.exports=function(ie,ve){ve=ve||{};var U={};function Se(De,Be){return Y.isPlainObject(De)&&Y.isPlainObject(Be)?Y.merge(De,Be):Y.isPlainObject(Be)?Y.merge({},Be):Y.isArray(Be)?Be.slice():Be}function Ge(De){return Y.isUndefined(ve[De])?Y.isUndefined(ie[De])?void 0:Se(void 0,ie[De]):Se(ie[De],ve[De])}function be(De){if(!Y.isUndefined(ve[De]))return Se(void 0,ve[De])}function Ce(De){return Y.isUndefined(ve[De])?Y.isUndefined(ie[De])?void 0:Se(void 0,ie[De]):Se(void 0,ve[De])}function Je(De){return De in ve?Se(ie[De],ve[De]):De in ie?Se(void 0,ie[De]):void 0}var ye={url:be,method:be,data:be,baseURL:Ce,transformRequest:Ce,transformResponse:Ce,paramsSerializer:Ce,timeout:Ce,timeoutMessage:Ce,withCredentials:Ce,adapter:Ce,responseType:Ce,xsrfCookieName:Ce,xsrfHeaderName:Ce,onUploadProgress:Ce,onDownloadProgress:Ce,decompress:Ce,maxContentLength:Ce,maxBodyLength:Ce,beforeRedirect:Ce,transport:Ce,httpAgent:Ce,httpsAgent:Ce,cancelToken:Ce,socketPath:Ce,responseEncoding:Ce,validateStatus:Je};return Y.forEach(Object.keys(ie).concat(Object.keys(ve)),function(Be){var Ye=ye[Be]||Ge,ct=Ye(Be);Y.isUndefined(ct)&&Ye!==Je||(U[Be]=ct)}),U}},858:(et,ot,pe)=>{"use strict";var Y=pe(133);et.exports=function(ie,ve,U){var Se=U.config.validateStatus;U.status&&Se&&!Se(U.status)?ve(new Y("Request failed with status code "+U.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(U.status/100)-4],U.config,U.request,U)):ie(U)}},5134:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=pe(4498);et.exports=function(ve,U,Se){var Ge=this||He;return Y.forEach(Se,function(Ce){ve=Ce.call(Ge,ve,U)}),ve}},4498:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=pe(5620),ie=pe(133),ve=pe(5867),U=pe(78),Se={"Content-Type":"application/x-www-form-urlencoded"};function Ge(ye,De){!Y.isUndefined(ye)&&Y.isUndefined(ye["Content-Type"])&&(ye["Content-Type"]=De)}var Je={transitional:ve,adapter:function be(){var ye;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(ye=pe(7729)),ye}(),transformRequest:[function(De,Be){if(He(Be,"Accept"),He(Be,"Content-Type"),Y.isFormData(De)||Y.isArrayBuffer(De)||Y.isBuffer(De)||Y.isStream(De)||Y.isFile(De)||Y.isBlob(De))return De;if(Y.isArrayBufferView(De))return De.buffer;if(Y.isURLSearchParams(De))return Ge(Be,"application/x-www-form-urlencoded;charset=utf-8"),De.toString();var nt,Ye=Y.isObject(De),ct=Be&&Be["Content-Type"];if((nt=Y.isFileList(De))||Ye&&"multipart/form-data"===ct){var ft=this.env&&this.env.FormData;return U(nt?{"files[]":De}:De,ft&&new ft)}return Ye||"application/json"===ct?(Ge(Be,"application/json"),function Ce(ye,De,Be){if(Y.isString(ye))try{return(De||JSON.parse)(ye),Y.trim(ye)}catch(Ye){if("SyntaxError"!==Ye.name)throw Ye}return(Be||JSON.stringify)(ye)}(De)):De}],transformResponse:[function(De){var Be=this.transitional||Je.transitional,nt=!(Be&&Be.silentJSONParsing)&&"json"===this.responseType;if(nt||Be&&Be.forcedJSONParsing&&Y.isString(De)&&De.length)try{return JSON.parse(De)}catch(ft){if(nt)throw"SyntaxError"===ft.name?ie.from(ft,ie.ERR_BAD_RESPONSE,this,null,this.response):ft}return De}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe(9454)},validateStatus:function(De){return De>=200&&De<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Y.forEach(["delete","get","head"],function(De){Je.headers[De]={}}),Y.forEach(["post","put","patch"],function(De){Je.headers[De]=Y.merge(Se)}),et.exports=Je},5867:et=>{"use strict";et.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},1773:et=>{et.exports={version:"0.27.2"}},2414:et=>{"use strict";et.exports=function(pe,Y){return function(){for(var ie=new Array(arguments.length),ve=0;ve<ie.length;ve++)ie[ve]=arguments[ve];return pe.apply(Y,ie)}}},1625:(et,ot,pe)=>{"use strict";var Y=pe(4701);function He(ie){return encodeURIComponent(ie).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}et.exports=function(ve,U,Se){if(!U)return ve;var Ge;if(Se)Ge=Se(U);else if(Y.isURLSearchParams(U))Ge=U.toString();else{var be=[];Y.forEach(U,function(ye,De){null===ye||typeof ye>"u"||(Y.isArray(ye)?De+="[]":ye=[ye],Y.forEach(ye,function(Ye){Y.isDate(Ye)?Ye=Ye.toISOString():Y.isObject(Ye)&&(Ye=JSON.stringify(Ye)),be.push(He(De)+"="+He(Ye))}))}),Ge=be.join("&")}if(Ge){var Ce=ve.indexOf("#");-1!==Ce&&(ve=ve.slice(0,Ce)),ve+=(-1===ve.indexOf("?")?"?":"&")+Ge}return ve}},4554:et=>{"use strict";et.exports=function(pe,Y){return Y?pe.replace(/\/+$/,"")+"/"+Y.replace(/^\/+/,""):pe}},5738:(et,ot,pe)=>{"use strict";var Y=pe(4701);et.exports=Y.isStandardBrowserEnv()?{write:function(ve,U,Se,Ge,be,Ce){var Je=[];Je.push(ve+"="+encodeURIComponent(U)),Y.isNumber(Se)&&Je.push("expires="+new Date(Se).toGMTString()),Y.isString(Ge)&&Je.push("path="+Ge),Y.isString(be)&&Je.push("domain="+be),!0===Ce&&Je.push("secure"),document.cookie=Je.join("; ")},read:function(ve){var U=document.cookie.match(new RegExp("(^|;\\s*)("+ve+")=([^;]*)"));return U?decodeURIComponent(U[3]):null},remove:function(ve){this.write(ve,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:et=>{"use strict";et.exports=function(pe){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(pe)}},4603:(et,ot,pe)=>{"use strict";var Y=pe(4701);et.exports=function(ie){return Y.isObject(ie)&&!0===ie.isAxiosError}},6100:(et,ot,pe)=>{"use strict";var Y=pe(4701);et.exports=Y.isStandardBrowserEnv()?function(){var U,ie=/(msie|trident)/i.test(navigator.userAgent),ve=document.createElement("a");function Se(Ge){var be=Ge;return ie&&(ve.setAttribute("href",be),be=ve.href),ve.setAttribute("href",be),{href:ve.href,protocol:ve.protocol?ve.protocol.replace(/:$/,""):"",host:ve.host,search:ve.search?ve.search.replace(/^\?/,""):"",hash:ve.hash?ve.hash.replace(/^#/,""):"",hostname:ve.hostname,port:ve.port,pathname:"/"===ve.pathname.charAt(0)?ve.pathname:"/"+ve.pathname}}return U=Se(window.location.href),function(be){var Ce=Y.isString(be)?Se(be):be;return Ce.protocol===U.protocol&&Ce.host===U.host}}():function(){return!0}},5620:(et,ot,pe)=>{"use strict";var Y=pe(4701);et.exports=function(ie,ve){Y.forEach(ie,function(Se,Ge){Ge!==ve&&Ge.toUpperCase()===ve.toUpperCase()&&(ie[ve]=Se,delete ie[Ge])})}},9454:et=>{et.exports=null},2099:(et,ot,pe)=>{"use strict";var Y=pe(4701),He=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];et.exports=function(ve){var Se,Ge,be,U={};return ve&&Y.forEach(ve.split("\n"),function(Je){if(be=Je.indexOf(":"),Se=Y.trim(Je.substr(0,be)).toLowerCase(),Ge=Y.trim(Je.substr(be+1)),Se){if(U[Se]&&He.indexOf(Se)>=0)return;U[Se]="set-cookie"===Se?(U[Se]?U[Se]:[]).concat([Ge]):U[Se]?U[Se]+", "+Ge:Ge}}),U}},6700:et=>{"use strict";et.exports=function(pe){var Y=/^([-+\w]{1,25})(:?\/\/|:)/.exec(pe);return Y&&Y[1]||""}},9211:et=>{"use strict";et.exports=function(pe){return function(He){return pe.apply(null,He)}}},78:(et,ot,pe)=>{"use strict";var Y=pe(4701);et.exports=function He(ie,ve){ve=ve||new FormData;var U=[];function Se(be){return null===be?"":Y.isDate(be)?be.toISOString():Y.isArrayBuffer(be)||Y.isTypedArray(be)?"function"==typeof Blob?new Blob([be]):Buffer.from(be):be}return function Ge(be,Ce){if(Y.isPlainObject(be)||Y.isArray(be)){if(-1!==U.indexOf(be))throw Error("Circular reference detected in "+Ce);U.push(be),Y.forEach(be,function(ye,De){if(!Y.isUndefined(ye)){var Ye,Be=Ce?Ce+"."+De:De;if(ye&&!Ce&&"object"==typeof ye)if(Y.endsWith(De,"{}"))ye=JSON.stringify(ye);else if(Y.endsWith(De,"[]")&&(Ye=Y.toArray(ye)))return void Ye.forEach(function(ct){!Y.isUndefined(ct)&&ve.append(Be,Se(ct))});Ge(ye,Be)}}),U.pop()}else ve.append(Ce,Se(be))}(ie),ve}},4828:(et,ot,pe)=>{"use strict";var Y=pe(1773).version,He=pe(133),ie={};["object","boolean","number","function","string","symbol"].forEach(function(Se,Ge){ie[Se]=function(Ce){return typeof Ce===Se||"a"+(Ge<1?"n ":" ")+Se}});var ve={};ie.transitional=function(Ge,be,Ce){function Je(ye,De){return"[Axios v"+Y+"] Transitional option '"+ye+"'"+De+(Ce?". "+Ce:"")}return function(ye,De,Be){if(!1===Ge)throw new He(Je(De," has been removed"+(be?" in "+be:"")),He.ERR_DEPRECATED);return be&&!ve[De]&&(ve[De]=!0,console.warn(Je(De," has been deprecated since v"+be+" and will be removed in the near future"))),!Ge||Ge(ye,De,Be)}},et.exports={assertOptions:function U(Se,Ge,be){if("object"!=typeof Se)throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);for(var Ce=Object.keys(Se),Je=Ce.length;Je-- >0;){var ye=Ce[Je],De=Ge[ye];if(De){var Be=Se[ye],Ye=void 0===Be||De(Be,ye,Se);if(!0!==Ye)throw new He("option "+ye+" must be "+Ye,He.ERR_BAD_OPTION_VALUE)}else if(!0!==be)throw new He("Unknown option "+ye,He.ERR_BAD_OPTION)}},validators:ie}},4701:(et,ot,pe)=>{"use strict";var P,Y=pe(2414),He=Object.prototype.toString,ie=(P=Object.create(null),function(O){var j=He.call(O);return P[j]||(P[j]=j.slice(8,-1).toLowerCase())});function ve(P){return P=P.toLowerCase(),function(j){return ie(j)===P}}function U(P){return Array.isArray(P)}function Se(P){return typeof P>"u"}var be=ve("ArrayBuffer");function De(P){return null!==P&&"object"==typeof P}function Be(P){if("object"!==ie(P))return!1;var O=Object.getPrototypeOf(P);return null===O||O===Object.prototype}var Ye=ve("Date"),ct=ve("File"),nt=ve("Blob"),ft=ve("FileList");function Me(P){return"[object Function]"===He.call(P)}var Lt=ve("URLSearchParams");function Un(P,O){if(!(null===P||typeof P>"u"))if("object"!=typeof P&&(P=[P]),U(P))for(var j=0,ne=P.length;j<ne;j++)O.call(null,P[j],j,P);else for(var he in P)Object.prototype.hasOwnProperty.call(P,he)&&O.call(null,P[he],he,P)}var D=function(P){return function(O){return P&&O instanceof P}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));et.exports={isArray:U,isArrayBuffer:be,isBuffer:function Ge(P){return null!==P&&!Se(P)&&null!==P.constructor&&!Se(P.constructor)&&"function"==typeof P.constructor.isBuffer&&P.constructor.isBuffer(P)},isFormData:function Ht(P){var O="[object FormData]";return P&&("function"==typeof FormData&&P instanceof FormData||He.call(P)===O||Me(P.toString)&&P.toString()===O)},isArrayBufferView:function Ce(P){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(P):P&&P.buffer&&be(P.buffer)},isString:function Je(P){return"string"==typeof P},isNumber:function ye(P){return"number"==typeof P},isObject:De,isPlainObject:Be,isUndefined:Se,isDate:Ye,isFile:ct,isBlob:nt,isFunction:Me,isStream:function vt(P){return De(P)&&Me(P.pipe)},isURLSearchParams:Lt,isStandardBrowserEnv:function Zt(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:Un,merge:function yn(){var P={};function O(he,q){P[q]=Be(P[q])&&Be(he)?yn(P[q],he):Be(he)?yn({},he):U(he)?he.slice():he}for(var j=0,ne=arguments.length;j<ne;j++)Un(arguments[j],O);return P},extend:function xr(P,O,j){return Un(O,function(he,q){P[q]=j&&"function"==typeof he?Y(he,j):he}),P},trim:function ht(P){return P.trim?P.trim():P.replace(/^\s+|\s+$/g,"")},stripBOM:function cn(P){return 65279===P.charCodeAt(0)&&(P=P.slice(1)),P},inherits:function Kt(P,O,j,ne){P.prototype=Object.create(O.prototype,ne),P.prototype.constructor=P,j&&Object.assign(P.prototype,j)},toFlatObject:function Ae(P,O,j){var ne,he,q,k={};O=O||{};do{for(he=(ne=Object.getOwnPropertyNames(P)).length;he-- >0;)k[q=ne[he]]||(O[q]=P[q],k[q]=!0);P=Object.getPrototypeOf(P)}while(P&&(!j||j(P,O))&&P!==Object.prototype);return O},kindOf:ie,kindOfTest:ve,endsWith:function W(P,O,j){P=String(P),(void 0===j||j>P.length)&&(j=P.length);var ne=P.indexOf(O,j-=O.length);return-1!==ne&&ne===j},toArray:function S(P){if(!P)return null;var O=P.length;if(Se(O))return null;for(var j=new Array(O);O-- >0;)j[O]=P[O];return j},isTypedArray:D,isFileList:ft}},988:et=>{"use strict";for(var ot="qpzry9x8gf2tvdw0s3jn54khce6mua7l",pe={},Y=0;Y<ot.length;Y++){var He=ot.charAt(Y);if(void 0!==pe[He])throw new TypeError(He+" is ambiguous");pe[He]=Y}function ie(Ye){var ct=Ye>>25;return(33554431&Ye)<<5^996825010&-(ct>>0&1)^642813549&-(ct>>1&1)^513874426&-(ct>>2&1)^1027748829&-(ct>>3&1)^705979059&-(ct>>4&1)}function ve(Ye){for(var ct=1,nt=0;nt<Ye.length;++nt){var ft=Ye.charCodeAt(nt);if(ft<33||ft>126)return"Invalid prefix ("+Ye+")";ct=ie(ct)^ft>>5}for(ct=ie(ct),nt=0;nt<Ye.length;++nt){var Me=Ye.charCodeAt(nt);ct=ie(ct)^31&Me}return ct}function Se(Ye,ct){if(Ye.length<8)return Ye+" too short";if(Ye.length>(ct=ct||90))return"Exceeds length limit";var nt=Ye.toLowerCase(),ft=Ye.toUpperCase();if(Ye!==nt&&Ye!==ft)return"Mixed-case string "+Ye;var Me=(Ye=nt).lastIndexOf("1");if(-1===Me)return"No separator character for "+Ye;if(0===Me)return"Missing prefix for "+Ye;var vt=Ye.slice(0,Me),Ht=Ye.slice(Me+1);if(Ht.length<6)return"Data too short";var Lt=ve(vt);if("string"==typeof Lt)return Lt;for(var ht=[],Zt=0;Zt<Ht.length;++Zt){var Un=Ht.charAt(Zt),yn=pe[Un];if(void 0===yn)return"Unknown character "+Un;Lt=ie(Lt)^yn,!(Zt+6>=Ht.length)&&ht.push(yn)}return 1!==Lt?"Invalid checksum for "+Ye:{prefix:vt,words:ht}}function Ce(Ye,ct,nt,ft){for(var Me=0,vt=0,Ht=(1<<nt)-1,Lt=[],ht=0;ht<Ye.length;++ht)for(Me=Me<<ct|Ye[ht],vt+=ct;vt>=nt;)Lt.push(Me>>(vt-=nt)&Ht);if(ft)vt>0&&Lt.push(Me<<nt-vt&Ht);else{if(vt>=ct)return"Excess padding";if(Me<<nt-vt&Ht)return"Non-zero padding"}return Lt}et.exports={decodeUnsafe:function Ge(){var Ye=Se.apply(null,arguments);if("object"==typeof Ye)return Ye},decode:function be(Ye){var ct=Se.apply(null,arguments);if("object"==typeof ct)return ct;throw new Error(ct)},encode:function U(Ye,ct,nt){if(Ye.length+7+ct.length>(nt=nt||90))throw new TypeError("Exceeds length limit");var ft=ve(Ye=Ye.toLowerCase());if("string"==typeof ft)throw new Error(ft);for(var Me=Ye+"1",vt=0;vt<ct.length;++vt){var Ht=ct[vt];if(Ht>>5!=0)throw new Error("Non 5-bit word");ft=ie(ft)^Ht,Me+=ot.charAt(Ht)}for(vt=0;vt<6;++vt)ft=ie(ft);for(ft^=1,vt=0;vt<6;++vt)Me+=ot.charAt(ft>>5*(5-vt)&31);return Me},toWordsUnsafe:function Je(Ye){var ct=Ce(Ye,8,5,!0);if(Array.isArray(ct))return ct},toWords:function ye(Ye){var ct=Ce(Ye,8,5,!0);if(Array.isArray(ct))return ct;throw new Error(ct)},fromWordsUnsafe:function De(Ye){var ct=Ce(Ye,5,8,!1);if(Array.isArray(ct))return ct},fromWords:function Be(Ye){var ct=Ce(Ye,5,8,!1);if(Array.isArray(ct))return ct;throw new Error(ct)}}},8538:function(et,ot,pe){!function(Y,He){"use strict";function ie(W,S){if(!W)throw new Error(S||"Assertion failed")}function ve(W,S){W.super_=S;var D=function(){};D.prototype=S.prototype,W.prototype=new D,W.prototype.constructor=W}function U(W,S,D){if(U.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,null!==W&&(("le"===S||"be"===S)&&(D=S,S=10),this._init(W||0,S||10,D||"be"))}var Se;"object"==typeof Y?Y.exports=U:He.BN=U,U.BN=U,U.wordSize=26;try{Se=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:pe(6601).Buffer}catch{}function Ge(W,S){var D=W.charCodeAt(S);return D>=48&&D<=57?D-48:D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:void ie(!1,"Invalid character in "+W)}function be(W,S,D){var P=Ge(W,D);return D-1>=S&&(P|=Ge(W,D-1)<<4),P}function Ce(W,S,D,P){for(var O=0,j=0,ne=Math.min(W.length,D),he=S;he<ne;he++){var q=W.charCodeAt(he)-48;O*=P,j=q>=49?q-49+10:q>=17?q-17+10:q,ie(q>=0&&j<P,"Invalid character"),O+=j}return O}function Je(W,S){W.words=S.words,W.length=S.length,W.negative=S.negative,W.red=S.red}if(U.isBN=function(S){return S instanceof U||null!==S&&"object"==typeof S&&S.constructor.wordSize===U.wordSize&&Array.isArray(S.words)},U.max=function(S,D){return S.cmp(D)>0?S:D},U.min=function(S,D){return S.cmp(D)<0?S:D},U.prototype._init=function(S,D,P){if("number"==typeof S)return this._initNumber(S,D,P);if("object"==typeof S)return this._initArray(S,D,P);"hex"===D&&(D=16),ie(D===(0|D)&&D>=2&&D<=36);var O=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(O++,this.negative=1),O<S.length&&(16===D?this._parseHex(S,O,P):(this._parseBase(S,D,O),"le"===P&&this._initArray(this.toArray(),D,P)))},U.prototype._initNumber=function(S,D,P){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(ie(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===P&&this._initArray(this.toArray(),D,P)},U.prototype._initArray=function(S,D,P){if(ie("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var j,ne,he=0;if("be"===P)for(O=S.length-1,j=0;O>=0;O-=3)this.words[j]|=(ne=S[O]|S[O-1]<<8|S[O-2]<<16)<<he&67108863,this.words[j+1]=ne>>>26-he&67108863,(he+=24)>=26&&(he-=26,j++);else if("le"===P)for(O=0,j=0;O<S.length;O+=3)this.words[j]|=(ne=S[O]|S[O+1]<<8|S[O+2]<<16)<<he&67108863,this.words[j+1]=ne>>>26-he&67108863,(he+=24)>=26&&(he-=26,j++);return this._strip()},U.prototype._parseHex=function(S,D,P){this.length=Math.ceil((S.length-D)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var he,j=0,ne=0;if("be"===P)for(O=S.length-1;O>=D;O-=2)he=be(S,D,O)<<j,this.words[ne]|=67108863&he,j>=18?(j-=18,this.words[ne+=1]|=he>>>26):j+=8;else for(O=(S.length-D)%2==0?D+1:D;O<S.length;O+=2)he=be(S,D,O)<<j,this.words[ne]|=67108863&he,j>=18?(j-=18,this.words[ne+=1]|=he>>>26):j+=8;this._strip()},U.prototype._parseBase=function(S,D,P){this.words=[0],this.length=1;for(var O=0,j=1;j<=67108863;j*=D)O++;O--,j=j/D|0;for(var ne=S.length-P,he=ne%O,q=Math.min(ne,ne-he)+P,k=0,K=P;K<q;K+=O)k=Ce(S,K,K+O,D),this.imuln(j),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k);if(0!==he){var rt=1;for(k=Ce(S,K,S.length,D),K=0;K<he;K++)rt*=D;this.imuln(rt),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k)}this._strip()},U.prototype.copy=function(S){S.words=new Array(this.length);for(var D=0;D<this.length;D++)S.words[D]=this.words[D];S.length=this.length,S.negative=this.negative,S.red=this.red},U.prototype._move=function(S){Je(S,this)},U.prototype.clone=function(){var S=new U(null);return this.copy(S),S},U.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},U.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},U.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},typeof Symbol<"u"&&"function"==typeof Symbol.for)try{U.prototype[Symbol.for("nodejs.util.inspect.custom")]=ye}catch{U.prototype.inspect=ye}else U.prototype.inspect=ye;function ye(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var De=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Be=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Ye=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function ft(W,S,D){D.negative=S.negative^W.negative;var P=W.length+S.length|0;D.length=P,P=P-1|0;var O=0|W.words[0],j=0|S.words[0],ne=O*j,q=ne/67108864|0;D.words[0]=67108863&ne;for(var k=1;k<P;k++){for(var K=q>>>26,rt=67108863&q,it=Math.min(k,S.length-1),V=Math.max(0,k-W.length+1);V<=it;V++)K+=(ne=(O=0|W.words[k-V|0])*(j=0|S.words[V])+rt)/67108864|0,rt=67108863&ne;D.words[k]=0|rt,q=0|K}return 0!==q?D.words[k]=0|q:D.length--,D._strip()}U.prototype.toString=function(S,D){var P;if(D=0|D||1,16===(S=S||10)||"hex"===S){P="";for(var O=0,j=0,ne=0;ne<this.length;ne++){var he=this.words[ne],q=(16777215&(he<<O|j)).toString(16);j=he>>>24-O&16777215,(O+=2)>=26&&(O-=26,ne--),P=0!==j||ne!==this.length-1?De[6-q.length]+q+P:q+P}for(0!==j&&(P=j.toString(16)+P);P.length%D!=0;)P="0"+P;return 0!==this.negative&&(P="-"+P),P}if(S===(0|S)&&S>=2&&S<=36){var k=Be[S],K=Ye[S];P="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modrn(K).toString(S);P=(rt=rt.idivn(K)).isZero()?it+P:De[k-it.length]+it+P}for(this.isZero()&&(P="0"+P);P.length%D!=0;)P="0"+P;return 0!==this.negative&&(P="-"+P),P}ie(!1,"Base should be between 2 and 36")},U.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&ie(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},U.prototype.toJSON=function(){return this.toString(16,2)},Se&&(U.prototype.toBuffer=function(S,D){return this.toArrayLike(Se,S,D)}),U.prototype.toArray=function(S,D){return this.toArrayLike(Array,S,D)},U.prototype.toArrayLike=function(S,D,P){this._strip();var O=this.byteLength(),j=P||Math.max(1,O);ie(O<=j,"byte array longer than desired length"),ie(j>0,"Requested array length <= 0");var ne=function(S,D){return S.allocUnsafe?S.allocUnsafe(D):new S(D)}(S,j);return this["_toArrayLike"+("le"===D?"LE":"BE")](ne,O),ne},U.prototype._toArrayLikeLE=function(S,D){for(var P=0,O=0,j=0,ne=0;j<this.length;j++){var he=this.words[j]<<ne|O;S[P++]=255&he,P<S.length&&(S[P++]=he>>8&255),P<S.length&&(S[P++]=he>>16&255),6===ne?(P<S.length&&(S[P++]=he>>24&255),O=0,ne=0):(O=he>>>24,ne+=2)}if(P<S.length)for(S[P++]=O;P<S.length;)S[P++]=0},U.prototype._toArrayLikeBE=function(S,D){for(var P=S.length-1,O=0,j=0,ne=0;j<this.length;j++){var he=this.words[j]<<ne|O;S[P--]=255&he,P>=0&&(S[P--]=he>>8&255),P>=0&&(S[P--]=he>>16&255),6===ne?(P>=0&&(S[P--]=he>>24&255),O=0,ne=0):(O=he>>>24,ne+=2)}if(P>=0)for(S[P--]=O;P>=0;)S[P--]=0},U.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var D=S,P=0;return D>=4096&&(P+=13,D>>>=13),D>=64&&(P+=7,D>>>=7),D>=8&&(P+=4,D>>>=4),D>=2&&(P+=2,D>>>=2),P+D},U.prototype._zeroBits=function(S){if(0===S)return 26;var D=S,P=0;return 0==(8191&D)&&(P+=13,D>>>=13),0==(127&D)&&(P+=7,D>>>=7),0==(15&D)&&(P+=4,D>>>=4),0==(3&D)&&(P+=2,D>>>=2),0==(1&D)&&P++,P},U.prototype.bitLength=function(){var D=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+D},U.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,D=0;D<this.length;D++){var P=this._zeroBits(this.words[D]);if(S+=P,26!==P)break}return S},U.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},U.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},U.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},U.prototype.isNeg=function(){return 0!==this.negative},U.prototype.neg=function(){return this.clone().ineg()},U.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},U.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var D=0;D<S.length;D++)this.words[D]=this.words[D]|S.words[D];return this._strip()},U.prototype.ior=function(S){return ie(0==(this.negative|S.negative)),this.iuor(S)},U.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},U.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},U.prototype.iuand=function(S){var D;D=this.length>S.length?S:this;for(var P=0;P<D.length;P++)this.words[P]=this.words[P]&S.words[P];return this.length=D.length,this._strip()},U.prototype.iand=function(S){return ie(0==(this.negative|S.negative)),this.iuand(S)},U.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},U.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},U.prototype.iuxor=function(S){var D,P;this.length>S.length?(D=this,P=S):(D=S,P=this);for(var O=0;O<P.length;O++)this.words[O]=D.words[O]^P.words[O];if(this!==D)for(;O<D.length;O++)this.words[O]=D.words[O];return this.length=D.length,this._strip()},U.prototype.ixor=function(S){return ie(0==(this.negative|S.negative)),this.iuxor(S)},U.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},U.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},U.prototype.inotn=function(S){ie("number"==typeof S&&S>=0);var D=0|Math.ceil(S/26),P=S%26;this._expand(D),P>0&&D--;for(var O=0;O<D;O++)this.words[O]=67108863&~this.words[O];return P>0&&(this.words[O]=~this.words[O]&67108863>>26-P),this._strip()},U.prototype.notn=function(S){return this.clone().inotn(S)},U.prototype.setn=function(S,D){ie("number"==typeof S&&S>=0);var P=S/26|0,O=S%26;return this._expand(P+1),this.words[P]=D?this.words[P]|1<<O:this.words[P]&~(1<<O),this._strip()},U.prototype.iadd=function(S){var D,P,O;if(0!==this.negative&&0===S.negative)return this.negative=0,D=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,D=this.isub(S),S.negative=1,D._normSign();this.length>S.length?(P=this,O=S):(P=S,O=this);for(var j=0,ne=0;ne<O.length;ne++)this.words[ne]=67108863&(D=(0|P.words[ne])+(0|O.words[ne])+j),j=D>>>26;for(;0!==j&&ne<P.length;ne++)this.words[ne]=67108863&(D=(0|P.words[ne])+j),j=D>>>26;if(this.length=P.length,0!==j)this.words[this.length]=j,this.length++;else if(P!==this)for(;ne<P.length;ne++)this.words[ne]=P.words[ne];return this},U.prototype.add=function(S){var D;return 0!==S.negative&&0===this.negative?(S.negative=0,D=this.sub(S),S.negative^=1,D):0===S.negative&&0!==this.negative?(this.negative=0,D=S.sub(this),this.negative=1,D):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},U.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var D=this.iadd(S);return S.negative=1,D._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var O,j,P=this.cmp(S);if(0===P)return this.negative=0,this.length=1,this.words[0]=0,this;P>0?(O=this,j=S):(O=S,j=this);for(var ne=0,he=0;he<j.length;he++)ne=(D=(0|O.words[he])-(0|j.words[he])+ne)>>26,this.words[he]=67108863&D;for(;0!==ne&&he<O.length;he++)ne=(D=(0|O.words[he])+ne)>>26,this.words[he]=67108863&D;if(0===ne&&he<O.length&&O!==this)for(;he<O.length;he++)this.words[he]=O.words[he];return this.length=Math.max(this.length,he),O!==this&&(this.negative=1),this._strip()},U.prototype.sub=function(S){return this.clone().isub(S)};var Me=function(S,D,P){var q,k,K,O=S.words,j=D.words,ne=P.words,he=0,rt=0|O[0],it=8191&rt,V=rt>>>13,F=0|O[1],Le=8191&F,qe=F>>>13,ut=0|O[2],pt=8191&ut,bt=ut>>>13,Ft=0|O[3],Jt=8191&Ft,Et=Ft>>>13,Hn=0|O[4],Dn=8191&Hn,Gn=Hn>>>13,Li=0|O[5],sr=8191&Li,gr=Li>>>13,Xs=0|O[6],Zn=8191&Xs,Ln=Xs>>>13,Ks=0|O[7],Mr=8191&Ks,cr=Ks>>>13,Aa=0|O[8],Jn=8191&Aa,or=Aa>>>13,Ta=0|O[9],Dr=8191&Ta,ur=Ta>>>13,Da=0|j[0],vr=8191&Da,Er=Da>>>13,ps=0|j[1],mt=8191&ps,hr=ps>>>13,Oi=0|j[2],Fr=8191&Oi,Br=Oi>>>13,is=0|j[3],_r=8191&is,Qt=is>>>13,Ra=0|j[4],Vr=8191&Ra,Qn=Ra>>>13,Xo=0|j[5],Ur=8191&Xo,Hr=Xo>>>13,Ys=0|j[6],En=8191&Ys,Sr=Ys>>>13,Cr=0|j[7],yr=8191&Cr,Wn=Cr>>>13,vl=0|j[8],zr=8191&vl,Rr=vl>>>13,Ko=0|j[9],Ir=8191&Ko,Bt=Ko>>>13;P.negative=S.negative^D.negative,P.length=19;var Si=(he+(q=Math.imul(it,vr))|0)+((8191&(k=(k=Math.imul(it,Er))+Math.imul(V,vr)|0))<<13)|0;he=((K=Math.imul(V,Er))+(k>>>13)|0)+(Si>>>26)|0,Si&=67108863,q=Math.imul(Le,vr),k=(k=Math.imul(Le,Er))+Math.imul(qe,vr)|0,K=Math.imul(qe,Er);var Fi=(he+(q=q+Math.imul(it,mt)|0)|0)+((8191&(k=(k=k+Math.imul(it,hr)|0)+Math.imul(V,mt)|0))<<13)|0;he=((K=K+Math.imul(V,hr)|0)+(k>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,q=Math.imul(pt,vr),k=(k=Math.imul(pt,Er))+Math.imul(bt,vr)|0,K=Math.imul(bt,Er),q=q+Math.imul(Le,mt)|0,k=(k=k+Math.imul(Le,hr)|0)+Math.imul(qe,mt)|0,K=K+Math.imul(qe,hr)|0;var po=(he+(q=q+Math.imul(it,Fr)|0)|0)+((8191&(k=(k=k+Math.imul(it,Br)|0)+Math.imul(V,Fr)|0))<<13)|0;he=((K=K+Math.imul(V,Br)|0)+(k>>>13)|0)+(po>>>26)|0,po&=67108863,q=Math.imul(Jt,vr),k=(k=Math.imul(Jt,Er))+Math.imul(Et,vr)|0,K=Math.imul(Et,Er),q=q+Math.imul(pt,mt)|0,k=(k=k+Math.imul(pt,hr)|0)+Math.imul(bt,mt)|0,K=K+Math.imul(bt,hr)|0,q=q+Math.imul(Le,Fr)|0,k=(k=k+Math.imul(Le,Br)|0)+Math.imul(qe,Fr)|0,K=K+Math.imul(qe,Br)|0;var Wi=(he+(q=q+Math.imul(it,_r)|0)|0)+((8191&(k=(k=k+Math.imul(it,Qt)|0)+Math.imul(V,_r)|0))<<13)|0;he=((K=K+Math.imul(V,Qt)|0)+(k>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,q=Math.imul(Dn,vr),k=(k=Math.imul(Dn,Er))+Math.imul(Gn,vr)|0,K=Math.imul(Gn,Er),q=q+Math.imul(Jt,mt)|0,k=(k=k+Math.imul(Jt,hr)|0)+Math.imul(Et,mt)|0,K=K+Math.imul(Et,hr)|0,q=q+Math.imul(pt,Fr)|0,k=(k=k+Math.imul(pt,Br)|0)+Math.imul(bt,Fr)|0,K=K+Math.imul(bt,Br)|0,q=q+Math.imul(Le,_r)|0,k=(k=k+Math.imul(Le,Qt)|0)+Math.imul(qe,_r)|0,K=K+Math.imul(qe,Qt)|0;var Ts=(he+(q=q+Math.imul(it,Vr)|0)|0)+((8191&(k=(k=k+Math.imul(it,Qn)|0)+Math.imul(V,Vr)|0))<<13)|0;he=((K=K+Math.imul(V,Qn)|0)+(k>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,q=Math.imul(sr,vr),k=(k=Math.imul(sr,Er))+Math.imul(gr,vr)|0,K=Math.imul(gr,Er),q=q+Math.imul(Dn,mt)|0,k=(k=k+Math.imul(Dn,hr)|0)+Math.imul(Gn,mt)|0,K=K+Math.imul(Gn,hr)|0,q=q+Math.imul(Jt,Fr)|0,k=(k=k+Math.imul(Jt,Br)|0)+Math.imul(Et,Fr)|0,K=K+Math.imul(Et,Br)|0,q=q+Math.imul(pt,_r)|0,k=(k=k+Math.imul(pt,Qt)|0)+Math.imul(bt,_r)|0,K=K+Math.imul(bt,Qt)|0,q=q+Math.imul(Le,Vr)|0,k=(k=k+Math.imul(Le,Qn)|0)+Math.imul(qe,Vr)|0,K=K+Math.imul(qe,Qn)|0;var Ds=(he+(q=q+Math.imul(it,Ur)|0)|0)+((8191&(k=(k=k+Math.imul(it,Hr)|0)+Math.imul(V,Ur)|0))<<13)|0;he=((K=K+Math.imul(V,Hr)|0)+(k>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,q=Math.imul(Zn,vr),k=(k=Math.imul(Zn,Er))+Math.imul(Ln,vr)|0,K=Math.imul(Ln,Er),q=q+Math.imul(sr,mt)|0,k=(k=k+Math.imul(sr,hr)|0)+Math.imul(gr,mt)|0,K=K+Math.imul(gr,hr)|0,q=q+Math.imul(Dn,Fr)|0,k=(k=k+Math.imul(Dn,Br)|0)+Math.imul(Gn,Fr)|0,K=K+Math.imul(Gn,Br)|0,q=q+Math.imul(Jt,_r)|0,k=(k=k+Math.imul(Jt,Qt)|0)+Math.imul(Et,_r)|0,K=K+Math.imul(Et,Qt)|0,q=q+Math.imul(pt,Vr)|0,k=(k=k+Math.imul(pt,Qn)|0)+Math.imul(bt,Vr)|0,K=K+Math.imul(bt,Qn)|0,q=q+Math.imul(Le,Ur)|0,k=(k=k+Math.imul(Le,Hr)|0)+Math.imul(qe,Ur)|0,K=K+Math.imul(qe,Hr)|0;var Th=(he+(q=q+Math.imul(it,En)|0)|0)+((8191&(k=(k=k+Math.imul(it,Sr)|0)+Math.imul(V,En)|0))<<13)|0;he=((K=K+Math.imul(V,Sr)|0)+(k>>>13)|0)+(Th>>>26)|0,Th&=67108863,q=Math.imul(Mr,vr),k=(k=Math.imul(Mr,Er))+Math.imul(cr,vr)|0,K=Math.imul(cr,Er),q=q+Math.imul(Zn,mt)|0,k=(k=k+Math.imul(Zn,hr)|0)+Math.imul(Ln,mt)|0,K=K+Math.imul(Ln,hr)|0,q=q+Math.imul(sr,Fr)|0,k=(k=k+Math.imul(sr,Br)|0)+Math.imul(gr,Fr)|0,K=K+Math.imul(gr,Br)|0,q=q+Math.imul(Dn,_r)|0,k=(k=k+Math.imul(Dn,Qt)|0)+Math.imul(Gn,_r)|0,K=K+Math.imul(Gn,Qt)|0,q=q+Math.imul(Jt,Vr)|0,k=(k=k+Math.imul(Jt,Qn)|0)+Math.imul(Et,Vr)|0,K=K+Math.imul(Et,Qn)|0,q=q+Math.imul(pt,Ur)|0,k=(k=k+Math.imul(pt,Hr)|0)+Math.imul(bt,Ur)|0,K=K+Math.imul(bt,Hr)|0,q=q+Math.imul(Le,En)|0,k=(k=k+Math.imul(Le,Sr)|0)+Math.imul(qe,En)|0,K=K+Math.imul(qe,Sr)|0;var oc=(he+(q=q+Math.imul(it,yr)|0)|0)+((8191&(k=(k=k+Math.imul(it,Wn)|0)+Math.imul(V,yr)|0))<<13)|0;he=((K=K+Math.imul(V,Wn)|0)+(k>>>13)|0)+(oc>>>26)|0,oc&=67108863,q=Math.imul(Jn,vr),k=(k=Math.imul(Jn,Er))+Math.imul(or,vr)|0,K=Math.imul(or,Er),q=q+Math.imul(Mr,mt)|0,k=(k=k+Math.imul(Mr,hr)|0)+Math.imul(cr,mt)|0,K=K+Math.imul(cr,hr)|0,q=q+Math.imul(Zn,Fr)|0,k=(k=k+Math.imul(Zn,Br)|0)+Math.imul(Ln,Fr)|0,K=K+Math.imul(Ln,Br)|0,q=q+Math.imul(sr,_r)|0,k=(k=k+Math.imul(sr,Qt)|0)+Math.imul(gr,_r)|0,K=K+Math.imul(gr,Qt)|0,q=q+Math.imul(Dn,Vr)|0,k=(k=k+Math.imul(Dn,Qn)|0)+Math.imul(Gn,Vr)|0,K=K+Math.imul(Gn,Qn)|0,q=q+Math.imul(Jt,Ur)|0,k=(k=k+Math.imul(Jt,Hr)|0)+Math.imul(Et,Ur)|0,K=K+Math.imul(Et,Hr)|0,q=q+Math.imul(pt,En)|0,k=(k=k+Math.imul(pt,Sr)|0)+Math.imul(bt,En)|0,K=K+Math.imul(bt,Sr)|0,q=q+Math.imul(Le,yr)|0,k=(k=k+Math.imul(Le,Wn)|0)+Math.imul(qe,yr)|0,K=K+Math.imul(qe,Wn)|0;var Qc=(he+(q=q+Math.imul(it,zr)|0)|0)+((8191&(k=(k=k+Math.imul(it,Rr)|0)+Math.imul(V,zr)|0))<<13)|0;he=((K=K+Math.imul(V,Rr)|0)+(k>>>13)|0)+(Qc>>>26)|0,Qc&=67108863,q=Math.imul(Dr,vr),k=(k=Math.imul(Dr,Er))+Math.imul(ur,vr)|0,K=Math.imul(ur,Er),q=q+Math.imul(Jn,mt)|0,k=(k=k+Math.imul(Jn,hr)|0)+Math.imul(or,mt)|0,K=K+Math.imul(or,hr)|0,q=q+Math.imul(Mr,Fr)|0,k=(k=k+Math.imul(Mr,Br)|0)+Math.imul(cr,Fr)|0,K=K+Math.imul(cr,Br)|0,q=q+Math.imul(Zn,_r)|0,k=(k=k+Math.imul(Zn,Qt)|0)+Math.imul(Ln,_r)|0,K=K+Math.imul(Ln,Qt)|0,q=q+Math.imul(sr,Vr)|0,k=(k=k+Math.imul(sr,Qn)|0)+Math.imul(gr,Vr)|0,K=K+Math.imul(gr,Qn)|0,q=q+Math.imul(Dn,Ur)|0,k=(k=k+Math.imul(Dn,Hr)|0)+Math.imul(Gn,Ur)|0,K=K+Math.imul(Gn,Hr)|0,q=q+Math.imul(Jt,En)|0,k=(k=k+Math.imul(Jt,Sr)|0)+Math.imul(Et,En)|0,K=K+Math.imul(Et,Sr)|0,q=q+Math.imul(pt,yr)|0,k=(k=k+Math.imul(pt,Wn)|0)+Math.imul(bt,yr)|0,K=K+Math.imul(bt,Wn)|0,q=q+Math.imul(Le,zr)|0,k=(k=k+Math.imul(Le,Rr)|0)+Math.imul(qe,zr)|0,K=K+Math.imul(qe,Rr)|0;var eu=(he+(q=q+Math.imul(it,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(it,Bt)|0)+Math.imul(V,Ir)|0))<<13)|0;he=((K=K+Math.imul(V,Bt)|0)+(k>>>13)|0)+(eu>>>26)|0,eu&=67108863,q=Math.imul(Dr,mt),k=(k=Math.imul(Dr,hr))+Math.imul(ur,mt)|0,K=Math.imul(ur,hr),q=q+Math.imul(Jn,Fr)|0,k=(k=k+Math.imul(Jn,Br)|0)+Math.imul(or,Fr)|0,K=K+Math.imul(or,Br)|0,q=q+Math.imul(Mr,_r)|0,k=(k=k+Math.imul(Mr,Qt)|0)+Math.imul(cr,_r)|0,K=K+Math.imul(cr,Qt)|0,q=q+Math.imul(Zn,Vr)|0,k=(k=k+Math.imul(Zn,Qn)|0)+Math.imul(Ln,Vr)|0,K=K+Math.imul(Ln,Qn)|0,q=q+Math.imul(sr,Ur)|0,k=(k=k+Math.imul(sr,Hr)|0)+Math.imul(gr,Ur)|0,K=K+Math.imul(gr,Hr)|0,q=q+Math.imul(Dn,En)|0,k=(k=k+Math.imul(Dn,Sr)|0)+Math.imul(Gn,En)|0,K=K+Math.imul(Gn,Sr)|0,q=q+Math.imul(Jt,yr)|0,k=(k=k+Math.imul(Jt,Wn)|0)+Math.imul(Et,yr)|0,K=K+Math.imul(Et,Wn)|0,q=q+Math.imul(pt,zr)|0,k=(k=k+Math.imul(pt,Rr)|0)+Math.imul(bt,zr)|0,K=K+Math.imul(bt,Rr)|0;var Sn=(he+(q=q+Math.imul(Le,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(Le,Bt)|0)+Math.imul(qe,Ir)|0))<<13)|0;he=((K=K+Math.imul(qe,Bt)|0)+(k>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,q=Math.imul(Dr,Fr),k=(k=Math.imul(Dr,Br))+Math.imul(ur,Fr)|0,K=Math.imul(ur,Br),q=q+Math.imul(Jn,_r)|0,k=(k=k+Math.imul(Jn,Qt)|0)+Math.imul(or,_r)|0,K=K+Math.imul(or,Qt)|0,q=q+Math.imul(Mr,Vr)|0,k=(k=k+Math.imul(Mr,Qn)|0)+Math.imul(cr,Vr)|0,K=K+Math.imul(cr,Qn)|0,q=q+Math.imul(Zn,Ur)|0,k=(k=k+Math.imul(Zn,Hr)|0)+Math.imul(Ln,Ur)|0,K=K+Math.imul(Ln,Hr)|0,q=q+Math.imul(sr,En)|0,k=(k=k+Math.imul(sr,Sr)|0)+Math.imul(gr,En)|0,K=K+Math.imul(gr,Sr)|0,q=q+Math.imul(Dn,yr)|0,k=(k=k+Math.imul(Dn,Wn)|0)+Math.imul(Gn,yr)|0,K=K+Math.imul(Gn,Wn)|0,q=q+Math.imul(Jt,zr)|0,k=(k=k+Math.imul(Jt,Rr)|0)+Math.imul(Et,zr)|0,K=K+Math.imul(Et,Rr)|0;var tu=(he+(q=q+Math.imul(pt,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(pt,Bt)|0)+Math.imul(bt,Ir)|0))<<13)|0;he=((K=K+Math.imul(bt,Bt)|0)+(k>>>13)|0)+(tu>>>26)|0,tu&=67108863,q=Math.imul(Dr,_r),k=(k=Math.imul(Dr,Qt))+Math.imul(ur,_r)|0,K=Math.imul(ur,Qt),q=q+Math.imul(Jn,Vr)|0,k=(k=k+Math.imul(Jn,Qn)|0)+Math.imul(or,Vr)|0,K=K+Math.imul(or,Qn)|0,q=q+Math.imul(Mr,Ur)|0,k=(k=k+Math.imul(Mr,Hr)|0)+Math.imul(cr,Ur)|0,K=K+Math.imul(cr,Hr)|0,q=q+Math.imul(Zn,En)|0,k=(k=k+Math.imul(Zn,Sr)|0)+Math.imul(Ln,En)|0,K=K+Math.imul(Ln,Sr)|0,q=q+Math.imul(sr,yr)|0,k=(k=k+Math.imul(sr,Wn)|0)+Math.imul(gr,yr)|0,K=K+Math.imul(gr,Wn)|0,q=q+Math.imul(Dn,zr)|0,k=(k=k+Math.imul(Dn,Rr)|0)+Math.imul(Gn,zr)|0,K=K+Math.imul(Gn,Rr)|0;var jr=(he+(q=q+Math.imul(Jt,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(Jt,Bt)|0)+Math.imul(Et,Ir)|0))<<13)|0;he=((K=K+Math.imul(Et,Bt)|0)+(k>>>13)|0)+(jr>>>26)|0,jr&=67108863,q=Math.imul(Dr,Vr),k=(k=Math.imul(Dr,Qn))+Math.imul(ur,Vr)|0,K=Math.imul(ur,Qn),q=q+Math.imul(Jn,Ur)|0,k=(k=k+Math.imul(Jn,Hr)|0)+Math.imul(or,Ur)|0,K=K+Math.imul(or,Hr)|0,q=q+Math.imul(Mr,En)|0,k=(k=k+Math.imul(Mr,Sr)|0)+Math.imul(cr,En)|0,K=K+Math.imul(cr,Sr)|0,q=q+Math.imul(Zn,yr)|0,k=(k=k+Math.imul(Zn,Wn)|0)+Math.imul(Ln,yr)|0,K=K+Math.imul(Ln,Wn)|0,q=q+Math.imul(sr,zr)|0,k=(k=k+Math.imul(sr,Rr)|0)+Math.imul(gr,zr)|0,K=K+Math.imul(gr,Rr)|0;var Bi=(he+(q=q+Math.imul(Dn,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(Dn,Bt)|0)+Math.imul(Gn,Ir)|0))<<13)|0;he=((K=K+Math.imul(Gn,Bt)|0)+(k>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,q=Math.imul(Dr,Ur),k=(k=Math.imul(Dr,Hr))+Math.imul(ur,Ur)|0,K=Math.imul(ur,Hr),q=q+Math.imul(Jn,En)|0,k=(k=k+Math.imul(Jn,Sr)|0)+Math.imul(or,En)|0,K=K+Math.imul(or,Sr)|0,q=q+Math.imul(Mr,yr)|0,k=(k=k+Math.imul(Mr,Wn)|0)+Math.imul(cr,yr)|0,K=K+Math.imul(cr,Wn)|0,q=q+Math.imul(Zn,zr)|0,k=(k=k+Math.imul(Zn,Rr)|0)+Math.imul(Ln,zr)|0,K=K+Math.imul(Ln,Rr)|0;var tn=(he+(q=q+Math.imul(sr,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(sr,Bt)|0)+Math.imul(gr,Ir)|0))<<13)|0;he=((K=K+Math.imul(gr,Bt)|0)+(k>>>13)|0)+(tn>>>26)|0,tn&=67108863,q=Math.imul(Dr,En),k=(k=Math.imul(Dr,Sr))+Math.imul(ur,En)|0,K=Math.imul(ur,Sr),q=q+Math.imul(Jn,yr)|0,k=(k=k+Math.imul(Jn,Wn)|0)+Math.imul(or,yr)|0,K=K+Math.imul(or,Wn)|0,q=q+Math.imul(Mr,zr)|0,k=(k=k+Math.imul(Mr,Rr)|0)+Math.imul(cr,zr)|0,K=K+Math.imul(cr,Rr)|0;var Ia=(he+(q=q+Math.imul(Zn,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(Zn,Bt)|0)+Math.imul(Ln,Ir)|0))<<13)|0;he=((K=K+Math.imul(Ln,Bt)|0)+(k>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,q=Math.imul(Dr,yr),k=(k=Math.imul(Dr,Wn))+Math.imul(ur,yr)|0,K=Math.imul(ur,Wn),q=q+Math.imul(Jn,zr)|0,k=(k=k+Math.imul(Jn,Rr)|0)+Math.imul(or,zr)|0,K=K+Math.imul(or,Rr)|0;var jt=(he+(q=q+Math.imul(Mr,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(Mr,Bt)|0)+Math.imul(cr,Ir)|0))<<13)|0;he=((K=K+Math.imul(cr,Bt)|0)+(k>>>13)|0)+(jt>>>26)|0,jt&=67108863,q=Math.imul(Dr,zr),k=(k=Math.imul(Dr,Rr))+Math.imul(ur,zr)|0,K=Math.imul(ur,Rr);var ac=(he+(q=q+Math.imul(Jn,Ir)|0)|0)+((8191&(k=(k=k+Math.imul(Jn,Bt)|0)+Math.imul(or,Ir)|0))<<13)|0;he=((K=K+Math.imul(or,Bt)|0)+(k>>>13)|0)+(ac>>>26)|0,ac&=67108863;var Dh=(he+(q=Math.imul(Dr,Ir))|0)+((8191&(k=(k=Math.imul(Dr,Bt))+Math.imul(ur,Ir)|0))<<13)|0;return he=((K=Math.imul(ur,Bt))+(k>>>13)|0)+(Dh>>>26)|0,Dh&=67108863,ne[0]=Si,ne[1]=Fi,ne[2]=po,ne[3]=Wi,ne[4]=Ts,ne[5]=Ds,ne[6]=Th,ne[7]=oc,ne[8]=Qc,ne[9]=eu,ne[10]=Sn,ne[11]=tu,ne[12]=jr,ne[13]=Bi,ne[14]=tn,ne[15]=Ia,ne[16]=jt,ne[17]=ac,ne[18]=Dh,0!==he&&(ne[19]=he,P.length++),P};function vt(W,S,D){D.negative=S.negative^W.negative,D.length=W.length+S.length;for(var P=0,O=0,j=0;j<D.length-1;j++){var ne=O;O=0;for(var he=67108863&P,q=Math.min(j,S.length-1),k=Math.max(0,j-W.length+1);k<=q;k++){var V=(0|W.words[j-k])*(0|S.words[k]),F=67108863&V;he=67108863&(F=F+he|0),O+=(ne=(ne=ne+(V/67108864|0)|0)+(F>>>26)|0)>>>26,ne&=67108863}D.words[j]=he,P=ne,ne=O}return 0!==P?D.words[j]=P:D.length--,D._strip()}function Ht(W,S,D){return vt(W,S,D)}function Lt(W,S){this.x=W,this.y=S}Math.imul||(Me=ft),U.prototype.mulTo=function(S,D){var O=this.length+S.length;return 10===this.length&&10===S.length?Me(this,S,D):O<63?ft(this,S,D):O<1024?vt(this,S,D):Ht(this,S,D)},Lt.prototype.makeRBT=function(S){for(var D=new Array(S),P=U.prototype._countBits(S)-1,O=0;O<S;O++)D[O]=this.revBin(O,P,S);return D},Lt.prototype.revBin=function(S,D,P){if(0===S||S===P-1)return S;for(var O=0,j=0;j<D;j++)O|=(1&S)<<D-j-1,S>>=1;return O},Lt.prototype.permute=function(S,D,P,O,j,ne){for(var he=0;he<ne;he++)O[he]=D[S[he]],j[he]=P[S[he]]},Lt.prototype.transform=function(S,D,P,O,j,ne){this.permute(ne,S,D,P,O,j);for(var he=1;he<j;he<<=1)for(var q=he<<1,k=Math.cos(2*Math.PI/q),K=Math.sin(2*Math.PI/q),rt=0;rt<j;rt+=q)for(var it=k,V=K,F=0;F<he;F++){var Le=P[rt+F],qe=O[rt+F],ut=P[rt+F+he],pt=O[rt+F+he],bt=it*ut-V*pt;pt=it*pt+V*ut,P[rt+F]=Le+(ut=bt),O[rt+F]=qe+pt,P[rt+F+he]=Le-ut,O[rt+F+he]=qe-pt,F!==q&&(bt=k*it-K*V,V=k*V+K*it,it=bt)}},Lt.prototype.guessLen13b=function(S,D){var P=1|Math.max(D,S),O=1&P,j=0;for(P=P/2|0;P;P>>>=1)j++;return 1<<j+1+O},Lt.prototype.conjugate=function(S,D,P){if(!(P<=1))for(var O=0;O<P/2;O++){var j=S[O];S[O]=S[P-O-1],S[P-O-1]=j,j=D[O],D[O]=-D[P-O-1],D[P-O-1]=-j}},Lt.prototype.normalize13b=function(S,D){for(var P=0,O=0;O<D/2;O++){var j=8192*Math.round(S[2*O+1]/D)+Math.round(S[2*O]/D)+P;S[O]=67108863&j,P=j<67108864?0:j/67108864|0}return S},Lt.prototype.convert13b=function(S,D,P,O){for(var j=0,ne=0;ne<D;ne++)P[2*ne]=8191&(j+=0|S[ne]),P[2*ne+1]=8191&(j>>>=13),j>>>=13;for(ne=2*D;ne<O;++ne)P[ne]=0;ie(0===j),ie(0==(-8192&j))},Lt.prototype.stub=function(S){for(var D=new Array(S),P=0;P<S;P++)D[P]=0;return D},Lt.prototype.mulp=function(S,D,P){var O=2*this.guessLen13b(S.length,D.length),j=this.makeRBT(O),ne=this.stub(O),he=new Array(O),q=new Array(O),k=new Array(O),K=new Array(O),rt=new Array(O),it=new Array(O),V=P.words;V.length=O,this.convert13b(S.words,S.length,he,O),this.convert13b(D.words,D.length,K,O),this.transform(he,ne,q,k,O,j),this.transform(K,ne,rt,it,O,j);for(var F=0;F<O;F++){var Le=q[F]*rt[F]-k[F]*it[F];k[F]=q[F]*it[F]+k[F]*rt[F],q[F]=Le}return this.conjugate(q,k,O),this.transform(q,k,V,ne,O,j),this.conjugate(V,ne,O),this.normalize13b(V,O),P.negative=S.negative^D.negative,P.length=S.length+D.length,P._strip()},U.prototype.mul=function(S){var D=new U(null);return D.words=new Array(this.length+S.length),this.mulTo(S,D)},U.prototype.mulf=function(S){var D=new U(null);return D.words=new Array(this.length+S.length),Ht(this,S,D)},U.prototype.imul=function(S){return this.clone().mulTo(S,this)},U.prototype.imuln=function(S){var D=S<0;D&&(S=-S),ie("number"==typeof S),ie(S<67108864);for(var P=0,O=0;O<this.length;O++){var j=(0|this.words[O])*S,ne=(67108863&j)+(67108863&P);P>>=26,P+=j/67108864|0,P+=ne>>>26,this.words[O]=67108863&ne}return 0!==P&&(this.words[O]=P,this.length++),D?this.ineg():this},U.prototype.muln=function(S){return this.clone().imuln(S)},U.prototype.sqr=function(){return this.mul(this)},U.prototype.isqr=function(){return this.imul(this.clone())},U.prototype.pow=function(S){var D=function nt(W){for(var S=new Array(W.bitLength()),D=0;D<S.length;D++)S[D]=W.words[D/26|0]>>>D%26&1;return S}(S);if(0===D.length)return new U(1);for(var P=this,O=0;O<D.length&&0===D[O];O++,P=P.sqr());if(++O<D.length)for(var j=P.sqr();O<D.length;O++,j=j.sqr())0!==D[O]&&(P=P.mul(j));return P},U.prototype.iushln=function(S){ie("number"==typeof S&&S>=0);var j,D=S%26,P=(S-D)/26,O=67108863>>>26-D<<26-D;if(0!==D){var ne=0;for(j=0;j<this.length;j++){var he=this.words[j]&O;this.words[j]=(0|this.words[j])-he<<D|ne,ne=he>>>26-D}ne&&(this.words[j]=ne,this.length++)}if(0!==P){for(j=this.length-1;j>=0;j--)this.words[j+P]=this.words[j];for(j=0;j<P;j++)this.words[j]=0;this.length+=P}return this._strip()},U.prototype.ishln=function(S){return ie(0===this.negative),this.iushln(S)},U.prototype.iushrn=function(S,D,P){var O;ie("number"==typeof S&&S>=0),O=D?(D-D%26)/26:0;var j=S%26,ne=Math.min((S-j)/26,this.length),he=67108863^67108863>>>j<<j,q=P;if(O-=ne,O=Math.max(0,O),q){for(var k=0;k<ne;k++)q.words[k]=this.words[k];q.length=ne}if(0!==ne)if(this.length>ne)for(this.length-=ne,k=0;k<this.length;k++)this.words[k]=this.words[k+ne];else this.words[0]=0,this.length=1;var K=0;for(k=this.length-1;k>=0&&(0!==K||k>=O);k--){var rt=0|this.words[k];this.words[k]=K<<26-j|rt>>>j,K=rt&he}return q&&0!==K&&(q.words[q.length++]=K),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},U.prototype.ishrn=function(S,D,P){return ie(0===this.negative),this.iushrn(S,D,P)},U.prototype.shln=function(S){return this.clone().ishln(S)},U.prototype.ushln=function(S){return this.clone().iushln(S)},U.prototype.shrn=function(S){return this.clone().ishrn(S)},U.prototype.ushrn=function(S){return this.clone().iushrn(S)},U.prototype.testn=function(S){ie("number"==typeof S&&S>=0);var D=S%26,P=(S-D)/26;return!(this.length<=P||!(this.words[P]&1<<D))},U.prototype.imaskn=function(S){ie("number"==typeof S&&S>=0);var D=S%26,P=(S-D)/26;return ie(0===this.negative,"imaskn works only with positive numbers"),this.length<=P?this:(0!==D&&P++,this.length=Math.min(P,this.length),0!==D&&(this.words[this.length-1]&=67108863^67108863>>>D<<D),this._strip())},U.prototype.maskn=function(S){return this.clone().imaskn(S)},U.prototype.iaddn=function(S){return ie("number"==typeof S),ie(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<=S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},U.prototype._iaddn=function(S){this.words[0]+=S;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},U.prototype.isubn=function(S){if(ie("number"==typeof S),ie(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this._strip()},U.prototype.addn=function(S){return this.clone().iaddn(S)},U.prototype.subn=function(S){return this.clone().isubn(S)},U.prototype.iabs=function(){return this.negative=0,this},U.prototype.abs=function(){return this.clone().iabs()},U.prototype._ishlnsubmul=function(S,D,P){var j;this._expand(S.length+P);var ne,he=0;for(j=0;j<S.length;j++){ne=(0|this.words[j+P])+he;var q=(0|S.words[j])*D;he=((ne-=67108863&q)>>26)-(q/67108864|0),this.words[j+P]=67108863&ne}for(;j<this.length-P;j++)he=(ne=(0|this.words[j+P])+he)>>26,this.words[j+P]=67108863&ne;if(0===he)return this._strip();for(ie(-1===he),he=0,j=0;j<this.length;j++)he=(ne=-(0|this.words[j])+he)>>26,this.words[j]=67108863&ne;return this.negative=1,this._strip()},U.prototype._wordDiv=function(S,D){var P,O=this.clone(),j=S,ne=0|j.words[j.length-1];0!=(P=26-this._countBits(ne))&&(j=j.ushln(P),O.iushln(P),ne=0|j.words[j.length-1]);var k,q=O.length-j.length;if("mod"!==D){(k=new U(null)).length=q+1,k.words=new Array(k.length);for(var K=0;K<k.length;K++)k.words[K]=0}var rt=O.clone()._ishlnsubmul(j,1,q);0===rt.negative&&(O=rt,k&&(k.words[q]=1));for(var it=q-1;it>=0;it--){var V=67108864*(0|O.words[j.length+it])+(0|O.words[j.length+it-1]);for(V=Math.min(V/ne|0,67108863),O._ishlnsubmul(j,V,it);0!==O.negative;)V--,O.negative=0,O._ishlnsubmul(j,1,it),O.isZero()||(O.negative^=1);k&&(k.words[it]=V)}return k&&k._strip(),O._strip(),"div"!==D&&0!==P&&O.iushrn(P),{div:k||null,mod:O}},U.prototype.divmod=function(S,D,P){return ie(!S.isZero()),this.isZero()?{div:new U(0),mod:new U(0)}:0!==this.negative&&0===S.negative?(ne=this.neg().divmod(S,D),"mod"!==D&&(O=ne.div.neg()),"div"!==D&&(j=ne.mod.neg(),P&&0!==j.negative&&j.iadd(S)),{div:O,mod:j}):0===this.negative&&0!==S.negative?(ne=this.divmod(S.neg(),D),"mod"!==D&&(O=ne.div.neg()),{div:O,mod:ne.mod}):0!=(this.negative&S.negative)?(ne=this.neg().divmod(S.neg(),D),"div"!==D&&(j=ne.mod.neg(),P&&0!==j.negative&&j.isub(S)),{div:ne.div,mod:j}):S.length>this.length||this.cmp(S)<0?{div:new U(0),mod:this}:1===S.length?"div"===D?{div:this.divn(S.words[0]),mod:null}:"mod"===D?{div:null,mod:new U(this.modrn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new U(this.modrn(S.words[0]))}:this._wordDiv(S,D);var O,j,ne},U.prototype.div=function(S){return this.divmod(S,"div",!1).div},U.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},U.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},U.prototype.divRound=function(S){var D=this.divmod(S);if(D.mod.isZero())return D.div;var P=0!==D.div.negative?D.mod.isub(S):D.mod,O=S.ushrn(1),j=S.andln(1),ne=P.cmp(O);return ne<0||1===j&&0===ne?D.div:0!==D.div.negative?D.div.isubn(1):D.div.iaddn(1)},U.prototype.modrn=function(S){var D=S<0;D&&(S=-S),ie(S<=67108863);for(var P=(1<<26)%S,O=0,j=this.length-1;j>=0;j--)O=(P*O+(0|this.words[j]))%S;return D?-O:O},U.prototype.modn=function(S){return this.modrn(S)},U.prototype.idivn=function(S){var D=S<0;D&&(S=-S),ie(S<=67108863);for(var P=0,O=this.length-1;O>=0;O--){var j=(0|this.words[O])+67108864*P;this.words[O]=j/S|0,P=j%S}return this._strip(),D?this.ineg():this},U.prototype.divn=function(S){return this.clone().idivn(S)},U.prototype.egcd=function(S){ie(0===S.negative),ie(!S.isZero());var D=this,P=S.clone();D=0!==D.negative?D.umod(S):D.clone();for(var O=new U(1),j=new U(0),ne=new U(0),he=new U(1),q=0;D.isEven()&&P.isEven();)D.iushrn(1),P.iushrn(1),++q;for(var k=P.clone(),K=D.clone();!D.isZero();){for(var rt=0,it=1;0==(D.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(D.iushrn(rt);rt-- >0;)(O.isOdd()||j.isOdd())&&(O.iadd(k),j.isub(K)),O.iushrn(1),j.iushrn(1);for(var V=0,F=1;0==(P.words[0]&F)&&V<26;++V,F<<=1);if(V>0)for(P.iushrn(V);V-- >0;)(ne.isOdd()||he.isOdd())&&(ne.iadd(k),he.isub(K)),ne.iushrn(1),he.iushrn(1);D.cmp(P)>=0?(D.isub(P),O.isub(ne),j.isub(he)):(P.isub(D),ne.isub(O),he.isub(j))}return{a:ne,b:he,gcd:P.iushln(q)}},U.prototype._invmp=function(S){ie(0===S.negative),ie(!S.isZero());var rt,D=this,P=S.clone();D=0!==D.negative?D.umod(S):D.clone();for(var O=new U(1),j=new U(0),ne=P.clone();D.cmpn(1)>0&&P.cmpn(1)>0;){for(var he=0,q=1;0==(D.words[0]&q)&&he<26;++he,q<<=1);if(he>0)for(D.iushrn(he);he-- >0;)O.isOdd()&&O.iadd(ne),O.iushrn(1);for(var k=0,K=1;0==(P.words[0]&K)&&k<26;++k,K<<=1);if(k>0)for(P.iushrn(k);k-- >0;)j.isOdd()&&j.iadd(ne),j.iushrn(1);D.cmp(P)>=0?(D.isub(P),O.isub(j)):(P.isub(D),j.isub(O))}return(rt=0===D.cmpn(1)?O:j).cmpn(0)<0&&rt.iadd(S),rt},U.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var D=this.clone(),P=S.clone();D.negative=0,P.negative=0;for(var O=0;D.isEven()&&P.isEven();O++)D.iushrn(1),P.iushrn(1);for(;;){for(;D.isEven();)D.iushrn(1);for(;P.isEven();)P.iushrn(1);var j=D.cmp(P);if(j<0){var ne=D;D=P,P=ne}else if(0===j||0===P.cmpn(1))break;D.isub(P)}return P.iushln(O)},U.prototype.invm=function(S){return this.egcd(S).a.umod(S)},U.prototype.isEven=function(){return 0==(1&this.words[0])},U.prototype.isOdd=function(){return 1==(1&this.words[0])},U.prototype.andln=function(S){return this.words[0]&S},U.prototype.bincn=function(S){ie("number"==typeof S);var D=S%26,P=(S-D)/26,O=1<<D;if(this.length<=P)return this._expand(P+1),this.words[P]|=O,this;for(var j=O,ne=P;0!==j&&ne<this.length;ne++){var he=0|this.words[ne];j=(he+=j)>>>26,this.words[ne]=he&=67108863}return 0!==j&&(this.words[ne]=j,this.length++),this},U.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},U.prototype.cmpn=function(S){var P,D=S<0;if(0!==this.negative&&!D)return-1;if(0===this.negative&&D)return 1;if(this._strip(),this.length>1)P=1;else{D&&(S=-S),ie(S<=67108863,"Number is too big");var O=0|this.words[0];P=O===S?0:O<S?-1:1}return 0!==this.negative?0|-P:P},U.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var D=this.ucmp(S);return 0!==this.negative?0|-D:D},U.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var D=0,P=this.length-1;P>=0;P--){var O=0|this.words[P],j=0|S.words[P];if(O!==j){O<j?D=-1:O>j&&(D=1);break}}return D},U.prototype.gtn=function(S){return 1===this.cmpn(S)},U.prototype.gt=function(S){return 1===this.cmp(S)},U.prototype.gten=function(S){return this.cmpn(S)>=0},U.prototype.gte=function(S){return this.cmp(S)>=0},U.prototype.ltn=function(S){return-1===this.cmpn(S)},U.prototype.lt=function(S){return-1===this.cmp(S)},U.prototype.lten=function(S){return this.cmpn(S)<=0},U.prototype.lte=function(S){return this.cmp(S)<=0},U.prototype.eqn=function(S){return 0===this.cmpn(S)},U.prototype.eq=function(S){return 0===this.cmp(S)},U.red=function(S){return new Kt(S)},U.prototype.toRed=function(S){return ie(!this.red,"Already a number in reduction context"),ie(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},U.prototype.fromRed=function(){return ie(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},U.prototype._forceRed=function(S){return this.red=S,this},U.prototype.forceRed=function(S){return ie(!this.red,"Already a number in reduction context"),this._forceRed(S)},U.prototype.redAdd=function(S){return ie(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},U.prototype.redIAdd=function(S){return ie(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},U.prototype.redSub=function(S){return ie(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},U.prototype.redISub=function(S){return ie(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},U.prototype.redShl=function(S){return ie(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},U.prototype.redMul=function(S){return ie(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},U.prototype.redIMul=function(S){return ie(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},U.prototype.redSqr=function(){return ie(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},U.prototype.redISqr=function(){return ie(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},U.prototype.redSqrt=function(){return ie(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},U.prototype.redInvm=function(){return ie(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},U.prototype.redNeg=function(){return ie(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},U.prototype.redPow=function(S){return ie(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var ht={k256:null,p224:null,p192:null,p25519:null};function Zt(W,S){this.name=W,this.p=new U(S,16),this.n=this.p.bitLength(),this.k=new U(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Un(){Zt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function yn(){Zt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function xr(){Zt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function cn(){Zt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Kt(W){if("string"==typeof W){var S=U._prime(W);this.m=S.p,this.prime=S}else ie(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}function Ae(W){Kt.call(this,W),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new U(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Zt.prototype._tmp=function(){var S=new U(null);return S.words=new Array(Math.ceil(this.n/13)),S},Zt.prototype.ireduce=function(S){var P,D=S;do{this.split(D,this.tmp),P=(D=(D=this.imulK(D)).iadd(this.tmp)).bitLength()}while(P>this.n);var O=P<this.n?-1:D.ucmp(this.p);return 0===O?(D.words[0]=0,D.length=1):O>0?D.isub(this.p):void 0!==D.strip?D.strip():D._strip(),D},Zt.prototype.split=function(S,D){S.iushrn(this.n,0,D)},Zt.prototype.imulK=function(S){return S.imul(this.k)},ve(Un,Zt),Un.prototype.split=function(S,D){for(var P=4194303,O=Math.min(S.length,9),j=0;j<O;j++)D.words[j]=S.words[j];if(D.length=O,S.length<=9)return S.words[0]=0,void(S.length=1);var ne=S.words[9];for(D.words[D.length++]=ne&P,j=10;j<S.length;j++){var he=0|S.words[j];S.words[j-10]=(he&P)<<4|ne>>>22,ne=he}S.words[j-10]=ne>>>=22,S.length-=0===ne&&S.length>10?10:9},Un.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var D=0,P=0;P<S.length;P++){var O=0|S.words[P];S.words[P]=67108863&(D+=977*O),D=64*O+(D/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},ve(yn,Zt),ve(xr,Zt),ve(cn,Zt),cn.prototype.imulK=function(S){for(var D=0,P=0;P<S.length;P++){var O=19*(0|S.words[P])+D,j=67108863&O;O>>>=26,S.words[P]=j,D=O}return 0!==D&&(S.words[S.length++]=D),S},U._prime=function(S){if(ht[S])return ht[S];var D;if("k256"===S)D=new Un;else if("p224"===S)D=new yn;else if("p192"===S)D=new xr;else{if("p25519"!==S)throw new Error("Unknown prime "+S);D=new cn}return ht[S]=D,D},Kt.prototype._verify1=function(S){ie(0===S.negative,"red works only with positives"),ie(S.red,"red works only with red numbers")},Kt.prototype._verify2=function(S,D){ie(0==(S.negative|D.negative),"red works only with positives"),ie(S.red&&S.red===D.red,"red works only with red numbers")},Kt.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):(Je(S,S.umod(this.m)._forceRed(this)),S)},Kt.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},Kt.prototype.add=function(S,D){this._verify2(S,D);var P=S.add(D);return P.cmp(this.m)>=0&&P.isub(this.m),P._forceRed(this)},Kt.prototype.iadd=function(S,D){this._verify2(S,D);var P=S.iadd(D);return P.cmp(this.m)>=0&&P.isub(this.m),P},Kt.prototype.sub=function(S,D){this._verify2(S,D);var P=S.sub(D);return P.cmpn(0)<0&&P.iadd(this.m),P._forceRed(this)},Kt.prototype.isub=function(S,D){this._verify2(S,D);var P=S.isub(D);return P.cmpn(0)<0&&P.iadd(this.m),P},Kt.prototype.shl=function(S,D){return this._verify1(S),this.imod(S.ushln(D))},Kt.prototype.imul=function(S,D){return this._verify2(S,D),this.imod(S.imul(D))},Kt.prototype.mul=function(S,D){return this._verify2(S,D),this.imod(S.mul(D))},Kt.prototype.isqr=function(S){return this.imul(S,S.clone())},Kt.prototype.sqr=function(S){return this.mul(S,S)},Kt.prototype.sqrt=function(S){if(S.isZero())return S.clone();var D=this.m.andln(3);if(ie(D%2==1),3===D){var P=this.m.add(new U(1)).iushrn(2);return this.pow(S,P)}for(var O=this.m.subn(1),j=0;!O.isZero()&&0===O.andln(1);)j++,O.iushrn(1);ie(!O.isZero());var ne=new U(1).toRed(this),he=ne.redNeg(),q=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new U(2*k*k).toRed(this);0!==this.pow(k,q).cmp(he);)k.redIAdd(he);for(var K=this.pow(k,O),rt=this.pow(S,O.addn(1).iushrn(1)),it=this.pow(S,O),V=j;0!==it.cmp(ne);){for(var F=it,Le=0;0!==F.cmp(ne);Le++)F=F.redSqr();ie(Le<V);var qe=this.pow(K,new U(1).iushln(V-Le-1));rt=rt.redMul(qe),K=qe.redSqr(),it=it.redMul(K),V=Le}return rt},Kt.prototype.invm=function(S){var D=S._invmp(this.m);return 0!==D.negative?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},Kt.prototype.pow=function(S,D){if(D.isZero())return new U(1).toRed(this);if(0===D.cmpn(1))return S.clone();var O=new Array(16);O[0]=new U(1).toRed(this),O[1]=S;for(var j=2;j<O.length;j++)O[j]=this.mul(O[j-1],S);var ne=O[0],he=0,q=0,k=D.bitLength()%26;for(0===k&&(k=26),j=D.length-1;j>=0;j--){for(var K=D.words[j],rt=k-1;rt>=0;rt--){var it=K>>rt&1;ne!==O[0]&&(ne=this.sqr(ne)),0!==it||0!==he?(he<<=1,he|=it,(4==++q||0===j&&0===rt)&&(ne=this.mul(ne,O[he]),q=0,he=0)):q=0}k=26}return ne},Kt.prototype.convertTo=function(S){var D=S.umod(this.m);return D===S?D.clone():D},Kt.prototype.convertFrom=function(S){var D=S.clone();return D.red=null,D},U.mont=function(S){return new Ae(S)},ve(Ae,Kt),Ae.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},Ae.prototype.convertFrom=function(S){var D=this.imod(S.mul(this.rinv));return D.red=null,D},Ae.prototype.imul=function(S,D){if(S.isZero()||D.isZero())return S.words[0]=0,S.length=1,S;var P=S.imul(D),O=P.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=P.isub(O).iushrn(this.shift),ne=j;return j.cmp(this.m)>=0?ne=j.isub(this.m):j.cmpn(0)<0&&(ne=j.iadd(this.m)),ne._forceRed(this)},Ae.prototype.mul=function(S,D){if(S.isZero()||D.isZero())return new U(0)._forceRed(this);var P=S.mul(D),O=P.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=P.isub(O).iushrn(this.shift),ne=j;return j.cmp(this.m)>=0?ne=j.isub(this.m):j.cmpn(0)<0&&(ne=j.iadd(this.m)),ne._forceRed(this)},Ae.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(et=pe.nmd(et),this)},7084:(et,ot,pe)=>{var Y=ot;Y.utils=pe(9299),Y.common=pe(3800),Y.sha=pe(4962),Y.ripemd=pe(9458),Y.hmac=pe(2194),Y.sha1=Y.sha.sha1,Y.sha256=Y.sha.sha256,Y.sha224=Y.sha.sha224,Y.sha384=Y.sha.sha384,Y.sha512=Y.sha.sha512,Y.ripemd160=Y.ripemd.ripemd160},3800:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(2391);function ie(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ot.BlockHash=ie,ie.prototype.update=function(U,Se){if(U=Y.toArray(U,Se),this.pending=this.pending?this.pending.concat(U):U,this.pendingTotal+=U.length,this.pending.length>=this._delta8){var Ge=(U=this.pending).length%this._delta8;this.pending=U.slice(U.length-Ge,U.length),0===this.pending.length&&(this.pending=null),U=Y.join32(U,0,U.length-Ge,this.endian);for(var be=0;be<U.length;be+=this._delta32)this._update(U,be,be+this._delta32)}return this},ie.prototype.digest=function(U){return this.update(this._pad()),He(null===this.pending),this._digest(U)},ie.prototype._pad=function(){var U=this.pendingTotal,Se=this._delta8,Ge=Se-(U+this.padLength)%Se,be=new Array(Ge+this.padLength);be[0]=128;for(var Ce=1;Ce<Ge;Ce++)be[Ce]=0;if(U<<=3,"big"===this.endian){for(var Je=8;Je<this.padLength;Je++)be[Ce++]=0;be[Ce++]=0,be[Ce++]=0,be[Ce++]=0,be[Ce++]=0,be[Ce++]=U>>>24&255,be[Ce++]=U>>>16&255,be[Ce++]=U>>>8&255,be[Ce++]=255&U}else for(be[Ce++]=255&U,be[Ce++]=U>>>8&255,be[Ce++]=U>>>16&255,be[Ce++]=U>>>24&255,be[Ce++]=0,be[Ce++]=0,be[Ce++]=0,be[Ce++]=0,Je=8;Je<this.padLength;Je++)be[Ce++]=0;return be}},2194:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(2391);function ie(ve,U,Se){if(!(this instanceof ie))return new ie(ve,U,Se);this.Hash=ve,this.blockSize=ve.blockSize/8,this.outSize=ve.outSize/8,this.inner=null,this.outer=null,this._init(Y.toArray(U,Se))}et.exports=ie,ie.prototype._init=function(U){U.length>this.blockSize&&(U=(new this.Hash).update(U).digest()),He(U.length<=this.blockSize);for(var Se=U.length;Se<this.blockSize;Se++)U.push(0);for(Se=0;Se<U.length;Se++)U[Se]^=54;for(this.inner=(new this.Hash).update(U),Se=0;Se<U.length;Se++)U[Se]^=106;this.outer=(new this.Hash).update(U)},ie.prototype.update=function(U,Se){return this.inner.update(U,Se),this},ie.prototype.digest=function(U){return this.outer.update(this.inner.digest()),this.outer.digest(U)}},9458:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(3800),ie=Y.rotl32,ve=Y.sum32,U=Y.sum32_3,Se=Y.sum32_4,Ge=He.BlockHash;function be(){if(!(this instanceof be))return new be;Ge.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Ce(nt,ft,Me,vt){return nt<=15?ft^Me^vt:nt<=31?ft&Me|~ft&vt:nt<=47?(ft|~Me)^vt:nt<=63?ft&vt|Me&~vt:ft^(Me|~vt)}function ye(nt){return nt<=15?1352829926:nt<=31?1548603684:nt<=47?1836072691:nt<=63?2053994217:0}Y.inherits(be,Ge),ot.ripemd160=be,be.blockSize=512,be.outSize=160,be.hmacStrength=192,be.padLength=64,be.prototype._update=function(ft,Me){for(var vt=this.h[0],Ht=this.h[1],Lt=this.h[2],ht=this.h[3],Zt=this.h[4],Un=vt,yn=Ht,xr=Lt,cn=ht,Kt=Zt,Ae=0;Ae<80;Ae++){var W=ve(ie(Se(vt,Ce(Ae,Ht,Lt,ht),ft[De[Ae]+Me],(nt=Ae)<=15?0:nt<=31?1518500249:nt<=47?1859775393:nt<=63?2400959708:2840853838),Ye[Ae]),Zt);vt=Zt,Zt=ht,ht=ie(Lt,10),Lt=Ht,Ht=W,W=ve(ie(Se(Un,Ce(79-Ae,yn,xr,cn),ft[Be[Ae]+Me],ye(Ae)),ct[Ae]),Kt),Un=Kt,Kt=cn,cn=ie(xr,10),xr=yn,yn=W}var nt;W=U(this.h[1],Lt,cn),this.h[1]=U(this.h[2],ht,Kt),this.h[2]=U(this.h[3],Zt,Un),this.h[3]=U(this.h[4],vt,yn),this.h[4]=U(this.h[0],Ht,xr),this.h[0]=W},be.prototype._digest=function(ft){return"hex"===ft?Y.toHex32(this.h,"little"):Y.split32(this.h,"little")};var De=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Be=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ye=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ct=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},4962:(et,ot,pe)=>{"use strict";ot.sha1=pe(9007),ot.sha224=pe(55),ot.sha256=pe(9342),ot.sha384=pe(8634),ot.sha512=pe(39)},9007:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(3800),ie=pe(3113),ve=Y.rotl32,U=Y.sum32,Se=Y.sum32_5,Ge=ie.ft_1,be=He.BlockHash,Ce=[1518500249,1859775393,2400959708,3395469782];function Je(){if(!(this instanceof Je))return new Je;be.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Y.inherits(Je,be),et.exports=Je,Je.blockSize=512,Je.outSize=160,Je.hmacStrength=80,Je.padLength=64,Je.prototype._update=function(De,Be){for(var Ye=this.W,ct=0;ct<16;ct++)Ye[ct]=De[Be+ct];for(;ct<Ye.length;ct++)Ye[ct]=ve(Ye[ct-3]^Ye[ct-8]^Ye[ct-14]^Ye[ct-16],1);var nt=this.h[0],ft=this.h[1],Me=this.h[2],vt=this.h[3],Ht=this.h[4];for(ct=0;ct<Ye.length;ct++){var Lt=~~(ct/20),ht=Se(ve(nt,5),Ge(Lt,ft,Me,vt),Ht,Ye[ct],Ce[Lt]);Ht=vt,vt=Me,Me=ve(ft,30),ft=nt,nt=ht}this.h[0]=U(this.h[0],nt),this.h[1]=U(this.h[1],ft),this.h[2]=U(this.h[2],Me),this.h[3]=U(this.h[3],vt),this.h[4]=U(this.h[4],Ht)},Je.prototype._digest=function(De){return"hex"===De?Y.toHex32(this.h,"big"):Y.split32(this.h,"big")}},55:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(9342);function ie(){if(!(this instanceof ie))return new ie;He.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Y.inherits(ie,He),et.exports=ie,ie.blockSize=512,ie.outSize=224,ie.hmacStrength=192,ie.padLength=64,ie.prototype._digest=function(U){return"hex"===U?Y.toHex32(this.h.slice(0,7),"big"):Y.split32(this.h.slice(0,7),"big")}},9342:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(3800),ie=pe(3113),ve=pe(2391),U=Y.sum32,Se=Y.sum32_4,Ge=Y.sum32_5,be=ie.ch32,Ce=ie.maj32,Je=ie.s0_256,ye=ie.s1_256,De=ie.g0_256,Be=ie.g1_256,Ye=He.BlockHash,ct=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function nt(){if(!(this instanceof nt))return new nt;Ye.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ct,this.W=new Array(64)}Y.inherits(nt,Ye),et.exports=nt,nt.blockSize=512,nt.outSize=256,nt.hmacStrength=192,nt.padLength=64,nt.prototype._update=function(Me,vt){for(var Ht=this.W,Lt=0;Lt<16;Lt++)Ht[Lt]=Me[vt+Lt];for(;Lt<Ht.length;Lt++)Ht[Lt]=Se(Be(Ht[Lt-2]),Ht[Lt-7],De(Ht[Lt-15]),Ht[Lt-16]);var ht=this.h[0],Zt=this.h[1],Un=this.h[2],yn=this.h[3],xr=this.h[4],cn=this.h[5],Kt=this.h[6],Ae=this.h[7];for(ve(this.k.length===Ht.length),Lt=0;Lt<Ht.length;Lt++){var W=Ge(Ae,ye(xr),be(xr,cn,Kt),this.k[Lt],Ht[Lt]),S=U(Je(ht),Ce(ht,Zt,Un));Ae=Kt,Kt=cn,cn=xr,xr=U(yn,W),yn=Un,Un=Zt,Zt=ht,ht=U(W,S)}this.h[0]=U(this.h[0],ht),this.h[1]=U(this.h[1],Zt),this.h[2]=U(this.h[2],Un),this.h[3]=U(this.h[3],yn),this.h[4]=U(this.h[4],xr),this.h[5]=U(this.h[5],cn),this.h[6]=U(this.h[6],Kt),this.h[7]=U(this.h[7],Ae)},nt.prototype._digest=function(Me){return"hex"===Me?Y.toHex32(this.h,"big"):Y.split32(this.h,"big")}},8634:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(39);function ie(){if(!(this instanceof ie))return new ie;He.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Y.inherits(ie,He),et.exports=ie,ie.blockSize=1024,ie.outSize=384,ie.hmacStrength=192,ie.padLength=128,ie.prototype._digest=function(U){return"hex"===U?Y.toHex32(this.h.slice(0,12),"big"):Y.split32(this.h.slice(0,12),"big")}},39:(et,ot,pe)=>{"use strict";var Y=pe(9299),He=pe(3800),ie=pe(2391),ve=Y.rotr64_hi,U=Y.rotr64_lo,Se=Y.shr64_hi,Ge=Y.shr64_lo,be=Y.sum64,Ce=Y.sum64_hi,Je=Y.sum64_lo,ye=Y.sum64_4_hi,De=Y.sum64_4_lo,Be=Y.sum64_5_hi,Ye=Y.sum64_5_lo,ct=He.BlockHash,nt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ft(){if(!(this instanceof ft))return new ft;ct.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=nt,this.W=new Array(160)}function Me(W,S,D,P,O){var j=W&D^~W&O;return j<0&&(j+=4294967296),j}function vt(W,S,D,P,O,j){var ne=S&P^~S&j;return ne<0&&(ne+=4294967296),ne}function Ht(W,S,D,P,O){var j=W&D^W&O^D&O;return j<0&&(j+=4294967296),j}function Lt(W,S,D,P,O,j){var ne=S&P^S&j^P&j;return ne<0&&(ne+=4294967296),ne}function ht(W,S){var j=ve(W,S,28)^ve(S,W,2)^ve(S,W,7);return j<0&&(j+=4294967296),j}function Zt(W,S){var j=U(W,S,28)^U(S,W,2)^U(S,W,7);return j<0&&(j+=4294967296),j}function Un(W,S){var j=ve(W,S,14)^ve(W,S,18)^ve(S,W,9);return j<0&&(j+=4294967296),j}function yn(W,S){var j=U(W,S,14)^U(W,S,18)^U(S,W,9);return j<0&&(j+=4294967296),j}function xr(W,S){var j=ve(W,S,1)^ve(W,S,8)^Se(W,S,7);return j<0&&(j+=4294967296),j}function cn(W,S){var j=U(W,S,1)^U(W,S,8)^Ge(W,S,7);return j<0&&(j+=4294967296),j}function Kt(W,S){var j=ve(W,S,19)^ve(S,W,29)^Se(W,S,6);return j<0&&(j+=4294967296),j}function Ae(W,S){var j=U(W,S,19)^U(S,W,29)^Ge(W,S,6);return j<0&&(j+=4294967296),j}Y.inherits(ft,ct),et.exports=ft,ft.blockSize=1024,ft.outSize=512,ft.hmacStrength=192,ft.padLength=128,ft.prototype._prepareBlock=function(S,D){for(var P=this.W,O=0;O<32;O++)P[O]=S[D+O];for(;O<P.length;O+=2){var j=Kt(P[O-4],P[O-3]),ne=Ae(P[O-4],P[O-3]),he=P[O-14],q=P[O-13],k=xr(P[O-30],P[O-29]),K=cn(P[O-30],P[O-29]),rt=P[O-32],it=P[O-31];P[O]=ye(j,ne,he,q,k,K,rt,it),P[O+1]=De(j,ne,he,q,k,K,rt,it)}},ft.prototype._update=function(S,D){this._prepareBlock(S,D);var P=this.W,O=this.h[0],j=this.h[1],ne=this.h[2],he=this.h[3],q=this.h[4],k=this.h[5],K=this.h[6],rt=this.h[7],it=this.h[8],V=this.h[9],F=this.h[10],Le=this.h[11],qe=this.h[12],ut=this.h[13],pt=this.h[14],bt=this.h[15];ie(this.k.length===P.length);for(var Ft=0;Ft<P.length;Ft+=2){var Jt=pt,Et=bt,Hn=Un(it,V),Dn=yn(it,V),Gn=Me(it,0,F,0,qe),Li=vt(0,V,0,Le,0,ut),sr=this.k[Ft],gr=this.k[Ft+1],Xs=P[Ft],Zn=P[Ft+1],Ln=Be(Jt,Et,Hn,Dn,Gn,Li,sr,gr,Xs,Zn),Ks=Ye(Jt,Et,Hn,Dn,Gn,Li,sr,gr,Xs,Zn);Jt=ht(O,j),Et=Zt(O,j),Hn=Ht(O,0,ne,0,q),Dn=Lt(0,j,0,he,0,k);var Mr=Ce(Jt,Et,Hn,Dn),cr=Je(Jt,Et,Hn,Dn);pt=qe,bt=ut,qe=F,ut=Le,F=it,Le=V,it=Ce(K,rt,Ln,Ks),V=Je(rt,rt,Ln,Ks),K=q,rt=k,q=ne,k=he,ne=O,he=j,O=Ce(Ln,Ks,Mr,cr),j=Je(Ln,Ks,Mr,cr)}be(this.h,0,O,j),be(this.h,2,ne,he),be(this.h,4,q,k),be(this.h,6,K,rt),be(this.h,8,it,V),be(this.h,10,F,Le),be(this.h,12,qe,ut),be(this.h,14,pt,bt)},ft.prototype._digest=function(S){return"hex"===S?Y.toHex32(this.h,"big"):Y.split32(this.h,"big")}},3113:(et,ot,pe)=>{"use strict";var He=pe(9299).rotr32;function ve(ye,De,Be){return ye&De^~ye&Be}function U(ye,De,Be){return ye&De^ye&Be^De&Be}function Se(ye,De,Be){return ye^De^Be}ot.ft_1=function ie(ye,De,Be,Ye){return 0===ye?ve(De,Be,Ye):1===ye||3===ye?Se(De,Be,Ye):2===ye?U(De,Be,Ye):void 0},ot.ch32=ve,ot.maj32=U,ot.p32=Se,ot.s0_256=function Ge(ye){return He(ye,2)^He(ye,13)^He(ye,22)},ot.s1_256=function be(ye){return He(ye,6)^He(ye,11)^He(ye,25)},ot.g0_256=function Ce(ye){return He(ye,7)^He(ye,18)^ye>>>3},ot.g1_256=function Je(ye){return He(ye,17)^He(ye,19)^ye>>>10}},9299:(et,ot,pe)=>{"use strict";var Y=pe(2391),He=pe(3894);function ie(Ae,W){return!(55296!=(64512&Ae.charCodeAt(W))||W<0||W+1>=Ae.length)&&56320==(64512&Ae.charCodeAt(W+1))}function Se(Ae){return(Ae>>>24|Ae>>>8&65280|Ae<<8&16711680|(255&Ae)<<24)>>>0}function be(Ae){return 1===Ae.length?"0"+Ae:Ae}function Ce(Ae){return 7===Ae.length?"0"+Ae:6===Ae.length?"00"+Ae:5===Ae.length?"000"+Ae:4===Ae.length?"0000"+Ae:3===Ae.length?"00000"+Ae:2===Ae.length?"000000"+Ae:1===Ae.length?"0000000"+Ae:Ae}ot.inherits=He,ot.toArray=function ve(Ae,W){if(Array.isArray(Ae))return Ae.slice();if(!Ae)return[];var S=[];if("string"==typeof Ae)if(W){if("hex"===W)for((Ae=Ae.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(Ae="0"+Ae),P=0;P<Ae.length;P+=2)S.push(parseInt(Ae[P]+Ae[P+1],16))}else for(var D=0,P=0;P<Ae.length;P++){var O=Ae.charCodeAt(P);O<128?S[D++]=O:O<2048?(S[D++]=O>>6|192,S[D++]=63&O|128):ie(Ae,P)?(O=65536+((1023&O)<<10)+(1023&Ae.charCodeAt(++P)),S[D++]=O>>18|240,S[D++]=O>>12&63|128,S[D++]=O>>6&63|128,S[D++]=63&O|128):(S[D++]=O>>12|224,S[D++]=O>>6&63|128,S[D++]=63&O|128)}else for(P=0;P<Ae.length;P++)S[P]=0|Ae[P];return S},ot.toHex=function U(Ae){for(var W="",S=0;S<Ae.length;S++)W+=be(Ae[S].toString(16));return W},ot.htonl=Se,ot.toHex32=function Ge(Ae,W){for(var S="",D=0;D<Ae.length;D++){var P=Ae[D];"little"===W&&(P=Se(P)),S+=Ce(P.toString(16))}return S},ot.zero2=be,ot.zero8=Ce,ot.join32=function Je(Ae,W,S,D){var P=S-W;Y(P%4==0);for(var O=new Array(P/4),j=0,ne=W;j<O.length;j++,ne+=4)O[j]=("big"===D?Ae[ne]<<24|Ae[ne+1]<<16|Ae[ne+2]<<8|Ae[ne+3]:Ae[ne+3]<<24|Ae[ne+2]<<16|Ae[ne+1]<<8|Ae[ne])>>>0;return O},ot.split32=function ye(Ae,W){for(var S=new Array(4*Ae.length),D=0,P=0;D<Ae.length;D++,P+=4){var O=Ae[D];"big"===W?(S[P]=O>>>24,S[P+1]=O>>>16&255,S[P+2]=O>>>8&255,S[P+3]=255&O):(S[P+3]=O>>>24,S[P+2]=O>>>16&255,S[P+1]=O>>>8&255,S[P]=255&O)}return S},ot.rotr32=function De(Ae,W){return Ae>>>W|Ae<<32-W},ot.rotl32=function Be(Ae,W){return Ae<<W|Ae>>>32-W},ot.sum32=function Ye(Ae,W){return Ae+W>>>0},ot.sum32_3=function ct(Ae,W,S){return Ae+W+S>>>0},ot.sum32_4=function nt(Ae,W,S,D){return Ae+W+S+D>>>0},ot.sum32_5=function ft(Ae,W,S,D,P){return Ae+W+S+D+P>>>0},ot.sum64=function Me(Ae,W,S,D){var j=D+Ae[W+1]>>>0;Ae[W]=(j<D?1:0)+S+Ae[W]>>>0,Ae[W+1]=j},ot.sum64_hi=function vt(Ae,W,S,D){return(W+D>>>0<W?1:0)+Ae+S>>>0},ot.sum64_lo=function Ht(Ae,W,S,D){return W+D>>>0},ot.sum64_4_hi=function Lt(Ae,W,S,D,P,O,j,ne){var he=0,q=W;return he+=(q=q+D>>>0)<W?1:0,he+=(q=q+O>>>0)<O?1:0,Ae+S+P+j+(he+=(q=q+ne>>>0)<ne?1:0)>>>0},ot.sum64_4_lo=function ht(Ae,W,S,D,P,O,j,ne){return W+D+O+ne>>>0},ot.sum64_5_hi=function Zt(Ae,W,S,D,P,O,j,ne,he,q){var k=0,K=W;return k+=(K=K+D>>>0)<W?1:0,k+=(K=K+O>>>0)<O?1:0,k+=(K=K+ne>>>0)<ne?1:0,Ae+S+P+j+he+(k+=(K=K+q>>>0)<q?1:0)>>>0},ot.sum64_5_lo=function Un(Ae,W,S,D,P,O,j,ne,he,q){return W+D+O+ne+q>>>0},ot.rotr64_hi=function yn(Ae,W,S){return(W<<32-S|Ae>>>S)>>>0},ot.rotr64_lo=function xr(Ae,W,S){return(Ae<<32-S|W>>>S)>>>0},ot.shr64_hi=function cn(Ae,W,S){return Ae>>>S},ot.shr64_lo=function Kt(Ae,W,S){return(Ae<<32-S|W>>>S)>>>0}},3894:et=>{et.exports="function"==typeof Object.create?function(pe,Y){Y&&(pe.super_=Y,pe.prototype=Object.create(Y.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}))}:function(pe,Y){if(Y){pe.super_=Y;var He=function(){};He.prototype=Y.prototype,pe.prototype=new He,pe.prototype.constructor=pe}}},4237:(et,ot,pe)=>{var Y;!function(){"use strict";var He="input is invalid type",ve="object"==typeof window,U=ve?window:{};U.JS_SHA3_NO_WINDOW&&(ve=!1);var Se=!ve&&"object"==typeof self;!U.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?U=global:Se&&(U=self);var be=!U.JS_SHA3_NO_COMMON_JS&&et.exports,Ce=pe.amdO,Je=!U.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",ye="0123456789abcdef".split(""),Be=[4,1024,262144,67108864],nt=[0,8,16,24],ft=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Me=[224,256,384,512],vt=[128,256],Ht=["hex","buffer","arrayBuffer","array","digest"],Lt={128:168,256:136};(U.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(V){return"[object Array]"===Object.prototype.toString.call(V)}),Je&&(U.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(V){return"object"==typeof V&&V.buffer&&V.buffer.constructor===ArrayBuffer});for(var ht=function(V,F,Le){return function(qe){return new K(V,F,V).update(qe)[Le]()}},Zt=function(V,F,Le){return function(qe,ut){return new K(V,F,ut).update(qe)[Le]()}},Un=function(V,F,Le){return function(qe,ut,pt,bt){return D["cshake"+V].update(qe,ut,pt,bt)[Le]()}},yn=function(V,F,Le){return function(qe,ut,pt,bt){return D["kmac"+V].update(qe,ut,pt,bt)[Le]()}},xr=function(V,F,Le,qe){for(var ut=0;ut<Ht.length;++ut){var pt=Ht[ut];V[pt]=F(Le,qe,pt)}return V},cn=function(V,F){var Le=ht(V,F,"hex");return Le.create=function(){return new K(V,F,V)},Le.update=function(qe){return Le.create().update(qe)},xr(Le,ht,V,F)},S=[{name:"keccak",padding:[1,256,65536,16777216],bits:Me,createMethod:cn},{name:"sha3",padding:[6,1536,393216,100663296],bits:Me,createMethod:cn},{name:"shake",padding:[31,7936,2031616,520093696],bits:vt,createMethod:function(V,F){var Le=Zt(V,F,"hex");return Le.create=function(qe){return new K(V,F,qe)},Le.update=function(qe,ut){return Le.create(ut).update(qe)},xr(Le,Zt,V,F)}},{name:"cshake",padding:Be,bits:vt,createMethod:function(V,F){var Le=Lt[V],qe=Un(V,0,"hex");return qe.create=function(ut,pt,bt){return pt||bt?new K(V,F,ut).bytepad([pt,bt],Le):D["shake"+V].create(ut)},qe.update=function(ut,pt,bt,Ft){return qe.create(pt,bt,Ft).update(ut)},xr(qe,Un,V,F)}},{name:"kmac",padding:Be,bits:vt,createMethod:function(V,F){var Le=Lt[V],qe=yn(V,0,"hex");return qe.create=function(ut,pt,bt){return new rt(V,F,pt).bytepad(["KMAC",bt],Le).bytepad([ut],Le)},qe.update=function(ut,pt,bt,Ft){return qe.create(ut,bt,Ft).update(pt)},xr(qe,yn,V,F)}}],D={},P=[],O=0;O<S.length;++O)for(var j=S[O],ne=j.bits,he=0;he<ne.length;++he){var q=j.name+"_"+ne[he];if(P.push(q),D[q]=j.createMethod(ne[he],j.padding),"sha3"!==j.name){var k=j.name+ne[he];P.push(k),D[k]=D[q]}}function K(V,F,Le){this.blocks=[],this.s=[],this.padding=F,this.outputBits=Le,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(V<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Le>>5,this.extraBytes=(31&Le)>>3;for(var qe=0;qe<50;++qe)this.s[qe]=0}function rt(V,F,Le){K.call(this,V,F,Le)}K.prototype.update=function(V){if(this.finalized)throw new Error("finalize already called");var F,Le=typeof V;if("string"!==Le){if("object"!==Le)throw new Error(He);if(null===V)throw new Error(He);if(Je&&V.constructor===ArrayBuffer)V=new Uint8Array(V);else if(!(Array.isArray(V)||Je&&ArrayBuffer.isView(V)))throw new Error(He);F=!0}for(var Et,Hn,qe=this.blocks,ut=this.byteCount,pt=V.length,bt=this.blockCount,Ft=0,Jt=this.s;Ft<pt;){if(this.reset)for(this.reset=!1,qe[0]=this.block,Et=1;Et<bt+1;++Et)qe[Et]=0;if(F)for(Et=this.start;Ft<pt&&Et<ut;++Ft)qe[Et>>2]|=V[Ft]<<nt[3&Et++];else for(Et=this.start;Ft<pt&&Et<ut;++Ft)(Hn=V.charCodeAt(Ft))<128?qe[Et>>2]|=Hn<<nt[3&Et++]:Hn<2048?(qe[Et>>2]|=(192|Hn>>6)<<nt[3&Et++],qe[Et>>2]|=(128|63&Hn)<<nt[3&Et++]):Hn<55296||Hn>=57344?(qe[Et>>2]|=(224|Hn>>12)<<nt[3&Et++],qe[Et>>2]|=(128|Hn>>6&63)<<nt[3&Et++],qe[Et>>2]|=(128|63&Hn)<<nt[3&Et++]):(Hn=65536+((1023&Hn)<<10|1023&V.charCodeAt(++Ft)),qe[Et>>2]|=(240|Hn>>18)<<nt[3&Et++],qe[Et>>2]|=(128|Hn>>12&63)<<nt[3&Et++],qe[Et>>2]|=(128|Hn>>6&63)<<nt[3&Et++],qe[Et>>2]|=(128|63&Hn)<<nt[3&Et++]);if(this.lastByteIndex=Et,Et>=ut){for(this.start=Et-ut,this.block=qe[bt],Et=0;Et<bt;++Et)Jt[Et]^=qe[Et];it(Jt),this.reset=!0}else this.start=Et}return this},K.prototype.encode=function(V,F){var Le=255&V,qe=1,ut=[Le];for(Le=255&(V>>=8);Le>0;)ut.unshift(Le),Le=255&(V>>=8),++qe;return F?ut.push(qe):ut.unshift(qe),this.update(ut),ut.length},K.prototype.encodeString=function(V){var F,Le=typeof V;if("string"!==Le){if("object"!==Le)throw new Error(He);if(null===V)throw new Error(He);if(Je&&V.constructor===ArrayBuffer)V=new Uint8Array(V);else if(!(Array.isArray(V)||Je&&ArrayBuffer.isView(V)))throw new Error(He);F=!0}var qe=0;if(F)qe=V.length;else for(var pt=0;pt<V.length;++pt){var bt=V.charCodeAt(pt);bt<128?qe+=1:bt<2048?qe+=2:bt<55296||bt>=57344?qe+=3:(bt=65536+((1023&bt)<<10|1023&V.charCodeAt(++pt)),qe+=4)}return qe+=this.encode(8*qe),this.update(V),qe},K.prototype.bytepad=function(V,F){for(var Le=this.encode(F),qe=0;qe<V.length;++qe)Le+=this.encodeString(V[qe]);var pt=[];return pt.length=F-Le%F,this.update(pt),this},K.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var V=this.blocks,F=this.lastByteIndex,Le=this.blockCount,qe=this.s;if(V[F>>2]|=this.padding[3&F],this.lastByteIndex===this.byteCount)for(V[0]=V[Le],F=1;F<Le+1;++F)V[F]=0;for(V[Le-1]|=2147483648,F=0;F<Le;++F)qe[F]^=V[F];it(qe)}},K.prototype.toString=K.prototype.hex=function(){this.finalize();for(var Ft,V=this.blockCount,F=this.s,Le=this.outputBlocks,qe=this.extraBytes,ut=0,pt=0,bt="";pt<Le;){for(ut=0;ut<V&&pt<Le;++ut,++pt)bt+=ye[(Ft=F[ut])>>4&15]+ye[15&Ft]+ye[Ft>>12&15]+ye[Ft>>8&15]+ye[Ft>>20&15]+ye[Ft>>16&15]+ye[Ft>>28&15]+ye[Ft>>24&15];pt%V==0&&(it(F),ut=0)}return qe&&(bt+=ye[(Ft=F[ut])>>4&15]+ye[15&Ft],qe>1&&(bt+=ye[Ft>>12&15]+ye[Ft>>8&15]),qe>2&&(bt+=ye[Ft>>20&15]+ye[Ft>>16&15])),bt},K.prototype.buffer=K.prototype.arrayBuffer=function(){this.finalize();var Ft,V=this.blockCount,F=this.s,Le=this.outputBlocks,qe=this.extraBytes,ut=0,pt=0,bt=this.outputBits>>3;Ft=qe?new ArrayBuffer(Le+1<<2):new ArrayBuffer(bt);for(var Jt=new Uint32Array(Ft);pt<Le;){for(ut=0;ut<V&&pt<Le;++ut,++pt)Jt[pt]=F[ut];pt%V==0&&it(F)}return qe&&(Jt[ut]=F[ut],Ft=Ft.slice(0,bt)),Ft},K.prototype.digest=K.prototype.array=function(){this.finalize();for(var Ft,Jt,V=this.blockCount,F=this.s,Le=this.outputBlocks,qe=this.extraBytes,ut=0,pt=0,bt=[];pt<Le;){for(ut=0;ut<V&&pt<Le;++ut,++pt)bt[Ft=pt<<2]=255&(Jt=F[ut]),bt[Ft+1]=Jt>>8&255,bt[Ft+2]=Jt>>16&255,bt[Ft+3]=Jt>>24&255;pt%V==0&&it(F)}return qe&&(bt[Ft=pt<<2]=255&(Jt=F[ut]),qe>1&&(bt[Ft+1]=Jt>>8&255),qe>2&&(bt[Ft+2]=Jt>>16&255)),bt},(rt.prototype=new K).finalize=function(){return this.encode(this.outputBits,!0),K.prototype.finalize.call(this)};var it=function(V){var F,Le,qe,ut,pt,bt,Ft,Jt,Et,Hn,Dn,Gn,Li,sr,gr,Xs,Zn,Ln,Ks,Mr,cr,Aa,Jn,or,Ta,Dr,ur,Da,vr,Er,ps,mt,hr,Oi,Fr,Br,is,_r,Qt,Ra,Vr,Qn,Xo,Ur,Hr,Ys,En,Sr,Cr,yr,Wn,vl,zr,Rr,Ko,Ir,Bt,Si,Fi,po,Wi,Ts,Ds;for(qe=0;qe<48;qe+=2)ut=V[0]^V[10]^V[20]^V[30]^V[40],pt=V[1]^V[11]^V[21]^V[31]^V[41],Jt=V[4]^V[14]^V[24]^V[34]^V[44],Et=V[5]^V[15]^V[25]^V[35]^V[45],Hn=V[6]^V[16]^V[26]^V[36]^V[46],Dn=V[7]^V[17]^V[27]^V[37]^V[47],Le=(Li=V[9]^V[19]^V[29]^V[39]^V[49])^((Ft=V[3]^V[13]^V[23]^V[33]^V[43])<<1|(bt=V[2]^V[12]^V[22]^V[32]^V[42])>>>31),V[0]^=F=(Gn=V[8]^V[18]^V[28]^V[38]^V[48])^(bt<<1|Ft>>>31),V[1]^=Le,V[10]^=F,V[11]^=Le,V[20]^=F,V[21]^=Le,V[30]^=F,V[31]^=Le,V[40]^=F,V[41]^=Le,Le=pt^(Et<<1|Jt>>>31),V[2]^=F=ut^(Jt<<1|Et>>>31),V[3]^=Le,V[12]^=F,V[13]^=Le,V[22]^=F,V[23]^=Le,V[32]^=F,V[33]^=Le,V[42]^=F,V[43]^=Le,Le=Ft^(Dn<<1|Hn>>>31),V[4]^=F=bt^(Hn<<1|Dn>>>31),V[5]^=Le,V[14]^=F,V[15]^=Le,V[24]^=F,V[25]^=Le,V[34]^=F,V[35]^=Le,V[44]^=F,V[45]^=Le,Le=Et^(Li<<1|Gn>>>31),V[6]^=F=Jt^(Gn<<1|Li>>>31),V[7]^=Le,V[16]^=F,V[17]^=Le,V[26]^=F,V[27]^=Le,V[36]^=F,V[37]^=Le,V[46]^=F,V[47]^=Le,Le=Dn^(pt<<1|ut>>>31),V[8]^=F=Hn^(ut<<1|pt>>>31),V[9]^=Le,V[18]^=F,V[19]^=Le,V[28]^=F,V[29]^=Le,V[38]^=F,V[39]^=Le,V[48]^=F,V[49]^=Le,gr=V[1],Ys=V[11]<<4|V[10]>>>28,En=V[10]<<4|V[11]>>>28,Da=V[20]<<3|V[21]>>>29,vr=V[21]<<3|V[20]>>>29,po=V[31]<<9|V[30]>>>23,Wi=V[30]<<9|V[31]>>>23,Qn=V[40]<<18|V[41]>>>14,Xo=V[41]<<18|V[40]>>>14,Oi=V[2]<<1|V[3]>>>31,Fr=V[3]<<1|V[2]>>>31,Zn=V[12]<<12|V[13]>>>20,Sr=V[22]<<10|V[23]>>>22,Cr=V[23]<<10|V[22]>>>22,Er=V[33]<<13|V[32]>>>19,ps=V[32]<<13|V[33]>>>19,Ts=V[42]<<2|V[43]>>>30,Ds=V[43]<<2|V[42]>>>30,Rr=V[5]<<30|V[4]>>>2,Ko=V[4]<<30|V[5]>>>2,Br=V[14]<<6|V[15]>>>26,is=V[15]<<6|V[14]>>>26,Ks=V[24]<<11|V[25]>>>21,yr=V[34]<<15|V[35]>>>17,Wn=V[35]<<15|V[34]>>>17,mt=V[45]<<29|V[44]>>>3,hr=V[44]<<29|V[45]>>>3,or=V[6]<<28|V[7]>>>4,Ta=V[7]<<28|V[6]>>>4,Ir=V[17]<<23|V[16]>>>9,Bt=V[16]<<23|V[17]>>>9,_r=V[26]<<25|V[27]>>>7,Qt=V[27]<<25|V[26]>>>7,Mr=V[36]<<21|V[37]>>>11,cr=V[37]<<21|V[36]>>>11,vl=V[47]<<24|V[46]>>>8,zr=V[46]<<24|V[47]>>>8,Ur=V[8]<<27|V[9]>>>5,Hr=V[9]<<27|V[8]>>>5,Dr=V[18]<<20|V[19]>>>12,ur=V[19]<<20|V[18]>>>12,Si=V[29]<<7|V[28]>>>25,Fi=V[28]<<7|V[29]>>>25,Ra=V[38]<<8|V[39]>>>24,Vr=V[39]<<8|V[38]>>>24,Aa=V[48]<<14|V[49]>>>18,Jn=V[49]<<14|V[48]>>>18,V[0]=(sr=V[0])^~(Xs=V[13]<<12|V[12]>>>20)&(Ln=V[25]<<11|V[24]>>>21),V[1]=gr^~Zn&Ks,V[10]=or^~Dr&Da,V[11]=Ta^~ur&vr,V[20]=Oi^~Br&_r,V[21]=Fr^~is&Qt,V[30]=Ur^~Ys&Sr,V[31]=Hr^~En&Cr,V[40]=Rr^~Ir&Si,V[41]=Ko^~Bt&Fi,V[2]=Xs^~Ln&Mr,V[3]=Zn^~Ks&cr,V[12]=Dr^~Da&Er,V[13]=ur^~vr&ps,V[22]=Br^~_r&Ra,V[23]=is^~Qt&Vr,V[32]=Ys^~Sr&yr,V[33]=En^~Cr&Wn,V[42]=Ir^~Si&po,V[43]=Bt^~Fi&Wi,V[4]=Ln^~Mr&Aa,V[5]=Ks^~cr&Jn,V[14]=Da^~Er&mt,V[15]=vr^~ps&hr,V[24]=_r^~Ra&Qn,V[25]=Qt^~Vr&Xo,V[34]=Sr^~yr&vl,V[35]=Cr^~Wn&zr,V[44]=Si^~po&Ts,V[45]=Fi^~Wi&Ds,V[6]=Mr^~Aa&sr,V[7]=cr^~Jn&gr,V[16]=Er^~mt&or,V[17]=ps^~hr&Ta,V[26]=Ra^~Qn&Oi,V[27]=Vr^~Xo&Fr,V[36]=yr^~vl&Ur,V[37]=Wn^~zr&Hr,V[46]=po^~Ts&Rr,V[47]=Wi^~Ds&Ko,V[8]=Aa^~sr&Xs,V[9]=Jn^~gr&Zn,V[18]=mt^~or&Dr,V[19]=hr^~Ta&ur,V[28]=Qn^~Oi&Br,V[29]=Xo^~Fr&is,V[38]=vl^~Ur&Ys,V[39]=zr^~Hr&En,V[48]=Ts^~Rr&Ir,V[49]=Ds^~Ko&Bt,V[0]^=ft[qe],V[1]^=ft[qe+1]};if(be)et.exports=D;else{for(O=0;O<P.length;++O)U[P[O]]=D[P[O]];Ce&&void 0!==(Y=function(){return D}.call(ot,pe,ot,et))&&(et.exports=Y)}}()},2391:et=>{function ot(pe,Y){if(!pe)throw new Error(Y||"Assertion failed")}et.exports=ot,ot.equal=function(Y,He,ie){if(Y!=He)throw new Error(ie||"Assertion failed: "+Y+" != "+He)}},6601:()=>{},5861:(et,ot,pe)=>{"use strict";function Y(ie,ve,U,Se,Ge,be,Ce){try{var Je=ie[be](Ce),ye=Je.value}catch(De){return void U(De)}Je.done?ve(ye):Promise.resolve(ye).then(Se,Ge)}function He(ie){return function(){var ve=this,U=arguments;return new Promise(function(Se,Ge){var be=ie.apply(ve,U);function Ce(ye){Y(be,Se,Ge,Ce,Je,"next",ye)}function Je(ye){Y(be,Se,Ge,Ce,Je,"throw",ye)}Ce(void 0)})}}pe.d(ot,{Z:()=>He})},5470:et=>{"use strict";et.exports=JSON.parse('{"assault_rifle":{"name":"MA37 Assault Rifle","fileName":"assault_rifle","description":"The MA37 assault rifle is an air-cooled, gas-operated, magazine-fed, fully automatic rifle that fires 7.62\xd751mm ammunition. The MA37 is modular, which allows for easy cleaning and repair.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/assault_rifle.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/assault_rifle.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/assault_rifle.glb","attributes":[{"trait_type":"Weapon Type","value":"Marksman Rifle"},{"trait_type":"Ammo Type","value":"Kinetic"},{"trait_type":"Faction","value":"UNSC"}]},"dmr":{"name":"M392 DMR","fileName":"dmr","description":"The M392 is an air-cooled, magazine-fed, gas-operated select-fire bullpup rifle that fires 7.62\xd751mm ammunition. It accepts a fifteen-round detachable box magazine similar. The weapon has a mounted EVOS-D optic capable of 3\xd7 magnification. The weapon\'s fire selector switch (located above the grip) has three settings: SAFE, FIRE, and AUTO. The magazine release button is located directly above the magazine well, behind the trigger. The weapon has an ejection port on either side so it may be used comfortably by a right- or left-handed shooter.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/dmr.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/dmr.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/dmr.glb","attributes":[{"trait_type":"Weapon Type","value":"Assault Rifle"},{"trait_type":"Ammo Type","value":"Kinetic"},{"trait_type":"Faction","value":"UNSC"}]},"smg":{"name":"M7 SMG","fileName":"smg","description":"The M7/Caseless Submachine Gun is an automatic submachine gun that fires from a 60-round magazine which is placed horizontally on the left side of the weapon. Due to the odd horizontal placement of the magazine on the weapon, it can be assumed that the magazine utilizes a circular ramp where the magazine meets the breech. This rotates the horizontally stacked rounds in the magazine 90 degrees until they align with the horizontal breech. An example of this can be seen in the present day Fabrique Nationale P90 SMG.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/smg.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/smg.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/smg.glb","attributes":[{"trait_type":"Weapon Type","value":"Sub Machine Gun"},{"trait_type":"Ammo Type","value":"Kinetic"},{"trait_type":"Faction","value":"UNSC"}]},"shotgun":{"name":"M90 shotgun","fileName":"shotgun","description":"The M90 is a pump-action shotgun, chambered in the extremely powerful 8-gauge magnum shell, and feeding from a 12-round, dual-tubular, non-detachable magazine. It is generally utilized alongside MAG 15P-00B rounds, and is designed as a more practical and cost-effective recreation of Misriah Armory\u2019s M45E Tactical Shotgun, though in UNSC service it is considered to be functionally identical.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/shotgun.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/shotgun.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/shotgun.glb","attributes":[{"trait_type":"Weapon Type","value":"Shotgun"},{"trait_type":"Ammo Type","value":"Kinetic"},{"trait_type":"Faction","value":"UNSC"}]},"sniper_rifle":{"name":"SRS99-AM Sniper Rifle","fileName":"sniper_rifle","description":"The SRS99 is a semi-automatic, gas-operated rifle that fires 14.5\xd7114mm ammunition from a four-round detachable box magazine. The ejection port is on the right side of the weapon and the charging handle is on the left side. Unlike all other known models of the SRS99 series, this variant features a thumbhole stock instead of a pistol grip, and its body sports a black and navy blue finish in addition to the gray of its successors. The SRS99 is equipped with the Oracle N-variant scope, which can display green outlines of objects when not in active use.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/sniper_rifle.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/sniper_rifle.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/sniper_rifle.glb","attributes":[{"trait_type":"Weapon Type","value":"Sniper Rifle"},{"trait_type":"Ammo Type","value":"Kinetic"},{"trait_type":"Faction","value":"UNSC"}]},"target_locator":{"name":"H-165 Target Locator","fileName":"target_locator","description":"The H-165 FOM is a compact, handheld laser device designed for acquiring and designating targets for small-scale orbital bombardment from an orbiting UNSC starshipand nearby aircraft, and is typically used by Joint Fires Observer personnel. The H-165 Target Locator was preceded by the H-120 and the H-155 FOM models and was superseded in the post-war era by the H-295 FOM. While similar in function to the laser designator, the Target Locator is much smaller and can be held with one hand. The Target Locator also features a scope for target acquisition accuracy at greater range and an intercom for user communication.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/target_locator.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/target_locator.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/target_locator.glb","attributes":[{"trait_type":"Weapon Type","value":"Target Locator"},{"trait_type":"Ammo Type","value":"None"},{"trait_type":"Faction","value":"UNSC"}]},"carbine":{"name":"Type-51 Carbine","fileName":"carbine","description":"The Type-51 Carbine is a recoil-operated and charger-fed, semi-automatic marksman rifle. It serves as medium to long-range weapon utilized by Covenant forces. The weapon\'s cylindrical magazine holds 18 rounds, and also provides indication of number of rounds left in the magazine by utilizing a holographic display. The back end of the weapon contains two circular openings, the forward one is the weapon\'s hand guard and the area in front of it is where the weapon\'s trigger is located. On the weapon\'s top rail is the magazine well and ammunition chamber, next to it is a hammer like device which springs back when the weapon is fired. The forward part of the weapon contains the Type-51 Carbine\'s barrel, which controls the rapid acceleration of the projectile out at a high velocity.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/carbine.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/carbine.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/carbine.glb","attributes":[{"trait_type":"Weapon Type","value":"Marksman Rifle"},{"trait_type":"Ammo Type","value":"Energy"},{"trait_type":"Faction","value":"Covenant"}]},"needler":{"name":"Type-33 Needler","fileName":"needler","description":"The Type-33 Guided Munitions Launcher is a Covenant projectile weapon that fires long, sharp crystalline shards that are guided until they impale a target \u2014 hence the \u201cneedler\u201d moniker. Several seconds after coming to rest in their target, the needles detonate, creating severe and in most cases fatal wounds. The needler\'s top plate has 14 holes, with the needles protruding out of the holes. When the trigger is pulled, the needle is fed from the top into the barrel of the weapon, and fired at high speed. The Type-33 GML is used by Covenant foot soldiers of nearly all types.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/needler.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/needler.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/needler.glb","attributes":[{"trait_type":"Weapon Type","value":"Infantry Weapon"},{"trait_type":"Ammo Type","value":"Crystal Shards"},{"trait_type":"Faction","value":"Covenant"}]},"beam_rifle":{"name":"Type-50 SRS SRS Beam Rifle","fileName":"beam_rifle","description":"The Type-50 SRS is a battery-powered directed energy weapon that fires ionized particle beams. The battery for the weapon has enough charge to fire ten shots. The muzzle velocity of the weapon is 3657 m/s (12,000 f/s), with a maximum effective range of roughly 1,500 m (4900 ft) When firing, the weapon has a near-silent and negligible muzzle signature, and inflicts wounds comparable to the 14.5\xd7114mm round fired by the UNSC\'s SRS99 series of sniper rifles, capable of instantly killing a target. The beam rifle has a barrel length of 82.55 cm (32.5 in.) and an overall length of 160.4 cm (63.2 in.), weighing in at 18 kg (39.6 lbs).","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/beam_rifle.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/beam_rifle.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/beam_rifle.glb","attributes":[{"trait_type":"Weapon Type","value":"Sniper Rifle"},{"trait_type":"Ammo Type","value":"Energy"},{"trait_type":"Faction","value":"Covenant"}]},"energy_sword":{"name":"Type-1 Energy Sword","fileName":"energy_sword","description":"The energy sword is the signature weapon of the Sangheili and has been their chief weapon of nobility since its creation during one of the Ages of Discovery. The Sangheili pride themselves on their skills with the weapon, which they regard as holy, and believe that it is better for a Sangheili to fall on his sword to redeem his honor than to die dishonorably. The Sangheili are very strict on who can be trained in the art of swordsmanship; in civilian life only aristocrats are permitted to wield energy swords. Sword wielders are not eligible for marriage, though they may breed with any female they choose, married or otherwise, to ensure successful transmission of swordsman genes.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/energy_sword.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/energy_sword.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/energy_sword.glb","attributes":[{"trait_type":"Weapon Type","value":"Melee Weapon"},{"trait_type":"Ammo Type","value":"None"},{"trait_type":"Faction","value":"Covenant"}]},"skewer":{"name":"Flaktura Workshop Skewer","fileName":"skewer","description":"The Skewer is an anti-tank weapon employed by Banished Jiralhanae, with such operators known as Skewer-bearers. The launcher fires a rocket-sized spike capable of piercing through the armor of a main battle tank, or punch through the energy shields and titanium shell of GEN3 MJOLNIR armor, even from range. The launcher has an emitter of some kind, likely of gravitic operation similar to other Jiralhanae spike weaponry, which is used to launch the spike round and can be intensified - presumably to adjust the muzzle velocity of the fired projectile. The Skewer was manufactured by the Forge of Teash and developed by the Flaktura workshop.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/skewer.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/skewer.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/skewer.glb","attributes":[{"trait_type":"Weapon Type","value":"Speargun"},{"trait_type":"Ammo Type","value":"Spear"},{"trait_type":"Faction","value":"Banished"}]},"gravity_hammer":{"name":"Type-2 Gravity Hammer","fileName":"gravity_hammer","description":"The gravity hammers evolved from traditional war hammers wielded by Jiralhanae war chieftains, which were a major focus of the Jiralhanae\'s barbaric culture, as it serves as the ultimate symbol of clan leadership in addition to being a powerful weapon. The ceremonial hammer of a pack or a clan is only passed to another Jiralhanae if he can best his chieftain in ceremonial combat; the mantle of leadership passes along with the weapon. The wielder of the weapon was expected to treat their gravity hammer with great care.","image":"ipfs://bafybeihjzya37wpmtct2miidvvrj5vk54fpqpz4ivipzmwqa3qxeds4egq/gravity_hammer.png","animation_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/gravity_hammer.glb","external_url":"ipfs://bafybeidbgyv5qcikjme4k4xfggwmau7ktpblxjj5inhms4lwetro43uxvi/gravity_hammer.glb","attributes":[{"trait_type":"Weapon Type","value":"Melee Weapon"},{"trait_type":"Ammo Type","value":"None"},{"trait_type":"Faction","value":"Banished"}]}}')}},et=>{et(et.s=8103)}]);